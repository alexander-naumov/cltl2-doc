<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Overlap, Inclusion, and Disjointness of Types</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-10 00:01:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 2571--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch3.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse17.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse17.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">2.15   </span> <a 
 id="x24-440002.15"></a>Overlap, Inclusion, and Disjointness of Types</h3>
<!--l. 2574--><p class="noindent" >The Common Lisp data type hierarchy is tangled and purposely left somewhat
open-ended so that implementors may experiment with new data types as
extensions to the language. This section explicitly states all the deﬁned
relationships between types, including subtype/supertype relationships,
disjointness, and exhaustive partitioning. The user of Common Lisp should not
depend on any relationships not explicitly stated here. For example, it is not valid
to assume that because a number is not complex and not rational that it must be
a <a 
href="clmse71.html#x88-206002r251">ﬂoat</a>, because implementations are permitted to provide yet other kinds of
numbers.
<!--l. 2585--><p class="indent" >   First we need some terminology. If <i>x</i> is a supertype of <i>y</i>, then any object of
type <i>y</i> is also of type <i>x</i>, and <i>y</i> is said to be a subtype of <i>x</i>. If types <i>x</i> and <i>y</i> are
disjoint, then no object (in any implementation) may be both of type <i>x</i> and of
type <i>y</i>. Types <i>a</i><sub>1</sub> through <i>a</i><sub>n</sub> are an <i>exhaustive union</i> of type <i>x</i> if each <i>a</i><sub>j</sub> is a
subtype of <i>x</i>, and any object of type <i>x</i> is necessarily of at least one of the types <i>a</i><sub>j</sub>;
<i>a</i><sub>1</sub> through <i>a</i><sub>n</sub> are furthermore an <i>exhaustive partition</i> if they are also pairwise
disjoint.
      <ul class="itemize1">
      <li class="itemize">The type <a 
href="clmse31.html#x42-77004r20">t</a> is a supertype of every type whatsoever. Every object is of
      type <a 
href="clmse31.html#x42-77004r20">t</a>.
      </li>
      <li class="itemize">The type <a 
href="clmse31.html#x42-77002r19">nil</a> is a subtype of every type whatsoever. No object is of type
      <a 
href="clmse31.html#x42-77002r19">nil</a>.</li></ul>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The  types  <a 
href="clmse86.html#x106-224062r474">cons</a>,  <a 
href="clmch10.html#x68-17500010">symbol</a>,  array,  number,  and  <a 
href="clmse79.html#x97-215002r384">character</a>  are  pairwise
      disjoint.</li></ul>
                                                                          

                                                                          
</div>
<div class=new>
<!--l. 2616--><p class="indent" >   X3J13 voted in June 1988 <a 
 id="dx24-44001"></a>to extend the preceding paragraph as follows.
      <ul class="itemize1">
      <li class="itemize">The   types   <a 
href="clmse86.html#x106-224062r474">cons</a>,   <a 
href="clmch10.html#x68-17500010">symbol</a>,   array,   number,   <a 
href="clmse79.html#x97-215002r384">character</a>,   hash-table,
      readtable, package, <a 
href="clmse119.html#x147-301005r742">pathname</a>, stream, random-state, and any single
      other type created by <a 
href="clmse104.html#x128-250002r619">defstruct</a> or <a 
href="clmse151.html#x184-437022r920">defclass</a> are pairwise disjoint.</li></ul>
<!--l. 2629--><p class="indent" >   The wording of the ﬁrst edition was intended to allow implementors to use
the <a 
href="clmse104.html#x128-250002r619">defstruct</a> facility to deﬁne the built-in types hash-table, readtable,
package, <a 
href="clmse119.html#x147-301005r742">pathname</a>, stream, random-state. The change still permits this
implementation strategy but forbids these built-in types from including,
or being included in, other types (in the sense of the <a 
href="clmse104.html#x128-250002r619">defstruct</a> :include
option).
</div>
<div class=new>
<!--l. 2638--><p class="indent" >   X3J13 voted in June 1988 <a 
 id="dx24-44002"></a>to specify that the type <a 
href="clmse35.html#x47-88006r54">function</a> is disjoint from the
types <a 
href="clmse86.html#x106-224062r474">cons</a>, <a 
href="clmch10.html#x68-17500010">symbol</a>, array, number, and <a 
href="clmse79.html#x97-215002r384">character</a>. The type compiled-function is a
subtype of <a 
href="clmse35.html#x47-88006r54">function</a>; implementations are free to deﬁne other subtypes of
<a 
href="clmse35.html#x47-88006r54">function</a>.
</div>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The types <a 
href="clmse71.html#x88-206004r252">rational</a>, <a 
href="clmse71.html#x88-206002r251">ﬂoat</a>, and <a 
href="clmse71.html#x88-206046r273">complex</a> are pairwise disjoint subtypes
      of number.</li></ul>
</div>
<div class=newer>
<!--l. 2654--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx24-44003"></a>to rewrite the preceding item as follows.
      <ul class="itemize1">
      <li class="itemize">The types real and <a 
href="clmse71.html#x88-206046r273">complex</a> are pairwise disjoint subtypes of number.</li></ul>
<div class=rationale>
<!--l. 2663--><p class="noindent" ><b>Rationale:</b> It might be thought that real and <a 
href="clmse71.html#x88-206046r273">complex</a> should form an exhaustive
partition of the type number. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp number system.
                                                                          

                                                                          
</div>
      <ul class="itemize1">
      <li class="itemize">The types <a 
href="clmse71.html#x88-206004r252">rational</a> and <a 
href="clmse71.html#x88-206002r251">ﬂoat</a> are pairwise disjoint subtypes of real.</li></ul>
<div class=rationale>
<!--l. 2678--><p class="noindent" ><b>Rationale:</b> It might be thought that <a 
href="clmse71.html#x88-206004r252">rational</a> and <a 
href="clmse71.html#x88-206002r251">ﬂoat</a> should form an exhaustive
partition of the type real. This is purposely avoided here in order to permit compatible
experimentation with extensions to the Common Lisp number system.
</div>
</div>
      <ul class="itemize1">
      <li class="itemize">The types integer and ratio are disjoint subtypes of <a 
href="clmse71.html#x88-206004r252">rational</a>.</li></ul>
<div class=rationale>
<!--l. 2693--><p class="noindent" ><b>Rationale:</b> It might be thought that integer and ratio should form an exhaustive
partition of the type <a 
href="clmse71.html#x88-206004r252">rational</a>. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp rational number
system.
</div>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The types ﬁxnum and bignum are disjoint subtypes of integer.</li></ul>
<div class=rationale>
<!--l. 2708--><p class="noindent" ><b>Rationale:</b> It might be thought that ﬁxnum and bignum should form an exhaustive
partition of the type integer. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp integer number
system, such as the idea of adding explicit representations of inﬁnity or of positive and
negative inﬁnity.
</div>
</div>
<div class=new>
<!--l. 2720--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx24-44004"></a>to specify that the types ﬁxnum and bignum do
in fact form an exhaustive partition of the type integer; more precisely,
they voted to specify that the type bignum is by deﬁnition equivalent to
                                                                          

                                                                          
(and integer (not ﬁxnum)). This is consistent with the ﬁrst edition text in
section <a 
href="clmse3.html#x10-190002.1.1">2.1.1<!--tex4ht:ref: INTEGERS-SECTION --></a>.
<!--l. 2728--><p class="indent" >   I interpret this to mean that implementators could still experiment with such
extensions as adding explicit representations of inﬁnity, but such inﬁnities would
necessarily be of type bignum.
</div>
      <ul class="itemize1">
      <li class="itemize">The  types  short-ﬂoat,  single-ﬂoat,  double-ﬂoat,  and  long-ﬂoat  are
      subtypes of <a 
href="clmse71.html#x88-206002r251">ﬂoat</a>. Any two of them must be either disjoint or identical;
      if identical, then any other types between them in the above ordering
      must also be identical to them (for example, if single-ﬂoat and long-ﬂoat
      are identical types, then double-ﬂoat must be identical to them also).
      </li>
      <li class="itemize">The type <a 
href="clmse32.html#x43-80002r23">null</a> is a subtype of <a 
href="clmch10.html#x68-17500010">symbol</a>; the only object of type <a 
href="clmse32.html#x43-80002r23">null</a> is
      <a 
href="clmse31.html#x42-77002r19">nil</a>.
      </li>
      <li class="itemize">The types <a 
href="clmse86.html#x106-224062r474">cons</a> and <a 
href="clmse32.html#x43-80002r23">null</a> form an exhaustive partition of the type <a 
href="clmse87.html#x107-225038r493">list</a>.</li></ul>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The type standard-char is a subtype of string-char; string-char is a
      subtype of <a 
href="clmse79.html#x97-215002r384">character</a>.</li></ul>
</div>
<div class=newer>
<!--l. 2761--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx24-44005"></a>to remove the type string-char. The preceding
item is replaced by the following.
      <ul class="itemize1">
      <li class="itemize">The  type  standard-char  is  a  subtype  of  base-character.  The  types
      base-character and extended-character form an exhaustive partition of
      <a 
href="clmse79.html#x97-215002r384">character</a>.</li></ul>
</div>
<div class=obsolete>
                                                                          

                                                                          
      <ul class="itemize1">
      <li class="itemize">The  type  <a 
href="clmse102.html#x125-247028r618">string</a>  is  a  subtype  of  <a 
href="clmse94.html#x116-238014r562">vector</a>,  for  <a 
href="clmse102.html#x125-247028r618">string</a>  means  (vector
      string-char).</li></ul>
</div>
<!--l. 2779--><p class="indent" >
                                                                          

                                                                          
<div class=newer>
<!--l. 2781--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx24-44006"></a>to remove the type string-char. The preceding
item is replaced by the following.
      <ul class="itemize1">
      <li class="itemize">The type <a 
href="clmse102.html#x125-247028r618">string</a> is a subtype of <a 
href="clmse94.html#x116-238014r562">vector</a>; it is the union of all types
      (vector <i>c</i>) such that <i>c</i> is a subtype of <a 
href="clmse79.html#x97-215002r384">character</a>.</li></ul>
</div>
      <ul class="itemize1">
      <li class="itemize">The type bit-vector is a subtype of <a 
href="clmse94.html#x116-238014r562">vector</a>, for bit-vector means (vector
      bit).
      </li>
      <li class="itemize">The types (vector t), <a 
href="clmse102.html#x125-247028r618">string</a>, and bit-vector are disjoint.
      </li>
      <li class="itemize">The type <a 
href="clmse94.html#x116-238014r562">vector</a> is a subtype of array; for all types <i>x</i>, the type (vector
      <i>x</i>) is the same as the type (array <i>x</i> (*)).
      </li>
      <li class="itemize">The type simple-array is a subtype of array.</li></ul>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The  types  simple-vector,  simple-string,  and  simple-bit-vector  are
      disjoint   subtypes   of   simple-array,   for   they   respectively   mean
      (simple-array t (*)), (simple-array string-char (*)), and (simple-array
      bit (*)).</li></ul>
</div>
<div class=newer>
<!--l. 2817--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx24-44007"></a>to remove the type string-char. The preceding
item is replaced by the following.
      <ul class="itemize1">
      <li class="itemize">The  types  simple-vector,  simple-string,  and  simple-bit-vector  are
      disjoint subtypes of simple-array, for they mean (simple-array t (*)),
      the union of all types (simple-array <i>c</i> (*)) such that <i>c</i> is a subtype of
      <a 
href="clmse79.html#x97-215002r384">character</a>, and (simple-array bit (*)), respectively.</li></ul>
                                                                          

                                                                          
</div>
      <ul class="itemize1">
      <li class="itemize">The type simple-vector is a subtype of <a 
href="clmse94.html#x116-238014r562">vector</a> and indeed is a subtype
      of (vector t).
      </li>
      <li class="itemize">The type simple-string is a subtype of <a 
href="clmse102.html#x125-247028r618">string</a>. (Note that although <a 
href="clmse102.html#x125-247028r618">string</a>
      is a subtype of <a 
href="clmse94.html#x116-238014r562">vector</a>, simple-string is not a subtype of simple-vector.)</li></ul>
<div class=rationale>
<!--l. 2841--><p class="noindent" ><b>Rationale:</b> The hypothetical name simple-general-vector would have been more
accurate than simple-vector, but in this instance euphony and user convenience were
deemed more important to the design of Common Lisp than a rigid symmetry.
</div>
      <ul class="itemize1">
      <li class="itemize">The  type  simple-bit-vector  is  a  subtype  of  bit-vector.  (Note  that
      although bit-vector is a subtype of <a 
href="clmse94.html#x116-238014r562">vector</a>, simple-bit-vector is not a
      subtype of simple-vector.)
      </li>
      <li class="itemize">The types <a 
href="clmse94.html#x116-238014r562">vector</a> and <a 
href="clmse87.html#x107-225038r493">list</a> are disjoint subtypes of sequence.
      </li>
      <li class="itemize">The types random-state, readtable, package, <a 
href="clmse119.html#x147-301005r742">pathname</a>, stream, and
      hash-table are pairwise disjoint.</li></ul>
<div class=new>
<!--l. 2864--><p class="indent" >   X3J13 voted in June 1988 <a 
 id="dx24-44008"></a>to make random-state, readtable, package,
<a 
href="clmse119.html#x147-301005r742">pathname</a>, stream, and hash-table pairwise disjoint from a number of other types
as well; see note above.
</div>
<div class=new>
<!--l. 2873--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx24-44009"></a>to introduce subtypes of type stream.
      <ul class="itemize1">
      <li class="itemize">The types two-way-stream, echo-stream, broadcast-stream, ﬁle-stream,
      synonym-stream, string-stream, and concatenated-stream are disjoint
      subtypes of stream.</li></ul>
                                                                          

                                                                          
</div>
      <ul class="itemize1">
      <li class="itemize">Any two types created by <a 
href="clmse104.html#x128-250002r619">defstruct</a> are disjoint unless one is a supertype
      of the other by virtue of the :include option.</li></ul>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">An  exhaustive  union  for  the  type  common  is  formed  by  the  types
      <a 
href="clmse86.html#x106-224062r474">cons</a>, <a 
href="clmch10.html#x68-17500010">symbol</a>, (array <i>x</i>) where <i>x</i> is either <a 
href="clmse31.html#x42-77004r20">t</a> or a subtype of common,
      <a 
href="clmse102.html#x125-247028r618">string</a>,  ﬁxnum,  bignum,  ratio,  short-ﬂoat,  single-ﬂoat,  double-ﬂoat,
      long-ﬂoat, (complex <i>x</i>) where <i>x</i> is a subtype of common, standard-char,
      hash-table, readtable, package, <a 
href="clmse119.html#x147-301005r742">pathname</a>, stream, random-state, and
      all types created by the user via <a 
href="clmse104.html#x128-250002r619">defstruct</a>. An implementation may
      not unilaterally add subtypes to common; however, future revisions to
      the Common Lisp standard may extend the deﬁnition of the common
      data type. Note that a type such as number or array may or may
      not be a subtype of common, depending on whether or not the given
      implementation has extended the set of objects of that type.</li></ul>
</div>
<div class=newer>
<!--l. 2915--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx24-44010"></a>to remove the type common from the
language.
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
   <!--l. 6--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch3.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse17.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse17.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 6--><p class="indent" >   <a 
 id="tailclmse17.html"></a>  
</body></html> 
