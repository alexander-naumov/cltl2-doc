<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Пересечение, включение и дизъюнктивность типов</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-28 14:08:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 2954--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch3.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse17.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse17.html" >Вверх</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">2.15   </span> <a 
href="clm.html#QQ2-24-48" id="x24-420002.15">Пересечение, включение и дизъюнктивность типов</a></h3>
<!--l. 2956--><p class="noindent" >Common Lisp&#x2019;овая иерархия типов данных запутана и намеренно оставлена
несколько открытой, так что разработчики могут экспериментировать с
новыми типами данных в качестве расширения языка. В этом разделе чётко
оговариваются все определённые связи между типами, в том числе
отношения подтипа/супертипа, непересекаемость и исчерпывающее
разбиение. Пользователь Common Lisp&#x2019;а не должен зависеть от любых
отношений, явно здесь не указанных. Например, недопустимо предположить,
что, поскольку число это не комплексное и не рациональное, то оно должно
быть <a 
href="clmse66.html#x83-184002r214">ﬂoat</a>, потому что реализации разрешено предоставлять другие виды
чисел.
<!--l. 2966--><p class="indent" >   В первую очередь нам необходимо определить термины. Если <i>x</i> супертип
<i>y</i>, тогда любой объект типа <i>y</i> принадлежит также типу <i>x</i>, и считается, что <i>y</i>
подтип <i>x</i>. Если типы <i>x</i> и <i>y</i> не пересекаются, то ни один объект (ни в одно
реализации) не может принадлежать одновременно двум этим типам <i>x</i> и <i>y</i>.
Типы с <span class="math"><i>a</i><sub>1</sub></span> по <span class="math"><i>a</i><sub>n</sub></span> являются <i>исчерпывающим множеством</i> типа <i>x</i>, если
каждый <span class="math"><i>a</i><sub>j</sub></span> является подтипом <i>x</i>, и любой объект обязательно принадлежит
одному из типов <span class="math"><i>a</i><sub>j</sub></span>. <span class="math"><i>a</i><sub>1</sub></span> по <span class="math"><i>a</i><sub>n</sub></span> являются исчерпывающим разбиением, если они
также попарно не пересекаются.
      <ul class="itemize1">
      <li class="itemize">Тип <a 
href="clmse31.html#x42-74004r19">t</a> является супертипом всех остальных типов. Каждый объект
      принадлежит типу <a 
href="clmse31.html#x42-74004r19">t</a>.
      </li>
      <li class="itemize">Тип  <a 
href="clmse31.html#x42-74002r18">nil</a>  является  подтипом  любого  типа.  Объектов  типа  <a 
href="clmse31.html#x42-74002r18">nil</a>  не
      существует.</li></ul>
      <ul class="itemize1">
                                                                          

                                                                          
      <li class="itemize">Типы <a 
href="clmse80.html#x100-201062r423">cons</a>, <a 
href="clmch10.html#x65-15600010">symbol</a>, array, number, <a 
href="clmse74.html#x92-193002r341">character</a>, hash-table, readtable,
      package,  <a 
href="clmse113.html#x141-276005r678">pathname</a>,  stream,  random-state  и  любой  другой  тип,
      созданный  с  помощью  <a 
href="clmse98.html#x122-226002r561">defstruct</a>  or  <a 
href="clmse144.html#x177-411022r845">defclass</a>  являются  попарно
      непересекающимися.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы real and <a 
href="clmse66.html#x83-184046r236">complex</a> попарно непересекающиеся подтипы number.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Тип <a 
href="clmse66.html#x83-184004r215">rational</a> и <a 
href="clmse66.html#x83-184002r214">ﬂoat</a> попарно непересекающиеся подтипы real.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы integer и ratio непересекающиеся подтипы <a 
href="clmse66.html#x83-184004r215">rational</a>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы  short-ﬂoat,  single-ﬂoat,  double-ﬂoat  и  long-ﬂoat  являются
      подтипами <a 
href="clmse66.html#x83-184002r214">ﬂoat</a>. Любые два из них могут быть не пересекающимися
      или  идентичными.  Если  идентичные,  тогда  любые  другие  типы
      между  ними  в  перечисленном  порядке  должны  быть  также  им
      идентичны (например, если single-ﬂoat и long-ﬂoat идентичны, то
      double-ﬂoat должен быть также им идентичен).
      </li>
      <li class="itemize">Тип  <a 
href="clmse32.html#x43-77002r22">null</a>  является  подтипом  <a 
href="clmch10.html#x65-15600010">symbol</a>;  только  один  объект  <a 
href="clmse31.html#x42-74002r18">nil</a>
      принадлежит типу <a 
href="clmse32.html#x43-77002r22">null</a>.
      </li>
      <li class="itemize">Типы <a 
href="clmse80.html#x100-201062r423">cons</a> и <a 
href="clmse32.html#x43-77002r22">null</a> являются исчерпывающими частями типа <a 
href="clmse81.html#x101-202034r441">list</a>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Тип standard-char является подтипом base-char. Типы base-char и
      extended-char являются исчерпывающими частями <a 
href="clmse74.html#x92-193002r341">character</a>.</li></ul>
                                                                          

                                                                          
      <ul class="itemize1">
      <li class="itemize">Тип  <a 
href="clmse96.html#x119-223022r560">string</a>  является  подтипом  <a 
href="clmse88.html#x110-214010r505">vector</a>.  Множество  всех  типов
      (vector <i>c</i>),  включает  себя  такие  типы,  как  например,  когда  <i>c</i>
      является подтипом <a 
href="clmse74.html#x92-193002r341">character</a>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Тип bit-vector является подтипом <a 
href="clmse88.html#x110-214010r505">vector</a>, для bit-vector означает
      (vector bit).
      </li>
      <li class="itemize">Типы (vector t), <a 
href="clmse96.html#x119-223022r560">string</a>, и bit-vector являются непересекающимися.
      </li>
      <li class="itemize">Тип <a 
href="clmse88.html#x110-214010r505">vector</a> является подтипом array; для всех типов <i>x</i>, тип (vector
      <i>x</i>) является тем же, что и тип (array <i>x</i> (*)).
      </li>
      <li class="itemize">Тип simple-array является подтипом array.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы   simple-vector,   simple-string   и   simple-bit-vector   являются
      непересекающимися   подтипами   simple-array,   для   них   значит
      (simple-array  t  (*)),  множество  все  типов  (simple-array  <i>c</i>  (*)),  в
      котором, например, <i>c</i> является подтипом <a 
href="clmse74.html#x92-193002r341">character</a>, и (simple-array
      bit (*)), соответственно.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Тип simple-vector является подтипом <a 
href="clmse88.html#x110-214010r505">vector</a> и, конечно, подтипом
      (vector t).
      </li>
      <li class="itemize">Тип simple-string является подтипом <a 
href="clmse96.html#x119-223022r560">string</a>. (Следует отметить, что
      <a 
href="clmse96.html#x119-223022r560">string</a> является подтипом <a 
href="clmse88.html#x110-214010r505">vector</a>, simple-string не является подтипом
      simple-vector.)</li></ul>
                                                                          

                                                                          
      <ul class="itemize1">
      <li class="itemize">Тип   simple-bit-vector   является   подтипом   bit-vector.   (Следует
      отметить, что bit-vector является подтипом <a 
href="clmse88.html#x110-214010r505">vector</a>, simple-bit-vector
      не является подтипом simple-vector.)
      </li>
      <li class="itemize">Типы   <a 
href="clmse88.html#x110-214010r505">vector</a>   и   <a 
href="clmse81.html#x101-202034r441">list</a>   является   непересекающимися   подтипами
      sequence.
      </li>
      <li class="itemize">Типы   random-state,   readtable,   package,   <a 
href="clmse113.html#x141-276005r678">pathname</a>,   stream   и
      hash-table являются попарно непересекающимися.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы  two-way-stream,  echo-stream,  broadcast-stream,  ﬁle-stream,
      synonym-stream,   string-stream   и   concatenated-stream   являются
      попарно непересекающимися подтипами stream.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Любые   два   типа   созданные   с   помощью   <a 
href="clmse98.html#x122-226002r561">defstruct</a>   являются
      непересекающимися,   если   только   один   из   них   не   является
      супертипом для другого, в котором была указанная опция :include
      с именем этого супертипа.</li></ul>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
   <!--l. 396--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch3.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse17.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse17.html" >Вверх</a><tt>&#x003E;</tt></p></div>
<!--l. 396--><p class="indent" >   <a 
 id="tailclmse17.html"></a>  
</body></html> 
