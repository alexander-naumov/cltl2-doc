<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Пересечение, включение и дизъюнктивность типов</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-14 15:35:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 3095--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch3.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse17.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse17.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">2.15   </span> <a 
 id="x24-420002.15"></a>Пересечение, включение и дизъюнктивность типов</h3>
<!--l. 3097--><p class="noindent" >Common Lisp&#x2019;овая иерархия типов данных запутана и намеренно оставлена
несколько открытой, так что разработчики могут экспериментировать с
новыми типами данных в качестве расширения языка. В этом разделе чётко
оговариваются все определённые связи между типами, в том числе
отношения подтипа/супертипа, непересекаемость и исчерпывающее
разбиение. Пользователь Common Lisp&#x2019;а не должен зависеть от любых
отношений, явно здесь не указанных. Например, недопустимо предположить,
что, поскольку число это не комплексное и не рациональное, то оно должно
быть <a 
href="clmse68.html#x85-187002r219">ﬂoat</a>, потому что реализации разрешено предоставлять другие виды
чисел.
<!--l. 3107--><p class="indent" >   В первую очередь нам необходимо определить термины. Если <i>x</i> супертип
<i>y</i>, тогда любой объект типа <i>y</i> принадлежит также типу <i>x</i>, и считается, что <i>y</i>
подтип <i>x</i>. Если типы <i>x</i> и <i>y</i> не пересекаются, то ни один объект (ни в одно
реализации) не может принадлежать одновременно двум этим типам <i>x</i> и <i>y</i>.
Типы с <i>a</i><sub>1</sub> по <i>a</i><sub>n</sub> являются <i>исчерпывающим множеством</i> типа <i>x</i>, если
каждый <i>a</i><sub>j</sub> является подтипом <i>x</i>, и любой объект обязательно принадлежит
одному из типов <i>a</i><sub>j</sub>. <i>a</i><sub>1</sub> по <i>a</i><sub>n</sub> являются исчерпывающим разбиением, если они
также попарно не пересекаются.
      <ul class="itemize1">
      <li class="itemize">Тип <a 
href="clmse31.html#x42-74004r19">t</a> является супертипом всех остальных типов. Каждый объект
      принадлежит типу <a 
href="clmse31.html#x42-74004r19">t</a>.
      </li>
      <li class="itemize">Тип  <a 
href="clmse31.html#x42-74002r18">nil</a>  является  подтипом  любого  типа.  Объектов  типа  <a 
href="clmse31.html#x42-74002r18">nil</a>  не
      существует.</li></ul>
      <ul class="itemize1">
                                                                          

                                                                          
      <li class="itemize">Типы <a 
href="clmse83.html#x103-205062r442">cons</a>, <a 
href="clmch10.html#x65-15600010">symbol</a>, array, number, <a 
href="clmse76.html#x94-196002r352">character</a>, hash-table, readtable,
      package,  <a 
href="clmse116.html#x144-280005r704">pathname</a>,  stream,  random-state  и  любой  другой  тип,
      созданный  с  помощью  <a 
href="clmse101.html#x125-230002r585">defstruct</a>  or  <a 
href="clmse148.html#x181-416022r882">defclass</a>  являются  попарно
      непересекающимися.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы real and <a 
href="clmse68.html#x85-187046r241">complex</a> попарно непересекающиеся подтипы number.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Тип <a 
href="clmse68.html#x85-187004r220">rational</a> и <a 
href="clmse68.html#x85-187002r219">ﬂoat</a> попарно непересекающиеся подтипы real.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы integer и ratio непересекающиеся подтипы <a 
href="clmse68.html#x85-187004r220">rational</a>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы  short-ﬂoat,  single-ﬂoat,  double-ﬂoat  и  long-ﬂoat  являются
      подтипами <a 
href="clmse68.html#x85-187002r219">ﬂoat</a>. Любые два из них могут быть не пересекающимися
      или  идентичными.  Если  идентичные,  тогда  любые  другие  типы
      между  ними  в  перечисленном  порядке  должны  быть  также  им
      идентичны (например, если single-ﬂoat и long-ﬂoat идентичны, то
      double-ﬂoat должен быть также им идентичен).
      </li>
      <li class="itemize">Тип  <a 
href="clmse32.html#x43-77002r22">null</a>  является  подтипом  <a 
href="clmch10.html#x65-15600010">symbol</a>;  только  один  объект  <a 
href="clmse31.html#x42-74002r18">nil</a>
      принадлежит типу <a 
href="clmse32.html#x43-77002r22">null</a>.
      </li>
      <li class="itemize">Типы <a 
href="clmse83.html#x103-205062r442">cons</a> и <a 
href="clmse32.html#x43-77002r22">null</a> являются исчерпывающими частями типа <a 
href="clmse84.html#x104-206038r461">list</a>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Тип   standard-char   является   подтипом   base-character.   Типы
      base-character  и  extended-character  являются  исчерпывающими
      частями <a 
href="clmse76.html#x94-196002r352">character</a>.</li></ul>
                                                                          

                                                                          
      <ul class="itemize1">
      <li class="itemize">Тип  <a 
href="clmse99.html#x122-227022r584">string</a>  является  подтипом  <a 
href="clmse91.html#x113-218014r529">vector</a>.  Множество  всех  типов
      (vector <i>c</i>),  включает  себя  такие  типы,  как  например,  когда  <i>c</i>
      является подтипом <a 
href="clmse76.html#x94-196002r352">character</a>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Тип bit-vector является подтипом <a 
href="clmse91.html#x113-218014r529">vector</a>, для bit-vector означает
      (vector bit).
      </li>
      <li class="itemize">Типы (vector t), <a 
href="clmse99.html#x122-227022r584">string</a>, и bit-vector являются непересекающимися.
      </li>
      <li class="itemize">Тип <a 
href="clmse91.html#x113-218014r529">vector</a> является подтипом array; для всех типов <i>x</i>, тип (vector
      <i>x</i>) является тем же, что и тип (array <i>x</i> (*)).
      </li>
      <li class="itemize">Тип simple-array является подтипом array.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы   simple-vector,   simple-string   и   simple-bit-vector   являются
      непересекающимися   подтипами   simple-array,   для   них   значит
      (simple-array  t  (*)),  множество  все  типов  (simple-array  <i>c</i>  (*)),  в
      котором, например, <i>c</i> является подтипом <a 
href="clmse76.html#x94-196002r352">character</a>, и (simple-array
      bit (*)), соответственно.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Тип simple-vector является подтипом <a 
href="clmse91.html#x113-218014r529">vector</a> и, конечно, подтипом
      (vector t).
      </li>
      <li class="itemize">Тип simple-string является подтипом <a 
href="clmse99.html#x122-227022r584">string</a>. (Следует отметить, что
      <a 
href="clmse99.html#x122-227022r584">string</a> является подтипом <a 
href="clmse91.html#x113-218014r529">vector</a>, simple-string не является подтипом
      simple-vector.)</li></ul>
                                                                          

                                                                          
      <ul class="itemize1">
      <li class="itemize">Тип   simple-bit-vector   является   подтипом   bit-vector.   (Следует
      отметить, что bit-vector является подтипом <a 
href="clmse91.html#x113-218014r529">vector</a>, simple-bit-vector
      не является подтипом simple-vector.)
      </li>
      <li class="itemize">Типы   <a 
href="clmse91.html#x113-218014r529">vector</a>   и   <a 
href="clmse84.html#x104-206038r461">list</a>   является   непересекающимися   подтипами
      sequence.
      </li>
      <li class="itemize">Типы   random-state,   readtable,   package,   <a 
href="clmse116.html#x144-280005r704">pathname</a>,   stream   и
      hash-table являются попарно непересекающимися.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Типы  two-way-stream,  echo-stream,  broadcast-stream,  ﬁle-stream,
      synonym-stream,   string-stream   и   concatenated-stream   являются
      попарно непересекающимися подтипами stream.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Любые   два   типа   созданные   с   помощью   <a 
href="clmse101.html#x125-230002r585">defstruct</a>   являются
      непересекающимися,   если   только   один   из   них   не   является
      супертипом для другого, в котором была указанная опция :include
      с именем этого супертипа.</li></ul>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
   <!--l. 396--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch3.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse17.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse17.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 396--><p class="indent" >   <a 
 id="tailclmse17.html"></a>  
</body></html> 
