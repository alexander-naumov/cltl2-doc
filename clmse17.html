<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Overlap, Inclusion, and Disjointness of Types</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-02-20 00:42:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 2571--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch3.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse17.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse17.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">2.15   </span> <a 
 id="x24-420002.15"></a>Overlap, Inclusion, and Disjointness of Types</h3>
<!--l. 2574--><p class="noindent" >The Common Lisp data type hierarchy is tangled and purposely left somewhat
open-ended so that implementors may experiment with new data types as
extensions to the language. This section explicitly states all the deﬁned
relationships between types, including subtype/supertype relationships,
disjointness, and exhaustive partitioning. The user of Common Lisp should not
depend on any relationships not explicitly stated here. For example, it is not valid
to assume that because a number is not complex and not rational that it must be
a <i>ﬂoat</i>, because implementations are permitted to provide yet other kinds of
numbers.
<!--l. 2585--><p class="indent" >   First we need some terminology. If x is a supertype of y, then any object of
type y is also of type x, and y is said to be a subtype of x. If types x and y are
disjoint, then no object (in any implementation) may be both of type x and of
type y. Types a<sub>1</sub> through a<sub>n</sub> are an exhaustive union of type x if each a<sub>j</sub> is a
subtype of x, and any object of type x is necessarily of at least one of the types a<sub>j</sub>;
a<sub>1</sub> through a<sub>n</sub> are furthermore an exhaustive partition if they are also pairwise
disjoint.
      <ul class="itemize1">
      <li class="itemize">The type <i>t</i> is a supertype of every type whatsoever. Every object is of
      type <i>t</i>.
      </li>
      <li class="itemize">The type <i>nil</i> is a subtype of every type whatsoever. No object is of type
      <i>nil</i>.</li></ul>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The types <i>cons</i>, <i>symbol</i>, <i>array</i>, <i>number</i>, and <i>character</i> are pairwise
      disjoint.</li></ul>
                                                                          

                                                                          
</div>
<div class=new>
<!--l. 2616--><p class="indent" >   X3J13 voted in June 1988 ⟨<b>?</b>⟩ to extend the preceding paragraph as
follows.
      <ul class="itemize1">
      <li class="itemize">The  types  <i>cons</i>,  <i>symbol</i>,  <i>array</i>,  <i>number</i>,  <i>character</i>,  <i>hash-table</i>,
      <i>readtable</i>, <i>package</i>, <i>pathname</i>, <i>stream</i>, <i>random-state</i>, and any single
      other type created by <i>defstruct</i> or <i>defclass</i> are pairwise disjoint.</li></ul>
<!--l. 2629--><p class="indent" >   The wording of the ﬁrst edition was intended to allow implementors to use
the <i>defstruct</i> facility to deﬁne the built-in types <i>hash-table</i>, <i>readtable</i>,
<i>package</i>, <i>pathname</i>, <i>stream</i>, <i>random-state</i>. The change still permits this
implementation strategy but forbids these built-in types from including,
or being included in, other types (in the sense of the <i>defstruct</i> <i>:include</i>
option).
</div>
<div class=new>
<!--l. 2638--><p class="indent" >   X3J13 voted in June 1988 ⟨<b>?</b>⟩ to specify that the type <i>function</i> is disjoint from
the types <i>cons</i>, <i>symbol</i>, <i>array</i>, <i>number</i>, and <i>character</i>. The type <i>compiled-function</i>
is a subtype of <i>function</i>; implementations are free to deﬁne other subtypes of
<i>function</i>.
</div>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The types <i>rational</i>, <i>ﬂoat</i>, and <i>complex</i> are pairwise disjoint subtypes
      of <i>number</i>.</li></ul>
</div>
<div class=newer>
<!--l. 2654--><p class="indent" >   X3J13 voted in March 1989 ⟨<b>?</b>⟩ to rewrite the preceding item as follows.
      <ul class="itemize1">
      <li class="itemize">The types <i>real</i> and <i>complex</i> are pairwise disjoint subtypes of <i>number</i>.</li></ul>
<div class=rationale>
                                                                          

                                                                          
<!--l. 2663--><p class="noindent" ><b>Rationale:</b> It might be thought that <i>real</i> and <i>complex</i> should form an exhaustive
partition of the type <i>number</i>. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp number system.
</div>
      <ul class="itemize1">
      <li class="itemize">The types <i>rational</i> and <i>ﬂoat</i> are pairwise disjoint subtypes of <i>real</i>.</li></ul>
<div class=rationale>
<!--l. 2678--><p class="noindent" ><b>Rationale:</b> It might be thought that <i>rational</i> and <i>ﬂoat</i> should form an exhaustive
partition of the type <i>real</i>. This is purposely avoided here in order to permit compatible
experimentation with extensions to the Common Lisp number system.
</div>
</div>
      <ul class="itemize1">
      <li class="itemize">The types <i>integer</i> and <i>ratio</i> are disjoint subtypes of <i>rational</i>.</li></ul>
<div class=rationale>
<!--l. 2693--><p class="noindent" ><b>Rationale:</b> It might be thought that <i>integer</i> and <i>ratio</i> should form an exhaustive
partition of the type <i>rational</i>. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp rational number
system.
</div>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The types <i>ﬁxnum</i> and <i>bignum</i> are disjoint subtypes of <i>integer</i>.</li></ul>
<div class=rationale>
<!--l. 2708--><p class="noindent" ><b>Rationale:</b> It might be thought that <i>ﬁxnum</i> and <i>bignum</i> should form an exhaustive
partition of the type <i>integer</i>. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp integer number
system, such as the idea of adding explicit representations of inﬁnity or of positive and
negative inﬁnity.
</div>
</div>
<div class=new>
                                                                          

                                                                          
<!--l. 2720--><p class="indent" >   X3J13 voted in January 1989 ⟨<b>?</b>⟩ to specify that the types <i>ﬁxnum</i> and <i>bignum</i>
do in fact form an exhaustive partition of the type <i>integer</i>; more precisely,
they voted to specify that the type <i>bignum</i> is by deﬁnition equivalent to
<i>(and integer (not ﬁxnum))</i>. This is consistent with the ﬁrst edition text in
section <a 
href="clmse3.html#x10-170002.1.1">2.1.1<!--tex4ht:ref: INTEGERS-SECTION --></a>.
<!--l. 2728--><p class="indent" >   I interpret this to mean that implementators could still experiment with such
extensions as adding explicit representations of inﬁnity, but such inﬁnities would
necessarily be of type <i>bignum</i>.
</div>
      <ul class="itemize1">
      <li class="itemize">The  types  <i>short-ﬂoat</i>,  <i>single-ﬂoat</i>,  <i>double-ﬂoat</i>,  and  <i>long-ﬂoat</i>  are
      subtypes of <i>ﬂoat</i>. Any two of them must be either disjoint or identical;
      if identical, then any other types between them in the above ordering
      must also be identical to them (for example, if <i>single-ﬂoat</i> and <i>long-ﬂoat</i>
      are identical types, then <i>double-ﬂoat</i> must be identical to them also).
      </li>
      <li class="itemize">The type <i>null</i> is a subtype of <i>symbol</i>; the only object of type <i>null</i> is
      <i>nil</i>.
      </li>
      <li class="itemize">The types <i>cons</i> and <i>null</i> form an exhaustive partition of the type <i>list</i>.</li></ul>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The type <i>standard-char</i> is a subtype of <i>string-char</i>; <i>string-char</i> is a
      subtype of <i>character</i>.</li></ul>
</div>
<div class=newer>
<!--l. 2761--><p class="indent" >   X3J13 voted in March 1989 ⟨<b>?</b>⟩ to remove the type <i>string-char</i>. The preceding
item is replaced by the following.
      <ul class="itemize1">
      <li class="itemize">The  type  <i>standard-char</i>  is  a  subtype  of  <i>base-character</i>.  The  types
      <i>base-character</i> and <i>extended-character</i> form an exhaustive partition of
      <i>character</i>.</li></ul>
                                                                          

                                                                          
</div>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The  type  <i>string</i>  is  a  subtype  of  <i>vector</i>,  for  <i>string</i>  means  <i>(vector
      string-char)</i>.</li></ul>
</div>
<!--l. 2779--><p class="indent" >
                                                                          

                                                                          
<div class=newer>
<!--l. 2781--><p class="indent" >   X3J13 voted in March 1989 ⟨<b>?</b>⟩ to remove the type <i>string-char</i>. The preceding
item is replaced by the following.
      <ul class="itemize1">
      <li class="itemize">The type <i>string</i> is a subtype of <i>vector</i>; it is the union of all types
      <i>(vector c)</i> such that c is a subtype of <i>character</i>.</li></ul>
</div>
      <ul class="itemize1">
      <li class="itemize">The type <i>bit-vector</i> is a subtype of <i>vector</i>, for <i>bit-vector</i> means <i>(vector
      bit)</i>.
      </li>
      <li class="itemize">The types <i>(vector t)</i>, <i>string</i>, and <i>bit-vector</i> are disjoint.
      </li>
      <li class="itemize">The type <i>vector</i> is a subtype of <i>array</i>; for all types x, the type <i>(vector
      x)</i> is the same as the type <i>(array x (*))</i>.
      </li>
      <li class="itemize">The type <i>simple-array</i> is a subtype of <i>array</i>.</li></ul>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">The  types  <i>simple-vector</i>,  <i>simple-string</i>,  and  <i>simple-bit-vector</i>  are
      disjoint   subtypes   of   <i>simple-array</i>,   for   they   respectively   mean
      <i>(simple-array t (*))</i>, <i>(simple-array string-char (*))</i>, and <i>(simple-array
      bit (*))</i>.</li></ul>
</div>
<div class=newer>
<!--l. 2817--><p class="indent" >   X3J13 voted in March 1989 ⟨<b>?</b>⟩ to remove the type <i>string-char</i>. The preceding
item is replaced by the following.
      <ul class="itemize1">
      <li class="itemize">The  types  <i>simple-vector</i>,  <i>simple-string</i>,  and  <i>simple-bit-vector</i>  are
      disjoint subtypes of <i>simple-array</i>, for they mean <i>(simple-array t (*))</i>,
      the union of all types <i>(simple-array c (*))</i> such that c is a subtype of
      <i>character</i>, and <i>(simple-array bit (*))</i>, respectively.</li></ul>
                                                                          

                                                                          
</div>
      <ul class="itemize1">
      <li class="itemize">The type <i>simple-vector</i> is a subtype of <i>vector</i> and indeed is a subtype
      of <i>(vector t)</i>.
      </li>
      <li class="itemize">The type <i>simple-string</i> is a subtype of <i>string</i>. (Note that although
      <i>string</i>  is  a  subtype  of  <i>vector</i>,  <i>simple-string</i>  is  not  a  subtype  of
      <i>simple-vector</i>.)</li></ul>
<div class=rationale>
<!--l. 2841--><p class="noindent" ><b>Rationale:</b> The hypothetical name <i>simple-general-vector</i> would have been more
accurate than <i>simple-vector</i>, but in this instance euphony and user convenience were
deemed more important to the design of Common Lisp than a rigid symmetry.
</div>
      <ul class="itemize1">
      <li class="itemize">The  type  <i>simple-bit-vector</i>  is  a  subtype  of  <i>bit-vector</i>.  (Note  that
      although <i>bit-vector</i> is a subtype of <i>vector</i>, <i>simple-bit-vector</i> is not a
      subtype of <i>simple-vector</i>.)
      </li>
      <li class="itemize">The types <i>vector</i> and <i>list</i> are disjoint subtypes of <i>sequence</i>.
      </li>
      <li class="itemize">The types <i>random-state</i>, <i>readtable</i>, <i>package</i>, <i>pathname</i>, <i>stream</i>, and
      <i>hash-table</i> are pairwise disjoint.</li></ul>
<div class=new>
<!--l. 2864--><p class="indent" >   X3J13 voted in June 1988 ⟨<b>?</b>⟩ to make <i>random-state</i>, <i>readtable</i>, <i>package</i>,
<i>pathname</i>, <i>stream</i>, and <i>hash-table</i> pairwise disjoint from a number of other types
as well; see note above.
</div>
<div class=new>
<!--l. 2873--><p class="indent" >   X3J13 voted in January 1989 ⟨<b>?</b>⟩ to introduce subtypes of type <i>stream</i>.
      <ul class="itemize1">
      <li class="itemize">The types <i>two-way-stream</i>, <i>echo-stream</i>, <i>broadcast-stream</i>, <i>ﬁle-stream</i>,
      <i>synonym-stream</i>, <i>string-stream</i>, and <i>concatenated-stream</i> are disjoint
      subtypes of <i>stream</i>.</li></ul>
                                                                          

                                                                          
</div>
      <ul class="itemize1">
      <li class="itemize">Any two types created by <i>defstruct</i> are disjoint unless one is a supertype
      of the other by virtue of the <i>:include</i> option.</li></ul>
<div class=obsolete>
      <ul class="itemize1">
      <li class="itemize">An  exhaustive  union  for  the  type  <i>common</i> is  formed  by  the  types
      <i>cons</i>, <i>symbol</i>, <i>(array x)</i> where x is either <i>t</i> or a subtype of <i>common</i>,
      <i>string</i>,  <i>ﬁxnum</i>,  <i>bignum</i>,  <i>ratio</i>,  <i>short-ﬂoat</i>,  <i>single-ﬂoat</i>,  <i>double-ﬂoat</i>,
      <i>long-ﬂoat</i>, <i>(complex x)</i> where x is a subtype of <i>common</i>, <i>standard-char</i>,
      <i>hash-table</i>, <i>readtable</i>, <i>package</i>, <i>pathname</i>, <i>stream</i>, <i>random-state</i>, and
      all types created by the user via <i>defstruct</i>. An implementation may
      not unilaterally add subtypes to <i>common</i>; however, future revisions to
      the Common Lisp standard may extend the deﬁnition of the <i>common</i>
      data type. Note that a type such as <i>number</i> or <i>array</i> may or may
      not be a subtype of <i>common</i>, depending on whether or not the given
      implementation has extended the set of objects of that type.</li></ul>
</div>
<div class=newer>
<!--l. 2915--><p class="indent" >   X3J13 voted in March 1989 ⟨<b>?</b>⟩ to remove the type <i>common</i> from the
language.
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
   <!--l. 6--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch3.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse17.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse17.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 6--><p class="indent" >   <a 
 id="tailclmse17.html"></a>  
</body></html> 
