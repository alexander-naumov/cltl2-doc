<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Creating New Streams Создание новых потоков</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-10 13:43:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 262--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse114.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse112.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse112.html#tailclmse112.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse113.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch21.html#clmse113.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">21.2   </span> <a 
 id="x139-26500021.2"></a>Creating New Streams Создание новых потоков</h3>
<!--l. 264--><p class="noindent" >Perhaps the most important constructs for creating new streams are those that
open ﬁles; see <a 
href="clmse120.html#x148-302012r769">with-open-ﬁle</a> and <a 
href="clmse120.html#x148-302002r768">open</a>. The following functions construct streams
without reference to a ﬁle system.
<!--l. 268--><p class="indent" >   Пожалуй самые важные конструкции для создания новых потоков это то,
которые открывают файлы. Смотрите <a 
href="clmse120.html#x148-302012r769">with-open-ﬁle</a> и <a 
href="clmse120.html#x148-302002r768">open</a>. Следущие
функции создают потоки без ссылок на файловую систему.
<div class=defun>
<!--l. 272--><p class="noindent" ><i>[Function]</i><a 
 id="dx139-265001"></a><a 
 id="x139-265002r643"></a><b> make-synonym-stream</b>  <i>symbol</i>
<!--l. 274--><p class="noindent" ><a 
href="#x139-265002r643">make-synonym-stream</a> creates and returns a synonym stream. Any operations on
the new stream will be performed on the stream that is then the value of the
dynamic variable named by the <i>symbol</i>. If the value of the variable should
change or be bound, then the synonym stream will operate on the new
stream.
<!--l. 282--><p class="indent" >   <a 
href="#x139-265002r643">make-synonym-stream</a> создает и возвращает поток-синоним. Любые
операции на новом потоке будут проделаны на потоке, являющемся
значением динамической переменной с именем <i>symbol</i>. Если значение этой
переменной изменится или будет пересвязано, то поток-синоним будет
воздействовать на новый установленный поток.
<div class=new>
<!--l. 289--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx139-265003"></a>to specify that the result of make-synonym-stream
is always a stream of type synonym-stream. Note that the type of a synonym
stream is <i>always</i> synonym-stream, regardless of the type of the stream for which it
is a synonym.
</div>
</div>
<div class=defun>
<!--l. 298--><p class="noindent" ><i>[Function]</i><a 
 id="dx139-265004"></a><a 
 id="x139-265005r644"></a><b> make-broadcast-stream</b>  &#x0026;rest  <i>streams</i>
<!--l. 300--><p class="noindent" >This returns a stream that works only in the output direction. Any output sent to
this stream will be sent to all of the <i>streams</i> given. The set of operations that may
be performed on the new stream is the intersection of those for the given streams.
                                                                          

                                                                          
The results returned by a stream operation are the values resulting from
performing the operation on the last stream in <i>streams</i>; the results of performing
the operation on all preceding streams are discarded. If no <i>streams</i> are given as
arguments, then the result is a “bit sink”; all output to the resulting stream is
discarded.
<!--l. 313--><p class="indent" >   Эта функция возвращает поток, который работает только для записи.
Любая выходная информация, посланная в этот поток, будет отослана в все
указанные потоки <i>streams</i>. Множество операций, которые могут быть
выполнены на новом потоке, является пересечением множеств операций
для указанных потоков. Результаты, возвращаемые операциями над
новым потоком, являются результатами возвращенными операциями
на последнем потоке из списка <i>streams</i>. Результаты полученные в
ходе выполнения функции над всеми, кроме последнего, потоками
игнорируются. Если не было передено ни одного потока в аргументе
<i>streams</i>, тогда результат является «кусочком клоаки». Вся выводимая
информация будет игнорироваться. <div class=new> X3J13 voted in January 1989 <a 
 id="dx139-265006"></a>to
specify that the result of make-broadcast-stream is always a stream of type
broadcast-stream.
</div>
</div>
<div class=defun>
<!--l. 333--><p class="noindent" ><i>[Function]</i><a 
 id="dx139-265007"></a><a 
 id="x139-265008r645"></a><b> make-concatenated-stream</b>  &#x0026;rest  <i>streams</i>
<!--l. 335--><p class="noindent" >This returns a stream that works only in the input direction. Input is taken from
the ﬁrst of the <i>streams</i> until it reaches end-of-ﬁle; then that stream is discarded,
and input is taken from the next of the <i>streams</i>, and so on. If no arguments are
given, the result is a stream with no content; any input attempt will result in
end-of-ﬁle.
<!--l. 343--><p class="indent" >   Данная функция возвращает поток, который работает только для чтения.
Входная информация берется из первого потоки из списка <i>streams</i> пока
указатель не достигнет конца-файла end-of-ﬁle, затем данный поток
откладывается, и входная информация берется из следующего, и так
далее. Если список потоков <i>stream</i> был пуст, то возвращается поток без
содержимого. Любая попытка чтения будет возвращать конец-файла
end-of-ﬁle. <div class=new> X3J13 voted in January 1989 <a 
 id="dx139-265009"></a>to specify that the result of
make-concatenated-stream is always a stream of type concatenated-stream.
</div>
</div>
<div class=defun>
                                                                          

                                                                          
<!--l. 357--><p class="noindent" ><i>[Function]</i><a 
 id="dx139-265010"></a><a 
 id="x139-265011r646"></a><b> make-two-way-stream</b>  <i>input-stream</i> <i>output-stream</i>
<!--l. 359--><p class="noindent" >This returns a bidirectional stream that gets its input from <i>input-stream</i> and
sends its output to <i>output-stream</i>.
<!--l. 363--><p class="indent" >   Данная функция возвращает поток для чтения и записи, который
входную информацию получает из <i>input-stream</i> и посылает выходную
информацию в <i>output-stream</i>. <div class=new> X3J13 voted in January 1989 <a 
 id="dx139-265012"></a>to specify that the
result of make-two-way-stream is always a stream of type two-way-stream.
</div>
</div>
<div class=defun>
<!--l. 373--><p class="noindent" ><i>[Function]</i><a 
 id="dx139-265013"></a><a 
 id="x139-265014r647"></a><b> make-echo-stream</b>  <i>input-stream</i> <i>output-stream</i>
<!--l. 375--><p class="noindent" >This returns a bidirectional stream that gets its input from <i>input-stream</i> and
sends its output to <i>output-stream</i>. In addition, all input taken from <i>input-stream</i>
is echoed to <i>output-stream</i>.
<!--l. 380--><p class="indent" >   Данная функция возвращает поток для чтения и записи, который
получает входную информацию из <i>input-stream</i> и отсылает выходную
в <i>output-stream</i>. В дополнение, входная информация посылается в
<i>output-stream</i> (эхо). <div class=new> X3J13 voted in January 1989 <a 
 id="dx139-265015"></a>to specify that the result of
make-echo-stream is always a stream of type echo-stream.
</div>
<div class=new>
<!--l. 391--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx139-265016"></a>to clarify the interaction of <a 
href="clmse116.html#x143-281015r701">read-char</a>,
<a 
href="clmse116.html#x143-281018r702">unread-char</a>, and <a 
href="clmse116.html#x143-281022r703">peek-char</a> with echo streams. (See the descriptions of those
functions for details.)
<!--l. 397--><p class="indent" >   X3J13 explicitly noted that the bidirectional streams that are the initial values
of <a 
href="clmse112.html#x138-264008r639">*query-io*</a>, <a 
href="clmse112.html#x138-264010r640">*debug-io*</a>, and <a 
href="clmse112.html#x138-264012r641">*terminal-io*</a>, even though they may have some
echoing behavior, conceptually are not necessarily the products of calls to
<a 
href="#x139-265014r647">make-echo-stream</a> and therefore are not subject to the new rules about
echoing on echo streams. Instead, these initial interactive streams may have
implementation-dependent echoing behavior.
</div>
</div>
<div class=defun>
<!--l. 407--><p class="noindent" ><i>[Function]</i><a 
 id="dx139-265017"></a><a 
 id="x139-265018r648"></a><b> make-string-input-stream</b>  <i>string</i> &#x0026;optional  <i>start</i> <i>end</i>
<!--l. 409--><p class="noindent" >This returns an input stream. The input stream will supply, in order, the
characters in the substring of <i>string</i> delimited by <i>start</i> and <i>end</i>; after the last
character has been supplied, the stream will then be at end-of-ﬁle.
<!--l. 415--><p class="indent" >   Данная функция возвращает поток для чтения. Данный поток
                                                                          

                                                                          
последовательно будет сохранять строковые символы в подстроке в строке
<i>string</i> ограниченной с помощью <i>start</i> и <i>end</i>. После того, как будет достигнут
последний символ, поток вернет конец-файла.
<div class=new>
<!--l. 421--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx139-265019"></a>to specify that the result of make-string-input-stream
is always a stream of type string-stream.
</div>
</div>
<div class=obsolete>
<div class=defun>
<!--l. 429--><p class="noindent" ><i>[Function]</i><a 
 id="dx139-265020"></a><a 
 id="x139-265021r649"></a><b> make-string-output-stream</b>
<!--l. 431--><p class="noindent" >This returns an output stream that will accumulate all output given it for the
beneﬁt of the function <a 
href="#x139-265027r651">get-output-stream-string</a>.
</div>
</div>
<div class=newer>
<!--l. 439--><p class="indent" >   X3J13 voted in June 1989 <a 
 id="dx139-265022"></a>to let <a 
href="#x139-265024r650">make-string-output-stream</a> take an
:element-type argument.
<div class=defun>
<!--l. 442--><p class="noindent" ><i>[Function]</i><a 
 id="dx139-265023"></a><a 
 id="x139-265024r650"></a><b> make-string-output-stream</b>  &#x0026;key  <i>:element-type</i>
<!--l. 444--><p class="noindent" >This returns an output stream that will accumulate all output given it for the
beneﬁt of the function <a 
href="#x139-265027r651">get-output-stream-string</a>.
<!--l. 449--><p class="indent" >   The :element-type argument speciﬁes what characters must be accepted by the
created stream. If the :element-type argument is omitted, the created stream must
accept all characters.
<!--l. 453--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx139-265025"></a>to specify that the result of <a 
href="#x139-265024r650">make-string-output-stream</a>
is always a stream of type string-stream.
<!--l. 458--><p class="indent" >   Данная функция возвращает поток для записи, который будет
аккумулировать всю полученную информацию в строку, которая может быть
получена с помощью функции <a 
href="#x139-265027r651">get-output-stream-string</a>.
<!--l. 462--><p class="indent" >   Аргумент :element-type указывает, какие символы могут приниматься
потоком. Если аргумент :element-type опущен, созданный поток должен
принимать все символы.
<!--l. 466--><p class="indent" >   Результатом <a 
href="#x139-265024r650">make-string-output-stream</a> всегдя является поток типа
string-stream.
</div>
</div>
<div class=defun>
                                                                          

                                                                          
<!--l. 472--><p class="noindent" ><i>[Function]</i><a 
 id="dx139-265026"></a><a 
 id="x139-265027r651"></a><b> get-output-stream-string</b>  <i>string-output-stream</i>
<!--l. 474--><p class="noindent" >Given a stream produced by <a 
href="#x139-265024r650">make-string-output-stream</a>, this returns a string
containing all the characters output to the stream so far. The stream is then reset;
thus each call to <a 
href="#x139-265027r651">get-output-stream-string</a> gets only the characters since the last
such call (or the creation of the stream, if no such previous call has been
made).
<!--l. 481--><p class="indent" >   Данная функция возвращает строку, для потока, возвращенного
функцией <a 
href="#x139-265024r650">make-string-output-stream</a>, которая содержит все записанную в
данный поток информацию. После этого поток сбрасывается. Таким
образом каждый вызов <a 
href="#x139-265027r651">get-output-stream-string</a> возвращает только те
символы, которые были записаны с момента предыдущего вызова этой
функции (или создания потока, если предыдущего вызова еще не
было).
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> with-open-stream </b><a 
 id="dx139-265028"></a><a 
 id="x139-265029r652"></a> (var stream)  {declaration}*  { form}*
</td></tr></table>
<!--l. 491--><p class="indent" >
</div>
<!--l. 491--><p class="noindent" ><span class="paragraphHead"><a 
 id="x139-26600021.2"></a></span>
   The form <i>stream</i> is evaluated and must produce a stream. The variable <i>var</i> is
bound with the stream as its value, and then the forms of the body are executed
as an implicit <a 
href="clmse38.html#x50-102002r80">progn</a>; the results of evaluating the last form are returned as the
value of the <a 
href="#x139-265029r652">with-open-stream</a> form. The stream is automatically closed on exit
from the <a 
href="#x139-265029r652">with-open-stream</a> form, no matter whether the exit is normal or
abnormal; see <a 
href="clmse114.html#x140-270014r661">close</a>. The stream should be regarded as having dynamic
extent.
<!--l. 503--><p class="indent" >   Форма <i>stream</i> вычисляется и должна вернуть поток. Переменная <i>var</i>
связывается с этим потоком, и затем выполняются формы тела как неявный
<a 
href="clmse38.html#x50-102002r80">progn</a>. Результатом выполнения <a 
href="#x139-265029r652">with-open-stream</a> является значение
последней формы. Поток автоматически закрывается при выходе из формы
                                                                          

                                                                          
<a 
href="#x139-265029r652">with-open-stream</a>, вне зависимости от типа выхода. Смотрите <a 
href="clmse114.html#x140-270014r661">close</a>. Поток
следует рассматривать, как имеющий динамическую продолжительность
видимости. <div class=new> X3J13 voted in January 1989 <a 
 id="dx139-266001"></a>to specify that the stream created by
<a 
href="#x139-265029r652">with-open-stream</a> is always of type ﬁle-stream.
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> with-input-from-string </b><a 
 id="dx139-266002"></a><a 
 id="x139-266003r653"></a> (var string  {keyword value}* )
</td></tr></table>
<!--l. 521--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> {declaration}*  { form}* </td></tr></table>
<!--l. 522--><p class="indent" >
</div>
<!--l. 522--><p class="noindent" ><span class="paragraphHead"><a 
 id="x139-26700021.2"></a></span>
   The body is executed as an implicit <a 
href="clmse38.html#x50-102002r80">progn</a> with the variable <i>var</i> bound to a
character input stream that supplies successive characters from the value of the
form <i>string</i>. <a 
href="#x139-266003r653">with-input-from-string</a> returns the results from the last <i>form</i> of the
body.
<!--l. 528--><p class="indent" >   The input stream is automatically closed on exit from the with-input-from-string
form, no matter whether the exit is normal or abnormal. The stream should be
regarded as having dynamic extent.
<!--l. 533--><p class="indent" >   Тело выполняется как неявный <a 
href="clmse38.html#x50-102002r80">progn</a> с переменной <i>var</i> связанной с
потоком символов для чтения, который последовательно предоставляет
символы из значения формы <i>string</i>. <a 
href="#x139-266003r653">with-input-from-string</a> возвращает
результат выполнения последней формы <i>form</i> тела.
<div class=new>
<!--l. 539--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx139-267001"></a>to specify that the stream created by
<a 
href="#x139-266003r653">with-input-from-string</a> is always of type string-stream.
</div>
<!--l. 545--><p class="indent" >   The following keyword options may be used:
      <div class="quotation">
                                                                          

                                                                          
<div class=flushdesc>
      <!--l. 548--><p class="noindent" >
     <ul><li><b>
:index </b></li>The form after the :index keyword should be a <i>place</i> acceptable
     to  <a 
href="clmse36.html#x48-93002r66">setf</a>.  If  the  <a 
href="#x139-266003r653">with-input-from-string</a>  form  is  exited  normally,
     then the <i>place</i> will have stored into it the index into the <i>string</i>
     indicating the ﬁrst character not read (the length of the string
     if all characters were used). The <i>place</i> is not updated as reading
     progresses, but only at the end of the operation.
     <li><b>
:start </b></li>The :start keyword takes an argument indicating, in the manner
     usual for sequence functions, the beginning of a substring of <i>string</i>
     to be used.
     <li><b>
:end </b></li>The :end keyword takes an argument indicating, in the manner
     usual for sequence functions, the end of a substring of <i>string</i> to
     be used.</ul>
</div>
      </div>
<!--l. 569--><p class="indent" >   В параметрах могут использоваться следующие имена:
      <div class="quotation">
<div class=flushdesc>
      <!--l. 572--><p class="noindent" >
     <ul><li><b>
:index </b></li>Форма  после  :index  должна  быть  <i>местом</i>,  в  которое
     можно  осуществить  запись  с  помощью  <a 
href="clmse36.html#x48-93002r66">setf</a>.  Если  форма
     <a 
href="#x139-266003r653">with-input-from-string</a> завершается нормально, то <i>место</i> будет
     содержать  позицию  первого  не  прочитанного  символа  из
     строки  <i>string</i>  (или  длину  строки,  если  все  символы  были
     прочитаны). <i>Место</i> не изменяется в процессе чтения, а только
     во время выхода.
                                                                          

                                                                          
     <li><b>
:start </b></li>:start принимает аргумент, указывающий позицию с которой
     необходимо начинать чтение символов из строки <i>string</i>.
     <li><b>
:end </b></li>The :end keyword takes an argument indicating, in the manner
     usual for sequence functions, the end of a substring of <i>string</i> to
     be used. :end принимает аргумент, указывающий на позицию
     на которой необходимо завершить чтение символов из строки
     <i>string</i>
     </ul>
</div>
      </div>
<!--l. 594--><p class="indent" >   Here is an example of the use of <a 
href="#x139-266003r653">with-input-from-string</a>: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(with-input-from-string (s &#x0022;Animal Crackers&#x0022; :index j :start 6)
</td></tr></table>
<!--l. 596--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (read s))  ⇒ crackers</td></tr></table>
<!--l. 598--><p class="indent" >
</div>
</div>
<!--l. 599--><p class="noindent" >As a side eﬀect, the variable j is set to 15.
<!--l. 601--><p class="indent" >   The :start and :index keywords may both specify the same variable, which is a
pointer within the string to be advanced, perhaps repeatedly by some containing
loop.
<!--l. 605--><p class="indent" >   Вот простой пример использования <a 
href="#x139-266003r653">with-input-from-string</a>: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(with-input-from-string (s &#x0022;Animal Crackers&#x0022; :index j :start 6)
</td></tr></table>
<!--l. 607--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (read s))  ⇒ crackers</td></tr></table>
<!--l. 609--><p class="indent" >
</div>
</div>
<!--l. 610--><p class="noindent" >В качестве побочного эффекта переменная j будет установлена в 15.
                                                                          

                                                                          
<!--l. 612--><p class="indent" >   :start и :index могут оба содержать одну переменную, указывающую
позицию в строке, возможно, внутри цикла.
<div class=new>
<!--l. 616--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx139-267002"></a>to restrict user side eﬀects; see section
<a 
href="clmse43.html#x55-1420007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
</div>
<div class=obsolete>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> with-output-to-string </b><a 
 id="dx139-267003"></a><a 
 id="x139-267004r654"></a> (var [string])  {declaration}*  { form}*
</td></tr></table>
<!--l. 625--><p class="indent" >
</div>
<!--l. 625--><p class="noindent" ><span class="paragraphHead"><a 
 id="x139-26800021.2"></a></span>
   The body is executed as an implicit <a 
href="clmse38.html#x50-102002r80">progn</a> with the variable <i>var</i> bound to a
character output stream. All output to that stream is saved in a string. This may
be done in one of two ways.
<!--l. 630--><p class="indent" >   If no <i>string</i> argument is provided, then the value of with-output-from-string is
a string containing all the collected output.
<!--l. 634--><p class="indent" >   If <i>string</i> is speciﬁed, it must be a string with a ﬁll pointer; the output is
incrementally appended to the string, as if using <a 
href="clmse98.html#x120-242008r590">vector-push-extend</a> if
the string is adjustable, and otherwise as if using <a 
href="clmse98.html#x120-242006r589">vector-push</a>. In this
case <a 
href="#x139-268003r655">with-output-to-string</a> returns the results from the last <i>form</i> of the
body.
<!--l. 641--><p class="indent" >   In either case, the output stream is automatically closed on exit from the
with-output-from-string form, no matter whether the exit is normal or abnormal.
The stream should be regarded as having dynamic extent.
</div>
</div>
<div class=newer>
<!--l. 650--><p class="indent" >   X3J13 voted in June 1989 <a 
 id="dx139-268001"></a>to let <a 
href="#x139-268003r655">with-output-to-string</a> take an :element-type
argument.
                                                                          

                                                                          
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> with-output-to-string </b><a 
 id="dx139-268002"></a><a 
 id="x139-268003r655"></a> (var [string [:element-type type]])
</td></tr></table>
<!--l. 655--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> {declaration}*  { form}* </td></tr></table>
<!--l. 656--><p class="indent" >
</div>
<!--l. 656--><p class="noindent" ><span class="paragraphHead"><a 
 id="x139-26900021.2"></a></span>
   One may specify <a 
href="clmse31.html#x42-77002r19">nil</a> instead of a string as the <i>string</i> and use the :element-type
argument to specify what characters must be accepted by the created stream. If
no <i>string</i> argument is provided, or if it is <a 
href="clmse31.html#x42-77002r19">nil</a> and no :element-type is speciﬁed, the
created stream must accept all characters.
<!--l. 663--><p class="indent" >   X3J13 voted in October 1988 <a 
 id="dx139-269001"></a>to specify that if <i>string</i> is speciﬁed, it must be a
string with a ﬁll pointer; the output is incrementally appended to the string (as if
by use of <a 
href="clmse98.html#x120-242008r590">vector-push-extend</a>).
<!--l. 670--><p class="indent" >   In this way output cannot be accidentally lost. This change makes
with-output-to-string behave in the same way that <a 
href="clmse117.html#x144-287003r730">format</a> does when given a
string as its ﬁrst argument.
<!--l. 674--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx139-269002"></a>to specify that the stream created by
<a 
href="#x139-268003r655">with-output-to-string</a> is always of type string-stream.
<!--l. 679--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx139-269003"></a>to restrict user side eﬀects; see section
<a 
href="clmse43.html#x55-1420007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
<!--l. 683--><p class="indent" >   Можно указать <a 
href="clmse31.html#x42-77002r19">nil</a> вместо строки <i>string</i> и использовать аргумент
:element-type для указания, какие символы должны приниматься созданным
потоком. Если аргумент <i>string</i> не указан или он <a 
href="clmse31.html#x42-77002r19">nil</a> и не указан :element-type,
то созданный поток должен принимать все символы.
</div>
</div>
                                                                          

                                                                          
   <!--l. 690--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse114.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse112.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse112.html#tailclmse112.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse113.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch21.html#clmse113.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 690--><p class="indent" >   <a 
 id="tailclmse113.html"></a>  
</body></html> 
