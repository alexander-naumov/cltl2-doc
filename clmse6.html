<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Lists and Conses Списки и Cons-ячейки</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-09 00:03:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1802--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse7.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse5.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse5.html#tailclmse5.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse6.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse6.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">2.4   </span> <a 
 id="x13-300002.4"></a>Lists and Conses Списки и Cons-ячейки</h3>
<a 
 id="dx13-30001"></a>
<!--l. 1805--><p class="noindent" >A <a 
href="clmse86.html#x106-224062r474">cons</a> is a record structure containing two components called the <i>car</i> and the
<i>cdr</i>. Conses are used primarily to represent lists.
<!--l. 1809--><p class="indent" >   cons-ячейка является записью структуры, содержащей два элемента,
называемых <i>car</i> и <i>cdr</i>. Cons-ячейки используются преимущественно для
отображения списков.
<!--l. 1813--><p class="indent" >   A <i>list</i> is recursively deﬁned to be either the empty list or a cons whose
<i>cdr</i> component is a list. A list is therefore a chain of conses linked by
their <i>cdr</i> components and terminated by <a 
href="clmse31.html#x42-77002r19">nil</a>, the empty list. The <i>car</i>
components of the conses are called the <i>elements</i> of the list. For each
element of the list there is a cons. The empty list has no elements at
all.
<i>
<!--l. 1820--><p class="indent" >   Список</i> рекурсивно определяется пустым списком или cons-ячейкой, у
которой <i>cdr</i> элемент является списком. Таким образом, список является
цепочкой cons-ячеек связанных с помощью их cdr элементов, заканчивающейся
пустым списком с помощью <a 
href="clmse31.html#x42-77002r19">nil</a>. <i>car</i> элементы cons-ячеек называются
<i>элементами</i> списка. Для каждого элемента списка существует cons-ячейка.
Пустой список не имеет элементов вообще.
<!--l. 1827--><p class="indent" >   A list is notated by writing the elements of the list in order, separated by
blank space (space, tab, or return characters) and surrounded by parentheses.
<!--l. 1831--><p class="indent" >   Список записывается с помощью элементов в необходимом порядке,
разделяемых пробелом (пробел, таб, возврат каретки) и окруженных
круглыми скобками. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(a b c)               ;A list of three symbols
</td></tr></table>
<!--l. 1834--><p class="indent" >        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(2.0s0 (a 1) #\*)     ;A list of three things: a short ﬂoating-point</td></tr></table>
<!--l. 1835--><p class="indent" >
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                      ; number, another list, and a character object</td></tr></table>
<!--l. 1837--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(a b c)               ;Список трех элементов
</td></tr></table>
<!--l. 1840--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(2.0s0 (a 1) #\*)     ;Список трех элементов: короткого с плавающей точкой</td></tr></table>
<!--l. 1842--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                      ; числа, другого списка, и строкового символа</td></tr></table>
<!--l. 1844--><p class="indent" >
</div>
</div>
<!--l. 1845--><p class="noindent" >The empty list <a 
href="clmse31.html#x42-77002r19">nil</a> therefore can be written as (), because it is a list with no
elements.
<!--l. 1848--><p class="indent" >   Таким образом, пустой список <a 
href="clmse31.html#x42-77002r19">nil</a> может быть записан, как (), потому что
является списком без элементов.
<!--l. 1851--><p class="indent" >   A <i>dotted list</i> is one whose last cons does not have <a 
href="clmse31.html#x42-77002r19">nil</a> for its <i>cdr</i>, rather some
other data object (which is also not a cons, or the ﬁrst-mentioned cons would not
be the last cons of the list). Such a list is called “dotted” because of the special
notation used for it: the elements of the list are written between parentheses as
before, but after the last element and before the right parenthesis are written
a dot (surrounded by blank space) and then the <i>cdr</i> of the last cons.
As a special case, a single cons is notated by writing the <i>car</i> and the
<i>cdr</i> between parentheses and separated by a space-surrounded dot. For
example:
<i>
<!--l. 1863--><p class="indent" >   Список с точкой</i> является списком, последняя cons-ячейка которого в cdr
элементе содержит объект данных, а не <a 
href="clmse31.html#x42-77002r19">nil</a> (который не является
cons-ячейкой, иначе исходная cons-ячейка не была бы последней). Такой
список называется «список с точкой» по причине используемой для него
специальной записи: элементы списка записанные в двух последних
поизициях списка перед закрывающей круглое скобкой разделяются точкой
                                                                          

                                                                          
(обрамленной с двух сторон пробелами). Тогда последнее значение будет
содержаться в <i>cdr</i> элементе последней cons-ячейки. В особых случаях,
одиночная cons-ячейка может быть записана с помощью <i>car</i> и <i>cdr</i> элементов,
обрамленных в круглые скобки и разделенных с помощью точки, окруженной
пробелами. Например: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(a . 4)         ;A cons whose <i>car</i> is a symbol
</td></tr></table>
<!--l. 1876--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                ; and whose <i>cdr</i> is an integer</td></tr></table>
<!--l. 1877--><p class="indent" >          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(a b c . d)     ;A dotted list with three elements whose last cons</td></tr></table>
<!--l. 1878--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                ; has the symbol d in its <i>cdr</i></td></tr></table>
<!--l. 1880--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(a . 4)         ;const-ячейка, <i>car</i> которой является символом
</td></tr></table>
<!--l. 1883--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                ; и <i>cdr</i> которой равен целому числу</td></tr></table>
<!--l. 1884--><p class="indent" >      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(a b c . d)     ;Список с точкой с тремя элементами, у последней</td></tr></table>
<!--l. 1885--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                ; cons-ячейки <i>cdr</i> равен символу d</td></tr></table>
<!--l. 1887--><p class="indent" >
</div>
</div>
<div class=incompatibility>
<!--l. 1890--><p class="noindent" ><b>Compatibility note:</b> In MacLisp, the dot in dotted-list notation need not be
surrounded by white space or other delimiters. The dot is required to be delimited in
Common Lisp, as in Lisp Machine Lisp.
</div>
<!--l. 1897--><p class="indent" >   It is legitimate to write something like (a b . (c d)); this means the
same as (a b c d). The standard Lisp output routines will never print
a list in the ﬁrst form, however; they will avoid dot notation wherever
possible.
                                                                          

                                                                          
<!--l. 1902--><p class="indent" >   Правильной записью также является что-то наподобие (a b . (c d)); она
означает то же, что и (a b c d). Стандартный Lisp вывод никогда не
распечатает список в первом виде, таким образом, он старается избавиться от
записи с точкой, когда это возможно.
<!--l. 1907--><p class="indent" >   Often the term <i>list</i> is used to refer either to true lists or to dotted lists. When
the distinction is important, the term “true list” will be used to refer to a list
terminated by <a 
href="clmse31.html#x42-77002r19">nil</a>. Most functions advertised to operate on lists expect to be given
true lists. Throughout this book, unless otherwise speciﬁed, it is an error to
pass a dotted list to a function that is speciﬁed to require a list as an
argument.
<!--l. 1915--><p class="indent" >   Часто термин <i>список</i> употребляется и для обычных списков и для списков
с точкой. Когда разница важна, для списка, заканчивающегося с помощью
<a 
href="clmse31.html#x42-77002r19">nil</a>, будет употребляться термин «Ъ список». Большинство функций
указывают, что оперируют списками, ожидая что они Ъ. Везде в этой книге,
если не указано иное, передача списка с точкой в такие функции является
ошибкой.
<div class=implementation>
<!--l. 1922--><p class="noindent" ><b>Implementation note:</b> Implementors are encouraged to use the equivalent of the
predicate <a 
href="clmse87.html#x107-225002r476">endp</a> wherever it is necessary to test for the end of a list. Whenever feasible,
this test should explicitly signal an error if a list is found to be terminated by a non-<a 
href="clmse31.html#x42-77002r19">nil</a>
atom. However, such an explicit error signal is not required, because some such tests
occur in important loops where eﬃciency is important. In such cases, the predicate <a 
href="clmse32.html#x43-80006r25">atom</a>
may be used to test for the end of the list, quietly treating any non-<a 
href="clmse31.html#x42-77002r19">nil</a> list-terminating
atom as if it were <a 
href="clmse31.html#x42-77002r19">nil</a>.
</div>
<!--l. 1935--><p class="indent" >   Sometimes the term <i>tree</i> is used to refer to some cons and all the other conses
transitively accessible to it through <i>car</i> and <i>cdr</i> links until non-conses are reached;
these non-conses are called the <i>leaves</i> of the tree.
<!--l. 1940--><p class="indent" >   Иногда используется термин <i>дерево</i> для ссылки на некоторую cons-ячейку,
которая содержит другие cons-ячейки в своих <i>car</i> и <i>cdr</i> элементах,
которые также содержат cons-ячейки в своих элементах и так далее,
пока не будут достингуты элементы, не являющиеся cons-ячейками.
Такие элементы, не являющиеся cons-ячейками называются <i>листьями</i>
дерева.
<!--l. 1946--><p class="indent" >   Lists, dotted lists, and trees are not mutually exclusive data types;
they are simply useful points of view about structures of conses. There
are yet other terms, such as <i>association list</i>. None of these are true Lisp
data types. Conses are a data type, and <a 
href="clmse31.html#x42-77002r19">nil</a> is the sole object of type
                                                                          

                                                                          
<a 
href="clmse32.html#x43-80002r23">null</a>. The Lisp data type <a 
href="clmse87.html#x107-225038r493">list</a> is taken to mean the union of the <a 
href="clmse86.html#x106-224062r474">cons</a> and
<a 
href="clmse32.html#x43-80002r23">null</a> data types, and therefore encompasses both true lists and dotted
lists.
<!--l. 1955--><p class="indent" >   Списки, списки с точкой, и деревья вместе не завершают список
типов данных; они просто являются удобной точкой для рассмотрения
таки структур, как cons-ячейки. Существуют также другие термины,
такие как, например, <i>ассоциативный список</i>. Ни один из этих типов
данных не является Lisp&#x2019;овым типом данных. Cons-ячейки являются
таким типом данных, и <a 
href="clmse31.html#x42-77002r19">nil</a> является объектом типа <a 
href="clmse32.html#x43-80002r23">null</a>. Lisp&#x2019;овый тип
данных список подразумаевает объединение типов cons-ячеек и <a 
href="clmse32.html#x43-80002r23">null</a>,
и по этой причине содержит в себе оба типа Ъ список и список с
точкой.
                                                                          

                                                                          
   <!--l. 1965--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse7.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse5.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse5.html#tailclmse5.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse6.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html#clmse6.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 1965--><p class="indent" >   <a 
 id="tailclmse6.html"></a>  
</body></html> 
