<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Special Forms for Exhaustive Case Analysis</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-02-22 01:55:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 581--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch25.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse125.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse125.html#tailclmse125.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse126.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch24.html#clmse126.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">24.3   </span> <a 
 id="x155-22200024.3"></a>Special Forms for Exhaustive Case Analysis</h3>
<!--l. 584--><p class="noindent" >The syntax for <a 
href="clmse155.html#x189-337002r994">etypecase</a> and <a 
href="clmse155.html#x189-337004r995">ctypecase</a> is the same as for <a 
href="clmse40.html#x52-84012r100">typecase</a>, except that
no otherwise clause is permitted. Similarly, the syntax for <a 
href="clmse155.html#x189-337006r996">ecase</a> and <a 
href="clmse155.html#x189-337008r997">ccase</a> is the
same as for <a 
href="clmse40.html#x52-84010r99">case</a> except for the otherwise clause.
<!--l. 589--><p class="indent" >   <a 
href="clmse155.html#x189-337002r994">etypecase</a> and <a 
href="clmse155.html#x189-337006r996">ecase</a> are similar to <a 
href="clmse40.html#x52-84012r100">typecase</a> and <a 
href="clmse40.html#x52-84010r99">case</a>, respectively, but
signal a non-continuable error rather than returning <a 
href="clmse31.html#x42-70002r19">nil</a> if no clause is
selected.
<!--l. 593--><p class="indent" >   <a 
href="clmse155.html#x189-337004r995">ctypecase</a> and <a 
href="clmse155.html#x189-337008r997">ccase</a> are also similar to <a 
href="clmse40.html#x52-84012r100">typecase</a> and <a 
href="clmse40.html#x52-84010r99">case</a>, but signal a
continuable error if no clause is selected.
<div class=defmac>
<!--l. 597--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> etypecase </b> <a 
 id="dx155-222001"></a><a 
 id="x155-222002r791"></a>   keyform  {<i>(type{<i>form</i>}∗ )</div> }∗
</td></tr></table>
<!--l. 598--><p class="indent" >
</div>
   <div class=obsolete>This control construct is similar to <a 
href="clmse40.html#x52-84012r100">typecase</a>, but no explicit otherwise or <a 
href="clmse31.html#x42-70004r20">t</a>
clause is permitted. If no clause is satisﬁed, <a 
href="clmse155.html#x189-337002r994">etypecase</a> signals an error with a
message constructed from the clauses. It is not permissible to continue from this
error. To supply an application-speciﬁc error message, the user should use
<a 
href="clmse40.html#x52-84012r100">typecase</a> with an otherwise clause containing a call to <a 
href="clmse156.html#x190-346011r1025">error</a>. The name of this
function stands for “exhaustive type case” or “error-checking type case.” For
example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x 1/3)
</td></tr></table>
<!--l. 610--><p class="indent" >                                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(etypecase x</td></tr></table>
<!--l. 611--><p class="indent" >                                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (integer x)</td></tr></table>
<!--l. 612--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (symbol (symbol-value x)))</td></tr></table>
<!--l. 613--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">Error: The value of X, 1/3, is neither</td></tr></table>
                                                                          

                                                                          
<!--l. 614--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       an integer nor a symbol.</td></tr></table>
<!--l. 615--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">&#x003E;</td></tr></table>
<!--l. 617--><p class="indent" >
</div>
</div>
</div>
<div class=new>
<!--l. 621--><p class="noindent" >X3J13 voted in June 1988 ⟨<b>?</b>⟩ to adopt a proposal for a Common Lisp Condition
System. This proposal modiﬁes the deﬁnition of <a 
href="clmse155.html#x189-337002r994">etypecase</a> to specify its
interaction with the condition system. See section <a 
href="clmse155.html#x189-33700029.4.3">29.4.3<!--tex4ht:ref: EXHAUSTIVE-CASE-ANALYSIS-CONDITIONS --></a>.
</div>
<div class=defmac>
<!--l. 631--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> ctypecase </b> <a 
 id="dx155-222003"></a><a 
 id="x155-222004r792"></a>   keyplace  {<i>(type{<i>form</i>}∗ )</div> }∗
</td></tr></table>
<!--l. 632--><p class="indent" >
</div>
   <div class=obsolete>This control construct is similar to <a 
href="clmse40.html#x52-84012r100">typecase</a>, but no explicit otherwise or <a 
href="clmse31.html#x42-70004r20">t</a>
clause is permitted. The keyplace must be a generalized variable reference
acceptable to <a 
href="clmse36.html#x48-80002r66">setf</a>. If no clause is satisﬁed, <a 
href="clmse155.html#x189-337004r995">ctypecase</a> signals an error with a
message constructed from the clauses. Continuing from this error causes <a 
href="clmse155.html#x189-337004r995">ctypecase</a>
to accept a new value from the user, store it into keyplace, and start over, making
the type tests again. Subforms of keyplace may be evaluated multiple
times. The name of this function stands for “continuable exhaustive type
case.”
</div>
<div class=new>
   X3J13 voted in June 1988 ⟨<b>?</b>⟩ to adopt a proposal for a Common Lisp
Condition System. This proposal modiﬁes the deﬁnition of <a 
href="clmse155.html#x189-337004r995">ctypecase</a> to specify its
interaction with the condition system. See section <a 
href="clmse155.html#x189-33700029.4.3">29.4.3<!--tex4ht:ref: EXHAUSTIVE-CASE-ANALYSIS-CONDITIONS --></a>.
</div>
<div class=newer>
   X3J13 voted in March 1988 ⟨<b>?</b>⟩ to clarify order of evaluation (see
section <a 
href="clmse36.html#x48-800007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>).
</div>
<div class=defmac>
                                                                          

                                                                          
   <div class=tabbing>
   )
</div> }∗
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> ecase </b> <a 
 id="dx155-222005"></a><a 
 id="x155-222006r793"></a>   keyform  {<i>( {<i>( {<i>key</i>}∗ ) | key</div> }{<i>form</i>}∗
</td></tr></table>
</div>
   <div class=obsolete>This control construct is similar to <a 
href="clmse40.html#x52-84010r99">case</a>, but no explicit otherwise or <a 
href="clmse31.html#x42-70004r20">t</a>
clause is permitted. If no clause is satisﬁed, <a 
href="clmse155.html#x189-337006r996">ecase</a> signals an error with a
message constructed from the clauses. It is not permissible to continue
from this error. To supply an error message, the user should use <a 
href="clmse40.html#x52-84010r99">case</a>
with an otherwise clause containing a call to <a 
href="clmse156.html#x190-346011r1025">error</a>. The name of this
function stands for “exhaustive case” or “error-checking case.” For example: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x 1/3)
</td></tr></table>
<!--l. 674--><p class="indent" >                                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ecase x</td></tr></table>
<!--l. 675--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (alpha (foo))</td></tr></table>
<!--l. 676--><p class="indent" >                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (omega (bar))</td></tr></table>
<!--l. 677--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  ((zeta phi) (baz)))</td></tr></table>
<!--l. 678--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">Error: The value of X, 1/3, is not</td></tr></table>
<!--l. 679--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       ALPHA, OMEGA, ZETA, or PHI.</td></tr></table>
<!--l. 681--><p class="indent" >
</div>
</div>
</div>
<div class=new>
<!--l. 685--><p class="noindent" >X3J13 voted in June 1988 ⟨<b>?</b>⟩ to adopt a proposal for a Common Lisp Condition
System. This proposal modiﬁes the deﬁnition of <a 
href="clmse155.html#x189-337006r996">ecase</a> to specify its interaction
with the condition system. See section <a 
href="clmse155.html#x189-33700029.4.3">29.4.3<!--tex4ht:ref: EXHAUSTIVE-CASE-ANALYSIS-CONDITIONS --></a>.
</div>
<div class=defmac>
<!--l. 695--><p class="noindent" ><div class=tabbing>
                                                                          

                                                                          
   )
</div> }∗
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> ccase </b> <a 
 id="dx155-222007"></a><a 
 id="x155-222008r794"></a>   keyplace  {<i>( {<i>( {<i>key</i>}∗ ) | key</div> }{<i>form</i>}∗
</td></tr></table>
<!--l. 696--><p class="indent" >
</div>
   <div class=obsolete>This control construct is similar to <a 
href="clmse40.html#x52-84010r99">case</a>, but no explicit otherwise or <a 
href="clmse31.html#x42-70004r20">t</a> clause is
permitted. The keyplace must be a generalized variable reference acceptable
to <a 
href="clmse36.html#x48-80002r66">setf</a>. If no clause is satisﬁed, <a 
href="clmse155.html#x189-337008r997">ccase</a> signals an error with a message
constructed from the clauses. Continuing from this error causes <a 
href="clmse155.html#x189-337008r997">ccase</a> to
accept a new value from the user, store it into keyplace, and start over,
making the clause tests again. Subforms of keyplace may be evaluated
multiple times. The name of this function stands for “continuable exhaustive
case.”
</div>
<div class=new>
<!--l. 710--><p class="noindent" >X3J13 voted in June 1988 ⟨<b>?</b>⟩ to adopt a proposal for a Common Lisp Condition
System. This proposal modiﬁes the deﬁnition of <a 
href="clmse155.html#x189-337008r997">ccase</a> to specify its interaction
with the condition system. See section <a 
href="clmse155.html#x189-33700029.4.3">29.4.3<!--tex4ht:ref: EXHAUSTIVE-CASE-ANALYSIS-CONDITIONS --></a>.
</div>
<div class=newer>
<!--l. 719--><p class="noindent" >X3J13 voted in March 1988 ⟨<b>?</b>⟩ to clarify order of evaluation (see section <a 
href="clmse36.html#x48-800007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>).
</div>
<div class=rationale>
<!--l. 725--><p class="noindent" ><b>Rationale:</b> The special forms <a 
href="clmse155.html#x189-337002r994">etypecase</a>, <a 
href="clmse155.html#x189-337004r995">ctypecase</a>, <a 
href="clmse155.html#x189-337006r996">ecase</a>, and <a 
href="clmse155.html#x189-337008r997">ccase</a> are included in
Common Lisp, even though a user could write them himself using the other standard
facilities provided, because it is likely that many users will want these. Common Lisp
therefore provides a standard consistent set rather than allowing a variety of
incompatible dialects to develop.
<!--l. 735--><p class="indent" >   In addition, experience has shown that some Lisp programmers are too lazy to put
an appropriate otherwise clause into every <a 
href="clmse40.html#x52-84010r99">case</a> statement to check for cases they didn&#x2019;t
anticipate, even if they would agree that it will probably hurt them later. If an otherwise
clause can be included very easily by adding one character to the name of the
construct, it is perhaps more likely that programmers will take the trouble to do
it.
<!--l. 744--><p class="indent" >   The e versions do nothing more than supply automatically generated otherwise
clauses, but correct implementation of the c versions requires some care. It is therefore
                                                                          

                                                                          
especially important that the c versions be provided by the system so users don&#x2019;t have to
puzzle them out on their own. Individual implementations may be able to do
a better job of supporting these special forms, using their own idiosyncratic
facilities, than can be done using the error-signaling facilities deﬁned by Common
Lisp.
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
   <!--l. 6--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch25.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse125.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse125.html#tailclmse125.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse126.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch24.html#clmse126.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 6--><p class="indent" >   <a 
 id="tailclmse126.html"></a>  
</body></html> 
