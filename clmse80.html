<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Списки</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-06 02:11:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="cltl2ed.css"></head><body 
>
<!--l. 1461--><p class="noindent" > <div id="main_container"> <div id="content"> <!--l. 1461--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse81.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse79.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse79.html#tailclmse79.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse80.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse80.html" >Вверх</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">15.2   </span> <a 
href="clm.html#QQ2-100-229" id="x100-20100015.2">Списки</a></h3>
<!--l. 1463--><p class="noindent" >Следующие функции выполняет различные операции над списками.
<!--l. 1465--><p class="indent" >   Список является одним из первых Lisp&#x2019;овых типов данных. Имя «Lisp»
расшифровывается как «LISt Processing».
<div class=defun>
<!--l. 1469--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201001"></a><a 
 id="x100-201002r425"></a><b> endp</b>  <i>object</i>
<!--l. 1471--><p class="noindent" >Предикат <tt><a 
href="#x100-201002r425">endp</a></tt> используется для проверки конца списка. Возвращает ложь
для cons-ячеек, истину для <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>, и генерирует ошибку для всех остальных
объектов других типов.
</div>
<div class=defun>
<!--l. 1477--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201003"></a><a 
 id="x100-201004r426"></a><b> list-length</b>  <i>list</i>
<!--l. 1479--><p class="noindent" ><tt><a 
href="#x100-201004r426">list-length</a></tt> возвращает длину списка <i>list</i>. <tt><a 
href="#x100-201004r426">list-length</a></tt> отличается от
<tt><a 
href="clmse74.html#x93-194008r351">length</a></tt> при использовании с циклическим списком. В таком случае <tt><a 
href="clmse74.html#x93-194008r351">length</a></tt>
может не вернуть управление, тогда как <tt><a 
href="#x100-201004r426">list-length</a></tt> вернёт <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>. Например:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list-length &#x2019;()) <span class="math"> ⇒</span> 0
</td></tr></table>
<!--l. 1486--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list-length &#x2019;(a b c d)) <span class="math"> ⇒</span> 4</td></tr></table>
<!--l. 1487--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list-length &#x2019;(a (b c) d)) <span class="math"> ⇒</span> 3</td></tr></table>
<!--l. 1488--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(let ((x (list &#x2019;a b c)))</td></tr></table>
<!--l. 1489--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (rplacd (last x) x)</td></tr></table>
<!--l. 1490--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (list-length x)) <span class="math"> ⇒</span> <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt></td></tr></table>
<!--l. 1492--><p class="indent" >
</div>
</div>
<tt>
<!--l. 1493--><p class="noindent" ><a 
href="#x100-201004r426">list-length</a></tt> может быть реализован так: <div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defun list-length (x)
</td></tr></table>
<!--l. 1495--><p class="indent" >                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (do ((n 0 (+ n 2))            ;Счётчик</td></tr></table>
<!--l. 1496--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       (fast x (cddr fast))     ;Быстрый указатель: на две позиции вперёд</td></tr></table>
<!--l. 1497--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       (slow x (cdr slow)))     ;Медленный указатель: на одну позицию</td></tr></table>
<!--l. 1498--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (nil)</td></tr></table>
<!--l. 1499--><p class="indent" >        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; Если быстрый указатель дошёл до конца, вернуть длину.</td></tr></table>
<!--l. 1500--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    (when (endp fast) (return n))</td></tr></table>
<!--l. 1501--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    (when (endp (cdr fast)) (return (+ n 1)))</td></tr></table>
<!--l. 1502--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; If fast pointer eventually equals slow pointer,</td></tr></table>
<!--l. 1503--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; then we must be stuck in a circular list.</td></tr></table>
<!--l. 1504--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; (A deeper property is the converse: if we are</td></tr></table>
<!--l. 1505--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; stuck in a circular list, then eventually the</td></tr></table>
<!--l. 1506--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; fast pointer will equal the slow pointer.</td></tr></table>
<!--l. 1507--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; That fact justiﬁes this implementation.)</td></tr></table>
<!--l. 1508--><p class="indent" >                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    (when (and (eq fast slow) (&#x003E; n 0)) (return nil))))</td></tr></table>
<!--l. 1510--><p class="indent" >
</div>
</div>
<!--l. 1511--><p class="noindent" >Смотрите <tt><a 
href="clmse74.html#x93-194008r351">length</a></tt>, которая возвращает длину любой последовательности.
</div>
<div class=defun>
<!--l. 1514--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201005"></a><a 
 id="x100-201006r427"></a><b> nth</b>  <i>n</i> <i>list</i>
<!--l. 1516--><p class="noindent" >(nth <i>n</i> <i>list</i>)
возвращает <i>n</i>-нный элемент списка <i>list</i>. <i>car</i> элемент списка принимается за
«нулевой» элемент. Аргумент <i>n</i> должен быть неотрицательным целым
числом. Если длина списка не больше чем <i>n</i>, тогда результат (), или другими
словами <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>. (Это согласовывается с концепцией того, что <i>car</i> и <i>cdr</i> от ()
являются ().) Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nth 0 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> foo
</td></tr></table>
<!--l. 1526--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nth 1 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> bar</td></tr></table>
<!--l. 1527--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nth 3 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1529--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<tt>
<!--l. 1531--><p class="indent" >   <a 
href="#x100-201006r427">nth</a></tt> может быть использован в связке с <tt><a 
href="clmse35.html#x47-89002r64">setf</a></tt> для изменения элемента
списка. В этом случае, аргумент <i>n</i> должен быть меньше чем длина списка
<i>list</i>.
<!--l. 1535--><p class="indent" >   Следует отметить, что порядок аргументов в <tt><a 
href="#x100-201006r427">nth</a></tt> обратный в отличие от
большинства других функций селекторов для последовательностей, таких ка
<tt><a 
href="clmse74.html#x93-194002r348">elt</a></tt>.
</div>
<div class=defun>
<!--l. 1540--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201007"></a><a 
 id="x100-201008r428"></a><b> ﬁrst</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx100-201009"></a><a 
 id="x100-201010r429"></a><b> second</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx100-201011"></a><a 
 id="x100-201012r430"></a><b> third</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx100-201013"></a><a 
 id="x100-201014r431"></a><b> fourth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx100-201015"></a><a 
 id="x100-201016r432"></a><b> ﬁfth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx100-201017"></a><a 
 id="x100-201018r433"></a><b> sixth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx100-201019"></a><a 
 id="x100-201020r434"></a><b> seventh</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx100-201021"></a><a 
 id="x100-201022r435"></a><b> eighth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx100-201023"></a><a 
 id="x100-201024r436"></a><b> ninth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx100-201025"></a><a 
 id="x100-201026r437"></a><b> tenth</b>  <i>list</i>
<!--l. 1551--><p class="noindent" >Иногда эти функции удобно использовать для доступа к определёнными
элементам списка. <tt><a 
href="#x100-201008r428">first</a></tt> то же, что и <tt><a 
href="clmse79.html#x99-200002r393">car</a></tt>, <tt><a 
href="#x100-201010r429">second</a></tt> то же, что и <tt><a 
href="clmse79.html#x99-200008r396">cadr</a></tt>, <tt><a 
href="#x100-201012r430">third</a></tt> то
же, что и <tt><a 
href="clmse79.html#x99-200020r402">caddr</a></tt>, и так далее. Следует отметить, что нумерация начинается с
единицы (ﬁrst) в отличие от нумерации, которая начинается с нуля и
используется в <tt><a 
href="#x100-201006r427">nth</a></tt>. <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬁfth x) <span class="math"> ≡</span> (nth 4 x)
</td></tr></table>
<!--l. 1560--><p class="indent" >
</div>
</div>
<!--l. 1562--><p class="indent" >   Каждая из этих функций может быть использована в связке <tt><a 
href="clmse35.html#x47-89002r64">setf</a></tt> для
изменения элемента массива.
</div>
<div class=defun>
                                                                          

                                                                          
<!--l. 1566--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201027"></a><a 
 id="x100-201028r438"></a><b> rest</b>  <i>list</i>
<!--l. 1568--><p class="noindent" ><tt><a 
href="#x100-201028r438">rest</a></tt> означает то же, что и <tt><a 
href="clmse79.html#x99-200004r394">cdr</a></tt>, но мнемонически согласуется с <tt><a 
href="#x100-201008r428">first</a></tt>.
<tt><a 
href="#x100-201028r438">rest</a></tt> может использоваться в связке с <tt><a 
href="clmse35.html#x47-89002r64">setf</a></tt> для изменения элементов
массива.
</div>
<div class=defun>
<!--l. 1575--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201029"></a><a 
 id="x100-201030r439"></a><b> nthcdr</b>  <i>n</i> <i>list</i>
<!--l. 1577--><p class="noindent" >(nthcdr <i>n</i> <i>list</i>)
выполняет для списка <i>lisp</i> операцию <tt><a 
href="clmse79.html#x99-200004r394">cdr</a></tt> <i>n</i> раз, и возвращает результат.
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nthcdr 0 &#x2019;(a b c)) <span class="math"> ⇒</span> (a b c)
</td></tr></table>
<!--l. 1582--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nthcdr 2 &#x2019;(a b c)) <span class="math"> ⇒</span> (c)</td></tr></table>
<!--l. 1583--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nthcdr 4 &#x2019;(a b c)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1585--><p class="indent" >
</div>
</div>
<!--l. 1586--><p class="noindent" >Другими словами, она возвращает <i>n</i>-нную <i>cdr</i> часть списка.
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(car (nthcdr n x)) <span class="math"> ≡</span> (nth n x)
</td></tr></table>
<!--l. 1590--><p class="indent" >
</div>
</div>
<!--l. 1591--><p class="noindent" >Аргумент <i>n</i> должен быть неотрицательным целым числом.
</div>
<div class=defun>
<!--l. 1594--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201031"></a><a 
 id="x100-201032r440"></a><b> last</b>  <i>list</i> &#x0026;optional  (<i>n</i> 1)
<!--l. 1596--><p class="noindent" ><tt><a 
href="#x100-201032r440">last</a></tt> возвращает последние <i>n</i> cons-ячеек списка <i>lisp</i>. Список <i>list</i> может быть
списком с точкой. Передача зацикленного списка является ошибкой.
                                                                          

                                                                          
<!--l. 1601--><p class="indent" >   Аргумент <i>n</i> должен быть неотрицательным целым числом. Если <i>n</i> равен
нулю, тогда возвращается последний атом списка <i>list</i>. Если <i>n</i> не меньше чем
количество cons-ячеек, то возвращается весь список.
<!--l. 1606--><p class="indent" >   Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c d))
</td></tr></table>
<!--l. 1608--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last x) <span class="math"> ⇒</span> (d)</td></tr></table>
<!--l. 1609--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(rplacd (last x) &#x2019;(e f))</td></tr></table>
<!--l. 1610--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">x <span class="math"> ⇒</span> &#x2019;(a b c d e f)</td></tr></table>
<!--l. 1611--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last x 3) <span class="math"> ⇒</span> (d e f)</td></tr></table>
<!--l. 1612--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;()) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1613--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d)) <span class="math"> ⇒</span> (c . d)</td></tr></table>
<!--l. 1614--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d) 0) <span class="math"> ⇒</span> d</td></tr></table>
<!--l. 1615--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d) 2) <span class="math"> ⇒</span> (b c . d)</td></tr></table>
<!--l. 1616--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d) 1729) <span class="math"> ⇒</span> (a b c . d)</td></tr></table>
<!--l. 1618--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 1621--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201033"></a><a 
 id="x100-201034r441"></a><b> list</b>  &#x0026;rest  <i>args</i>
<!--l. 1623--><p class="noindent" ><tt><a 
href="#x100-201034r441">list</a></tt> создаёт и возвращает список, составленный из аргументов. Например:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list 3 4 &#x2019;a (car &#x2019;(b . c)) (+ 6 -2)) <span class="math"> ⇒</span> (3 4 a b 4)
</td></tr></table>
<!--l. 1628--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list) <span class="math"> ⇒</span> ()
</td></tr></table>
<!--l. 1631--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list (list &#x2019;a &#x2019;b) (list &#x2019;c &#x2019;d &#x2019;e)) <span class="math"> ⇒</span> ((a b) (c d e))</td></tr></table>
<!--l. 1633--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 1636--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201035"></a><a 
 id="x100-201036r442"></a><b> list*</b>  <i>arg</i> &#x0026;rest  <i>others</i>
<!--l. 1638--><p class="noindent" ><tt><a 
href="#x100-201036r442">list*</a></tt> похожа на <tt><a 
href="#x100-201034r441">list</a></tt> за исключением того, что последняя <i>cons</i>-ячейка
создаваемого списка будет «с точкой». Последний аргумент используется как
последний элемент списка, а именно в последней cons-ячейки в <i>cdr</i> элементе.
Данный аргумент необязательно должен быть атомом, и если он не атом, то в
результате список будет иметь большую длину чем количество аргументов.
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list* &#x2019;a &#x2019;b &#x2019;c &#x2019;d) <span class="math"> ⇒</span> (a b c . d)
</td></tr></table>
<!--l. 1648--><p class="indent" >
</div>
</div>
<!--l. 1649--><p class="noindent" >Это то же, что и <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cons &#x2019;a (cons &#x2019;b (cons &#x2019;c &#x2019;d)))
</td></tr></table>
<!--l. 1652--><p class="indent" >
</div>
</div>
<!--l. 1653--><p class="noindent" >А также: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list* &#x2019;a &#x2019;b &#x2019;c &#x2019;(d e f)) <span class="math"> ⇒</span> (a b c d e f)
</td></tr></table>
<!--l. 1655--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list* x) <span class="math"> ≡</span> x</td></tr></table>
<!--l. 1657--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
</div>
<div class=defun>
<!--l. 1660--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201037"></a><a 
 id="x100-201038r443"></a><b> make-list</b>  <i>size</i> &#x0026;key  <i>:initial-element</i>
<!--l. 1662--><p class="noindent" >Функция создаёт и возвращает список содержащий количество <i>size</i>
элементов, каждый из которых будет инициализирован значением аргумента
:initial-element
(который по-умолчанию <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>). <i>size</i> должен быть неотрицательным целым
числом. Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(make-list 5) <span class="math"> ⇒</span> (<tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt> <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt> <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt> <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt> <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>)
</td></tr></table>
<!--l. 1669--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(make-list 3 :initial-element &#x2019;rah) <span class="math"> ⇒</span> (rah rah rah)</td></tr></table>
<!--l. 1671--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 1674--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201039"></a><a 
 id="x100-201040r444"></a><b> append</b>  &#x0026;rest  <i>lists</i>
<!--l. 1676--><p class="noindent" >Функция возвращает список содержащий все элементы указанных в
аргументах списков. Аргументы не разрушаются. Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(append &#x2019;(a b c) &#x2019;(d e f) &#x2019;() &#x2019;(g)) <span class="math"> ⇒</span> (a b c d e f g)
</td></tr></table>
<!--l. 1682--><p class="indent" >
</div>
</div>
<!--l. 1683--><p class="noindent" >Следует отметить, что <tt><a 
href="#x100-201040r444">append</a></tt> копирует верхний уровень всех переданных
списков <i>за исключением</i> последнего. Функция <tt><a 
href="clmse75.html#x94-195002r355">concatenate</a></tt> выполняет
похожую операцию, но всегда копирует все аргументы. Смотрите также
<tt><a 
href="#x100-201050r449">nconc</a></tt>, которая похожа на <tt><a 
href="#x100-201040r444">append</a></tt>, но разрушает все аргументы кроме
последнего.
<!--l. 1689--><p class="indent" >   Последний аргумент может быть любым Lisp объектом, и в этом случае
этот объект становится последним элементов итогового списка. Например,
                                                                          

                                                                          
(append &#x2019;(a b c) &#x2019;d)
<span class="math"> ⇒</span> (a b c . d)
.
<!--l. 1693--><p class="indent" >   (append <i>x</i> &#x2019;())
может быть использовано для копирования списка <i>x</i>, однако для этого
больше подходит функция <tt><a 
href="#x100-201042r445">copy-list</a></tt>.
</div>
<div class=defun>
<!--l. 1697--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201041"></a><a 
 id="x100-201042r445"></a><b> copy-list</b>  <i>list</i>
<!--l. 1699--><p class="noindent" >Функция возвращает список, который равен <tt><a 
href="clmse32.html#x43-77006r46">equal</a></tt> и в то же время не равен
<tt><a 
href="clmse32.html#x43-77002r44">eq</a></tt> списку <i>list</i>, Копируется только верхний уровень списка, то есть
<tt><a 
href="#x100-201042r445">copy-list</a></tt> копирует только в направлении <i>cdr</i> элементов, но не в
направлении <i>car</i> элементов. Если список «с точкой», то есть (cdr (last
<i>list</i>))
является не-<tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt> атомом, тогда итоговый список также будет «с точкой».
Смотрите также <tt><a 
href="clmse74.html#x93-194006r350">copy-seq</a></tt> и <tt><a 
href="#x100-201046r447">copy-tree</a></tt>.
</div>
<div class=defun>
<!--l. 1710--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201043"></a><a 
 id="x100-201044r446"></a><b> copy-alist</b>  <i>list</i>
<!--l. 1712--><p class="noindent" ><tt><a 
href="#x100-201044r446">copy-alist</a></tt> копирует ассоциативные списки. При этом, также как и в
<tt><a 
href="#x100-201042r445">copy-list</a></tt>, копируется только верхний уровень списка <i>lisp</i>. Кроме того,
каждый элемент списка <i>list</i>, являющийся в свою очередь cons-ячейкой,
заменяется новой cons-ячейкой с теми же <i>car</i> и <i>cons</i> элементами.
</div>
<div class=defun>
<!--l. 1720--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201045"></a><a 
 id="x100-201046r447"></a><b> copy-tree</b>  <i>object</i>
<!--l. 1722--><p class="noindent" ><tt><a 
href="#x100-201046r447">copy-tree</a></tt> копирует древовидно организованные cons-ячейки. Аргумент
<i>object</i> может быть любым Lisp&#x2019;овым объектом. Если он не является
cons-ячейкой, то ничего не произойдёт и данный объект будет возвращён в
качестве результата. В противном случае будет возвращена новая
cons-ячейка, в которой <i>car</i> и <i>cons</i> элементы будут результатами рекурсивных
вызовов <tt><a 
href="#x100-201046r447">copy-tree</a></tt>. Другими словами, все cons-ячейки будут рекурсивно
скопированы, и рекурсия будет останавливаться только на атомах.
</div>
<div class=defun>
<!--l. 1732--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201047"></a><a 
 id="x100-201048r448"></a><b> revappend</b>  <i>x</i> <i>y</i>
<!--l. 1734--><p class="noindent" >(revappend <i>x</i> <i>y</i>)
похожа на (append (reverse <i>x</i>) <i>y</i>)
                                                                          

                                                                          
за исключением того, что она потенциально более производительна.
Аргументы <i>x</i> и <i>y</i> должны быть списками. Аргумент <i>x</i> копируется
(не разрушается) в отличие от <tt><a 
href="#x100-201052r450">nreconc</a></tt>, которая разрушает первый
аргумент.
</div>
<div class=defun>
<!--l. 1742--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201049"></a><a 
 id="x100-201050r449"></a><b> nconc</b>  &#x0026;rest  <i>lists</i>
<!--l. 1744--><p class="noindent" >В качестве аргументов <tt><a 
href="#x100-201050r449">nconc</a></tt> принимает списки. Функция соединяет списки и
возвращает результат. При этом аргументы изменяются, а не копируются. (В
сравнении с <tt><a 
href="#x100-201040r444">append</a></tt>, которая копирует аргументы, а не разрушает их.)
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c))
</td></tr></table>
<!--l. 1750--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq y &#x2019;(d e f))</td></tr></table>
<!--l. 1751--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nconc x y) <span class="math"> ⇒</span> (a b c d e f)</td></tr></table>
<!--l. 1752--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">x <span class="math"> ⇒</span> (a b c d e f)</td></tr></table>
<!--l. 1754--><p class="indent" >
</div>
</div>
<!--l. 1755--><p class="noindent" >Следует отметить, что в примере, значение <tt>x</tt> отличается от первоначального,
так как последняя cons-ячейка была изменена с помощью <tt><a 
href="clmse81.html#x101-205004r458">rplacd</a></tt> значением
<tt>y</tt>. Если сейчас выполнить (nconc x y)
ещё раз, тогда часть списка зациклится: (a b c d e f d e f d e f
...)
, и так до бесконечности. Если <tt>*print-circle*</tt> не равен <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>, тогда вывод
списка будет таким: (a b c . #1=(d e f . #1#))
.
<!--l. 1763--><p class="indent" >   Вызов <tt><a 
href="#x100-201050r449">nconc</a></tt>, совпадающий с наиболее близким шаблоном выражения в
левой части приводит к эквивалентным побочным действиям, как в правой
части таблицы.
<div class="flushleft" 
>
<!--l. 1766--><p class="noindent" >
                                                                          

                                                                          
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >(nconc)            </td><td align="left" >nil     ;Нет побочных эффектов</td>
</tr><tr><td align="left" >(nconc nil . <i>r</i>)    </td><td align="left" >(nconc . <i>r</i>)                   </td>
</tr><tr><td align="left" >(nconc <i>x</i>)          </td><td align="left" ><i>x</i>                                           </td>
</tr><tr><td align="left" >(nconc <i>x</i> <i>y</i>)        </td><td align="left" >(let ((p <i>x</i>) (q <i>y</i>))            </td>
</tr><tr><td align="left" >                   </td><td align="left" >  (rplacd (last p) q)          </td>
</tr><tr><td align="left" >                   </td><td align="left" >  p)                           </td>
</tr><tr><td align="left" >(nconc <i>x</i> <i>y</i> . <i>r</i>)   </td><td align="left" >(nconc (nconc <i>x</i> <i>y</i>) . <i>r</i>)      </td></tr></table>
</div></div>
</div>
                                                                          

                                                                          
<div class=defun>
<!--l. 1782--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-201051"></a><a 
 id="x100-201052r450"></a><b> nreconc</b>  <i>x</i> <i>y</i>
<!--l. 1784--><p class="noindent" >(nreconc <i>x</i> <i>y</i>)
похожа на (nconc (nreverse <i>x</i>) <i>y</i>)
за исключением того, что она потенциально эффективнее. Оба аргумента
должны быть списками. Аргумент <i>x</i> разрушается. Сравните с <tt><a 
href="#x100-201048r448">revappend</a></tt>.
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq planets &#x2019;(jupiter mars earth venus mercury))
</td></tr></table>
<!--l. 1792--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq more-planets &#x2019;(saturn uranus pluto neptune))</td></tr></table>
<!--l. 1793--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nreconc more-planets planets)</td></tr></table>
<!--l. 1794--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:585;" 
class="tabbing"></td><td  
class="tabbing-right">       <span class="math"> ⇒</span> (neptune pluto uranus saturn jupiter mars earth venus mercury)</td></tr></table>
<!--l. 1795--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  теперь значение <tt>more-planets</tt> точно не определено</td></tr></table>
<!--l. 1797--><p class="indent" >
</div>
</div>
<!--l. 1799--><p class="indent" >   Поведение (nreconc <i>x</i> <i>y</i>)
совпадает с поведением (nconc (nreverse <i>x</i>) <i>y</i>)
в части побочных эффектов.
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> push </b><a 
 id="dx100-201053"></a><a 
 id="x100-201054r451"></a> item place
</td></tr></table>
<!--l. 1805--><p class="indent" >
</div>
                                                                          

                                                                          
<!--l. 1805--><p class="noindent" ><span class="paragraphHead"><a 
href="#x100-20200015.2" id="x100-20200015.2"></a></span>
   Форма <i>place</i> должна быть именем обобщённое переменной, содержащей
список. <i>item</i> может указывать на любой Lisp&#x2019;овый объект. <i>item</i> вставляется в
начало списка и данный список возвращается в качестве результата. Форма
<i>place</i> может быть любой формой, которая подходит для <tt><a 
href="clmse35.html#x47-89002r64">setf</a></tt>. Если
рассматривать список как стек, тогда <tt><a 
href="#x100-201054r451">push</a></tt> добавляет элемент на вершину
стека. Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a (b c) d))
</td></tr></table>
<!--l. 1815--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(push 5 (cadr x)) <span class="math"> ⇒</span> (5 b c) и теперь x <span class="math"> ⇒</span> (a (5 b c) d)</td></tr></table>
<!--l. 1817--><p class="indent" >
</div>
</div>
<!--l. 1818--><p class="noindent" >Действие от <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(push <i>item</i> <i>place</i>)
</td></tr></table>
<!--l. 1821--><p class="indent" >
</div>
</div>
<!--l. 1822--><p class="noindent" >эквивалентно действию <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf <i>place</i> (cons <i>item</i> <i>place</i>))
</td></tr></table>
<!--l. 1825--><p class="indent" >
</div>
</div>
<!--l. 1826--><p class="noindent" >за исключением того, что <tt><a 
href="#x100-201054r451">push</a></tt> выполняет форму <i>place</i> только один раз, а не
три. Более того, в для некоторых форм <i>place</i> <tt><a 
href="#x100-201054r451">push</a></tt> может быть эффективнее
чем версия с <tt><a 
href="clmse35.html#x47-89002r64">setf</a></tt>.
<!--l. 1831--><p class="indent" >   Следует отметить, что <i>item</i> вычисляется прежде чем вычисляется
<i>place</i>.
</div>
                                                                          

                                                                          
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> pushnew </b><a 
 id="dx100-202001"></a><a 
 id="x100-202002r452"></a> item place &#x0026;key :test :test-not :key
</td></tr></table>
<!--l. 1837--><p class="indent" >
</div>
<!--l. 1837--><p class="noindent" ><span class="paragraphHead"><a 
href="#x100-20300015.2" id="x100-20300015.2"></a></span>
   Форма <i>place</i> должна быть именем обобщённое переменной, содержащей
список. <i>item</i> может указывать на любой Lisp&#x2019;овый объект. Если <i>item</i> не
содержится в списке (этот факт устанавливается с помощью предиката
переданного в :test
, который по-умолчанию <tt><a 
href="clmse32.html#x43-77004r45">eql</a></tt>), тогда <i>item</i> вставляется в начало списка и
данный список возвращается в качестве результата. В противном
случае возвращается исходный список. Форма <i>place</i> может быть любой
формой, которая подходит для <tt><a 
href="clmse35.html#x47-89002r64">setf</a></tt>. Если рассматривать список как
множество, тогда <tt><a 
href="#x100-202002r452">pushnew</a></tt> добавляет элемент в множество. Смотрите
<tt><a 
href="clmse83.html#x103-207010r471">adjoin</a></tt>.
<!--l. 1848--><p class="indent" >   Именованные параметры <tt><a 
href="#x100-202002r452">pushnew</a></tt> имеют тот же смысл, что и в функциях
для последовательностей. Смотрите главу <a 
href="clmch14.html#x92-19300014">14<!--tex4ht:ref: KSEQUE --></a>. По сути, данные аргументы
идентичны аргументам <tt><a 
href="clmse83.html#x103-207010r471">adjoin</a></tt>.
<tt>
<!--l. 1852--><p class="indent" >   <a 
href="#x100-202002r452">pushnew</a></tt> возвращает модифицированное содержимое переменной <i>place</i>.
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a (b c) d))
</td></tr></table>
<!--l. 1855--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pushnew 5 (cadr x)) <span class="math"> ⇒</span> (5 b c) и теперь x <span class="math"> ⇒</span> (a (5 b c) d)</td></tr></table>
<!--l. 1856--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pushnew &#x2019;b (cadr x)) <span class="math"> ⇒</span> (5 b c) и <tt>x</tt> не меняется</td></tr></table>
<!--l. 1858--><p class="indent" >
</div>
</div>
<!--l. 1859--><p class="noindent" >Действие от <div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pushnew <i>item</i> <i>place</i> :test <i>p</i>)
</td></tr></table>
<!--l. 1862--><p class="indent" >
</div>
</div>
<!--l. 1863--><p class="noindent" >эквивалентно действию <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf <i>place</i> (adjoin <i>item</i> <i>place</i> :test <i>p</i>))
</td></tr></table>
<!--l. 1866--><p class="indent" >
</div>
</div>
<!--l. 1867--><p class="noindent" >за исключением того, что <tt><a 
href="#x100-202002r452">pushnew</a></tt> выполняет форму <i>place</i> только один раз, а не
три. Более того, в для некоторых форм <i>place</i> <tt><a 
href="#x100-202002r452">pushnew</a></tt> может быть
эффективнее чем версия с <tt><a 
href="clmse35.html#x47-89002r64">setf</a></tt>.
<!--l. 1872--><p class="indent" >   Следует отметить, что <i>item</i> вычисляется прежде чем вычисляется
<i>place</i>.
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> pop </b><a 
 id="dx100-203001"></a><a 
 id="x100-203002r453"></a> place
</td></tr></table>
<!--l. 1878--><p class="indent" >
</div>
<!--l. 1878--><p class="noindent" ><span class="paragraphHead"><a 
href="#x100-20400015.2" id="x100-20400015.2"></a></span>
   Форма <i>place</i> должна быть именем обобщённое переменной, содержащей
список. Результатом <tt><a 
href="#x100-203002r453">pop</a></tt> является результат <tt><a 
href="clmse79.html#x99-200002r393">car</a></tt> функции для переданного
списка, и побочным эффектом является то, что в обобщённую переменную
сохраняется результат <tt><a 
href="clmse79.html#x99-200004r394">cdr</a></tt> для списка. Форма <i>place</i> может быть любой
                                                                          

                                                                          
формой, которая подходит для <tt><a 
href="clmse35.html#x47-89002r64">setf</a></tt>. Если рассматривать исходный список
как стек, то <tt><a 
href="#x100-203002r453">pop</a></tt> достаёт элемент из вершины стека и возвращает его.
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq stack &#x2019;(a b c))
</td></tr></table>
<!--l. 1888--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pop stack) <span class="math"> ⇒</span> a and now stack <span class="math"> ⇒</span> (b c)</td></tr></table>
<!--l. 1890--><p class="indent" >
</div>
</div>
<!--l. 1891--><p class="noindent" >Действия от (pop <i>place</i>)
эквивалентно <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog1 (car <i>place</i>) (setf <i>place</i> (cdr <i>place</i>)))
</td></tr></table>
<!--l. 1894--><p class="indent" >
</div>
</div>
<!--l. 1895--><p class="noindent" >за исключением того, что <tt><a 
href="#x100-203002r453">pop</a></tt> выполняет форму <i>place</i> только один раз, а не три.
Более того, в для некоторых форм <i>place</i> <tt><a 
href="#x100-203002r453">pop</a></tt> может быть эффективнее чем
версия с <tt><a 
href="clmse35.html#x47-89002r64">setf</a></tt>.
</div>
<div class=defun>
<!--l. 1901--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-204001"></a><a 
 id="x100-204002r454"></a><b> butlast</b>  <i>list</i> &#x0026;optional  <i>n</i>
<!--l. 1903--><p class="noindent" >Функция создаёт и возвращает список с такими же элементами кроме <i>n</i>
последних, что и в списке <i>list</i>. <i>n</i> по-умолчанию равно 1. Аргумент не
разрушается. Если длина списка <i>list</i> меньше чем <i>n</i>, тогда возвращается ().
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast &#x2019;(a b c d)) <span class="math"> ⇒</span> (a b c)
</td></tr></table>
<!--l. 1911--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast &#x2019;((a b) (c d))) <span class="math"> ⇒</span> ((a b))</td></tr></table>
<!--l. 1912--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast &#x2019;(a)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1913--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast nil) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1915--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 1916--><p class="noindent" >Имя функции образовано от фразы «all elements but the last» («все элементы
кроме последних»).
</div>
<div class=defun>
<!--l. 1920--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-204003"></a><a 
 id="x100-204004r455"></a><b> nbutlast</b>  <i>list</i> &#x0026;optional  <i>n</i>
<!--l. 1922--><p class="noindent" >Это деструктивная версия <tt><a 
href="#x100-204002r454">butlast</a></tt>. Данная функция изменяет <i>cdr</i> элемент
cons-ячейки на <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>. Искомая cons-ячейка находится на позиции <i>n</i>+1 с конца
списка. Если длина списка <i>list</i> меньше чем <i>n</i>, тогда возвращается (), и
аргумент не модифицируется. (Таким образом можно написать (setq a
(nbutlast a))
, а не (nbutlast a)
.) Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq foo &#x2019;(a b c d))
</td></tr></table>
<!--l. 1930--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nbutlast foo) <span class="math"> ⇒</span> (a b c)</td></tr></table>
<!--l. 1931--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">foo <span class="math"> ⇒</span> (a b c)</td></tr></table>
<!--l. 1932--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nbutlast &#x2019;(a)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1933--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nbutlast &#x2019;<tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1935--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 1938--><p class="noindent" ><i>[Функция]</i><a 
 id="dx100-204005"></a><a 
 id="x100-204006r456"></a><b> ldiﬀ</b>  <i>list</i> <i>sublist</i>
<!--l. 1940--><p class="noindent" >Аргумент <i>list</i> должен быть списком, и <i>sublist</i> должен быть подсписком <i>list</i>.
<tt><a 
href="#x100-204006r456">ldiff</a></tt> (означает «list diﬀerence») возвращает новый список, элементы
которого содержат все элементы списка <i>list</i> до подсписка <i>sublist</i>. Если <i>sublist</i>
не является частью <i>list</i> (или в частности равен <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>), тогда возвращается
копия всего списка <i>list</i>. Аргумент <i>list</i> не разрушается. Например:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c d e))
</td></tr></table>
                                                                          

                                                                          
<!--l. 1950--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq y (cdddr x)) <span class="math"> ⇒</span> (d e)</td></tr></table>
<!--l. 1951--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ldiﬀ x y) <span class="math"> ⇒</span> (a b c)</td></tr></table>
<!--l. 1952--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">но (ldiﬀ &#x2019;(a b c d) &#x2019;(c d)) <span class="math"> ⇒</span> (a b c d)
</td></tr></table>
<!--l. 1954--><p class="indent" >
</div>
</div>
<!--l. 1955--><p class="noindent" >так как подсписок не равен <tt><a 
href="clmse32.html#x43-77002r44">eq</a></tt> ни одной части списка.
</div>
                                                                          

                                                                          
   <!--l. 1958--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse81.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse79.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse79.html#tailclmse79.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse80.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse80.html" >Вверх</a><tt>&#x003E;</tt></p></div>
<!--l. 1958--><p class="indent" >   <a 
 id="tailclmse80.html"></a>  </div> </div> 
</body></html> 
