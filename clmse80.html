<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Модификация последовательностей</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-16 23:44:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="cltl2ed.css"></head><body 
>
<!--l. 1939--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse81.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse79.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse79.html#tailclmse79.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse80.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch14.html#clmse80.html" >Наверх</a><tt>&#x003E;</tt></div><h3 class="sectionHead"><span class="titlemark">14.3   </span> <a 
href="clm.html#QQ2-99-1415" id="x99-138500014.3">Модификация
последовательностей</a></h3>
<!--l. 1941--><p class="noindent" >Каждая из этих функций или модифицирует последовательность, или
возвращает модифицированную копию.
<div class="defun">
<!--l. 1944--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx99-1385001"></a><a 
 id="x99-1385002r383"></a><b> ﬁll</b>  <i>sequence</i> <i>item</i> &#x0026;key  <i>:start</i> <i>:end</i>
</div>
<!--l. 1946--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-138600014.3" id="x99-138600014.3"></a></span>
   Функция модифицирует последовательность, заменяя каждый элемент
подпоследовательности, обозначенной с помощью параметров <tt>:start</tt> и <tt>:end</tt>,
объектом <i>item</i>. <i>item</i> может быть любым Lisp&#x2019;овыми объектом, подходящим
для типа элементов последовательности <i>sequence</i>. Объект <i>item</i> сохраняется в
всех указанных компонентах последовательности <i>sequence</i>, начиная с позиции
<tt>:start</tt> (по-умолчанию равна 0) и заканчивая невключительно позицией <tt>:end</tt>
(по-умолчанию равна длине последовательности). <tt>fill</tt> возвращает
изменённую последовательность. Например: <div class="lisp"><div class="tabbing">
(setq x (vector &#x2019;a &#x2019;b &#x2019;c &#x2019;d &#x2019;e)) <span class="math"> ⇒</span> #(a b c d e)
   <br>                                      (ﬁll x &#x2019;z <tt>:start</tt> 1 <tt>:end</tt> 3) <span class="math"> ⇒</span> #(a z z d e)<br>
  and now x <span class="math"> ⇒</span> #(a z z d e)<br>                   (ﬁll x &#x2019;p) <span class="math"> ⇒</span> #(p p p p p)<br>
  and now x <span class="math"> ⇒</span> #(p p p p p)<br>
<!--l. 1962--><p class="noindent" ></div>
<!--l. 1962--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-138700014.3" id="x99-138700014.3"></a></span>
<!--l. 1962--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-138800014.3" id="x99-138800014.3"></a></span>
</div>
</div>
                                                                          

                                                                          
<div class="defun">
<!--l. 1965--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx99-1388001"></a><a 
 id="x99-1388002r384"></a><b> replace</b>  <i>sequence1</i> <i>sequence2</i> &#x0026;key  <i>:start1</i> <i>:end1</i> <i>:start2 :end2</i>
</div>
<!--l. 1967--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-138900014.3" id="x99-138900014.3"></a></span>
   Функция модифицирует последовательность <i>sequence1</i> копируя в неё
элементы из последовательности <i>sequence2</i>. Элементы <i>sequence2</i> для
принадлежать типу элементов <i>sequence1</i>. Подпоследовательность <i>sequence2</i>,
указанная с помощью параметров <tt>:start2</tt> и <tt>:end2</tt>, копируется в
подпоследовательность <i>sequence2</i>, указанную с помощью параметров <tt>:start1</tt> и
<tt>:end1</tt>. Аргументы <tt>:start1</tt> и <tt>:start2</tt> по-умолчанию равны нулю. Аргументы
<tt>:end1</tt> и <tt>:end2</tt> по-умолчанию <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>, что означает длины соответствующих
последовательностей. Если указанные подпоследовательности имеют
не равные длины, тогда для наиболее короткая из них определяет
копируемые элементы. Лишние элементы последовательностей функцией не
обрабатываются. Количество копируемых элементов можно вычислить так:
<div class="lisp"><div class="tabbing">
(min (- <i>end1</i> <i>start1</i>) (- <i>end2</i> <i>start2</i>))
   <br>
<!--l. 1982--><p class="noindent" ></div>
<!--l. 1982--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139000014.3" id="x99-139000014.3"></a></span>
<!--l. 1982--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139100014.3" id="x99-139100014.3"></a></span>
</div>
<!--l. 1983--><p class="indent" >   Значением функции <tt><a 
href="clmli7.html#x196-3479791r791">replace</a></tt> является модифицированная последовательность
<i>sequence1</i>.
<!--l. 1986--><p class="indent" >   Если обе последовательности равны (<tt><a 
href="clmli7.html#x196-3479367r367">eq</a></tt>), и интервал для модификации
перекрывается с исходным интервалом, тогда поведение такое, как если бы
все исходные данные сохранялись во временном месте, а затем сохранялись в
итоговый интервал. Однако, если последовательности не равны, но итоговый
интервал пересекается с исходным (возможно, при использовании
<i>соединённых</i> массивов), тогда после выполнения <tt><a 
href="clmli7.html#x196-3479791r791">replace</a></tt>, итоговое
                                                                          

                                                                          
содержимое не определено.
</div>
<div class="defun">
<!--l. 1995--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx99-1391001"></a><a 
 id="x99-1391002r385"></a><b> remove</b>  <i>item</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:test</i> <i>:test-not</i> <i>:start</i> <i>:end</i>
<i>:count</i> <i>:key</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx99-1391003"></a><a 
 id="x99-1391004r386"></a><b> remove-if</b>  <i>predicate</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:start</i> <i>:end</i> <i>:count</i>
<i>:key</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx99-1391005"></a><a 
 id="x99-1391006r387"></a><b> remove-if-not</b>  <i>predicate</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:start</i> <i>:end</i>
<i>:count</i> <i>:key</i>
</div>
<!--l. 1999--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139200014.3" id="x99-139200014.3"></a></span>
   Результатом является последовательность того же типа, что и
последовательность <i>sequence</i>. Однако, итоговая последовательность не будет
содержать элементы в интервале <tt>:start</tt>-<tt>:end</tt>, которые удовлетворяли
условию. Результат является копией входящей последовательности <i>sequence</i>
без исключённых элементов. Неудалённые элементы сохраняются в таком же
порядке.
<!--l. 2006--><p class="indent" >   Если указан аргумент <tt>:count</tt>, то удаляться будет только это количество.
Если количество удаляемых элементов превышает параметр, тогда будут
удалены только самые левые в количестве равном <tt>:count</tt>.
<div class="new">
<!--l. 2011--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx99-1392001"></a>to clarify that the <tt>:count</tt> argument must be
either <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt> or an integer, and that supplying a negative integer produces the same
behavior as supplying zero.
</div>
<!--l. 2018--><p class="indent" >   Если при использовании <tt>:count</tt> для параметра <tt>:from-end</tt> указано не-<tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>
значение, тогда удаление элементов будет происходить справа в количестве
<tt>:count</tt>. Например: <div class="lisp"><div class="tabbing">
(remove 4 &#x2019;(1 2 4 1 3 4 5)) <span class="math"> ⇒</span> (1 2 1 3 5)
   <br>                         (remove 4 &#x2019;(1 2 4 1 3 4 5) <tt>:count</tt> 1) <span class="math"> ⇒</span> (1 2 1 3 4 5)<br>
(remove 4 &#x2019;(1 2 4 1 3 4 5) <tt>:count</tt> 1 <tt>:from-end</tt> t)<br>
   <span class="math"> ⇒</span> (1 2 4 1 3 5)<br>    (remove 3 &#x2019;(1 2 4 1 3 4 5) <tt>:test</tt> #&#x2019;&#x003E;) <span class="math"> ⇒</span> (4 3 4 5)<br>
(remove-if #&#x2019;oddp &#x2019;(1 2 4 1 3 4 5)) <span class="math"> ⇒</span> (2 4 4)<br>
(remove-if #&#x2019;evenp &#x2019;(1 2 4 1 3 4 5) <tt>:count</tt> 1 <tt>:from-end</tt> t)<br>
                                                                          

                                                                          
   <span class="math"> ⇒</span> (1 2 4 1 3 5)<br>
<!--l. 2031--><p class="noindent" ></div>
<!--l. 2031--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139300014.3" id="x99-139300014.3"></a></span>
<!--l. 2031--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139400014.3" id="x99-139400014.3"></a></span>
</div>
<!--l. 2032--><p class="indent" >   Результат <tt><a 
href="clmli7.html#x196-3479782r782">remove</a></tt> может быть <i>соединён</i> с исходной последовательностью.
Также результат может быть равен <tt><a 
href="clmli7.html#x196-3479367r367">eq</a></tt> исходной последовательности, если ни
одного элементы не было удалено.
<div class="new">
<!--l. 2037--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx99-1394001"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-7040007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
</div>
<div class="defun">
<!--l. 2043--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx99-1394002"></a><a 
 id="x99-1394003r388"></a><b> delete</b>  <i>item</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:test</i> <i>:test-not</i>
<i>:start :end :count :key</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx99-1394004"></a><a 
 id="x99-1394005r389"></a><b> delete-if</b>  <i>predicate</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:start :end :count :key</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx99-1394006"></a><a 
 id="x99-1394007r390"></a><b> delete-if-not</b>  <i>predicate</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:start :end :count :key</i>
</div>
<!--l. 2047--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139500014.3" id="x99-139500014.3"></a></span>
   Данная функция в отличие от <tt><a 
href="clmli7.html#x196-3479782r782">remove</a></tt> модифицирует исходную
последовательность. Результатом является последовательность того же типа,
что и последовательность <i>sequence</i>. Однако, итоговая последовательность не
будет содержать элементы в интервале <tt>:start</tt>-<tt>:end</tt>, которые удовлетворяли
условию. Результат является копией входящей последовательности <i>sequence</i>
без исключённых элементов. Неудалённые элементы сохраняются в таком же
порядке. Последовательность <i>sequence</i> может быть модифицирована, поэтому
результат может быть равен <tt><a 
href="clmli7.html#x196-3479367r367">eq</a></tt> или нет исходной последовательности.
<!--l. 2057--><p class="indent" >   Если указан аргумент <tt>:count</tt>, то удаляться будет только это количество.
Если количество удаляемых элементов превышает параметр, тогда будут
удалены только самые левые в количестве равном <tt>:count</tt>.
<div class="new">
<!--l. 2062--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx99-1395001"></a>to clarify that the <tt>:count</tt> argument must be
either <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt> or an integer, and that supplying a negative integer produces the same
                                                                          

                                                                          
behavior as supplying zero.
</div>
<!--l. 2069--><p class="indent" >   Если при использовании <tt>:count</tt> для параметра <tt>:from-end</tt> указано не-<tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>
значение, тогда удаление элементов будет происходить справа в количестве
<tt>:count</tt>. Например: <div class="lisp"><div class="tabbing">
(delete 4 &#x2019;(1 2 4 1 3 4 5)) <span class="math"> ⇒</span> (1 2 1 3 5)
   <br>                          (delete 4 &#x2019;(1 2 4 1 3 4 5) <tt>:count</tt> 1) <span class="math"> ⇒</span> (1 2 1 3 4 5)<br>
(delete 4 &#x2019;(1 2 4 1 3 4 5) <tt>:count</tt> 1 <tt>:from-end</tt> t)<br>
   <span class="math"> ⇒</span> (1 2 4 1 3 5)<br>     (delete 3 &#x2019;(1 2 4 1 3 4 5) <tt>:test</tt> #&#x2019;&#x003E;) <span class="math"> ⇒</span> (4 3 4 5)<br>
(delete-if #&#x2019;oddp &#x2019;(1 2 4 1 3 4 5)) <span class="math"> ⇒</span> (2 4 4)<br>
(delete-if #&#x2019;evenp &#x2019;(1 2 4 1 3 4 5) <tt>:count</tt> 1 <tt>:from-end</tt> t)<br>
   <span class="math"> ⇒</span> (1 2 4 1 3 5)<br>
<!--l. 2082--><p class="noindent" ></div>
<!--l. 2082--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139600014.3" id="x99-139600014.3"></a></span>
<!--l. 2082--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139700014.3" id="x99-139700014.3"></a></span>
</div>
<div class="new">
<!--l. 2085--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx99-1397001"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-7040007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
<div class="newer">
<!--l. 2091--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx99-1397002"></a>to clarify the permissible side eﬀects of
certain operations. When the <i>sequence</i> is a list, <tt><a 
href="clmli7.html#x196-3479322r322">delete</a></tt> is permitted to
perform a <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt> on any part, <i>car</i> or <i>cdr</i>, of the top-level list structure of
that list. When the <i>sequence</i> is an array, <tt><a 
href="clmli7.html#x196-3479322r322">delete</a></tt> is permitted to alter
the dimensions of the given array and to slide some of its elements into
new positions without permuting them in order to produce the resulting
array.
<!--l. 2101--><p class="indent" >   Furthermore, <tt>(delete-if <i>predicate</i> <i>sequence</i> ...)</tt> is required to behave
exactly like <div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(delete nil <i>sequence</i>
   <br>                                               :test #&#x2019;(lambda (unused item)<br>
                   (declare (ignore unused))<br>
                   (funcall <i>predicate</i> item))<br>                        ...)<br>
<!--l. 2109--><p class="noindent" ></div>
<!--l. 2109--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139800014.3" id="x99-139800014.3"></a></span>
<!--l. 2109--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-139900014.3" id="x99-139900014.3"></a></span>
</div>
</div>
</div>
<div class="defun">
<!--l. 2113--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx99-1399001"></a><a 
 id="x99-1399002r391"></a><b> remove-duplicates</b>  <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:test</i> <i>:test-not</i> <i>:start</i>
<i>:end</i> <i>:key</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx99-1399003"></a><a 
 id="x99-1399004r392"></a><b> delete-duplicates</b>  <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:test</i> <i>:test-not</i> <i>:start</i>
<i>:end</i> <i>:key</i>
</div>
<!--l. 2116--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-140000014.3" id="x99-140000014.3"></a></span>
   Функция попарно сравнивает элементы последовательности <i>sequence</i>,
и если они равны, тогда первый из них удаляется (если параметр
<tt>:from-end</tt> равен истине, то удаляется последний). Результат является
последовательностью того же типа, что и исходная, с удалёнными
повторяющимися элементами. Порядок следования элементов в итоге такой
же как в исходной последовательности.
<tt>
<!--l. 2124--><p class="indent" >   <a 
href="clmli7.html#x196-3479783r783">remove-duplicates</a></tt> является не модифицирующей версией этой
операции. Результат <tt><a 
href="clmli7.html#x196-3479783r783">remove-duplicates</a></tt> может быть <i>соединён</i> с исходной
последовательностью. Также результат может быть равен <tt><a 
href="clmli7.html#x196-3479367r367">eq</a></tt> исходной
последовательности, если ни одного элементы не было удалено.
<tt>
<!--l. 2129--><p class="indent" >   <a 
href="clmli7.html#x196-3479323r323">delete-duplicates</a></tt> может модифицировать аргумент <i>sequence</i>.
<!--l. 2131--><p class="indent" >   Например: <div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(remove-duplicates &#x2019;(a b c b d d e)) <span class="math"> ⇒</span> (a c b d e)
   <br>           (remove-duplicates &#x2019;(a b c b d d e) <tt>:from-end</tt> t) <span class="math"> ⇒</span> (a b c d e)<br>
(remove-duplicates &#x2019;((foo #\a) (bar #\%) (baz #\A))<br>
                   <tt>:test</tt> #&#x2019;char-equal <tt>:key</tt> #&#x2019;cadr)<br>
   <span class="math"> ⇒</span> ((bar #\%) (baz #\A))<br>
(remove-duplicates &#x2019;((foo #\a) (bar #\%) (baz #\A))<br>
                   <tt>:test</tt> #&#x2019;char-equal <tt>:key</tt> #&#x2019;cadr <tt>:from-end</tt> t)<br>
   <span class="math"> ⇒</span> ((foo #\a) (bar #\%))<br>
<!--l. 2141--><p class="noindent" ></div>
<!--l. 2141--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-140100014.3" id="x99-140100014.3"></a></span>
<!--l. 2141--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-140200014.3" id="x99-140200014.3"></a></span>
</div>
<!--l. 2143--><p class="indent" >   Эти функции полезны для преобразования последовательности в
каноническую форму представления множества.
<div class="new">
<!--l. 2147--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx99-1402001"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-7040007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
<div class="newer">
<!--l. 2153--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx99-1402002"></a>to clarify the permissible side eﬀects of certain
operations. When the <i>sequence</i> is a list, <tt><a 
href="clmli7.html#x196-3479323r323">delete-duplicates</a></tt> is permitted to
perform a <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt> on any part, <i>car</i> or <i>cdr</i>, of the top-level list structure of that list.
When the <i>sequence</i> is an array, <tt><a 
href="clmli7.html#x196-3479323r323">delete-duplicates</a></tt> is permitted to alter
the dimensions of the given array and to slide some of its elements into
new positions without permuting them in order to produce the resulting
array.
</div>
</div>
<div class="defun">
<!--l. 2165--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx99-1402003"></a><a 
 id="x99-1402004r393"></a><b> substitute</b>  <i>newitem</i> <i>olditem</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:test</i>
<i>:test-not</i> <i>:start</i> <i>:end</i> <i>:count</i> <i>:key</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx99-1402005"></a><a 
 id="x99-1402006r394"></a><b> substitute-if</b>  <i>newitem</i> <i>test</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:start :end</i>
<i>:count</i> <i>:key</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx99-1402007"></a><a 
 id="x99-1402008r395"></a><b> substitute-if-not</b>  <i>newitem</i> <i>test</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:start</i>
<i>:end</i> <i>:count</i> <i>:key</i>
</div>
<!--l. 2169--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-140300014.3" id="x99-140300014.3"></a></span>
   Результатом является последовательность такого же типа что и исходная
<i>sequence</i> за исключением того, что удовлетворяющие условию элементы в
интервале <tt>:start</tt>-<tt>:end</tt> будут заменены на объект <i>newitem</i>. Эта операция
создаёт копию исходной последовательности с некоторыми изменёнными
элементами.
<!--l. 2176--><p class="indent" >   Если указан аргумент <tt>:count</tt>, то изменяться будет только это
количество элементов. Если количество изменяемых элементов превышает
параметр, тогда будут удалены только самые левые в количестве равном
<tt>:count</tt>.
<div class="new">
<!--l. 2182--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx99-1403001"></a>to clarify that the <tt>:count</tt> argument must be
either <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt> or an integer, and that supplying a negative integer produces the same
behavior as supplying zero.
</div>
<!--l. 2189--><p class="indent" >   Если при использовании <tt>:count</tt> для параметра <tt>:from-end</tt> указано не-<tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>
значение, тогда изменение элементов будет происходить справа в количестве
<tt>:count</tt>. Например: <div class="lisp"><div class="tabbing">
(substitute 9 4 &#x2019;(1 2 4 1 3 4 5)) <span class="math"> ⇒</span> (1 2 9 1 3 9 5)
   <br>                (substitute 9 4 &#x2019;(1 2 4 1 3 4 5) <tt>:count</tt> 1) <span class="math"> ⇒</span> (1 2 9 1 3 4 5)<br>
(substitute 9 4 &#x2019;(1 2 4 1 3 4 5) <tt>:count</tt> 1 <tt>:from-end</tt> t)<br>
   <span class="math"> ⇒</span> (1 2 4 1 3 9 5)<br>
(substitute 9 3 &#x2019;(1 2 4 1 3 4 5) <tt>:test</tt> #&#x2019;&#x003E;) <span class="math"> ⇒</span> (9 9 4 9 3 4 5)<br>
(substitute-if 9 #&#x2019;oddp &#x2019;(1 2 4 1 3 4 5)) <span class="math"> ⇒</span> (9 2 4 9 9 4 9)<br>
(substitute-if 9 #&#x2019;evenp &#x2019;(1 2 4 1 3 4 5) <tt>:count</tt> 1 <tt>:from-end</tt> t)<br>
   <span class="math"> ⇒</span> (1 2 4 1 3 9 5)<br>
<!--l. 2202--><p class="noindent" ></div>
<!--l. 2202--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-140400014.3" id="x99-140400014.3"></a></span>
                                                                          

                                                                          
<!--l. 2202--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-140500014.3" id="x99-140500014.3"></a></span>
</div>
<!--l. 2203--><p class="indent" >   Результат <tt><a 
href="clmli7.html#x196-3479918r918">substitute</a></tt> может быть <i>соединён</i> с исходной последовательностью.
Также результат может быть равен <tt><a 
href="clmli7.html#x196-3479367r367">eq</a></tt> исходной последовательности, если ни
одного элементы не было изменено.
<!--l. 2207--><p class="indent" >   Смотрите также <tt><a 
href="clmli7.html#x196-3479915r915">subst</a></tt>, которая осуществляет замену в древовидной
структуре.
<div class="new">
<!--l. 2210--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx99-1405001"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-7040007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
</div>
<div class="defun">
<!--l. 2216--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx99-1405002"></a><a 
 id="x99-1405003r396"></a><b> nsubstitute</b>  <i>newitem</i> <i>olditem</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:test</i>
<i>:test-not</i> <i>:start</i> <i>:end</i> <i>:count</i> <i>:key</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx99-1405004"></a><a 
 id="x99-1405005r397"></a><b> nsubstitute-if</b>  <i>newitem</i> <i>test</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:start :end</i>
<i>:count</i> <i>:key</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx99-1405006"></a><a 
 id="x99-1405007r398"></a><b> nsubstitute-if-not</b>  <i>newitem</i> <i>test</i> <i>sequence</i> &#x0026;key  <i>:from-end</i> <i>:start</i>
<i>:end</i> <i>:count</i> <i>:key</i>
</div>
<!--l. 2220--><p class="noindent" ><span class="paragraphHead"><a 
href="#x99-140600014.3" id="x99-140600014.3"></a></span>
   Эта функция является деструктивным аналогом для <tt><a 
href="clmli7.html#x196-3479918r918">substitute</a></tt>. Это
значит, что они модифицирует свой аргумент. Результатом является
последовательность такого же типа что и исходная <i>sequence</i> за исключением
того, что удовлетворяющие условию элементы в интервале <tt>:start</tt>-<tt>:end</tt> будут
заменены на объект <i>newitem</i>. Последовательность <i>sequence</i> может быть
модифицирована, поэтому результат может быть равен <tt><a 
href="clmli7.html#x196-3479367r367">eq</a></tt> или нет исходной
последовательности.
<!--l. 2230--><p class="indent" >   Смотрите также <tt><a 
href="clmli7.html#x196-3479667r667">nsubst</a></tt>, которая осуществляет деструктивную замену в
древовидной структуре.
<div class="new">
<!--l. 2234--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx99-1406001"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-7040007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
<div class="newer">
<!--l. 2240--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx99-1406002"></a>to clarify the permissible side eﬀects of certain
operations. When the <i>sequence</i> is a list, <tt><a 
href="clmli7.html#x196-3479670r670">nsubstitute</a></tt> or <tt><a 
href="clmli7.html#x196-3479671r671">nsubstitute-if</a></tt> is
required to perform a <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt> on any <i>car</i> of the top-level list structure of that list
                                                                          

                                                                          
whose old contents must be replaced with <i>newitem</i> but is forbidden to
perform a <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt> on any <tt><a 
href="clmli7.html#x196-3479197r197">cdr</a></tt> of the list. When the <i>sequence</i> is an array,
<tt><a 
href="clmli7.html#x196-3479670r670">nsubstitute</a></tt> or <tt><a 
href="clmli7.html#x196-3479671r671">nsubstitute-if</a></tt> is required to perform a <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt> on any element
of the array whose old contents must be replaced with <i>newitem</i>. These
functions, therefore, may successfully be used solely for eﬀect, the caller
discarding the returned value (though some programmers ﬁnd this stylistically
distasteful).
</div>
</div>
                                                                          

                                                                          
<!--l. 2258--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse81.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse79.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse79.html#tailclmse79.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse80.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch14.html#clmse80.html" >Наверх</a><tt>&#x003E;</tt></div><a 
 id="tailclmse80.html"></a>   </div> </div> 
</body></html> 
