<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Случайные числа</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-16 00:55:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="cltl2ed.css"></head><body 
>
<!--l. 5321--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse72.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse70.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse70.html#tailclmse70.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse71.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch12.html#clmse71.html" >Наверх</a><tt>&#x003E;</tt></div><h3 class="sectionHead"><span class="titlemark">12.9   </span> <a 
href="clm.html#QQ2-88-1131" id="x88-112300012.9">Случайные
числа</a></h3>
<!--l. 5324--><p class="noindent" >Функциональность Common Lisp&#x2019;а для генерации псевдослучайных чисел
была аккуратно проработана, чтобы быть переносимой. Тогда как две
реализации могут создавать различные ряды псевдослучайных чисел,
распределение значений должно быть независимо от таких характеристик
компьютера как размер слова.
<div class="defun">
<!--l. 5329--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx88-1123001"></a><a 
 id="x88-1123002r297"></a><b> random</b>  <i>number</i> &#x0026;optional  <i>state</i>
</div>
<!--l. 5331--><p class="noindent" ><span class="paragraphHead"><a 
href="#x88-112400012.9" id="x88-112400012.9"></a></span>
<tt>
   (random <i>n</i>)</tt> принимает положительное число <i>n</i> и возвращает число такого
же типа между нулём (включительно) и <i>n</i> (невключительно). Число <i>n</i>
может быть целым или с плавающей точкой. При этом используется
приблизительно равномерное распределения. FIXME Если <i>n</i> целое
число, каждый из возможных результатов встречается с (примерной)
вероятностью 1/<i>n</i>. (Слово «примерно» используется из-за различий
реализаций. На практике отклонение от однородности должно быть весьма
мало.)
<!--l. 5341--><p class="indent" >   Аргумент <i>state</i> должен быть объектом типа <tt>random-state</tt>. По-умолчанию
он равен значению переменной <tt><a 
href="#x88-1124002r298">*random-state*</a></tt>. Объект используется для
сохранения состояния генератора псевдослучайных чисел и изменяется как
побочное действие от операции <tt><a 
href="#x88-1123002r297">random</a></tt>.
</div>
<div class="defun">
<!--l. 5347--><p class="noindent" ><div class="defunheader"> <i>[Переменная]</i><a 
 id="dx88-1124001"></a><a 
 id="x88-1124002r298"></a><b> *random-state*</b>
</div>
<!--l. 5349--><p class="noindent" ><span class="paragraphHead"><a 
href="#x88-112500012.9" id="x88-112500012.9"></a></span>
   Данная переменная содержит объект типа <tt>random-state</tt>, который хранит
состояние для генератора случайных чисел, которое по-умолчанию
                                                                          

                                                                          
используется функцией <tt><a 
href="#x88-1123002r297">random</a></tt>. Природа этой структуры данных зависит от
реализации. Она может быть выведена на печать и прочитана обратно, но не
обязательно это может быть сделано между реализациями. Вызов <tt><a 
href="#x88-1123002r297">random</a></tt>
изменяет этот объект. Связывание этой переменной с другим значением будет
корректно сохраняться и восстанавливаться.
</div>
<div class="defun">
<!--l. 5361--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx88-1125001"></a><a 
 id="x88-1125002r299"></a><b> make-random-state</b>  &#x0026;optional  <i>state</i>
</div>
<!--l. 5363--><p class="noindent" ><span class="paragraphHead"><a 
href="#x88-112600012.9" id="x88-112600012.9"></a></span>
   Данная функция возвращает новый объект типа <tt>random-state</tt>, подходящий
для использования в качестве значения переменной <tt><a 
href="#x88-1124002r298">*random-state*</a></tt>. Если
<i>state</i> не указано или равно <tt><a 
href="clmse31.html#x42-312002r18">nil</a></tt>, тогда <tt><a 
href="#x88-1125002r299">make-random-state</a></tt> возвращает
<i>копию</i> текущего объекта состояния генератора псевдослучайных чисел
(значение переменной <tt><a 
href="#x88-1124002r298">*random-state*</a></tt>). Если <i>state</i> является объектом
состояния, то возвращается копия данного объекта. Если <i>state</i> равен
<tt><a 
href="clmse31.html#x42-313002r19">t</a></tt>, тогда новый возвращается новый объект состояния, который в
некотором смысле «случайно» инициализирован (текущим временем
например).
</div>
<div class="defun">
<!--l. 5375--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx88-1126001"></a><a 
 id="x88-1126002r300"></a><b> random-state-p</b>  <i>object</i>
</div>
<!--l. 5377--><p class="noindent" ><span class="paragraphHead"><a 
href="#x88-112700012.9" id="x88-112700012.9"></a></span>
<tt>
   <a 
href="#x88-1126002r300">random-state-p</a></tt> истинен, если аргумент является объектом состояния
генератора случайных чисел, иначе — ложен. <div class="lisp"><div class="tabbing">
(random-state-p <i>x</i>) <span class="math"> ≡</span> (typep <i>x</i> &#x2019;random-state)
   <br>
<!--l. 5382--><p class="noindent" ></div>
<!--l. 5382--><p class="noindent" ><span class="paragraphHead"><a 
href="#x88-112800012.9" id="x88-112800012.9"></a></span>
                                                                          

                                                                          
<!--l. 5382--><p class="noindent" ><span class="paragraphHead"><a 
href="#x88-112900012.9" id="x88-112900012.9"></a></span>
</div>
</div>
                                                                          

                                                                          
<!--l. 5385--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse72.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse70.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse70.html#tailclmse70.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse71.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch12.html#clmse71.html" >Наверх</a><tt>&#x003E;</tt></div><a 
 id="tailclmse71.html"></a>  </div> </div> 
</body></html> 
