<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Списки</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-28 14:08:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1461--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse82.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse80.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse80.html#tailclmse80.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse81.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse81.html" >Вверх</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">15.2   </span> <a 
href="clm.html#QQ2-101-231" id="x101-20200015.2">Списки</a></h3>
<!--l. 1463--><p class="noindent" >Следующие функции выполняет различные операции над списками.
<!--l. 1465--><p class="indent" >   Список является одним из первых Lisp&#x2019;овых типов данных. Имя «Lisp»
расшифровывается как «LISt Processing».
<div class=defun>
<!--l. 1469--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202001"></a><a 
 id="x101-202002r425"></a><b> endp</b>  <i>object</i>
<!--l. 1471--><p class="noindent" >Предикат <a 
href="#x101-202002r425">endp</a> используется для проверки конца списка. Возвращает ложь
для cons-ячеек, истину для <a 
href="clmse31.html#x42-74002r18">nil</a>, и генерирует ошибку для всех остальных
объектов других типов.
</div>
<div class=defun>
<!--l. 1477--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202003"></a><a 
 id="x101-202004r426"></a><b> list-length</b>  <i>list</i>
<!--l. 1479--><p class="noindent" ><a 
href="#x101-202004r426">list-length</a> возвращает длину списка <i>list</i>. <a 
href="#x101-202004r426">list-length</a> отличается от <a 
href="clmse75.html#x94-195008r351">length</a> при
использовании с циклическим списком. В таком случае <a 
href="clmse75.html#x94-195008r351">length</a> может
не вернуть управление, тогда как <a 
href="#x101-202004r426">list-length</a> вернёт <a 
href="clmse31.html#x42-74002r18">nil</a>. Например:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list-length &#x2019;()) <span class="math"> ⇒</span> 0
</td></tr></table>
<!--l. 1486--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list-length &#x2019;(a b c d)) <span class="math"> ⇒</span> 4</td></tr></table>
<!--l. 1487--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list-length &#x2019;(a (b c) d)) <span class="math"> ⇒</span> 3</td></tr></table>
<!--l. 1488--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(let ((x (list &#x2019;a b c)))</td></tr></table>
<!--l. 1489--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (rplacd (last x) x)</td></tr></table>
<!--l. 1490--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (list-length x)) <span class="math"> ⇒</span> <a 
href="clmse31.html#x42-74002r18">nil</a></td></tr></table>
<!--l. 1492--><p class="indent" >
</div>
</div>
<!--l. 1493--><p class="noindent" ><a 
href="#x101-202004r426">list-length</a> может быть реализован так: (defun list-length (x) <br 
class="newline" />  (do ((n 0 (+ n 2))            ;Счётчик <br 
class="newline" />       (fast x (cddr fast))     ;Быстрый указатель: на две позиции вперёд
                                                                          

                                                                          
<br 
class="newline" />       (slow x (cdr slow)))     ;Медленный указатель: на одну позицию
<br 
class="newline" />      (nil) <br 
class="newline" />    ;; Если быстрый указатель дошёл до конца, вернуть длину. <br 
class="newline" />    (when (endp fast) (return n)) <br 
class="newline" />    (when (endp (cdr fast)) (return (+ n 1))) <br 
class="newline" />    ;; If fast pointer eventually equals slow pointer, <br 
class="newline" />    ;; then we must be stuck in a circular list. <br 
class="newline" />    ;; (A deeper property is the converse: if we are <br 
class="newline" />    ;; stuck in a circular list, then eventually the <br 
class="newline" />    ;; fast pointer will equal the slow pointer. <br 
class="newline" />    ;; That fact justiﬁes this implementation.) <br 
class="newline" />    (when (and (eq fast slow) (&#x003E; n 0)) (return nil))))
</td><td  
class="tabbing"></td></tr></table>
<!--l. 1509--><p class="indent" >
</div>
</div>
<!--l. 1510--><p class="noindent" >Смотрите <a 
href="clmse75.html#x94-195008r351">length</a>, которая возвращает длину любой последовательности.
<div class=defun>
<!--l. 1513--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202005"></a><a 
 id="x101-202006r427"></a><b> nth</b>  <i>n</i> <i>list</i>
<!--l. 1515--><p class="noindent" >(nth <i>n</i> <i>list</i>) возвращает <i>n</i>-нный элемент списка <i>list</i>. <i>car</i> элемент списка
принимается за «нулевой» элемент. Аргумент <i>n</i> должен быть неотрицательным
целым числом. Если длина списка не больше чем <i>n</i>, тогда результат (), или
другими словами <a 
href="clmse31.html#x42-74002r18">nil</a>. (Это согласовывается с концепцией того, что <i>car</i> и <i>cdr</i>
от () являются ().) Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nth 0 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> foo
</td></tr></table>
<!--l. 1525--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nth 1 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> bar</td></tr></table>
<!--l. 1526--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nth 3 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1528--><p class="indent" >
</div>
</div>
<!--l. 1530--><p class="indent" >   <a 
href="#x101-202006r427">nth</a> может быть использован в связке с <a 
href="clmse36.html#x48-90002r64">setf</a> для изменения элемента
списка. В этом случае, аргумент <i>n</i> должен быть меньше чем длина списка
<i>list</i>.
                                                                          

                                                                          
<!--l. 1534--><p class="indent" >   Следует отметить, что порядок аргументов в <a 
href="#x101-202006r427">nth</a> обратный в отличие от
большинства других функций селекторов для последовательностей, таких ка
<a 
href="clmse75.html#x94-195002r348">elt</a>.
</div>
<div class=defun>
<!--l. 1539--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202007"></a><a 
 id="x101-202008r428"></a><b> ﬁrst</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx101-202009"></a><a 
 id="x101-202010r429"></a><b> second</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx101-202011"></a><a 
 id="x101-202012r430"></a><b> third</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx101-202013"></a><a 
 id="x101-202014r431"></a><b> fourth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx101-202015"></a><a 
 id="x101-202016r432"></a><b> ﬁfth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx101-202017"></a><a 
 id="x101-202018r433"></a><b> sixth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx101-202019"></a><a 
 id="x101-202020r434"></a><b> seventh</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx101-202021"></a><a 
 id="x101-202022r435"></a><b> eighth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx101-202023"></a><a 
 id="x101-202024r436"></a><b> ninth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx101-202025"></a><a 
 id="x101-202026r437"></a><b> tenth</b>  <i>list</i>
<!--l. 1550--><p class="noindent" >Иногда эти функции удобно использовать для доступа к определёнными
элементам списка. <a 
href="#x101-202008r428">ﬁrst</a> то же, что и <a 
href="clmse80.html#x100-201002r393">car</a>, <a 
href="#x101-202010r429">second</a> то же, что и <a 
href="clmse80.html#x100-201008r396">cadr</a>, <a 
href="#x101-202012r430">third</a> то же,
что и <a 
href="clmse80.html#x100-201020r402">caddr</a>, и так далее. Следует отметить, что нумерация начинается с
единицы (ﬁrst) в отличие от нумерации, которая начинается с нуля и
используется в <a 
href="#x101-202006r427">nth</a>. <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬁfth x) <span class="math"> ≡</span> (nth 4 x)
</td></tr></table>
<!--l. 1559--><p class="indent" >
</div>
</div>
<!--l. 1561--><p class="indent" >   Каждая из этих функций может быть использована в связке <a 
href="clmse36.html#x48-90002r64">setf</a> для
изменения элемента массива.
</div>
<div class=defun>
<!--l. 1565--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202027"></a><a 
 id="x101-202028r438"></a><b> rest</b>  <i>list</i>
<!--l. 1567--><p class="noindent" ><a 
href="#x101-202028r438">rest</a> означает то же, что и <a 
href="clmse80.html#x100-201004r394">cdr</a>, но мнемонически согласуется с <a 
href="#x101-202008r428">ﬁrst</a>.
<a 
href="#x101-202028r438">rest</a> может использоваться в связке с <a 
href="clmse36.html#x48-90002r64">setf</a> для изменения элементов
массива.
</div>
<div class=defun>
                                                                          

                                                                          
<!--l. 1574--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202029"></a><a 
 id="x101-202030r439"></a><b> nthcdr</b>  <i>n</i> <i>list</i>
<!--l. 1576--><p class="noindent" >(nthcdr <i>n</i> <i>list</i>) выполняет для списка <i>lisp</i> операцию <a 
href="clmse80.html#x100-201004r394">cdr</a> <i>n</i> раз, и возвращает
результат. Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nthcdr 0 &#x2019;(a b c)) <span class="math"> ⇒</span> (a b c)
</td></tr></table>
<!--l. 1581--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nthcdr 2 &#x2019;(a b c)) <span class="math"> ⇒</span> (c)</td></tr></table>
<!--l. 1582--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nthcdr 4 &#x2019;(a b c)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1584--><p class="indent" >
</div>
</div>
<!--l. 1585--><p class="noindent" >Другими словами, она возвращает <i>n</i>-нную <i>cdr</i> часть списка.
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(car (nthcdr n x)) <span class="math"> ≡</span> (nth n x)
</td></tr></table>
<!--l. 1589--><p class="indent" >
</div>
</div>
<!--l. 1590--><p class="noindent" >Аргумент <i>n</i> должен быть неотрицательным целым числом.
</div>
<div class=defun>
<!--l. 1593--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202031"></a><a 
 id="x101-202032r440"></a><b> last</b>  <i>list</i> &#x0026;optional  (<i>n</i> 1)
<!--l. 1595--><p class="noindent" ><a 
href="#x101-202032r440">last</a> возвращает последние <i>n</i> cons-ячеек списка <i>lisp</i>. Список <i>list</i> может быть
списком с точкой. Передача зацикленного списка является ошибкой.
<!--l. 1600--><p class="indent" >   Аргумент <i>n</i> должен быть неотрицательным целым числом. Если <i>n</i> равен
нулю, тогда возвращается последний атом списка <i>list</i>. Если <i>n</i> не меньше чем
количество cons-ячеек, то возвращается весь список.
<!--l. 1605--><p class="indent" >   Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c d))
</td></tr></table>
<!--l. 1607--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last x) <span class="math"> ⇒</span> (d)</td></tr></table>
                                                                          

                                                                          
<!--l. 1608--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(rplacd (last x) &#x2019;(e f))</td></tr></table>
<!--l. 1609--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">x <span class="math"> ⇒</span> &#x2019;(a b c d e f)</td></tr></table>
<!--l. 1610--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last x 3) <span class="math"> ⇒</span> (d e f)</td></tr></table>
<!--l. 1611--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;()) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1612--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d)) <span class="math"> ⇒</span> (c . d)</td></tr></table>
<!--l. 1613--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d) 0) <span class="math"> ⇒</span> d</td></tr></table>
<!--l. 1614--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d) 2) <span class="math"> ⇒</span> (b c . d)</td></tr></table>
<!--l. 1615--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d) 1729) <span class="math"> ⇒</span> (a b c . d)</td></tr></table>
<!--l. 1617--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 1620--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202033"></a><a 
 id="x101-202034r441"></a><b> list</b>  &#x0026;rest  <i>args</i>
<!--l. 1622--><p class="noindent" ><a 
href="#x101-202034r441">list</a> создаёт и возвращает список, составленный из аргументов. Например:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list 3 4 &#x2019;a (car &#x2019;(b . c)) (+ 6 -2)) <span class="math"> ⇒</span> (3 4 a b 4)
</td></tr></table>
<!--l. 1627--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list) <span class="math"> ⇒</span> ()
</td></tr></table>
<!--l. 1630--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list (list &#x2019;a &#x2019;b) (list &#x2019;c &#x2019;d &#x2019;e)) <span class="math"> ⇒</span> ((a b) (c d e))</td></tr></table>
<!--l. 1632--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
                                                                          

                                                                          
<!--l. 1635--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202035"></a><a 
 id="x101-202036r442"></a><b> list*</b>  <i>arg</i> &#x0026;rest  <i>others</i>
<!--l. 1637--><p class="noindent" ><a 
href="#x101-202036r442">list*</a> похожа на <a 
href="#x101-202034r441">list</a> за исключением того, что последняя <i>cons</i>-ячейка
создаваемого списка будет «с точкой». Последний аргумент используется как
последний элемент списка, а именно в последней cons-ячейки в <i>cdr</i> элементе.
Данный аргумент необязательно должен быть атомом, и если он не атом, то в
результате список будет иметь большую длину чем количество аргументов.
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list* &#x2019;a &#x2019;b &#x2019;c &#x2019;d) <span class="math"> ⇒</span> (a b c . d)
</td></tr></table>
<!--l. 1647--><p class="indent" >
</div>
</div>
<!--l. 1648--><p class="noindent" >Это то же, что и <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cons &#x2019;a (cons &#x2019;b (cons &#x2019;c &#x2019;d)))
</td></tr></table>
<!--l. 1651--><p class="indent" >
</div>
</div>
<!--l. 1652--><p class="noindent" >А также: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list* &#x2019;a &#x2019;b &#x2019;c &#x2019;(d e f)) <span class="math"> ⇒</span> (a b c d e f)
</td></tr></table>
<!--l. 1654--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list* x) <span class="math"> ≡</span> x</td></tr></table>
<!--l. 1656--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 1659--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202037"></a><a 
 id="x101-202038r443"></a><b> make-list</b>  <i>size</i> &#x0026;key  <i>:initial-element</i>
<!--l. 1661--><p class="noindent" >Функция создаёт и возвращает список содержащий количество <i>size</i>
элементов, каждый из которых будет инициализирован значением
аргумента :initial-element (который по-умолчанию <a 
href="clmse31.html#x42-74002r18">nil</a>). <i>size</i> должен быть
неотрицательным целым числом. Например: <div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(make-list 5) <span class="math"> ⇒</span> (<a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a>)
</td></tr></table>
<!--l. 1668--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(make-list 3 :initial-element &#x2019;rah) <span class="math"> ⇒</span> (rah rah rah)</td></tr></table>
<!--l. 1670--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 1673--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202039"></a><a 
 id="x101-202040r444"></a><b> append</b>  &#x0026;rest  <i>lists</i>
<!--l. 1675--><p class="noindent" >Функция возвращает список содержащий все элементы указанных в
аргументах списков. Аргументы не разрушаются. Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(append &#x2019;(a b c) &#x2019;(d e f) &#x2019;() &#x2019;(g)) <span class="math"> ⇒</span> (a b c d e f g)
</td></tr></table>
<!--l. 1681--><p class="indent" >
</div>
</div>
<!--l. 1682--><p class="noindent" >Следует отметить, что <a 
href="clmse132.html#x163-331002r790">append</a> копирует верхний уровень всех переданных
списков <i>за исключением</i> последнего. Функция <a 
href="clmse76.html#x95-196002r355">concatenate</a> выполняет
похожую операцию, но всегда копирует все аргументы. Смотрите также
<a 
href="clmse132.html#x163-331006r792">nconc</a>, которая похожа на <a 
href="clmse132.html#x163-331002r790">append</a>, но разрушает все аргументы кроме
последнего.
<!--l. 1688--><p class="indent" >   Последний аргумент может быть любым Lisp объектом, и в этом случае
этот объект становится последним элементов итогового списка. Например,
(append &#x2019;(a b c) &#x2019;d) <span class="math"> ⇒</span> (a b c . d).
<!--l. 1692--><p class="indent" >   (append <i>x</i> &#x2019;()) может быть использовано для копирования списка <i>x</i>,
однако для этого больше подходит функция <a 
href="#x101-202042r445">copy-list</a>.
</div>
<div class=defun>
<!--l. 1696--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202041"></a><a 
 id="x101-202042r445"></a><b> copy-list</b>  <i>list</i>
<!--l. 1698--><p class="noindent" >Функция возвращает список, который равен <a 
href="clmse33.html#x44-78006r46">equal</a> и в то же время не равен
<a 
href="clmse33.html#x44-78002r44">eq</a> списку <i>list</i>, Копируется только верхний уровень списка, то есть <a 
href="#x101-202042r445">copy-list</a>
копирует только в направлении <i>cdr</i> элементов, но не в направлении <i>car</i>
элементов. Если список «с точкой», то есть (cdr (last <i>list</i>)) является не-<a 
href="clmse31.html#x42-74002r18">nil</a>
атомом, тогда итоговый список также будет «с точкой». Смотрите также
                                                                          

                                                                          
<a 
href="clmse75.html#x94-195006r350">copy-seq</a> и <a 
href="#x101-202046r447">copy-tree</a>.
</div>
<div class=defun>
<!--l. 1709--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202043"></a><a 
 id="x101-202044r446"></a><b> copy-alist</b>  <i>list</i>
<!--l. 1711--><p class="noindent" ><a 
href="#x101-202044r446">copy-alist</a> копирует ассоциативные списки. При этом, также как и в <a 
href="#x101-202042r445">copy-list</a>,
копируется только верхний уровень списка <i>lisp</i>. Кроме того, каждый элемент
списка <i>list</i>, являющийся в свою очередь cons-ячейкой, заменяется новой
cons-ячейкой с теми же <i>car</i> и <i>cons</i> элементами.
</div>
<div class=defun>
<!--l. 1719--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202045"></a><a 
 id="x101-202046r447"></a><b> copy-tree</b>  <i>object</i>
<!--l. 1721--><p class="noindent" ><a 
href="#x101-202046r447">copy-tree</a> копирует древовидно организованные cons-ячейки. Аргумент <i>object</i>
может быть любым Lisp&#x2019;овым объектом. Если он не является cons-ячейкой,
то ничего не произойдёт и данный объект будет возвращён в качестве
результата. В противном случае будет возвращена новая cons-ячейка, в
которой <i>car</i> и <i>cons</i> элементы будут результатами рекурсивных вызовов
<a 
href="#x101-202046r447">copy-tree</a>. Другими словами, все cons-ячейки будут рекурсивно скопированы,
и рекурсия будет останавливаться только на атомах.
</div>
<div class=defun>
<!--l. 1731--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202047"></a><a 
 id="x101-202048r448"></a><b> revappend</b>  <i>x</i> <i>y</i>
<!--l. 1733--><p class="noindent" >(revappend <i>x</i> <i>y</i>) похожа на (append (reverse <i>x</i>) <i>y</i>) за исключением того, что
она потенциально более производительна. Аргументы <i>x</i> и <i>y</i> должны быть
списками. Аргумент <i>x</i> копируется (не разрушается) в отличие от <a 
href="#x101-202052r450">nreconc</a>,
которая разрушает первый аргумент.
</div>
<div class=defun>
<!--l. 1741--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202049"></a><a 
 id="x101-202050r449"></a><b> nconc</b>  &#x0026;rest  <i>lists</i>
<!--l. 1743--><p class="noindent" >В качестве аргументов <a 
href="clmse132.html#x163-331006r792">nconc</a> принимает списки. Функция соединяет списки и
возвращает результат. При этом аргументы изменяются, а не копируются. (В
сравнении с <a 
href="clmse132.html#x163-331002r790">append</a>, которая копирует аргументы, а не разрушает их.)
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c))
</td></tr></table>
<!--l. 1749--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq y &#x2019;(d e f))</td></tr></table>
<!--l. 1750--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nconc x y) <span class="math"> ⇒</span> (a b c d e f)</td></tr></table>
                                                                          

                                                                          
<!--l. 1751--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">x <span class="math"> ⇒</span> (a b c d e f)</td></tr></table>
<!--l. 1753--><p class="indent" >
</div>
</div>
<!--l. 1754--><p class="noindent" >Следует отметить, что в примере, значение x отличается от первоначального,
так как последняя cons-ячейка была изменена с помощью <a 
href="clmse82.html#x102-206004r458">rplacd</a> значением y.
Если сейчас выполнить (nconc x y) ещё раз, тогда часть списка зациклится:
(a b c d e f d e f d e f ...), и так до бесконечности. Если <a 
href="clmse109.html#x136-253039r625">*print-circle*</a>
не равен <a 
href="clmse31.html#x42-74002r18">nil</a>, тогда вывод списка будет таким: (a b c . #1=(d e f .
#1#)).
<!--l. 1762--><p class="indent" >   Вызов <a 
href="clmse132.html#x163-331006r792">nconc</a>, совпадающий с наиболее близким шаблоном выражения в
левой части приводит к эквивалентным побочным действиям, как в правой
части таблицы.
<div class="flushleft" 
>
<!--l. 1765--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >(nconc)               </td><td align="left" >nil     ;Нет побочных эффектов</td>
</tr><tr><td align="left" >(nconc nil . <i>r</i>)    </td><td align="left" >(nconc . <i>r</i>)                                </td>
</tr><tr><td align="left" >(nconc <i>x</i>)            </td><td align="left" ><i>x</i>                                         </td>
</tr><tr><td align="left" >(nconc <i>x</i> <i>y</i>)          </td><td align="left" >(let ((p <i>x</i>) (q <i>y</i>))                        </td>
</tr><tr><td align="left" >                         </td><td align="left" >  (rplacd (last p) q)                   </td>
</tr><tr><td align="left" >                         </td><td align="left" >  p)                                        </td>
</tr><tr><td align="left" >(nconc <i>x</i> <i>y</i> . <i>r</i>)     </td><td align="left" >(nconc (nconc <i>x</i> <i>y</i>) . <i>r</i>)               </td></tr></table>
</div></div>
</div>
                                                                          

                                                                          
<div class=defun>
<!--l. 1781--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-202051"></a><a 
 id="x101-202052r450"></a><b> nreconc</b>  <i>x</i> <i>y</i>
<!--l. 1783--><p class="noindent" >(nreconc <i>x</i> <i>y</i>) похожа на (nconc (nreverse <i>x</i>) <i>y</i>) за исключением того, что она
потенциально эффективнее. Оба аргумента должны быть списками.
Аргумент <i>x</i> разрушается. Сравните с <a 
href="#x101-202048r448">revappend</a>.
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq planets &#x2019;(jupiter mars earth venus mercury))
</td></tr></table>
<!--l. 1791--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq more-planets &#x2019;(saturn uranus pluto neptune))</td></tr></table>
<!--l. 1792--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nreconc more-planets planets)</td></tr></table>
<!--l. 1793--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:585;" 
class="tabbing"></td><td  
class="tabbing-right">       <span class="math"> ⇒</span> (neptune pluto uranus saturn jupiter mars earth venus mercury)</td></tr></table>
<!--l. 1794--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  теперь значение more-planets точно не определено</td></tr></table>
<!--l. 1796--><p class="indent" >
</div>
</div>
<!--l. 1798--><p class="indent" >   Поведение (nreconc <i>x</i> <i>y</i>) совпадает с поведением (nconc (nreverse <i>x</i>) <i>y</i>) в
части побочных эффектов.
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> push </b><a 
 id="dx101-202053"></a><a 
 id="x101-202054r451"></a> item place
</td></tr></table>
<!--l. 1804--><p class="indent" >
</div>
<!--l. 1804--><p class="noindent" ><span class="paragraphHead"><a 
href="#x101-20300015.2" id="x101-20300015.2"></a></span>
                                                                          

                                                                          
   Форма <i>place</i> должна быть именем обобщённое переменной, содержащей
список. <i>item</i> может указывать на любой Lisp&#x2019;овый объект. <i>item</i> вставляется в
начало списка и данный список возвращается в качестве результата. Форма
<i>place</i> может быть любой формой, которая подходит для <a 
href="clmse36.html#x48-90002r64">setf</a>. Если
рассматривать список как стек, тогда <a 
href="#x101-202054r451">push</a> добавляет элемент на вершину
стека. Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a (b c) d))
</td></tr></table>
<!--l. 1814--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(push 5 (cadr x)) <span class="math"> ⇒</span> (5 b c) и теперь x <span class="math"> ⇒</span> (a (5 b c) d)</td></tr></table>
<!--l. 1816--><p class="indent" >
</div>
</div>
<!--l. 1817--><p class="noindent" >Действие от <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(push <i>item</i> <i>place</i>)
</td></tr></table>
<!--l. 1820--><p class="indent" >
</div>
</div>
<!--l. 1821--><p class="noindent" >эквивалентно действию <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf <i>place</i> (cons <i>item</i> <i>place</i>))
</td></tr></table>
<!--l. 1824--><p class="indent" >
</div>
</div>
<!--l. 1825--><p class="noindent" >за исключением того, что <a 
href="#x101-202054r451">push</a> выполняет форму <i>place</i> только один раз, а не три.
Более того, в для некоторых форм <i>place</i> <a 
href="#x101-202054r451">push</a> может быть эффективнее чем
версия с <a 
href="clmse36.html#x48-90002r64">setf</a>.
<!--l. 1830--><p class="indent" >   Следует отметить, что <i>item</i> вычисляется прежде чем вычисляется
<i>place</i>.
</div>
<div class=defmac>
                                                                          

                                                                          
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> pushnew </b><a 
 id="dx101-203001"></a><a 
 id="x101-203002r452"></a> item place &#x0026;key :test :test-not :key
</td></tr></table>
<!--l. 1836--><p class="indent" >
</div>
<!--l. 1836--><p class="noindent" ><span class="paragraphHead"><a 
href="#x101-20400015.2" id="x101-20400015.2"></a></span>
   Форма <i>place</i> должна быть именем обобщённое переменной, содержащей
список. <i>item</i> может указывать на любой Lisp&#x2019;овый объект. Если <i>item</i> не
содержится в списке (этот факт устанавливается с помощью предиката
переданного в :test, который по-умолчанию <a 
href="clmse33.html#x44-78004r45">eql</a>), тогда <i>item</i> вставляется в
начало списка и данный список возвращается в качестве результата. В
противном случае возвращается исходный список. Форма <i>place</i> может быть
любой формой, которая подходит для <a 
href="clmse36.html#x48-90002r64">setf</a>. Если рассматривать список как
множество, тогда <a 
href="#x101-203002r452">pushnew</a> добавляет элемент в множество. Смотрите
<a 
href="clmse84.html#x104-208010r471">adjoin</a>.
<!--l. 1847--><p class="indent" >   Именованные параметры <a 
href="#x101-203002r452">pushnew</a> имеют тот же смысл, что и в функциях
для последовательностей. Смотрите главу <a 
href="clmch14.html#x93-19400014">14<!--tex4ht:ref: KSEQUE --></a>. По сути, данные аргументы
идентичны аргументам <a 
href="clmse84.html#x104-208010r471">adjoin</a>.
<!--l. 1851--><p class="indent" >   <a 
href="#x101-203002r452">pushnew</a> возвращает модифицированное содержимое переменной <i>place</i>.
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a (b c) d))
</td></tr></table>
<!--l. 1854--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pushnew 5 (cadr x)) <span class="math"> ⇒</span> (5 b c) и теперь x <span class="math"> ⇒</span> (a (5 b c) d)</td></tr></table>
<!--l. 1855--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pushnew &#x2019;b (cadr x)) <span class="math"> ⇒</span> (5 b c) и x не меняется</td></tr></table>
<!--l. 1857--><p class="indent" >
</div>
</div>
<!--l. 1858--><p class="noindent" >Действие от <div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pushnew <i>item</i> <i>place</i> :test <i>p</i>)
</td></tr></table>
<!--l. 1861--><p class="indent" >
</div>
</div>
<!--l. 1862--><p class="noindent" >эквивалентно действию <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf <i>place</i> (adjoin <i>item</i> <i>place</i> :test <i>p</i>))
</td></tr></table>
<!--l. 1865--><p class="indent" >
</div>
</div>
<!--l. 1866--><p class="noindent" >за исключением того, что <a 
href="#x101-203002r452">pushnew</a> выполняет форму <i>place</i> только один раз, а не
три. Более того, в для некоторых форм <i>place</i> <a 
href="#x101-203002r452">pushnew</a> может быть
эффективнее чем версия с <a 
href="clmse36.html#x48-90002r64">setf</a>.
<!--l. 1871--><p class="indent" >   Следует отметить, что <i>item</i> вычисляется прежде чем вычисляется
<i>place</i>.
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> pop </b><a 
 id="dx101-204001"></a><a 
 id="x101-204002r453"></a> place
</td></tr></table>
<!--l. 1877--><p class="indent" >
</div>
<!--l. 1877--><p class="noindent" ><span class="paragraphHead"><a 
href="#x101-20500015.2" id="x101-20500015.2"></a></span>
   Форма <i>place</i> должна быть именем обобщённое переменной, содержащей
список. Результатом <a 
href="#x101-204002r453">pop</a> является результат <a 
href="clmse80.html#x100-201002r393">car</a> функции для переданного
списка, и побочным эффектом является то, что в обобщённую переменную
сохраняется результат <a 
href="clmse80.html#x100-201004r394">cdr</a> для списка. Форма <i>place</i> может быть любой
                                                                          

                                                                          
формой, которая подходит для <a 
href="clmse36.html#x48-90002r64">setf</a>. Если рассматривать исходный список
как стек, то <a 
href="#x101-204002r453">pop</a> достаёт элемент из вершины стека и возвращает его.
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq stack &#x2019;(a b c))
</td></tr></table>
<!--l. 1887--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pop stack) <span class="math"> ⇒</span> a and now stack <span class="math"> ⇒</span> (b c)</td></tr></table>
<!--l. 1889--><p class="indent" >
</div>
</div>
<!--l. 1890--><p class="noindent" >Действия от (pop <i>place</i>) эквивалентно <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog1 (car <i>place</i>) (setf <i>place</i> (cdr <i>place</i>)))
</td></tr></table>
<!--l. 1893--><p class="indent" >
</div>
</div>
<!--l. 1894--><p class="noindent" >за исключением того, что <a 
href="#x101-204002r453">pop</a> выполняет форму <i>place</i> только один раз, а не три.
Более того, в для некоторых форм <i>place</i> <a 
href="#x101-204002r453">pop</a> может быть эффективнее чем
версия с <a 
href="clmse36.html#x48-90002r64">setf</a>.
</div>
<div class=defun>
<!--l. 1900--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-205001"></a><a 
 id="x101-205002r454"></a><b> butlast</b>  <i>list</i> &#x0026;optional  <i>n</i>
<!--l. 1902--><p class="noindent" >Функция создаёт и возвращает список с такими же элементами кроме <i>n</i>
последних, что и в списке <i>list</i>. <i>n</i> по-умолчанию равно 1. Аргумент не
разрушается. Если длина списка <i>list</i> меньше чем <i>n</i>, тогда возвращается ().
Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast &#x2019;(a b c d)) <span class="math"> ⇒</span> (a b c)
</td></tr></table>
<!--l. 1910--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast &#x2019;((a b) (c d))) <span class="math"> ⇒</span> ((a b))</td></tr></table>
<!--l. 1911--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast &#x2019;(a)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1912--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast nil) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1914--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 1915--><p class="noindent" >Имя функции образовано от фразы «all elements but the last» («все элементы
кроме последних»).
</div>
<div class=defun>
<!--l. 1919--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-205003"></a><a 
 id="x101-205004r455"></a><b> nbutlast</b>  <i>list</i> &#x0026;optional  <i>n</i>
<!--l. 1921--><p class="noindent" >Это деструктивная версия <a 
href="#x101-205002r454">butlast</a>. Данная функция изменяет <i>cdr</i> элемент
cons-ячейки на <a 
href="clmse31.html#x42-74002r18">nil</a>. Искомая cons-ячейка находится на позиции <i>n</i>+1 с конца
списка. Если длина списка <i>list</i> меньше чем <i>n</i>, тогда возвращается (), и
аргумент не модифицируется. (Таким образом можно написать (setq a
(nbutlast a)), а не (nbutlast a).) Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq foo &#x2019;(a b c d))
</td></tr></table>
<!--l. 1929--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nbutlast foo) <span class="math"> ⇒</span> (a b c)</td></tr></table>
<!--l. 1930--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">foo <span class="math"> ⇒</span> (a b c)</td></tr></table>
<!--l. 1931--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nbutlast &#x2019;(a)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1932--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nbutlast &#x2019;<a 
href="clmse31.html#x42-74002r18">nil</a>) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 1934--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 1937--><p class="noindent" ><i>[Функция]</i><a 
 id="dx101-205005"></a><a 
 id="x101-205006r456"></a><b> ldiﬀ</b>  <i>list</i> <i>sublist</i>
<!--l. 1939--><p class="noindent" >Аргумент <i>list</i> должен быть списком, и <i>sublist</i> должен быть подсписком <i>list</i>.
<a 
href="#x101-205006r456">ldiﬀ</a> (означает «list diﬀerence») возвращает новый список, элементы которого
содержат все элементы списка <i>list</i> до подсписка <i>sublist</i>. Если <i>sublist</i> не
является частью <i>list</i> (или в частности равен <a 
href="clmse31.html#x42-74002r18">nil</a>), тогда возвращается
копия всего списка <i>list</i>. Аргумент <i>list</i> не разрушается. Например:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c d e))
</td></tr></table>
<!--l. 1949--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq y (cdddr x)) <span class="math"> ⇒</span> (d e)</td></tr></table>
<!--l. 1950--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ldiﬀ x y) <span class="math"> ⇒</span> (a b c)</td></tr></table>
                                                                          

                                                                          
<!--l. 1951--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">но (ldiﬀ &#x2019;(a b c d) &#x2019;(c d)) <span class="math"> ⇒</span> (a b c d)
</td></tr></table>
<!--l. 1953--><p class="indent" >
</div>
</div>
<!--l. 1954--><p class="noindent" >так как подсписок не равен <a 
href="clmse33.html#x44-78002r44">eq</a> ни одной части списка.
</div>
                                                                          

                                                                          
   <!--l. 1957--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse82.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse80.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse80.html#tailclmse80.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse81.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse81.html" >Вверх</a><tt>&#x003E;</tt></p></div>
<!--l. 1957--><p class="indent" >   <a 
 id="tailclmse81.html"></a>  
</body></html> 
