<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Exporting and Importing Symbols Экспортирование и импортирование
символов</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-13 16:31:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 561--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse58.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html#tailclmse56.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse57.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch11.html#clmse57.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">11.4   </span> <a 
 id="x73-16500011.4"></a>Exporting and Importing Symbols Экспортирование и импортирование
символов</h3>
<!--l. 564--><p class="noindent" >Symbols from one package may be made accessible in another package in two
ways.
<!--l. 567--><p class="indent" >   Символы из одного пакета могут стать доступными в другом пакете
двумя способами.
<!--l. 569--><p class="indent" >   First, any individual symbol may be added to a package by use of the function
<a 
href="clmse60.html#x76-169046r159">import</a>. The form (import &#x2019;editor:buﬀer) takes the external symbol named buﬀer
in the editor package (this symbol was located when the form was read by the
Lisp reader) and adds it to the current package as an internal symbol. The symbol
is then present in the current package. The imported symbol is not automatically
exported from the current package, but if it is already present and external, then
the fact that it is external is not changed. After the call to <a 
href="clmse60.html#x76-169046r159">import</a> it is possible
to refer to buﬀer in the importing package without any qualiﬁer. The
status of buﬀer in the package named editor is unchanged, and editor
remains the home package for this symbol. Once imported, a symbol is
<i>present</i> in the importing package and can be removed only by calling
<a 
href="clmse60.html#x76-169037r156">unintern</a>.
<!--l. 584--><p class="indent" >   Первый способ, каждый отдельный символ может быть добавлен в пакет
использованием функции <a 
href="clmse60.html#x76-169046r159">import</a>. Форма (import &#x2019;editor:buﬀer) принимает
внешний символ с именем buﬀer в пакете editor (этот символ распознается
Lisp считывателем) и добавляет его в текущий пакет в качестве внутреннего
символа. Символ становится доступным в текущем пакете. Импортированный
символ автоматически не экспортируется из текущего пакета, но если он уже
существовал в пакете и был внешним, то это свойство не меняется. После
вызова <a 
href="clmse60.html#x76-169046r159">import</a> в импортирующем пакете появляется возможность
ссылаться на buﬀer без указания полного имени. Свойства buﬀer в
пакете editor не меняются, editor продолжает оставаться домашним
пакетом для этого символа. Будучи импортированным, символ будет
присутствовать в пакете и может быть удален только с помощью вызова
                                                                          

                                                                          
<a 
href="clmse60.html#x76-169037r156">unintern</a>.
<!--l. 597--><p class="indent" >   If the symbol is already present in the importing package, <a 
href="clmse60.html#x76-169046r159">import</a> has no eﬀect.
If a distinct symbol with the name buﬀer is accessible in the importing
package (directly or by inheritance), then a correctable error is signaled, as
described in section <a 
href="clmse58.html#x74-16600011.5">11.5<!--tex4ht:ref: NAME-CONFLICTS-SECTION --></a>, because <a 
href="clmse60.html#x76-169046r159">import</a> avoids letting one symbol shadow
another.
<!--l. 604--><p class="indent" >   Если символ уже присутствует в импортирующем пакете, <a 
href="clmse60.html#x76-169046r159">import</a>
ничего не делает. Если другой символ с таким же именем buﬀer уже
доступен в импортирующем пакете (напрямую или унаследован), тогда
сигнализируется ошибка с возможностью исправления ситуации, как
написано в разделе ??, потому <a 
href="clmse60.html#x76-169046r159">import</a> не допускает сокрытия одного символа
другим.
<!--l. 611--><p class="indent" >   A symbol is said to be <i>shadowed</i> by another symbol in some package if the
ﬁrst symbol would be accessible by inheritance if not for the presence of the
second symbol. To import a symbol without the possibility of getting an error
because of shadowing, use the function <a 
href="clmse60.html#x76-169050r160">shadowing-import</a>. This inserts the symbol
into the speciﬁed package as an internal symbol, regardless of whether another
symbol of the same name will be shadowed by this action. If a diﬀerent symbol of
the same name is already present in the package, that symbol will ﬁrst be
uninterned from the package (see <a 
href="clmse60.html#x76-169037r156">unintern</a>). The new symbol is added to the
package&#x2019;s shadowing-symbols list. <a 
href="clmse60.html#x76-169050r160">shadowing-import</a> should be used with caution.
It changes the state of the package system in such a way that the consistency
rules do not hold across the change.
<!--l. 628--><p class="indent" >   Символ называется скрытым другим символом в некотором пакете. Это
когда первый символ был бы доступен через наследование, если бы не
присутствие второго символа. Для импортирования символа без ошибки
скрытия, используйте функцию <a 
href="clmse60.html#x76-169050r160">shadowing-import</a>. Она вставляет символ в
указанный пакет, как внутренний символ, вне зависимости от того,
происходит ли скрытие другого символа с тем же именем. Если другой
символ с тем же именем присутствовал в пакете, тогда этот символ сначала
удаляется из пакета <a 
href="clmse60.html#x76-169037r156">unintern</a>. Новый символ добавляется в список
скрывающих символов FIXME. <a 
href="clmse60.html#x76-169050r160">shadowing-import</a> должна использоваться
аккуратно. Она изменяем состояние системы пакетов так, что правила
согласования могут перестать работать.
<!--l. 641--><p class="indent" >   The second mechanism is provided by the function <a 
href="clmse60.html#x76-169057r162">use-package</a>. This causes a
package to inherit all of the external symbols of some other package. These
symbols become accessible as <i>internal</i> symbols of the using package. That is, they
can be referred to without a qualiﬁer while this package is current, but they are
                                                                          

                                                                          
not passed along to any other package that uses this package. Note that
<a 
href="clmse60.html#x76-169057r162">use-package</a>, unlike <a 
href="clmse60.html#x76-169046r159">import</a>, does not cause any new symbols to be <i>present</i> in the
current package but only makes them <i>accessible</i> by inheritance. <a 
href="clmse60.html#x76-169057r162">use-package</a>
checks carefully for name conﬂicts between the newly imported symbols and those
already accessible in the importing package. This is described in detail in
section <a 
href="clmse58.html#x74-16600011.5">11.5<!--tex4ht:ref: NAME-CONFLICTS-SECTION --></a>.
<!--l. 654--><p class="indent" >   Второй способ предоставляется функцией <a 
href="clmse60.html#x76-169057r162">use-package</a>. Эта функция
делает так, что пакет наследует все внешние символы некоторого другого
пакета. Эти символы становятся доступными, как <i>внутренние</i> символы,
используемого пакета. То есть, на них можно ссылаться без указаная пакета
внутри текущего пакета, но они не становятся доступными в других пакетах,
использующих данный. Следует отметить, что <a 
href="clmse60.html#x76-169057r162">use-package</a>, в отличие от
<a 
href="clmse60.html#x76-169046r159">import</a>, не делает новые символы <i>родственными</i> в текущем пакете, а делает
их только <i>доступными</i> с помощью наследования отображения символов.
<a 
href="clmse60.html#x76-169057r162">use-package</a> проверяет конфликты имен между импортируемыми и уже
доступными символами в импортирующем пакете. Это подробнее описано в
разделе ??.
<!--l. 666--><p class="indent" >   Typically a user, working by default in the user package, will load a number of
packages into Lisp to provide an augmented working environment, and then call
<a 
href="clmse60.html#x76-169057r162">use-package</a> on each of these packages to allow easy access to their external
symbols. <a 
href="clmse60.html#x76-169060r163">unuse-package</a> undoes the eﬀects of a previous <a 
href="clmse60.html#x76-169057r162">use-package</a>. The external
symbols of the used package are no longer inherited. However, any symbols that
have been imported into the using package continue to be present in that
package.
<!--l. 675--><p class="indent" >   Обычно пользователь, по-умолчанию работая в пакете user, будет
загружать ряд пакетов в Lisp систему для предоставления расширенного
рабочего окружения, и затем вызывать <a 
href="clmse60.html#x76-169057r162">use-package</a> для каждого из этих
пакетов для простого доступа к их внешним символами. <a 
href="clmse60.html#x76-169060r163">unuse-package</a>
производит обратные действия относительно <a 
href="clmse60.html#x76-169057r162">use-package</a>. Внешние
символы используемые пакетом престают наследоваться. Однако, любые
импортированные символы, остаются доступными.
<!--l. 683--><p class="indent" >   There is no way to inherit the <i>internal</i> symbols of another package; to refer
to an internal symbol, the user must either make that symbol&#x2019;s home
package current, use a qualiﬁer, or import that symbol into the current
package.
<!--l. 688--><p class="indent" >   Несуществует способа наследовать <i>внутренние</i> символы другого пакета.
Для ссылки на внутренний символ, пользователь должен поменять
домашний пакет для данного символа на текущий, использовать полное
                                                                          

                                                                          
имя (вместе с пакетом) или импортировать этот символ в текущий
пакет.
<div class=newer>
<!--l. 694--><p class="indent" >   The distinction between external and internal symbols is a primary means of
hiding names so that one program does not tread on the namespace of
another.
<!--l. 698--><p class="indent" >   Различие между внешними и внутренними символами прежде всего
означает скрытие имен, так чтобы одна программа не могла использовать
пространство имен другой программы.
</div>
<!--l. 703--><p class="indent" >   When <a 
href="clmse60.html#x76-169030r154">intern</a> or some other function wants to look up a symbol in a given
package, it ﬁrst looks for the symbol among the external and internal symbols of
the package itself; then it looks through the external symbols of the used packages
in some unspeciﬁed order. The order does not matter; according to the rules for
handling name conﬂicts (see below), if conﬂicting symbols appear in two or
more packages inherited by package <i>X</i>, a symbol of this name must also
appear in <i>X</i> itself as a shadowing symbol. Of course, implementations are
free to choose other, more eﬃcient ways of implementing this search,
as long as the user-visible behavior is equivalent to what is described
here.
<!--l. 715--><p class="indent" >   Когда <a 
href="clmse60.html#x76-169030r154">intern</a> или некоторые другие функций хотят найти символ в
заданном пакете, они сначала ищут символ среди внешних и внутренних
символов текущего пакета, затем они в неопределенном порядке ищут среди
внешних символов используемых пакетов. Порядок не имеет значение. В
соответствии с правилами разрешения конфликтов имен (смотрите ниже),
если конфликтующие символы существуют в двух и более пакетах,
унаследованных пакетом <i>X</i>, символ с этим именем должен также быть в <i>X</i>,
как скрытый символ. Конечно, реализации могут выбрать другой, более
эффективный способ для реализации такого поиска, не изменяя поведение
ранее описанного интерфейса.
<!--l. 725--><p class="indent" >   The function <a 
href="clmse60.html#x76-169040r157">export</a> takes a symbol that is accessible in some speciﬁed
package (directly or by inheritance) and makes it an external symbol of
that package. If the symbol is already accessible as an external symbol
in the package, <a 
href="clmse60.html#x76-169040r157">export</a> has no eﬀect. If the symbol is directly present
in the package as an internal symbol, it is simply changed to external
status. If it is accessible as an internal symbol via <a 
href="clmse60.html#x76-169057r162">use-package</a>, the symbol
is ﬁrst imported into the package, then exported. (The symbol is then
present in the speciﬁed package whether or not the package continues to use
                                                                          

                                                                          
the package through which the symbol was originally inherited.) If the
symbol is not accessible at all in the speciﬁed package, a correctable error is
signaled that, upon continuing, asks the user whether the symbol should be
imported.
<!--l. 740--><p class="indent" >   Функция <a 
href="clmse60.html#x76-169040r157">export</a> принимает символ, который доступен в некотором
указанном пакете (напрямую или унаслеован из другого пакета) и делает его
внешним символом этого пакета. Если символ уже доступен как внешний,
<a 
href="clmse60.html#x76-169040r157">export</a> ничего не делает. Если символ представлен, как внутренний
<i>родственный</i> символ, его статус просто меняется на внешний. Если он
доступен, как внутренний символ, полученный с помощью <a 
href="clmse60.html#x76-169057r162">use-package</a>,
символ сначала импортируется в пакет, а затем делается внешним. (После
этого символ становиться импортированным в пакет и остается в нем, вне
зависимости от того будет ли использована <a 
href="clmse60.html#x76-169060r163">unuse-package</a> или нет). Если
символ вообще недоступен в указанном пакете, то сигнализируется ошибка с
возможностью решить проблему, а, именно, какой символ должен быть
импортирован.
<!--l. 752--><p class="indent" >   The function <a 
href="clmse60.html#x76-169043r158">unexport</a> is provided mainly as a way to undo erroneous calls to
<a 
href="clmse60.html#x76-169040r157">export</a>. It works only on symbols directly present in the current package,
switching them back to internal status. If <a 
href="clmse60.html#x76-169043r158">unexport</a> is given a symbol already
accessible as an internal symbol in the current package, it does nothing; if
it is given a symbol not accessible in the package at all, it signals an
error.
<!--l. 759--><p class="indent" >   Функция <a 
href="clmse60.html#x76-169043r158">unexport</a> предоставляет как способ откатить ошибочное
экспортирование символа. Она работает только для символов напрямую
представленных в текущем пакете, меняя их свойство на «внутреннее». Если
<a 
href="clmse60.html#x76-169043r158">unexport</a> получает символ, который в текущем пакете уже является
внутренним, она ничего не делает. Если получает вообще недоступный
символ, то сигнализирует ошибку.
                                                                          

                                                                          
   <!--l. 766--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse58.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html#tailclmse56.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse57.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch11.html#clmse57.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 766--><p class="indent" >   <a 
 id="tailclmse57.html"></a>  
</body></html> 
