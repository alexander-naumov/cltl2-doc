<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Iteration Control</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-02-20 00:42:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 449--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse138.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse136.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse136.html#tailclmse136.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse137.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch26.html#clmse137.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">26.6   </span> <a 
 id="x168-24400026.6"></a>Iteration Control</h3>
<!--l. 452--><p class="noindent" >Iteration control clauses allow you to direct loop iteration. The loop keywords <i>as</i>,
<i>for</i>, and <i>repeat</i> designate iteration control clauses.
<!--l. 455--><p class="indent" >   Iteration control clauses diﬀer with respect to the speciﬁcation of termination
conditions and the initialization and stepping of loop variables. Iteration clauses
by themselves do not cause the Loop Facility to return values, but they can be
used in conjunction with value-accumulation clauses to return values (see
section <a 
href="clmse139.html#x170-24600026.8">26.8<!--tex4ht:ref: LOOP-ACCUM-SECTION --></a>).
<!--l. 462--><p class="indent" >   All variables are initialized in the loop prologue. The scope of the variable
binding is lexical unless it is proclaimed special; thus, the variable can be accessed
only by expressions that lie textually within the loop. Stepping assignments are
made in the loop body before any other expressions are evaluated in the
body.
<!--l. 469--><p class="indent" >   The variable argument in iteration control clauses can be a destructuring list.
A destructuring list is a tree whose non-null atoms are symbols that can be
assigned a value (see section <a 
href="clmse143.html#x174-25200026.12.2">26.12.2<!--tex4ht:ref: LOOP-DESTRUCTURING-SECTION --></a>).
<!--l. 474--><p class="indent" >   The iteration control clauses <i>for</i>, <i>as</i>, and <i>repeat</i> must precede any other loop
clauses except <i>initially</i>, <i>with</i>, and <i>named</i>, since they establish variable
bindings. When iteration control clauses are used in a loop, termination
tests in the loop body are evaluated before any other loop body code is
executed.
<!--l. 481--><p class="indent" >   If you use multiple iteration clauses to control iteration, variable initialization
and stepping occur sequentially by default. You can use the <i>and</i> construct
to connect two or more iteration clauses when sequential binding and
stepping are not necessary. The iteration behavior of clauses joined by <i>and</i>
is analogous to the behavior of the Common Lisp macro <i>do</i> relative to
<i>do*</i>.
<!--l. 489--><p class="indent" >   [X3J13 voted in March 1989 ⟨<b>?</b>⟩ to correct a minor inconsistency in the
original syntactic speciﬁcation for <i>loop</i>. Only <i>for</i> and <i>as</i> clauses (not <i>repeat</i>
clauses) may be joined by the <i>and</i> construct. The precise syntax is as follows.
<div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">for-as ::=  {<i><i>for</i> |<i>as</i></i>} for-as-subclause {<i><i>and</i> for-as-subclause</i>}∗
</td></tr></table>
<!--l. 494--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:157;" 
class="tabbing">for-as-subclause ::= </td><td  
class="tabbing">for-as-arithmetic | for-as-in-list</td></tr></table>
<!--l. 495--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:157;" 
class="tabbing">                         </td><td  
class="tabbing">| for-as-on-list | for-as-equals-then</td></tr></table>
<!--l. 496--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                       | for-as-across | for-as-hash | for-as-package </td><td style="width:165;" 
class="tabbing"></td></tr></table>
<!--l. 497--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">for-as-arithmetic ::= </td><td style="width:165;" 
class="tabbing">var  [<i>type-spec</i>]   [<i> {<i><i>from</i> |<i>downfrom</i> |<i>upfrom</i></i>} expr1</i>] </td></tr></table>
<!--l. 498--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                            </td><td  
class="tabbing"> [<i> {<i><i>to</i> |<i>downto</i> |<i>upto</i> |<i>below</i> |<i>above</i></i>} expr2</i>] </td></tr></table>
<!--l. 499--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                             [<i><i>by</i> expr3</i>]  </td><td  
class="tabbing"></td></tr></table>
<!--l. 500--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">for-as-in-list ::= var  [<i>type-spec</i>]  <i>in</i> expr1  [<i><i>by</i> step-fun</i>] </td></tr></table>
<!--l. 501--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">for-as-on-list ::= var  [<i>type-spec</i>]  <i>on</i> expr1  [<i><i>by</i> step-fun</i>] </td></tr></table>
<!--l. 502--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:121;" 
class="tabbing">for-as-equals-then ::= var  [<i>type-spec</i>]  <i>=</i> expr1  [<i><i>then</i> step-fun</i>] </td></tr></table>
<!--l. 503--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">for-as-across ::= var  [<i>type-spec</i>]  <i>across</i> vector</td></tr></table>
<!--l. 504--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:121;" 
class="tabbing">for-as-hash ::= </td><td  
class="tabbing">var  [<i>type-spec</i>]  <i>being</i> {<i><i>each</i> |<i>the</i></i>}</td></tr></table>
<!--l. 505--><p class="indent" >           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:121;" 
class="tabbing">         </td><td  
class="tabbing">{<i><i>hash-key</i> |<i>hash-keys</i> |<i>hash-value</i> |<i>hash-values</i></i>}</td></tr></table>
<!--l. 506--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">         </td><td style="width:145;" 
class="tabbing">{<i><i>in</i> |<i>of</i></i>} hash-table</td></tr></table>
<!--l. 507--><p class="indent" >               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                    [<i><i>using</i> <i>(</i>{<i><i>hash-value</i> |<i>hash-key</i></i>} other-var<i>)</i></i>]  </td><td style="width:145;" 
class="tabbing"></td></tr></table>
<!--l. 508--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">for-as-package ::= </td><td  
class="tabbing">var  [<i>type-spec</i>]  <i>being</i> {<i><i>each</i> |<i>the</i></i>}</td></tr></table>
<!--l. 509--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:213;" 
class="tabbing">           </td><td  
class="tabbing">for-as-package-keyword</td></tr></table>
<!--l. 510--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                       {<i><i>in</i> |<i>of</i></i>} package </td><td  
class="tabbing"></td></tr></table>
<!--l. 511--><p class="indent" >       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">for-as-package-keyword ::= </td><td  
class="tabbing"><i>symbol</i> |<i>present-symbol</i> |<i>external-symbol</i></td></tr></table>
<!--l. 512--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                         | <i>symbols</i> |<i>present-symbols</i> |<i>external-symbols</i> </td><td  
class="tabbing"></td></tr></table>
<!--l. 514--><p class="indent" >
</div>
<!--l. 515--><p class="noindent" >This correction made <i>for</i> and <i>as</i> clauses syntactically similar to <i>with</i> clauses. I have
changed all examples in this chapter to reﬂect the corrected syntax.—GLS]
<!--l. 519--><p class="indent" >   In the following example, the variable <i>x</i> is stepped before <i>y</i> is stepped; thus,
the value of <i>y</i> reﬂects the updated value of <i>x</i>: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for x from 1 to 9
</td></tr></table>
<!--l. 523--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      for y = nil then x</td></tr></table>
<!--l. 524--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      collect (list x y))</td></tr></table>
<!--l. 525--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ ((1 NIL) (2 2) (3 3) (4 4) (5 5) (6 6) (7 7) (8 8) (9 9))</td></tr></table>
<!--l. 527--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 529--><p class="indent" >   In the following example, <i>x</i> and <i>y</i> are stepped in parallel: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for x from 1 to 9
</td></tr></table>
<!--l. 531--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      and y = nil then x</td></tr></table>
<!--l. 532--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      collect (list x y))</td></tr></table>
<!--l. 533--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ ((1 NIL) (2 1) (3 2) (4 3) (5 4) (6 5) (7 6) (8 7) (9 8))</td></tr></table>
<!--l. 535--><p class="indent" >
</div>
</div>
<!--l. 537--><p class="indent" >   The <i>for</i> and <i>as</i> clauses iterate by using one or more local loop variables that
are initialized to some value and that can be modiﬁed or stepped after each
iteration. For these clauses, iteration terminates when a local variable
reaches some speciﬁed value or when some other loop clause terminates
iteration. At each iteration, variables can be stepped by an increment or a
decrement or can be assigned a new value by the evaluation of an expression.
Destructuring can be used to assign initial values to variables during
iteration.
<!--l. 548--><p class="indent" >   The <i>for</i> and <i>as</i> keywords are synonyms and may be used interchangeably.
There are seven syntactic representations for these constructs. In each syntactic
description, the data type of var can be speciﬁed by the optional type-spec
argument. If var is a destructuring list, the data type speciﬁed by the type-spec
argument must appropriately match the elements of the list (see sections <a 
href="clmse143.html#x174-25100026.12.1">26.12.1<!--tex4ht:ref: LOOP-TYPES-SECTION --></a>
and <a 
href="clmse143.html#x174-25200026.12.2">26.12.2<!--tex4ht:ref: LOOP-DESTRUCTURING-SECTION --></a>).
<!--l. 559--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> for </b> <a 
 id="dx168-244001"></a><a 
 id="x168-244002r841"></a>   var  [ <i>type-spec</i>]   [ <i> {<i><i>from</i>|<i>downfrom</i>|<i>upfrom</i></i>}expr1</i>]   [ <i> {<i><i>to</i>|<i>downto</i>|<i>upto</i>|<i>below</i>|<i>above</i></i>}expr2</i>]   [ <i><i>by</i> expr3</i>]     <i>[Loop clause]</i><b> as </b> <a 
 id="dx168-244003"></a><a 
 id="x168-244004r842"></a>   var  [ <i>type-spec</i>]   [ <i> {<i><i>from</i>|<i>downfrom</i>|<i>upfrom</i></i>}expr1</i>]   [ <i> {<i><i>to</i>|<i>downto</i>|<i>upto</i>|<i>below</i>|<i>above</i></i>}expr2</i>]   [ <i><i>by</i> expr3</i>]
</td></tr></table>
<!--l. 565--><p class="indent" >
</div>
   [This is the ﬁrst of seven <i>for</i>/<i>as</i> syntaxes.—GLS]
   The <i>for</i> or <i>as</i> construct iterates from the value speciﬁed by expr1
to the value speciﬁed by expr2 in increments or decrements denoted by
                                                                          

                                                                          
expr3. Each expression is evaluated only once and must evaluate to a
number.
   The variable var is bound to the value of expr1 in the ﬁrst iteration and is
stepped by the value of expr3 in each succeeding iteration, or by 1 if expr3 is not
provided.
   The following loop keywords serve as valid prepositions within this
syntax.
<div class=flushdesc>
  <div><br /><b>
<i>from</i>                                                                      </b>
The loop keyword <i>from</i> marks the value from which stepping begins, as
speciﬁed  by  expr1.  Stepping  is  incremental  by  default.  For  decremental
stepping, use <i>above</i> or <i>downto</i> with expr2. For incremental stepping, the
default <i>from</i> value is <i>0</i>.
  <br /><b>
<i>downfrom</i>, <i>upfrom</i>                                                        </b>
The loop keyword <i>downfrom</i> indicates that the variable var is decreased in
decrements speciﬁed by expr3; the loop keyword <i>upfrom</i> indicates that var
is increased in increments speciﬁed by expr3.
  <br /><b>
<i>to</i>                                                                        </b>
The loop keyword <i>to</i> marks the end value for stepping speciﬁed in expr2.
Stepping is incremental by default. For decremental stepping, use <i>downto</i>,
<i>downfrom</i>, or <i>above</i> with expr2.
  <br /><b>
<i>downto</i>, <i>upto</i>                                                             </b>
The loop keyword <i>downto</i> allows iteration to proceed from a larger number
to a smaller number by the decrement expr3. The loop keyword <i>upto</i> allows
iteration  to  proceed  from  a  smaller  number  to  a  larger  number  by  the
increment expr3. Since there is no default for expr1 in decremental stepping,
you must supply a value with <i>downto</i>.
  <br /><b>
                                                                          

                                                                          
<i>below</i>, <i>above</i>                                                              </b>
The  loop  keywords  <i>below</i> and  <i>above</i> are  analogous  to  <i>upto</i> and  <i>downto</i>,
respectively.  These  keywords  stop  iteration  just  before  the  value  of  the
variable var reaches the value speciﬁed by expr2; the end value of expr2 is
not included. Since there is no default for expr1 in decremental stepping, you
must supply a value with <i>above</i>.
  <br /><b>
<i>by</i>                                                                        </b>
The loop keyword <i>by</i> marks the increment or decrement speciﬁed by expr3.
The value of expr3 can be any positive number. The default value is <i>1</i>.</div>
</div>
<!--l. 624--><p class="noindent" >At least one of these prepositions must be used with this syntax.
<!--l. 626--><p class="indent" >   In an iteration control clause, the <i>for</i> or <i>as</i> construct causes termination when
the speciﬁed limit is reached. That is, iteration continues until the value var is
stepped to the exclusive or inclusive limit speciﬁed by expr2. The range is
exclusive if expr3 increases or decreases var to the value of expr2 without
reaching that value; the loop keywords <i>below</i> and <i>above</i> provide exclusive limits.
An inclusive limit allows var to attain the value of expr2; <i>to</i>, <i>downto</i>, and <i>upto</i>
provide inclusive limits.
<!--l. 637--><p class="indent" >   A common convention is to use <i>for</i> to introduce new iterations and <i>as</i> to
introduce iterations that depend on a previous iteration speciﬁcation. [However,
<i>loop</i> does not enforce this convention, and some of the examples below violate it.
De gustibus non disputandum est.—GLS]
<!--l. 642--><p class="indent" >   Examples: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Print some numbers.
</td></tr></table>
<!--l. 644--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop as i from 1 to 5
</td></tr></table>
<!--l. 645--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:155;" 
class="tabbing">      do (print i)) </td><td style="width:429;" 
class="tabbing-right">                                         ;Prints 5 lines</td></tr></table>
<!--l. 646--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">1</td></tr></table>
<!--l. 647--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">2</td></tr></table>
<!--l. 648--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">3</td></tr></table>
<!--l. 649--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">4</td></tr></table>
                                                                          

                                                                          
<!--l. 650--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">5</td></tr></table>
<!--l. 651--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 652--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 653--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Print every third number.</td></tr></table>
<!--l. 654--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 10 downto 1 by 3
</td></tr></table>
<!--l. 655--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:155;" 
class="tabbing">      do (print i)) </td><td style="width:429;" 
class="tabbing-right">                                         ;Prints 4 lines</td></tr></table>
<!--l. 656--><p class="indent" >                                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">10</td></tr></table>
<!--l. 657--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">7</td></tr></table>
<!--l. 658--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">4</td></tr></table>
<!--l. 659--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">1</td></tr></table>
<!--l. 660--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 662--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Step incrementally from the default starting value.
</td></tr></table>
<!--l. 665--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop as i below 5
</td></tr></table>
<!--l. 666--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:155;" 
class="tabbing">      do (print i)) </td><td style="width:429;" 
class="tabbing-right">                                         ;Prints 5 lines</td></tr></table>
<!--l. 667--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">0</td></tr></table>
<!--l. 668--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">1</td></tr></table>
<!--l. 669--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">2</td></tr></table>
<!--l. 670--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">3</td></tr></table>
<!--l. 671--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">4</td></tr></table>
<!--l. 672--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 674--><p class="indent" >
</div>
</div>
<!--l. 678--><p class="noindent" ><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> for </b> <a 
 id="dx168-244005"></a><a 
 id="x168-244006r843"></a>   var  [ <i>type-spec</i>]   <i>in</i> expr1  [ <i><i>by</i> step-fun</i>]     <i>[Loop clause]</i><b> as </b> <a 
 id="dx168-244007"></a><a 
 id="x168-244008r844"></a>   var  [ <i>type-spec</i>]   <i>in</i> expr1  [ <i><i>by</i> step-fun</i>]
</td></tr></table>
<!--l. 680--><p class="indent" >
</div>
   [This is the second of seven <i>for</i>/<i>as</i> syntaxes.—GLS]
   This construct iterates over the contents of a list. It checks for the end of the
list as if using the Common Lisp function <i>endp</i>. The variable var is bound to
the successive elements of the list expr1 before each iteration. At the
end of each iteration, the function step-fun is called on the list and is
expected to produce a successor list; the default value for step-fun is the <i>cdr</i>
function.
   The <i>for</i> or <i>as</i> construct causes termination when the end of the list is
reached. The loop keywords <i>in</i> and <i>by</i> serve as valid prepositions in this
syntax.
   Examples: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Print every item in a list.
</td></tr></table>
<!--l. 698--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:353;" 
class="tabbing">(loop for item in &#x2019;(1 2 3 4 5) do (print item)) </td><td style="width:231;" 
class="tabbing-right">                ;Prints 5 lines
</td></tr></table>
<!--l. 699--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">1</td></tr></table>
<!--l. 700--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">2</td></tr></table>
<!--l. 701--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">3</td></tr></table>
<!--l. 702--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">4</td></tr></table>
<!--l. 703--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">5</td></tr></table>
<!--l. 704--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 705--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 706--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Print every other item in a list.</td></tr></table>
<!--l. 707--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for item in &#x2019;(1 2 3 4 5) by #&#x2019;cddr
</td></tr></table>
<!--l. 708--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:184;" 
class="tabbing">      do (print item)) </td><td style="width:400;" 
class="tabbing-right">                                     ;Prints 3 lines</td></tr></table>
<!--l. 709--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">1</td></tr></table>
<!--l. 710--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">3</td></tr></table>
<!--l. 711--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">5</td></tr></table>
                                                                          

                                                                          
<!--l. 712--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 714--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Destructure items of a list, and sum the x values
</td></tr></table>
<!--l. 716--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; using ﬁxnum arithmetic.</td></tr></table>
<!--l. 717--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for (item . x) (t . ﬁxnum)</td></tr></table>
<!--l. 718--><p class="indent" >                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          in &#x2019;((A . 1) (B . 2) (C . 3))</td></tr></table>
<!--l. 719--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      unless (eq item &#x2019;B) sum x)</td></tr></table>
<!--l. 720--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 4</td></tr></table>
<!--l. 722--><p class="indent" >
</div>
</div>
<!--l. 726--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> for </b> <a 
 id="dx168-244009"></a><a 
 id="x168-244010r845"></a>   var  [ <i>type-spec</i>]   <i>on</i> expr1  [ <i><i>by</i> step-fun</i>]     <i>[Loop clause]</i><b> as </b> <a 
 id="dx168-244011"></a><a 
 id="x168-244012r846"></a>   var  [ <i>type-spec</i>]   <i>on</i> expr1  [ <i><i>by</i> step-fun</i>]
</td></tr></table>
<!--l. 728--><p class="indent" >
</div>
   [This is the third of seven <i>for</i>/<i>as</i> syntaxes.—GLS]
   This construct iterates over the contents of a list. It checks for the end of the
list as if using the Common Lisp function <i>endp</i>. The variable var is bound to the
successive tails of the list expr1. At the end of each iteration, the function step-fun
is called on the list and is expected to produce a successor list; the default value
for step-fun is the <i>cdr</i> function.
   The loop keywords <i>on</i> and <i>by</i> serve as valid prepositions in this syntax.
The <i>for</i> or <i>as</i> construct causes termination when the end of the list is
reached.
   Examples: <div class=lisp> <div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Collect successive tails of a list.
</td></tr></table>
<!--l. 746--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for sublist on &#x2019;(a b c d)</td></tr></table>
<!--l. 747--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      collect sublist)</td></tr></table>
<!--l. 748--><p class="indent" >                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ ((A B C D) (B C D) (C D) (D))</td></tr></table>
<!--l. 749--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 750--><p class="indent" >           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Print a list by using destructuring with the loop keyword ON.</td></tr></table>
<!--l. 751--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for (item) on &#x2019;(1 2 3)</td></tr></table>
<!--l. 752--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:184;" 
class="tabbing">      do (print item)) </td><td style="width:400;" 
class="tabbing-right">                                     ;Prints 3 lines</td></tr></table>
<!--l. 753--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">1</td></tr></table>
<!--l. 754--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">2</td></tr></table>
<!--l. 755--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">3</td></tr></table>
<!--l. 756--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 757--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 758--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Print items in a list without using destructuring.</td></tr></table>
<!--l. 759--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for item in &#x2019;(1 2 3)</td></tr></table>
<!--l. 760--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:184;" 
class="tabbing">      do (print item)) </td><td style="width:400;" 
class="tabbing-right">                                     ;Prints 3 lines</td></tr></table>
<!--l. 761--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">1</td></tr></table>
<!--l. 762--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">2</td></tr></table>
<!--l. 763--><p class="indent" >                                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">3</td></tr></table>
<!--l. 764--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 766--><p class="indent" >
</div>
</div>
<!--l. 770--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> for </b> <a 
 id="dx168-244013"></a><a 
 id="x168-244014r847"></a>   var  [ <i>type-spec</i>]   <i><tt>=</tt></i> expr1  [ <i><i>then</i> expr2</i>]     <i>[Loop clause]</i><b> as </b> <a 
 id="dx168-244015"></a><a 
 id="x168-244016r848"></a>   var  [ <i>type-spec</i>]   <i><tt>=</tt></i> expr1  [ <i><i>then</i> expr2</i>]
</td></tr></table>
<!--l. 772--><p class="indent" >
</div>
   [This is the fourth of seven <i>for</i>/<i>as</i> syntaxes.—GLS]
                                                                          

                                                                          
   This construct initializes the variable var by setting it to the result of
evaluating expr1 on the ﬁrst iteration, then setting it to the result of evaluating
expr2 on the second and subsequent iterations. If expr2 is omitted, the construct
uses expr1 on the second and subsequent iterations. When expr2 is omitted, the
expanded code shows the following optimization:
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Sample original code:
</td></tr></table>
<!--l. 785--><p class="indent" >                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for x = expr1 then expr2 do (print x))</td></tr></table>
<!--l. 787--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The usual expansion:
</td></tr></table>
<!--l. 789--><p class="indent" >                                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(tagbody</td></tr></table>
<!--l. 790--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (setq x expr1)</td></tr></table>
<!--l. 791--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  tag (print x)</td></tr></table>
<!--l. 792--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (setq x expr2)</td></tr></table>
<!--l. 793--><p class="indent" >                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (go tag))</td></tr></table>
<!--l. 795--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The optimized expansion:
</td></tr></table>
<!--l. 797--><p class="indent" >                                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(tagbody</td></tr></table>
<!--l. 798--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  tag (setq x expr1)</td></tr></table>
                                                                          

                                                                          
<!--l. 799--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (print x)</td></tr></table>
<!--l. 800--><p class="indent" >                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (go tag))</td></tr></table>
<!--l. 802--><p class="indent" >
</div>
</div>
<!--l. 804--><p class="noindent" >The loop keywords <i>=</i> and <i>then</i> serve as valid prepositions in this syntax. This
construct does not provide any termination conditions.
<!--l. 808--><p class="indent" >   Example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Collect some numbers.
</td></tr></table>
<!--l. 810--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for item = 1 then (+ item 10)</td></tr></table>
<!--l. 811--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      repeat 5</td></tr></table>
<!--l. 812--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      collect item)</td></tr></table>
<!--l. 813--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (1 11 21 31 41)</td></tr></table>
<!--l. 815--><p class="indent" >
</div>
</div>
<!--l. 820--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> for </b> <a 
 id="dx168-244017"></a><a 
 id="x168-244018r849"></a>   var  [ <i>type-spec</i>]   <i>across</i> vector   <i>[Loop clause]</i><b> as </b> <a 
 id="dx168-244019"></a><a 
 id="x168-244020r850"></a>   var  [ <i>type-spec</i>]   <i>across</i> vector
</td></tr></table>
<!--l. 822--><p class="indent" >
</div>
   [This is the ﬁfth of seven <i>for</i>/<i>as</i> syntaxes.—GLS]
   This construct binds the variable var to the value of each element in the array
vector.
   The loop keyword <i>across</i> marks the array vector; <i>across</i> is used as a
preposition in this syntax. Iteration stops when there are no more elements in the
speciﬁed array that can be referenced.
   Some implementations might use a [user-supplied—GLS] <i>the</i> special form in
the vector form to produce more eﬃcient code.
   Example: <div class=lisp> <div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for char across (the simple-string (ﬁnd-message port))
</td></tr></table>
<!--l. 838--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      do (write-char char stream))</td></tr></table>
<!--l. 840--><p class="indent" >
</div>
</div>
<!--l. 844--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> for </b> <a 
 id="dx168-244021"></a><a 
 id="x168-244022r851"></a>   var  [ <i>type-spec</i>]   <i>being</i> {<i><i>each</i>|<i>the</i></i>}{<i><i>hash-key</i>|<i>hash-keys</i>|<i>hash-value</i>|<i>hash-values</i></i>}{<i><i>in</i>|<i>of</i></i>}hash − table [<i><i>using</i>( {<i><i>hash-value</i>|<i>hash-key</i></i>}other − var)</i>] <i>[Loop clause]</i><b> as </b><a 
 id="dx168-244023"></a><a 
 id="x168-244024r852"></a>var [<i>type − spec</i>] <i>being</i>{<i><i>each</i>|<i>the</i></i>}{<i><i>hash-key</i>|<i>hash-keys</i>|<i>hash-value</i>|<i>hash-values</i></i>}{<i><i>in</i>|<i>of</i></i>}hash − table [<i><i>using</i>( {<i><i>hash-value</i>|<i>hash-key</i></i>}other − var)</i>]
</td></tr></table>
<!--l. 850--><p class="indent" >
</div>
   [This is the sixth of seven <i>for</i>/<i>as</i> syntaxes.—GLS]
   This construct iterates over the elements, keys, and values of a hash table. The
variable var takes on the value of each hash key or hash value in the speciﬁed
hash table.
   The following loop keywords serve as valid prepositions within this
syntax.
<div class=flushdesc>
  <div><br /><b>
<i>being</i>                                                                     </b>
The keyword <i>being</i> marks the loop method to be used, either <i>hash-key</i> or
<i>hash-value</i>.
  <br /><b>
<i>each</i>, <i>the</i>                                                                 </b>
For purposes of readability, the loop keyword <i>each</i> should follow the loop
keyword <i>being</i> when <i>hash-key</i> or <i>hash-value</i> is used. The loop keyword <i>the</i> is
used with <i>hash-keys</i> and <i>hash-values</i>.
  <br /><b>
<i>hash-key</i>, <i>hash-keys</i>                                                       </b>
These loop keywords access each key entry of the hash table. If the name
                                                                          

                                                                          
<i>hash-value</i> is speciﬁed in a <i>using</i> construct with one of these loop methods,
the iteration can optionally access the keyed value. The order in which the
keys are accessed is undeﬁned; empty slots in the hash table are ignored.
  <br /><b>
<i>hash-value</i>, <i>hash-values</i>                                                   </b>
These loop keywords access each value entry of a hash table. If the name
<i>hash-key</i> is speciﬁed in a <i>using</i> construct with one of these loop methods, the
iteration can optionally access the key that corresponds to the value. The
order in which the keys are accessed is undeﬁned; empty slots in the hash
table are ignored.
  <br /><b>
<i>using</i>                                                                     </b>
The loop keyword <i>using</i> marks the optional key or the keyed value to be
accessed. It allows you to access the hash key if iterating over the hash values,
and the hash value if iterating over the hash keys.
  <br /><b>
<i>in</i>, <i>of </i>                                                                    </b>
These loop prepositions mark the hash table hash-table.</div>
</div>
<!--l. 894--><p class="noindent" >Iteration stops when there are no more hash keys or hash values to be referenced
in the speciﬁed hash table.
<!--l. 900--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> for </b> <a 
 id="dx168-244025"></a><a 
 id="x168-244026r853"></a>   var  [ <i>type-spec</i>]   <i>being</i> {<i><i>each</i>|<i>the</i></i>}{<i><i>symbol</i>|<i>present-symbol</i>|<i>external-symbol</i>|<i>symbols</i>|<i>present-symbols</i>|<i>external-symbols</i></i>}{<i><i>in</i>|<i>of</i></i>}package<i>[Loop clause]</i><b> as </b><a 
 id="dx168-244027"></a><a 
 id="x168-244028r854"></a>var [<i>type − spec</i>] <i>being</i>{<i><i>each</i>|<i>the</i></i>}{<i><i>symbol</i>|<i>present-symbol</i>|<i>external-symbol</i>|<i>symbols</i>|<i>present-symbols</i>|<i>external-symbols</i></i>}{<i><i>in</i>|<i>of</i></i>}package
</td></tr></table>
<!--l. 908--><p class="indent" >
</div>
   [This is the last of seven <i>for</i>/<i>as</i> syntaxes.—GLS]
   This construct iterates over the symbols in a package. The variable var takes
on the value of each symbol in the speciﬁed package.
   The following loop keywords serve as valid prepositions within this
syntax.
<div class=flushdesc>
                                                                          

                                                                          
  <div><br /><b>
<i>being</i>                                                                     </b>
The   keyword   <i>being</i>   marks   the   loop   method   to   be   used:   <i>symbol</i>,
<i>present-symbol</i>, or <i>external-symbol</i>.
  <br /><b>
<i>each</i>, <i>the</i>                                                                 </b>
For  purposes  of  readability,  the  loop  keyword  <i>each</i>  should  follow  the
loop  keyword  <i>being</i>  when  <i>symbol</i>,  <i>present-symbol</i>,  or  <i>external-symbol</i>  is
used.  The  loop  keyword  <i>the</i>  is  used  with  <i>symbols</i>,  <i>present-symbols</i>,  and
<i>external-symbols</i>.
  <br /><b>
<i>present-symbol</i>, <i>present-symbols</i>                                           </b>
These loop methods iterate over the symbols that are present but not external
in a package. The package to be iterated over is speciﬁed in the same way that
package arguments to the Common Lisp function <i>ﬁnd-package</i> are speciﬁed.
If you do not specify the package for the iteration, the current package is
used. If you specify a package that does not exist, an error is signaled.
  <br /><b>
<i>symbol</i>, <i>symbols</i>                                                           </b>
These loop methods iterate over symbols that are accessible from a given
package. The package to be iterated over is speciﬁed in the same way that
package arguments to the Common Lisp function <i>ﬁnd-package</i> are speciﬁed.
If you do not specify the package for the iteration, the current package is
used. If you specify a package that does not exist, an error is signaled.
  <br /><b>
<i>external-symbol</i>, <i>external-symbols</i>                                          </b>
These loop methods iterate over the external symbols of a package. The
package  to  be  iterated  over  is  speciﬁed  in  the  same  way  that  package
arguments to the Common Lisp function <i>ﬁnd-package</i> are speciﬁed. If you
do not specify the package for the iteration, the current package is used. If
you specify a package that does not exist, an error is signaled.
                                                                          

                                                                          
  <br /><b>
<i>in</i>, <i>of </i>                                                                    </b>
These loop prepositions mark the package package.</div>
</div>
<!--l. 960--><p class="noindent" >Iteration stops when there are no more symbols to be referenced in the speciﬁed
package.
<!--l. 963--><p class="indent" >   Example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for x being each present-symbol of &#x0022;COMMON-LISP-USER&#x0022;
</td></tr></table>
<!--l. 965--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:159;" 
class="tabbing">      do (print x)) </td><td style="width:425;" 
class="tabbing-right">                         ;Prints 7 lines in this example</td></tr></table>
<!--l. 966--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">COMMON-LISP-USER::IN</td></tr></table>
<!--l. 967--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">COMMON-LISP-USER::X</td></tr></table>
<!--l. 968--><p class="indent" >                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">COMMON-LISP-USER::ALWAYS</td></tr></table>
<!--l. 969--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">COMMON-LISP-USER::FOO</td></tr></table>
<!--l. 970--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">COMMON-LISP-USER::Y</td></tr></table>
<!--l. 971--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">COMMON-LISP-USER::FOR</td></tr></table>
<!--l. 972--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">COMMON-LISP-USER::LUCID</td></tr></table>
<!--l. 973--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 975--><p class="indent" >
</div>
</div>
<!--l. 981--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> repeat </b> <a 
 id="dx168-244029"></a><a 
 id="x168-244030r855"></a>   expr
</td></tr></table>
<!--l. 982--><p class="indent" >
</div>
   The <i>repeat</i> construct causes iteration to terminate after a speciﬁed number of
times. The loop body is executed n times, where n is the value of the expression
expr. The expr argument is evaluated one time in the loop prologue. If the
expression evaluates to zero or to a negative number, the loop body is not
evaluated.
   The clause <i>repeat</i> n is roughly equivalent to a clause such as <div class=lisp> <div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">for internal-variable downfrom (- n 1) to 0
</td></tr></table>
<!--l. 995--><p class="indent" >
</div>
</div>
<!--l. 996--><p class="noindent" >but, in some implementations, the <i>repeat</i> construct might be more eﬃcient.
<!--l. 1000--><p class="indent" >   Examples: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:114;" 
class="tabbing">(loop repeat 3 </td><td style="width:470;" 
class="tabbing-right">                                              ;Prints 3 lines
</td></tr></table>
<!--l. 1002--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      do (format t &#x0022;What I say three times is true<tt>~</tt>%&#x0022;))</td></tr></table>
<!--l. 1003--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">What I say three times is true</td></tr></table>
<!--l. 1004--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">What I say three times is true</td></tr></table>
<!--l. 1005--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">What I say three times is true</td></tr></table>
<!--l. 1006--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 1007--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1008--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:129;" 
class="tabbing">(loop repeat -15 </td><td style="width:455;" 
class="tabbing-right">                                           ;Prints nothing</td></tr></table>
<!--l. 1009--><p class="indent" >               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      do (format t &#x0022;What you see is what you expect<tt>~</tt>%&#x0022;))</td></tr></table>
<!--l. 1010--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 1012--><p class="indent" >
</div>
</div>
                                                                          

                                                                          
   <!--l. 1017--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse138.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse136.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse136.html#tailclmse136.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse137.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch26.html#clmse137.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 1017--><p class="indent" >   <a 
 id="tailclmse137.html"></a>  
</body></html> 
