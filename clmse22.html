<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Type Speciﬁers That Specialize Уточняющие спецификаторы типов</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-06 23:16:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 340--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse23.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse21.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse21.html#tailclmse21.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse22.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch4.html#clmse22.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">4.5   </span> <a 
 id="x31-920004.5"></a>Type Speciﬁers That Specialize Уточняющие спецификаторы
типов</h3>
<!--l. 343--><p class="noindent" >Some type speciﬁer lists denote <i>specializations</i> of data types named by symbols.
These specializations may be reﬂected by more eﬃcient representations in the
underlying implementation. As an example, consider the type (array short-ﬂoat).
Implementation A may choose to provide a specialized representation for arrays
of short ﬂoating-point numbers, and implementation B may choose not
to.
<!--l. 351--><p class="indent" >   Некоторые списки, представляющие типы, с помощью символов могут
быть более специализированы. Такие подробности могут быть отражены, как
более эффективная реализация. Например, предположим что (array
short-ﬂoat). Реализация A, может выбрать специализированное представление
для массива коротких с плавающей точкой, а реализация B может выбрать
более общее представление.
<!--l. 357--><p class="indent" >   If you should want to create an array for the express purpose of holding
only short-ﬂoat objects, you may optionally specify to <a 
href="clmse94.html#x116-527002r558">make-array</a> the
element type short-ﬂoat. This does not <i>require</i> <a 
href="clmse94.html#x116-527002r558">make-array</a> to create an
object of type (array short-ﬂoat); it merely <i>permits</i> it. The request is
construed to mean “Produce the most specialized array representation
capable of holding short-ﬂoats that the implementation can provide.”
Implementation A will then produce a specialized array of type (array
short-ﬂoat), and implementation B will produce an ordinary array of type (array
t).
<!--l. 368--><p class="indent" >   Если вы хотите создать массива в целях хранения только коротких с
плавающей точкой, вы можете опционально указать для <a 
href="clmse94.html#x116-527002r558">make-array</a> тип
элементов short-ﬂoat. Это <i>не потребует</i> от <a 
href="clmse94.html#x116-527002r558">make-array</a> создать объект типа
(array short-ﬂoat); это просто позволит ей выбрать такой тип. Запрос можно
объяснить так: «Предоставь наиболее специализированный массив,
который может хранить короткие с плавающей точкой, который только
может предоставить реализация». Реализация A тогда предоставит
специализированный массив типа (array short-ﬂoat), а реализация B —
                                                                          

                                                                          
простой массив типа (array t).
<!--l. 377--><p class="indent" >   If one were then to ask whether the array were actually of type (array
short-ﬂoat), implementation A would say “yes,” but implementation B would say
“no.” This is a property of <a 
href="clmse94.html#x116-527002r558">make-array</a> and similar functions: what you ask for is
not necessarily what you get.
<!--l. 382--><p class="indent" >   На вопрос, действительно ли тип созданного массива (array short-ﬂoat),
реализация A ответит «да», но реализация B ответит «нет». Это свойство
<a 
href="clmse94.html#x116-527002r558">make-array</a> и подобных ей функций: то, что вы просите, необязательно
является тем, что вы получите.
<div class=obsolete>
<!--l. 388--><p class="indent" >   Types can therefore be used for two diﬀerent purposes: <i>declaration</i> and
<i>discrimination</i>. Declaring to <a 
href="clmse94.html#x116-527002r558">make-array</a> that elements will always be of type
short-ﬂoat permits optimization. Similarly, declaring that a variable takes on
values of type (array short-ﬂoat) amounts to saying that the variable will take on
values that might be produced by specifying element type short-ﬂoat to
<a 
href="clmse94.html#x116-527002r558">make-array</a>. On the other hand, if the predicate <a 
href="clmse32.html#x43-90002r21">typep</a> is used to test whether an
object is of type (array short-ﬂoat), only objects actually of that specialized
type can satisfy the test; in implementation B no object can pass that
test.
<!--l. 400--><p class="indent" >   Таким образом, типы могут быть использованы для двух различных
целей: <i>декларации</i> и <i>распознавания</i> FIXME. Декларация в <a 
href="clmse94.html#x116-527002r558">make-array</a>,
которая декларирует элементы могут быть только короткие с плавающей
точкой допускает оптимизацию. Так же, дакларация того, что переменная
принимает только значения типа (array short-ﬂoat) означает, что переменная
может принимать только значения, которые могут быть возвращены
функцией <a 
href="clmse94.html#x116-527002r558">make-array</a> с указанным типом short-ﬂoat. С другой стороны, если
для проверки, принадлежит ли объект типу (array short-ﬂoat), используется
предикат <a 
href="clmse32.html#x43-90002r21">typep</a>, только объекты удовлетворяющие данному условию
могут пройти проверку; в реализации B ни один объект не пройдет
проверки.
</div>
<div class=new>
<!--l. 414--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx31-92001"></a>to eliminate the diﬀering treatment of types
when used “for discrimination” rather than “for declaration” on the grounds that
implementors have not treated the distinction consistently and (which is more
important) users have found the distinction confusing.
<!--l. 421--><p class="indent" >   As a consequence of this change, the behavior of <a 
href="clmse32.html#x43-90002r21">typep</a> and <a 
href="clmse32.html#x43-91003r22">subtypep</a> on array
and <a 
href="clmse71.html#x88-354002r273">complex</a> type speciﬁers must be modiﬁed. See the descriptions of
                                                                          

                                                                          
those functions. In particular, under their new behavior, implementation
B would say “yes,” agreeing with implementation A, in the discussion
above.
<!--l. 427--><p class="indent" >   Note that the distinction between declaration and discrimination remains
useful, if only so that we may remark that the specialized (list) form of the
<a 
href="clmse35.html#x47-129006r54">function</a> type speciﬁer may still be used only for declaration and not for
discrimination.
</div>
<div class=new>
<!--l. 435--><p class="indent" >   X3J13 voted in June 1988 <a 
 id="dx31-92002"></a>to clarify that while the specialized form of the
<a 
href="clmse35.html#x47-129006r54">function</a> type speciﬁer (a list of the symbol <a 
href="clmse35.html#x47-129006r54">function</a> possibly followed by
argument and value type speciﬁers) may be used only for declaration, the symbol
form (simply the name <a 
href="clmse35.html#x47-129006r54">function</a>) may be used for discrimination.
</div>
<!--l. 443--><p class="indent" >   The valid list-format names for data types are as follows:
<!--l. 445--><p class="indent" >   Далее перечисленны возможные имена типов, которые задаются
списком:
<div class=flushdesc>
<!--l. 448--><p class="indent" >
  <div><br /><b>
(array <i>element-type</i> <i>dimensions</i>)                                           </b>
This denotes the set of specialized arrays whose elements are all members
of the type <i>element-type</i> and whose dimensions match <i>dimensions</i>. For
declaration purposes, this type encompasses those arrays that can result by
specifying <i>element-type</i> as the element type to the function <a 
href="clmse94.html#x116-527002r558">make-array</a>; this
may be diﬀerent from what the type means for discrimination purposes.
<i>element-type</i> must be a valid type speciﬁer or unspeciﬁed. <i>dimensions</i> may be a
non-negative integer, which is the number of dimensions, or it may be a list
of non-negative integers representing the length of each dimension (any
dimension may be unspeciﬁed instead), or it may be unspeciﬁed. For example: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array integer 3)           ;Three-dimensional arrays of integers
</td></tr></table>
<!--l. 464--><p class="indent" >           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array integer (* * *))     ;Three-dimensional arrays of integers</td></tr></table>
<!--l. 465--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array * (4 5 6))           ;4-by-5-by-6 arrays</td></tr></table>
                                                                          

                                                                          
<!--l. 466--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array character (3 *))     ;Two-dimensional arrays of characters</td></tr></table>
<!--l. 467--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                            ; that have exactly three rows</td></tr></table>
<!--l. 468--><p class="indent" >               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array short-ﬂoat ())      ;Zero-rank arrays of short-format</td></tr></table>
<!--l. 469--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                            ; ﬂoating-point numbers</td></tr></table>
<!--l. 471--><p class="indent" >
</div>
</div>
<!--l. 472--><p class="noindent" >Note that (array t) is a proper subset of (array *). The reason is that (array t) is
the set of arrays that can hold any Common Lisp object (the elements are of type
<a 
href="clmse31.html#x42-87002r20">t</a>, which includes all objects). On the other hand, (array *) is the set of all arrays
whatsoever, including, for example, arrays that can hold only characters. Now
(array character) is not a subset of (array t); the two sets are in fact disjoint
because (array character) is not the set of all arrays that can hold characters but
rather the set of arrays that are specialized to hold precisely characters and no
other objects. To test whether an array foo can hold a character, one should not
use <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typep foo &#x2019;(array character))
</td></tr></table>
<!--l. 486--><p class="indent" >
</div>
</div>
<!--l. 487--><p class="noindent" >but rather <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(subtypep &#x2019;character (array-element-type foo))
</td></tr></table>
<!--l. 490--><p class="indent" >
</div>
</div>
<!--l. 491--><p class="noindent" >See <a 
href="clmse96.html#x118-536002r565">array-element-type</a>. <div class=new> X3J13 voted in January 1989 <a 
 id="dx31-92003"></a>to change <a 
href="clmse32.html#x43-90002r21">typep</a> and
<a 
href="clmse32.html#x43-91003r22">subtypep</a> so that the specialized array type speciﬁer means the same thing for
discrimination as for declaration: it encompasses those arrays that can result by
specifying <i>element-type</i> as the element type to the function <a 
href="clmse94.html#x116-527002r558">make-array</a>. Under
this interpretation (array character) might be the same type as (array t)
                                                                          

                                                                          
(although it also might not be the same). See <a 
href="clmse27.html#x36-62003r9">upgraded-array-element-type</a>.
However, <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typep foo &#x2019;(array character))
</td></tr></table>
<!--l. 508--><p class="indent" >
</div>
</div>
<!--l. 509--><p class="noindent" >is still not a legitimate test of whether the array foo can hold a character; one must
still say <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(subtypep &#x2019;character (array-element-type foo))
</td></tr></table>
<!--l. 513--><p class="indent" >
</div>
</div>
<!--l. 514--><p class="noindent" >to determine that question.
<!--l. 516--><p class="indent" >  X3J13 also voted in January 1989 <a 
 id="dx31-92004"></a>to specify that within the lexical scope of an
array type declaration, it is an error for an array element, when referenced, not to
be of the exact declared element type. A compiler may, for example, treat every
reference to an element of a declared array as if the reference were surrounded by
a <a 
href="clmse53.html#x67-247002r158">the</a> form mentioning the declared array element type (<i>not</i> the upgraded array
element type). Thus <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defun snarf-hex-digits (the-array)
</td></tr></table>
<!--l. 525--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (declare (type (array (unsigned-byte 4) 1) the-array))</td></tr></table>
<!--l. 526--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (do ((j (- (length array) 1) (- j 1))</td></tr></table>
<!--l. 527--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       (val 0 (logior (ash val 4)</td></tr></table>
<!--l. 528--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                      (aref the-array j))))</td></tr></table>
<!--l. 529--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ((&#x003C; j 0) val)))</td></tr></table>
<!--l. 531--><p class="indent" >
</div>
                                                                          

                                                                          
</div>
<!--l. 532--><p class="noindent" >may be treated as <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defun snarf-hex-digits (the-array)
</td></tr></table>
<!--l. 534--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (declare (type (array (unsigned-byte 4) 1) the-array))</td></tr></table>
<!--l. 535--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (do ((j (- (length array) 1) (- j 1))</td></tr></table>
<!--l. 536--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       (val 0 (logior (ash val 4)</td></tr></table>
<!--l. 537--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                      (the (unsigned-byte 4)</td></tr></table>
<!--l. 538--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                           (aref the-array j)))))</td></tr></table>
<!--l. 539--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ((&#x003C; j 0) val)))</td></tr></table>
<!--l. 541--><p class="indent" >
</div>
</div>
<!--l. 542--><p class="noindent" >The declaration amounts to a promise by the user that the <a 
href="clmse95.html#x117-533002r563">aref</a> will never produce a
value outside the interval 0 to 15, even if in that particular implementation the
array element type (unsigned-byte 4) is upgraded to, say, (unsigned-byte 8).
If such upgrading does occur, then values outside that range may in fact
be stored in the-array, as long as the code in snarf-hex-digits never sees
them.
<!--l. 550--><p class="indent" >  As a general rule, a compiler would be justiﬁed in transforming <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(aref (the (array <i>elt-type</i> ...) <i>a</i>) ...)
</td></tr></table>
<!--l. 553--><p class="indent" >
</div>
</div>
<!--l. 554--><p class="noindent" >into <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(the <i>elt-type</i> (aref (the (array <i>elt-type</i> ...) <i>a</i>) ...)
</td></tr></table>
<!--l. 557--><p class="indent" >
</div>
                                                                          

                                                                          
</div>
<!--l. 558--><p class="noindent" >It may also make inferences involving more complex functions, such as <a 
href="clmse84.html#x103-449003r433">position</a> or
<a 
href="clmse84.html#x103-448002r430">ﬁnd</a>. For example, <a 
href="clmse84.html#x103-448002r430">ﬁnd</a> applied to an array always returns either <a 
href="clmse31.html#x42-86002r19">nil</a> or an object
whose type is the element type of the array.
</div>
  <br /><b>
(array <i>тип-элемента</i> <i>размерность</i>)                                     </b>Такая
запись обозначает множество специализированных массивов, элементы
которых приндлежат типу <i>тип-элемента</i> и размерность которых равна
<i>размерность</i>. For declaration purposes, this type encompasses those arrays that
can result by specifying <i>element-type</i> as the element type to the function
<a 
href="clmse94.html#x116-527002r558">make-array</a>; this may be diﬀerent from what the type means for discrimination
purposes. <i>тип-элемента</i> должен быть корректным спецификатором типа или
не уточнен с помощью <a 
href="clmse111.html#x136-593002r630">*</a>. <i>размерность</i> может быть неотрицительным целым
определяющим размер массива, может быть списком неотрицательных
целых, определяющих размер каждого измерения (размер какого-либо
измерения может быть не указан <a 
href="clmse111.html#x136-593002r630">*</a>), может быть не указана <a 
href="clmse111.html#x136-593002r630">*</a>. Например, <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array integer 3)           ;Трехэлементный массив целых
</td></tr></table>
<!--l. 579--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array integer (* * *))     ;Трехмерный массив целых</td></tr></table>
<!--l. 580--><p class="indent" >  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array * (4 5 6))           ;Трехмерный массив, размеры измерений 4,5,6</td></tr></table>
<!--l. 582--><p class="indent" >                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array character (3 *))     ;Двумерный массив символов</td></tr></table>
<!--l. 583--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                            ; у которого только три строки</td></tr></table>
<!--l. 584--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(array short-ﬂoat ())      ;Ранг массива равен нулю, массив содержит</td></tr></table>
<!--l. 585--><p class="indent" >        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                            ; короткие с плавающие точкой</td></tr></table>
<!--l. 587--><p class="indent" >
</div>
</div>
<!--l. 588--><p class="noindent" >Следует отметить, что (array t) является правильным подмножеством
(array *). Причиной тому является то. что (array t) это можество массивов,
которые могут содержать любой Common Lisp объект (элементы типа <a 
href="clmse31.html#x42-87002r20">t</a>,
которые включают все элементы). С другой стороны, (array *) является
                                                                          

                                                                          
множеством всех массивов, включая, например, массивы, которые
могут хранить только строковые символы. Сейчас (array character)
не является подмножеством (array t); два множества фактически
непересекаются, потому что (array character) не является множеством всех
массивов, которые могут хранить строковые символы, а является
множеством массивов, которые специализированы хранить именно
символы и никакие другие объекты. FIXME. Поэтому проверка, может
ли массив foo хранить строковые символы, не может быть такой: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typep foo &#x2019;(array character))
</td></tr></table>
<!--l. 602--><p class="indent" >
</div>
</div>
<!--l. 603--><p class="noindent" >, а должна быть такой: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(subtypep &#x2019;character (array-element-type foo))
</td></tr></table>
<!--l. 606--><p class="indent" >
</div>
</div>
<!--l. 607--><p class="noindent" >Смотрите <a 
href="clmse96.html#x118-536002r565">array-element-type</a>.
<div class=new>
<!--l. 610--><p class="indent" >  X3J13 voted in January 1989 <a 
 id="dx31-92005"></a>to change <a 
href="clmse32.html#x43-90002r21">typep</a> and <a 
href="clmse32.html#x43-91003r22">subtypep</a> so that the
specialized array type speciﬁer means the same thing for discrimination as for
declaration: it encompasses those arrays that can result by specifying <i>element-type</i>
as the element type to the function <a 
href="clmse94.html#x116-527002r558">make-array</a>. Under this interpretation
(array character) might be the same type as (array t) (although it also
might not be the same). See <a 
href="clmse27.html#x36-62003r9">upgraded-array-element-type</a>. However, <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typep foo &#x2019;(array character))
</td></tr></table>
                                                                          

                                                                          
<!--l. 625--><p class="indent" >
</div>
</div>
<!--l. 626--><p class="noindent" >is still not a legitimate test of whether the array foo can hold a character; one must
still say <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(subtypep &#x2019;character (array-element-type foo))
</td></tr></table>
<!--l. 630--><p class="indent" >
</div>
</div>
<!--l. 631--><p class="noindent" >to determine that question.
<!--l. 633--><p class="indent" >  X3J13 also voted in January 1989 <a 
 id="dx31-92006"></a>to specify that within the lexical scope of an
array type declaration, it is an error for an array element, when referenced, not to
be of the exact declared element type. A compiler may, for example, treat every
reference to an element of a declared array as if the reference were surrounded by
a <a 
href="clmse53.html#x67-247002r158">the</a> form mentioning the declared array element type (<i>not</i> the upgraded array
element type). Thus <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defun snarf-hex-digits (the-array)
</td></tr></table>
<!--l. 642--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (declare (type (array (unsigned-byte 4) 1) the-array))</td></tr></table>
<!--l. 643--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (do ((j (- (length array) 1) (- j 1))</td></tr></table>
<!--l. 644--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       (val 0 (logior (ash val 4)</td></tr></table>
<!--l. 645--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                      (aref the-array j))))</td></tr></table>
<!--l. 646--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ((&#x003C; j 0) val)))</td></tr></table>
<!--l. 648--><p class="indent" >
</div>
</div>
<!--l. 649--><p class="noindent" >may be treated as <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defun snarf-hex-digits (the-array)
</td></tr></table>
                                                                          

                                                                          
<!--l. 651--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (declare (type (array (unsigned-byte 4) 1) the-array))</td></tr></table>
<!--l. 652--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (do ((j (- (length array) 1) (- j 1))</td></tr></table>
<!--l. 653--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       (val 0 (logior (ash val 4)</td></tr></table>
<!--l. 654--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                      (the (unsigned-byte 4)</td></tr></table>
<!--l. 655--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                           (aref the-array j)))))</td></tr></table>
<!--l. 656--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ((&#x003C; j 0) val)))</td></tr></table>
<!--l. 658--><p class="indent" >
</div>
</div>
<!--l. 659--><p class="noindent" >The declaration amounts to a promise by the user that the <a 
href="clmse95.html#x117-533002r563">aref</a> will never produce a
value outside the interval 0 to 15, even if in that particular implementation the
array element type (unsigned-byte 4) is upgraded to, say, (unsigned-byte 8).
If such upgrading does occur, then values outside that range may in fact
be stored in the-array, as long as the code in snarf-hex-digits never sees
them.
<!--l. 667--><p class="indent" >  As a general rule, a compiler would be justiﬁed in transforming <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(aref (the (array <i>elt-type</i> ...) <i>a</i>) ...)
</td></tr></table>
<!--l. 670--><p class="indent" >
</div>
</div>
<!--l. 671--><p class="noindent" >into <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(the <i>elt-type</i> (aref (the (array <i>elt-type</i> ...) <i>a</i>) ...)
</td></tr></table>
<!--l. 674--><p class="indent" >
</div>
</div>
<!--l. 675--><p class="noindent" >It may also make inferences involving more complex functions, such as <a 
href="clmse84.html#x103-449003r433">position</a> or
<a 
href="clmse84.html#x103-448002r430">ﬁnd</a>. For example, <a 
href="clmse84.html#x103-448002r430">ﬁnd</a> applied to an array always returns either <a 
href="clmse31.html#x42-86002r19">nil</a> or an object
whose type is the element type of the array.
</div>
                                                                          

                                                                          
  <br /><b>
(simple-array <i>element-type</i> <i>dimensions</i>)                                    </b>This
is equivalent to (array <i>element-type</i> <i>dimensions</i>) except that it additionally
speciﬁes that objects of the type are <i>simple</i> arrays (see section <a 
href="clmse7.html#x14-340002.5">2.5<!--tex4ht:ref: ARRAY-TYPE-SECTION --></a>).
  <br /><b>
(simple-array <i>тип-элемента</i> <i>размерности</i>)                              </b>
Данная запись эквивалентна (array <i>тип-элемента</i> <i>размерности</i>) за
исключением того, что дополнительно определяет, что объекты будут
<i>простыми</i> массивами (смотрите раздел <a 
href="clmse7.html#x14-340002.5">2.5<!--tex4ht:ref: ARRAY-TYPE-SECTION --></a>).
  <br /><b>
(vector <i>element-type</i> <i>size</i>)                                                 </b>This
denotes the set of specialized one-dimensional arrays whose elements are all of
type <i> element-type</i> and whose lengths match <i>size</i>. This is entirely equivalent to
(array <i>element-type</i> (<i>size</i>)). For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(vector double-ﬂoat)     ;Vectors of double-format
</td></tr></table>
<!--l. 700--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                          ; ﬂoating-point numbers</td></tr></table>
<!--l. 701--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(vector * 5)              ;Vectors of length 5</td></tr></table>
<!--l. 702--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(vector t 5)              ;General vectors of length 5</td></tr></table>
<!--l. 703--><p class="indent" >          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(vector (mod 32) *)       ;Vectors of integers between 0 and 31</td></tr></table>
<!--l. 705--><p class="indent" >
</div>
</div>
<div class=obsolete>
<!--l. 707--><p class="noindent" >The specialized types (vector string-char) and (vector bit) are so useful that they
have the special names <a 
href="clmse102.html#x125-571002r618">string</a> and bit-vector. Every implementation of Common
Lisp must provide distinct representations for these as distinct specialized data
types.
</div>
<div class=newer>
<!--l. 714--><p class="indent" >  X3J13 voted in March 1989 <a 
 id="dx31-92007"></a>to eliminate the type string-char and to redeﬁne the
type <a 
href="clmse102.html#x125-571002r618">string</a> to be the union of one or more specialized vector types, the types of
whose elements are subtypes of the type <a 
href="clmse79.html#x97-412002r384">character</a>.
                                                                          

                                                                          
</div>
  <br /><b>
(vector <i>тип-элемента</i> <i>размер</i>)                                           </b>Такой
тип обозначает множество специализированный одномерных массивов, все
элементы которых принадлежат типу тип-элемента и размер которого равен
размер. Такой тип полностью эквивалентен (array <i>тип-элемента</i> (<i>размер</i>)).
Например: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(vector double-ﬂoat)     ;Векторы двойных
</td></tr></table>
<!--l. 727--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                          ; чисел с плавающей точкой</td></tr></table>
<!--l. 728--><p class="indent" >           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(vector * 5)              ;Векторы длинной пять элементов</td></tr></table>
<!--l. 729--><p class="indent" >  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(vector t 5)              ;Общие векторы длинной пять элементов FIXME</td></tr></table>
<!--l. 730--><p class="indent" >          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(vector (mod 32) *)       ;Вектора целых чисел между 0 и 31</td></tr></table>
<!--l. 732--><p class="indent" >
</div>
</div>
  <br /><b>
(simple-vector <i>size</i>)                                                       </b>This
is the same as (vector t <i>size</i>) except that it additionally speciﬁes that its elements
are <i>simple</i> general vectors.
  <br /><b>
(simple-vector <i>размер</i>)                                                    </b>This
is the same as (vector t <i>size</i>) except that it additionally speciﬁes that its elements
are <i>simple</i> general vectors. Такая запись означает то же, что и (vector t
<i>размер</i>).
  <br /><b>
(complex <i>type</i>)                                                            </b>Every
element of this type is a complex number whose real part and imaginary part are
each of type <i>type</i>. For declaration purposes, this type encompasses those
complex numbers that can result by giving numbers of the speciﬁed type to
the function <a 
href="clmse71.html#x88-354002r273">complex</a>; this may be diﬀerent from what the type means
                                                                          

                                                                          
for discrimination purposes. As an example, Gaussian integers might be
described as (complex integer), even in implementations where giving two
integers to the function <a 
href="clmse71.html#x88-354002r273">complex</a> results in an object of type (complex
rational).
  <br /><b>
(copmlex <i>тип</i>)                                                           </b>
Каждый элемент такого типа является комплексным числом, у которого
действительная и мнимая части принадлежат типу <i>тип</i>.
<div class=new>
<!--l. 763--><p class="indent" >  X3J13 voted in January 1989 <a 
 id="dx31-92008"></a>to change <a 
href="clmse32.html#x43-90002r21">typep</a> and <a 
href="clmse32.html#x43-91003r22">subtypep</a> so that the
specialized <a 
href="clmse71.html#x88-354002r273">complex</a> type speciﬁer means the same thing for discrimination
purposes as for declaration purposes. See <a 
href="clmse27.html#x36-63002r10">upgraded-complex-part-type</a>.
</div>
  <br /><b>
(function (<i>arg1-type</i> <i>arg2-type</i> ...) <i>value-type</i>)                              </b>This
type may be used only for declaration and not for discrimination; <a 
href="clmse32.html#x43-90002r21">typep</a> will
signal an error if it encounters a speciﬁer of this form. Every element
of this type is a function that accepts arguments at <i>least</i> of the types
speciﬁed by the <i>argj-type</i> forms and returns a value that is a member of
the types speciﬁed by the <i>value-type</i> form. The &#x0026;optional, &#x0026;rest, and
&#x0026;key markers may appear in the list of argument types. The <i>value-type</i>
may be a <a 
href="clmse44.html#x56-202002r123">values</a> type speciﬁer in order to indicate the types of multiple
values.
  <br /><b>
(function (<i>тип-аргумента-1</i> <i>тип-аргумента-2</i> ...) <i>тип-значения</i>)      </b>Этот
тип может использоваться только для декларации и не может для
распознавания; <a 
href="clmse32.html#x43-90002r21">typep</a> будет сигнализировать ошибку, если ей будет передан
такой спецификатор типа. Каждый элемент такого типа является функцией,
которая принимает аргументы типов перечисленных с помощью форм
<i>тип-аргумента-j</i> и возвращает значение типа <i>тип-значения</i>. В форме типов
аргументов могут использоваться маркеры &#x0026;optional, &#x0026;rest и &#x0026;key.
<i>тип-значения</i> может быть спецификатором типа <a 
href="clmse44.html#x56-202002r123">values</a> в случае, если
функция возвращает несколько значений.
<div class=new>
<!--l. 797--><p class="indent" >  X3J13 voted in January 1989 <a 
 id="dx31-92009"></a>to specify that the <i>arg-type</i> that follows a &#x0026;rest
                                                                          

                                                                          
marker indicates the type of each actual argument that would be gathered into
the list for a &#x0026;rest parameter, and not the type of the &#x0026;rest parameter itself
(which is always <a 
href="clmse87.html#x107-472002r493">list</a>). Thus one might declare the function <a 
href="clmse69.html#x86-326002r227">gcd</a> to be of type
(function (&#x0026;rest integer) integer), or the function <a 
href="clmse95.html#x117-533002r563">aref</a> to be of type (function
(array &#x0026;rest ﬁxnum) t).
</div>
<div class=newer>
<!--l. 810--><p class="indent" >  X3J13 voted in March 1988 <a 
 id="dx31-92010"></a>to specify that, in a <a 
href="clmse35.html#x47-129006r54">function</a> type speciﬁer, an
argument type speciﬁer following &#x0026;key must be a list of two items, a keyword and
a type speciﬁer. The keyword must be a valid keyword-name symbol that may be
supplied in the actual arguments of a call to the function, and the type speciﬁer
indicates the permitted type of the corresponding argument value. (The
keyword-name symbol is typically a keyword, but another X3J13 vote <a 
 id="dx31-92011"></a>allows it to
be any symbol.) Furthermore, if &#x0026;allow-other-keys is not present, the set of
keyword-names mentioned in the <a 
href="clmse35.html#x47-129006r54">function</a> type speciﬁer may be assumed to be
exhaustive; for example, a compiler would be justiﬁed in issuing a warning for a
function call using a keyword argument name not mentioned in the type
declaration for the function being called. If &#x0026;allow-other-keys is present in the
<a 
href="clmse35.html#x47-129006r54">function</a> type speciﬁer, other keyword arguments may be supplied when calling a
function of the indicated type, and if supplied such arguments may possibly be
used.
</div>
<div class=obsolete>
<!--l. 835--><p class="indent" >  As an example, the function <a 
href="clmse86.html#x106-461002r474">cons</a> is of type (function (t t) cons), because it can
accept any two arguments and always returns a cons. The function <a 
href="clmse86.html#x106-461002r474">cons</a> is also of
type (function (ﬂoat string) list), because it can certainly accept a ﬂoating-point
number and a string (among other things), and its result is always of type
<a 
href="clmse87.html#x107-472002r493">list</a> (in fact a <a 
href="clmse86.html#x106-461002r474">cons</a> is never <a 
href="clmse32.html#x43-93002r23">null</a>, but that does not matter for this type
declaration). The function <a 
href="clmse71.html#x88-350006r258">truncate</a> is of type (function (number number)
(values number number)), as well as of type (function (integer (mod 8))
integer).
</div>
<div class=new>
<!--l. 848--><p class="indent" >  X3J13 voted in January 1989 <a 
 id="dx31-92012"></a>to alter the meaning of the <a 
href="clmse35.html#x47-129006r54">function</a> type
speciﬁer when used in type and ftype declarations. While the preceding
formulation may be theoretically elegant, they have found that it is not
useful to compiler implementors and that it is not the interpretation that
users expect. X3J13 prescribed instead the following interpretation of
                                                                          

                                                                          
declarations.
<!--l. 857--><p class="indent" >  A declaration speciﬁer of the form <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ftype (function (<i>arg1-type</i> <i>arg2-type</i> ... <i>argn-type</i>) <i>value-type</i>) <i>fname</i>)
</td></tr></table>
<!--l. 860--><p class="indent" >
</div>
</div>
<!--l. 861--><p class="noindent" >implies that any function call of the form <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(<i>fname</i> <i>arg1</i> <i>arg2</i> ...)
</td></tr></table>
<!--l. 864--><p class="indent" >
</div>
</div>
<!--l. 865--><p class="noindent" >within the scope of the declaration can be treated as if it were rewritten to use
<a 
href="clmse53.html#x67-247002r158">the</a>-forms in the following manner: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(the <i>value-type</i>
</td></tr></table>
<!--l. 868--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:107;" 
class="tabbing">     (<i>fname</i> </td><td  
class="tabbing">(the <i>arg1-type</i> <i>arg1</i>)</td></tr></table>
<!--l. 869--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:107;" 
class="tabbing">                  </td><td  
class="tabbing">(the <i>arg2-type</i> <i>arg2</i>)</td></tr></table>
<!--l. 870--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:107;" 
class="tabbing">                  </td><td  
class="tabbing">...</td></tr></table>
<!--l. 871--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:107;" 
class="tabbing">                  </td><td  
class="tabbing">(the <i>argn-type</i> <i>argn</i>)))</td></tr></table>
<!--l. 873--><p class="indent" >
</div>
</div>
<!--l. 874--><p class="noindent" >That is, it is an error for any of the actual arguments not to be of its speciﬁed type
<i>arg-type</i> or for the result not to be of the speciﬁed type <i>value-type</i>. (In
particular, if any argument is not of its speciﬁed type, then the result is not
guaranteed to be of the speciﬁed type—if indeed a result is returned at
all.)
<!--l. 880--><p class="indent" >  Similarly, a declaration speciﬁer of the form <div class=lisp> <div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(type (function (<i>arg1-type</i> <i>arg2-type</i> ... <i>argn-type</i>) <i>value-type</i>) <i>var</i>)
</td></tr></table>
<!--l. 883--><p class="indent" >
</div>
</div>
<!--l. 884--><p class="noindent" >is interpreted to mean that any reference to the variable <i>var</i> will ﬁnd that its value
is a function, and that it is an error to call this function with any actual argument
not of its speciﬁed type <i>arg-type</i>. Also, it is an error for the result not to be of
the speciﬁed type <i>value-type</i>. For example, a function call of the form <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(funcall <i>var</i> <i>arg1</i> <i>arg2</i> ...)
</td></tr></table>
<!--l. 893--><p class="indent" >
</div>
</div>
<!--l. 894--><p class="noindent" >could be rewritten to use <a 
href="clmse53.html#x67-247002r158">the</a>-forms as well. If any argument is not of its speciﬁed
type, then the result is not guaranteed to be of the speciﬁed type—if indeed a
result is returned at all.
<!--l. 899--><p class="indent" >  Thus, a type or ftype declaration speciﬁer describes type requirements imposed
on calls to a function as opposed to requirements imposed on the deﬁnition of the
function. This is analogous to the treatment of type declarations of variables as
imposing type requirements on references to variables, rather than on the contents
of variables. See the vote of X3J13 on type declaration speciﬁers in general,
discussed in section <a 
href="clmse52.html#x66-2460009.2">9.2<!--tex4ht:ref: DECLARATION-SPECIFIERS-SECTION --></a>.
<!--l. 908--><p class="indent" >  In the same manner as for variable type declarations in general, if two or more
of these declarations apply to the same function call (which can occur if
declaration scopes are suitably nested), then they all apply; in eﬀect, the types for
each argument or result are intersected. For example, the code fragment <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(locally (declare (ftype (function (biped) digit)
</td></tr></table>
<!--l. 915--><p class="indent" >                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                         butcher-fudge))</td></tr></table>
                                                                          

                                                                          
<!--l. 916--><p class="indent" >                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (locally (declare (ftype (function (featherless) opposable)</td></tr></table>
<!--l. 917--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                           butcher-fudge))</td></tr></table>
<!--l. 918--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    (butcher-fudge sam)))</td></tr></table>
<!--l. 920--><p class="indent" >
</div>
</div>
<!--l. 921--><p class="noindent" >may be regarded as equivalent to <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(the opposable
</td></tr></table>
<!--l. 923--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">     (the digit (butcher-fudge (the featherless</td></tr></table>
<!--l. 924--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                                    (the biped sam)))))</td></tr></table>
<!--l. 926--><p class="indent" >
</div>
</div>
<!--l. 927--><p class="noindent" >or to <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(the (and opposable digit)
</td></tr></table>
<!--l. 929--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">     (butcher-fudge (the (and featherless biped) sam)))</td></tr></table>
<!--l. 931--><p class="indent" >
</div>
</div>
<!--l. 932--><p class="noindent" >That is, sam had better be both featherless and a biped, and the result of
butcher-fudge had better be both opposable and a digit; otherwise the code is in
error. Therefore a compiler may generate code that relies on these type
assumptions, for example.
</div>
  <br /><b>
(values <i>value1-type</i> <i>value2-type</i> ...)                                         </b>This
type speciﬁer is extremely restricted: it may be used <i>only</i> as the <i>value-type</i> in a
<a 
href="clmse35.html#x47-129006r54">function</a> type speciﬁer or in a <a 
href="clmse53.html#x67-247002r158">the</a> special form. It is used to specify individual
types when multiple values are involved. The &#x0026;optional, &#x0026;rest, and &#x0026;key markers
                                                                          

                                                                          
may appear in the <i>value-type</i> list; they thereby indicate the parameter list of a
function that, when given to <a 
href="clmse44.html#x56-206002r127">multiple-value-call</a> along with the values, would be
suitable for receiving those values.
  <br /><b>
(values <i>тип-значения-1</i> <i>тип-значения-2</i> ...)                             </b>
Данный тип используется только в двух случаях: только как <i>тип-значения</i>
для спецификатора типа <i>функции</i> и в специальной форме <a 
href="clmse53.html#x67-247002r158">the</a>. Данный
спецификатор используется для задания типов в случаях возврата
нескольких значений. В списке с типами могут использоваться маркеры
&#x0026;optional, &#x0026;rest и &#x0026;key.</div>
</div>
                                                                          

                                                                          
   <!--l. 960--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse23.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse21.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse21.html#tailclmse21.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse22.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch4.html#clmse22.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 960--><p class="indent" >   <a 
 id="tailclmse22.html"></a>  
</body></html> 
