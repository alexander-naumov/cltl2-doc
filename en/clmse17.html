<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Overlap, Inclusion, and Disjointness of Types</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 16:10:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 1316--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="scope.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse17.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html#clmse17.html" >Up</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h3 class="sectionHead"><span class="titlemark">2.15   </span> <a 
href="clm.html#QQ2-24-127" id="x24-1210002.15">Overlap, Inclusion, and Disjointness
of Types</a></h3>
<!--l. 1319--><p class="noindent" >The Common Lisp data type hierarchy is tangled and purposely left somewhat
open-ended so that implementors may experiment with new data types as
extensions to the language. This section explicitly states all the deﬁned
relationships between types, including subtype/supertype relationships,
disjointness, and exhaustive partitioning. The user of Common Lisp should not
depend on any relationships not explicitly stated here. For example, it is not valid
to assume that because a number is not complex and not rational that it must be
a <tt><a 
href="symbols.html#x187-2636380r380">float</a></tt>, because implementations are permitted to provide yet other kinds of
numbers.
<!--l. 1330--><p class="indent" >   First we need some terminology. If <i>x</i> is a supertype of <i>y</i>, then any object of
type <i>y</i> is also of type <i>x</i>, and <i>y</i> is said to be a subtype of <i>x</i>. If types <i>x</i> and <i>y</i> are
disjoint, then no object (in any implementation) may be both of type <i>x</i> and of
type <i>y</i>. Types <span class="math"><i>a</i><sub>1</sub></span> through <span class="math"><i>a</i><sub>n</sub></span> are an <i>exhaustive union</i> of type <i>x</i> if each <span class="math"><i>a</i><sub>j</sub></span> is a
subtype of <i>x</i>, and any object of type <i>x</i> is necessarily of at least one of the types
<span class="math"><i>a</i><sub>j</sub></span>; <span class="math"><i>a</i><sub>1</sub></span> through <span class="math"><i>a</i><sub>n</sub></span> are furthermore an <i>exhaustive partition</i> if they are also pairwise
disjoint.
      <ul class="itemize1">
      <li class="itemize">The type <tt><a 
href="symbols.html#x187-2636871r871">t</a></tt> is a supertype of every type whatsoever. Every object is of
      type <tt><a 
href="symbols.html#x187-2636871r871">t</a></tt>.
      </li>
      <li class="itemize">The type <tt><a 
href="symbols.html#x187-2636609r609">nil</a></tt> is a subtype of every type whatsoever. No object is of
      type <tt><a 
href="symbols.html#x187-2636609r609">nil</a></tt>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The  types  <tt>cons</tt>,  <tt>symbol</tt>,  <tt>array</tt>,  <tt>number</tt>,  <tt><a 
href="symbols.html#x187-2636214r214">character</a></tt>,  <tt>hash-table</tt>,
      <tt>readtable</tt>, <tt>package</tt>, <tt><a 
href="symbols.html#x187-2636657r657">pathname</a></tt>, <tt>stream</tt>, <tt>random-state</tt>, and any single
      other type created by <tt><a 
href="symbols.html#x187-2636289r289">defstruct</a></tt> or <tt><a 
href="symbols.html#x187-2636274r274">defclass</a></tt> are pairwise disjoint.
                                                                          

                                                                          
      <!--l. 1360--><p class="noindent" >Type <tt><a 
href="symbols.html#x187-2636399r399">function</a></tt> is disjoint from the types <tt>cons</tt>, <tt>symbol</tt>, <tt>array</tt>, <tt>number</tt>,
      and <tt><a 
href="symbols.html#x187-2636214r214">character</a></tt>.
      <!--l. 1364--><p class="noindent" >The    type    <tt>compiled-function</tt>  is    a    subtype    of    <tt><a 
href="symbols.html#x187-2636399r399">function</a></tt>;
      implementations are free to deﬁne other subtypes of <tt><a 
href="symbols.html#x187-2636399r399">function</a></tt>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The types <tt>real</tt> and <tt><a 
href="symbols.html#x187-2636239r239">complex</a></tt> are pairwise disjoint subtypes of <tt>number</tt>.</li></ul>
__________________________________________________________________________<div class="rationale">
<!--l. 1375--><p class="noindent" ><b>Rationale:</b> It might be thought that <tt>real</tt> and <tt><a 
href="symbols.html#x187-2636239r239">complex</a></tt> should form an exhaustive
partition of the type <tt>number</tt>. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp number system.
</div>___________________________________________________________________________________________________________
        <ul class="itemize1">
        <li class="itemize">The types <tt>rational</tt> and <tt><a 
href="symbols.html#x187-2636380r380">float</a></tt> are pairwise disjoint subtypes of <tt>real</tt>.</li></ul>
<div class="rationale">
<!--l. 1390--><p class="noindent" ><b>Rationale:</b> It might be thought that <tt>rational</tt> and <tt><a 
href="symbols.html#x187-2636380r380">float</a></tt> should form an
exhaustive partition of the type <tt>real</tt>. This is purposely avoided here in order to
permit compatible experimentation with extensions to the Common Lisp number
system.
</div>___________________________________________________________________________________________________________
        <ul class="itemize1">
        <li class="itemize">The types <tt>integer</tt> and <tt>ratio</tt> are disjoint subtypes of <tt>rational</tt>.</li></ul>______
<div class="rationale">
<!--l. 1404--><p class="noindent" ><b>Rationale:</b> It might be thought that <tt>integer</tt> and <tt>ratio</tt> should form an exhaustive
partition of the type <tt>rational</tt>. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp rational number
system.
</div>___________________________________________________________________________________________________________
<!--l. 1412--><p class="indent" >     Types <tt>fixnum</tt> and <tt>bignum</tt> do in fact form an exhaustive partition of the type
<tt>integer</tt>; more precisely, they voted to specify that the type <tt>bignum</tt> is by
deﬁnition equivalent to <tt>(and integer (not fixnum))</tt>. This is consistent with
the ﬁrst edition text in section <a 
href="clmse3.html#x10-420002.1.1">2.1.1<!--tex4ht:ref: INTEGERS-SECTION --></a>.
                                                                          

                                                                          
<!--l. 1418--><p class="indent" >   I interpret this to mean that implementators could still experiment with such
extensions as adding explicit representations of inﬁnity, but such inﬁnities would
necessarily be of type <tt>bignum</tt>.
      <ul class="itemize1">
      <li class="itemize">The   types   <tt>short-float</tt>,   <tt>single-float</tt>,   <tt>double-float</tt>,   and
      <tt>long-float</tt> are subtypes of <tt><a 
href="symbols.html#x187-2636380r380">float</a></tt>. Any two of them must be either
      disjoint or identical; if identical, then any other types between them
      in the above ordering must also be identical to them (for example, if
      <tt>single-float</tt> and <tt>long-float</tt> are identical types, then <tt>double-float</tt>
      must be identical to them also).
      </li>
      <li class="itemize">The type <tt><a 
href="symbols.html#x187-2636635r635">null</a></tt> is a subtype of <tt>symbol</tt>; the only object of type <tt><a 
href="symbols.html#x187-2636635r635">null</a></tt> is
      <tt><a 
href="symbols.html#x187-2636609r609">nil</a></tt>.
      </li>
      <li class="itemize">The types <tt>cons</tt> and <tt><a 
href="symbols.html#x187-2636635r635">null</a></tt> form an exhaustive partition of the type
      <tt><a 
href="symbols.html#x187-2636492r492">list</a></tt>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The  type  <tt>standard-char</tt> is  a  subtype  of  <tt>base-char</tt>.  The  types
      <tt>base-char</tt> and  <tt>extended-char</tt> form  an  exhaustive  partition  of
      <tt><a 
href="symbols.html#x187-2636214r214">character</a></tt>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The type <tt><a 
href="symbols.html#x187-2636828r828">string</a></tt> is a subtype of <tt><a 
href="symbols.html#x187-2636920r920">vector</a></tt>; it is the union of all types
      <tt>(vector <i>c</i>)</tt> such that <i>c</i> is a subtype of <tt><a 
href="symbols.html#x187-2636214r214">character</a></tt>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The type <tt>bit-vector</tt> is a subtype of <tt><a 
href="symbols.html#x187-2636920r920">vector</a></tt>, for <tt>bit-vector</tt> means
      <tt>(vector bit)</tt>.
      </li>
      <li class="itemize">The types <tt>(vector t)</tt>, <tt><a 
href="symbols.html#x187-2636828r828">string</a></tt>, and <tt>bit-vector</tt> are disjoint.
                                                                          

                                                                          
      </li>
      <li class="itemize">The type <tt><a 
href="symbols.html#x187-2636920r920">vector</a></tt> is a subtype of <tt>array</tt>; for all types <i>x</i>, the type <tt>(vector
      <i>x</i>)</tt> is the same as the type <tt>(array <i>x</i> (*))</tt>.
      </li>
      <li class="itemize">The type <tt>simple-array</tt> is a subtype of <tt>array</tt>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The types <tt>simple-vector</tt>, <tt>simple-string</tt>, and <tt>simple-bit-vector</tt>
      are disjoint subtypes of <tt>simple-array</tt>, for they mean <tt>(simple-array
      t (*))</tt>, the union of all types <tt>(simple-array <i>c</i> (*))</tt> such that <i>c</i> is
      a subtype of <tt><a 
href="symbols.html#x187-2636214r214">character</a></tt>, and <tt>(simple-array bit (*))</tt>, respectively.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The  type  <tt>simple-vector</tt> is  a  subtype  of  <tt><a 
href="symbols.html#x187-2636920r920">vector</a></tt> and  indeed  is  a
      subtype of <tt>(vector t)</tt>.
      </li>
      <li class="itemize">The type <tt>simple-string</tt> is a subtype of <tt><a 
href="symbols.html#x187-2636828r828">string</a></tt>. (Note that although
      <tt><a 
href="symbols.html#x187-2636828r828">string</a></tt> is a subtype of <tt><a 
href="symbols.html#x187-2636920r920">vector</a></tt>, <tt>simple-string</tt> is not a subtype of
      <tt>simple-vector</tt>.)</li></ul>
____________________________________________________<div class="rationale">
<!--l. 1490--><p class="noindent" ><b>Rationale:</b> The hypothetical name <tt>simple-general-vector</tt> would have been
more accurate than <tt>simple-vector</tt>, but in this instance euphony and user
convenience were deemed more important to the design of Common Lisp than a rigid
symmetry.
</div>___________________________________________________________________________________________________________
        <ul class="itemize1">
        <li class="itemize">The type <tt>simple-bit-vector</tt> is a subtype of <tt>bit-vector</tt>. (Note that
        although <tt>bit-vector</tt> is a subtype of <tt><a 
href="symbols.html#x187-2636920r920">vector</a></tt>, <tt>simple-bit-vector</tt> is
        not a subtype of <tt>simple-vector</tt>.)
        </li>
        <li class="itemize">The types <tt><a 
href="symbols.html#x187-2636920r920">vector</a></tt> and <tt><a 
href="symbols.html#x187-2636492r492">list</a></tt> are disjoint subtypes of <tt>sequence</tt>.
                                                                          

                                                                          
      </li>
      <li class="itemize">The types <tt>random-state</tt>, <tt>readtable</tt>, <tt>package</tt>, <tt><a 
href="symbols.html#x187-2636657r657">pathname</a></tt>, <tt>stream</tt>, and
      <tt>hash-table</tt> are pairwise disjoint.</li></ul>
<tt>
<!--l. 1512--><p class="indent" >   random-state</tt>, <tt>readtable</tt>, <tt>package</tt>, <tt><a 
href="symbols.html#x187-2636657r657">pathname</a></tt>, <tt>stream</tt>, and <tt>hash-table</tt> are
pairwise disjoint from a number of other types as well; see note above.
      <ul class="itemize1">
      <li class="itemize">The             types             <tt>two-way-stream</tt>,             <tt>echo-stream</tt>,
      <tt>broadcast-stream</tt>, <tt>file-stream</tt>, <tt>synonym-stream</tt>, <tt>string-stream</tt>,
      and <tt>concatenated-stream</tt> are disjoint subtypes of <tt>stream</tt>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Any  two  types  created  by  <tt><a 
href="symbols.html#x187-2636289r289">defstruct</a></tt> are  disjoint  unless  one  is  a
      supertype of the other by virtue of the <tt>:include</tt> option.</li></ul>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 8--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="scope.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse16.html#tailclmse16.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse17.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html#clmse17.html" >Up</a><tt>&#x003E;</tt></div><a 
 id="tailclmse17.html"></a>  </div> </div> 
</body></html> 
