<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Association Lists</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 14:21:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 1157--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="hash.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse87.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse87.html#tailclmse87.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse88.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="list.html#clmse88.html" >Up</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h3 class="sectionHead"><span class="titlemark">15.6   </span> <a 
href="clm.html#QQ2-108-1379" id="x108-134900015.6">Association Lists</a></h3>
<!--l. 1159--><p class="noindent" >An <i>association list</i>, or <i>a-list</i>, is a data structure used very frequently in Lisp. An
a-list is a list of pairs (conses); each pair is an association. The <i>car</i> of a pair is
called the <i>key</i>, and the <i>cdr</i> is called the <i>datum</i>.
<!--l. 1164--><p class="indent" >   An advantage of the a-list representation is that an a-list can be incrementally
augmented simply by adding new entries to the front. Moreover, because the
searching function <tt><a 
href="symbols.html#x185-2637108r108">assoc</a></tt> searches the a-list in order, new entries can “shadow” old
entries. If an a-list is viewed as a mapping from keys to data, then the mapping
can be not only augmented but also altered in a non-destructive manner by
adding new entries to the front of the a-list.
<!--l. 1172--><p class="indent" >   Sometimes an a-list represents a bijective mapping, and it is desirable to
retrieve a key given a datum. For this purpose, the “reverse” searching function
<tt><a 
href="symbols.html#x185-2637710r710">rassoc</a></tt> is provided. Other variants of a-list searches can be constructed using the
function <tt><a 
href="symbols.html#x185-2637368r368">find</a></tt> or <tt><a 
href="symbols.html#x185-2637570r570">member</a></tt>.
<!--l. 1177--><p class="indent" >   It is permissible to let <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> be an element of an a-list in place of a pair. Such an
element is not considered to be a pair but is simply passed over when the a-list is
searched by <tt><a 
href="symbols.html#x185-2637108r108">assoc</a></tt>.
<div class="defun">
<!--l. 1181--><p class="noindent" ><div class="defunheader"> <i>[Function]</i><a 
 id="dx108-1349001"></a><a 
 id="x108-1349002r503"></a> <b>acons</b>  <i>key</i> <i>datum</i> <i>a-list</i>
</div>
<tt>
<!--l. 1184--><p class="indent" >   <a 
href="symbols.html#x185-2637068r68">acons</a></tt> constructs a new association list by adding the pair <tt>(<i>key</i> . <i>datum</i>)</tt> to
the old <i>a-list</i>. <div class="lisp"><div class="tabbing">
(acons x y a) <span class="math"> ≡</span> (cons (cons x y) a)
   <br>
<!--l. 1188--><p class="noindent" ></div>
<!--l. 1188--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135000015.6" id="x108-135000015.6"></a></span>
                                                                          

                                                                          
<!--l. 1188--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135100015.6" id="x108-135100015.6"></a></span>
</div>
</div>
<div class="defun">
<!--l. 1191--><p class="noindent" ><div class="defunheader"> <i>[Function]</i><a 
 id="dx108-1351001"></a><a 
 id="x108-1351002r504"></a> <b>pairlis</b>  <i>keys</i> <i>data</i> <b>&#x0026;optional</b>  <i>a-list</i>
</div>
<tt>
<!--l. 1194--><p class="indent" >   <a 
href="symbols.html#x185-2637652r652">pairlis</a></tt> takes two lists and makes an association list that associates elements
of the ﬁrst list to corresponding elements of the second list. It is an error if
the two lists <i>keys</i> and <i>data</i> are not of the same length. If the optional
argument <i>a-list</i> is provided, then the new pairs are added to the front of
it.
<!--l. 1200--><p class="indent" >   The new pairs may appear in the resulting a-list in any order; in particular,
either forward or backward order is permitted. Therefore the result of the call
<div class="lisp"><div class="tabbing">
(pairlis &#x2019;(one two) &#x2019;(1 2) &#x2019;((three . 3) (four . 19)))
   <br>
<!--l. 1205--><p class="noindent" ></div>
<!--l. 1205--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135200015.6" id="x108-135200015.6"></a></span>
<!--l. 1205--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135300015.6" id="x108-135300015.6"></a></span>
</div>
<!--l. 1206--><p class="indent" >   might be <div class="lisp"><div class="tabbing">
((one . 1) (two . 2) (three . 3) (four . 19))
   <br>
<!--l. 1209--><p class="noindent" ></div>
                                                                          

                                                                          
<!--l. 1209--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135400015.6" id="x108-135400015.6"></a></span>
<!--l. 1209--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135500015.6" id="x108-135500015.6"></a></span>
</div>
<!--l. 1210--><p class="indent" >   but could equally well be <div class="lisp"><div class="tabbing">
((two . 2) (one . 1) (three . 3) (four . 19))
   <br>
<!--l. 1213--><p class="noindent" ></div>
<!--l. 1213--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135600015.6" id="x108-135600015.6"></a></span>
<!--l. 1213--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135700015.6" id="x108-135700015.6"></a></span>
</div>
</div>
<div class="defun">
<!--l. 1216--><p class="noindent" ><div class="defunheader"> <i>[Function]</i><a 
 id="dx108-1357001"></a><a 
 id="x108-1357002r505"></a> <b>assoc</b>  <i>item</i> <i>a-list</i> <b>&#x0026;key</b>  <i>:test</i> <i>:test-not</i> <i>:key</i><br />
<i>
[Function]</i><a 
 id="dx108-1357003"></a><a 
 id="x108-1357004r506"></a> <b>assoc-if</b>  <i>predicate</i> <i>a-list</i> <b>&#x0026;key</b>  <i>:key</i><br />
<i>
[Function]</i><a 
 id="dx108-1357005"></a><a 
 id="x108-1357006r507"></a> <b>assoc-if-not</b>  <i>predicate</i> <i>a-list</i> <b>&#x0026;key</b>  <i>:key</i>
</div>
<!--l. 1221--><p class="indent" >   Each of these searches the association list <i>a-list</i>. The value is the ﬁrst pair in
the a-list such that the <i>car</i> of the pair satisﬁes the test, or <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> if there is no such
pair in the a-list. For example: <div class="lisp"><div class="tabbing">
(assoc &#x2019;r &#x2019;((a . b) (c . d) (r . x) (s . y) (r . z)))
   <br>             <span class="math"> ⇒</span> (r . x)<br>     (assoc &#x2019;goo &#x2019;((foo . bar) (zoo . goo))) <span class="math"> ⇒</span> <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt><br>
(assoc &#x2019;2 &#x2019;((1 a b c) (2 b c d) (-7 x y z))) <span class="math"> ⇒</span> (2 b c d)<br>
<!--l. 1231--><p class="noindent" ></div>
                                                                          

                                                                          
<!--l. 1231--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135800015.6" id="x108-135800015.6"></a></span>
<!--l. 1231--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-135900015.6" id="x108-135900015.6"></a></span>
</div>
<!--l. 1232--><p class="indent" >   It is possible to <tt><a 
href="symbols.html#x185-2637760r760">rplacd</a></tt> the result of <tt><a 
href="symbols.html#x185-2637108r108">assoc</a></tt> <i>provided</i> that it is not <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt>, in order
to “update” the “table” that was <tt><a 
href="symbols.html#x185-2637108r108">assoc</a></tt>&#x2019;s second argument. (However, it is often
better to update an a-list by adding new pairs to the front, rather than altering
old pairs.) For example: <div class="lisp"><div class="tabbing">
(setq values &#x2019;((x . 100) (y . 200) (z . 50)))
   <br>         (assoc &#x2019;y values) <span class="math"> ⇒</span> (y . 200)<br>         (rplacd (assoc &#x2019;y values) 201)<br>
(assoc &#x2019;y values) <span class="math"> ⇒</span> (y . 201) now<br>
<!--l. 1243--><p class="noindent" ></div>
<!--l. 1243--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136000015.6" id="x108-136000015.6"></a></span>
<!--l. 1243--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136100015.6" id="x108-136100015.6"></a></span>
</div>
<!--l. 1244--><p class="indent" >   A typical trick is to say <tt>(cdr (assoc x y))</tt>. Because the <i>cdr</i> of <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> is
guaranteed to be <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt>, this yields <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> if no pair is found <i>or</i> if a pair is found
whose <i>cdr</i> is <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt>. This is useful if <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> serves its usual role as a “default
value.”
<!--l. 1251--><p class="indent" >   The two expressions <div class="lisp"><div class="tabbing">
(assoc <i>item</i> <i>list</i> :test <i>fn</i>)
   <br>
<!--l. 1254--><p class="noindent" ></div>
<!--l. 1254--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136200015.6" id="x108-136200015.6"></a></span>
                                                                          

                                                                          
<!--l. 1254--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136300015.6" id="x108-136300015.6"></a></span>
</div>
<!--l. 1255--><p class="indent" >   and <div class="lisp"><div class="tabbing">
(ﬁnd <i>item</i> <i>list</i> :test <i>fn</i> :key #&#x2019;car)
   <br>
<!--l. 1258--><p class="noindent" ></div>
<!--l. 1258--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136400015.6" id="x108-136400015.6"></a></span>
<!--l. 1258--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136500015.6" id="x108-136500015.6"></a></span>
</div>
<!--l. 1259--><p class="indent" >   are equivalent in meaning with one important exception: if <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> appears in the
a-list in place of a pair, and the <i>item</i> being searched for is <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt>, <tt><a 
href="symbols.html#x185-2637368r368">find</a></tt> will
blithely compute the <i>car</i> of the <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> in the a-list, ﬁnd that it is equal to the
<i>item</i>, and return <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt>, whereas <tt><a 
href="symbols.html#x185-2637108r108">assoc</a></tt> will ignore the <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> in the a-list and
continue to search for an actual pair (cons) whose <i>car</i> is <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt>. See <tt><a 
href="symbols.html#x185-2637368r368">find</a></tt> and
<tt><a 
href="symbols.html#x185-2637671r671">position</a></tt>.
<div class="new">
<!--l. 1269--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx108-1365001"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-6760007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
</div>
<div class="defun">
<!--l. 1275--><p class="noindent" ><div class="defunheader"> <i>[Function]</i><a 
 id="dx108-1365002"></a><a 
 id="x108-1365003r508"></a> <b>rassoc</b>  <i>item</i> <i>a-list</i> <b>&#x0026;key</b>  <i>:test</i> <i>:test-not</i> <i>:key</i><br />
<i>
[Function]</i><a 
 id="dx108-1365004"></a><a 
 id="x108-1365005r509"></a> <b>rassoc-if</b>  <i>predicate</i> <i>a-list</i> <b>&#x0026;key</b>  <i>:key</i><br />
<i>
[Function]</i><a 
 id="dx108-1365006"></a><a 
 id="x108-1365007r510"></a> <b>rassoc-if-not</b>  <i>predicate</i> <i>a-list</i> <b>&#x0026;key</b>  <i>:key</i>
</div>
<tt>
<!--l. 1280--><p class="indent" >   <a 
href="symbols.html#x185-2637710r710">rassoc</a></tt> is the reverse form of <tt><a 
href="symbols.html#x185-2637108r108">assoc</a></tt>; it searches for a pair whose <i>cdr</i> satisﬁes
the test, rather than the <i>car</i>. If the <i>a-list</i> is considered to be a mapping, then
<tt><a 
href="symbols.html#x185-2637710r710">rassoc</a></tt> treats the <i>a-list</i> as representing the inverse mapping. For example:
<div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(rassoc &#x2019;a &#x2019;((a . b) (b . c) (c . a) (z . a))) <span class="math"> ⇒</span> (c . a)
   <br>
<!--l. 1287--><p class="noindent" ></div>
<!--l. 1287--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136600015.6" id="x108-136600015.6"></a></span>
<!--l. 1287--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136700015.6" id="x108-136700015.6"></a></span>
</div>
<!--l. 1289--><p class="indent" >   The expressions <div class="lisp"><div class="tabbing">
(rassoc <i>item</i> <i>list</i> :test <i>fn</i>)
   <br>
<!--l. 1292--><p class="noindent" ></div>
<!--l. 1292--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136800015.6" id="x108-136800015.6"></a></span>
<!--l. 1292--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-136900015.6" id="x108-136900015.6"></a></span>
</div>
<!--l. 1293--><p class="indent" >   and <div class="lisp"><div class="tabbing">
(ﬁnd <i>item</i> <i>list</i> :test <i>fn</i> :key #&#x2019;cdr)
   <br>
<!--l. 1296--><p class="noindent" ></div>
<!--l. 1296--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-137000015.6" id="x108-137000015.6"></a></span>
                                                                          

                                                                          
<!--l. 1296--><p class="noindent" ><span class="paragraphHead"><a 
href="#x108-137100015.6" id="x108-137100015.6"></a></span>
</div>
<!--l. 1297--><p class="indent" >   are equivalent in meaning, except when the <i>item</i> is <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> and <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt> appears in
place of a pair in the a-list. See the discussion of the function <tt><a 
href="symbols.html#x185-2637108r108">assoc</a></tt>.
<div class="new">
<!--l. 1302--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx108-1371001"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-6760007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 8--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="hash.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse87.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse87.html#tailclmse87.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse88.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="list.html#clmse88.html" >Up</a><tt>&#x003E;</tt></div><a 
 id="tailclmse88.html"></a>   </div> </div> 
</body></html> 
