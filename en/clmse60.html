<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Exporting and Importing Symbols</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 14:21:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 330--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse61.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse59.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse59.html#tailclmse59.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse60.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="xpack.html#clmse60.html" >Up</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h3 class="sectionHead"><span class="titlemark">11.4   </span> <a 
href="clm.html#QQ2-76-944" id="x76-93500011.4">Exporting and Importing
Symbols</a></h3>
<!--l. 333--><p class="noindent" >Symbols from one package may be made accessible in another package in two
ways.
<!--l. 336--><p class="indent" >   First, any individual symbol may be added to a package by use of the
function <tt><a 
href="symbols.html#x185-2637439r439">import</a></tt>. The form <tt>(import &#x2019;editor:buffer)</tt> takes the external
symbol named <tt>buffer</tt> in the <tt>editor</tt> package (this symbol was located
when the form was read by the Lisp reader) and adds it to the current
package as an internal symbol. The symbol is then present in the current
package. The imported symbol is not automatically exported from the
current package, but if it is already present and external, then the fact
that it is external is not changed. After the call to <tt><a 
href="symbols.html#x185-2637439r439">import</a></tt> it is possible
to refer to <tt>buffer</tt> in the importing package without any qualiﬁer. The
status of <tt>buffer</tt> in the package named <tt>editor</tt> is unchanged, and <tt>editor</tt>
remains the home package for this symbol. Once imported, a symbol is
<i>present</i> in the importing package and can be removed only by calling
<tt><a 
href="symbols.html#x185-2637900r900">unintern</a></tt>.
<!--l. 351--><p class="indent" >   If the symbol is already present in the importing package, <tt><a 
href="symbols.html#x185-2637439r439">import</a></tt> has no
eﬀect. If a distinct symbol with the name <tt>buffer</tt> is accessible in the importing
package (directly or by inheritance), then a correctable error is signaled, as
described in section <a 
href="clmse61.html#x77-93600011.5">11.5<!--tex4ht:ref: NAME-CONFLICTS-SECTION --></a>, because <tt><a 
href="symbols.html#x185-2637439r439">import</a></tt> avoids letting one symbol shadow
another.
<!--l. 358--><p class="indent" >   A symbol is said to be <i>shadowed</i> by another symbol in some package if the
ﬁrst symbol would be accessible by inheritance if not for the presence of the
second symbol. To import a symbol without the possibility of getting an error
because of shadowing, use the function <tt><a 
href="symbols.html#x185-2637782r782">shadowing-import</a></tt>. This inserts the
symbol into the speciﬁed package as an internal symbol, regardless of whether
another symbol of the same name will be shadowed by this action. If a diﬀerent
symbol of the same name is already present in the package, that symbol will ﬁrst
be uninterned from the package (see <tt><a 
href="symbols.html#x185-2637900r900">unintern</a></tt>). The new symbol is added to the
package&#x2019;s shadowing-symbols list. <tt><a 
href="symbols.html#x185-2637782r782">shadowing-import</a></tt> should be used with
caution. It changes the state of the package system in such a way that the
consistency rules do not hold across the change.
                                                                          

                                                                          
<!--l. 375--><p class="indent" >   The second mechanism is provided by the function <tt><a 
href="symbols.html#x185-2637914r914">use-package</a></tt>. This causes
a package to inherit all of the external symbols of some other package. These
symbols become accessible as <i>internal</i> symbols of the using package. That is, they
can be referred to without a qualiﬁer while this package is current, but they are
not passed along to any other package that uses this package. Note that
<tt><a 
href="symbols.html#x185-2637914r914">use-package</a></tt>, unlike <tt><a 
href="symbols.html#x185-2637439r439">import</a></tt>, does not cause any new symbols to be <i>present</i> in the
current package but only makes them <i>accessible</i> by inheritance. <tt><a 
href="symbols.html#x185-2637914r914">use-package</a></tt>
checks carefully for name conﬂicts between the newly imported symbols and those
already accessible in the importing package. This is described in detail in
section <a 
href="clmse61.html#x77-93600011.5">11.5<!--tex4ht:ref: NAME-CONFLICTS-SECTION --></a>.
<!--l. 388--><p class="indent" >   Typically a user, working by default in the <tt>user</tt> package, will load a number
of packages into Lisp to provide an augmented working environment, and then call
<tt><a 
href="symbols.html#x185-2637914r914">use-package</a></tt> on each of these packages to allow easy access to their external
symbols. <tt><a 
href="symbols.html#x185-2637906r906">unuse-package</a></tt> undoes the eﬀects of a previous <tt><a 
href="symbols.html#x185-2637914r914">use-package</a></tt>. The
external symbols of the used package are no longer inherited. However, any
symbols that have been imported into the using package continue to be present in
that package.
<!--l. 397--><p class="indent" >   There is no way to inherit the <i>internal</i> symbols of another package; to refer
to an internal symbol, the user must either make that symbol&#x2019;s home
package current, use a qualiﬁer, or import that symbol into the current
package.
<!--l. 402--><p class="indent" >   The distinction between external and internal symbols is a primary means of
hiding names so that one program does not tread on the namespace of
another.
<!--l. 406--><p class="indent" >   When <tt><a 
href="symbols.html#x185-2637451r451">intern</a></tt> or some other function wants to look up a symbol in a given
package, it ﬁrst looks for the symbol among the external and internal symbols of
the package itself; then it looks through the external symbols of the used packages
in some unspeciﬁed order. The order does not matter; according to the rules for
handling name conﬂicts (see below), if conﬂicting symbols appear in two or
more packages inherited by package <i>X</i>, a symbol of this name must also
appear in <i>X</i> itself as a shadowing symbol. Of course, implementations are
free to choose other, more eﬃcient ways of implementing this search,
as long as the user-visible behavior is equivalent to what is described
here.
<!--l. 418--><p class="indent" >   The function <tt><a 
href="symbols.html#x185-2637349r349">export</a></tt> takes a symbol that is accessible in some speciﬁed
package (directly or by inheritance) and makes it an external symbol of that
package. If the symbol is already accessible as an external symbol in the
package, <tt><a 
href="symbols.html#x185-2637349r349">export</a></tt> has no eﬀect. If the symbol is directly present in the
                                                                          

                                                                          
package as an internal symbol, it is simply changed to external status.
If it is accessible as an internal symbol via <tt><a 
href="symbols.html#x185-2637914r914">use-package</a></tt>, the symbol
is ﬁrst imported into the package, then exported. (The symbol is then
present in the speciﬁed package whether or not the package continues to use
the package through which the symbol was originally inherited.) If the
symbol is not accessible at all in the speciﬁed package, a correctable error is
signaled that, upon continuing, asks the user whether the symbol should be
imported.
<!--l. 433--><p class="indent" >   The function <tt><a 
href="symbols.html#x185-2637899r899">unexport</a></tt> is provided mainly as a way to undo erroneous calls to
<tt><a 
href="symbols.html#x185-2637349r349">export</a></tt>. It works only on symbols directly present in the current package,
switching them back to internal status. If <tt><a 
href="symbols.html#x185-2637899r899">unexport</a></tt> is given a symbol already
accessible as an internal symbol in the current package, it does nothing; if
it is given a symbol not accessible in the package at all, it signals an
error.
                                                                          

                                                                          
<!--l. 440--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse61.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse59.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse59.html#tailclmse59.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse60.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="xpack.html#clmse60.html" >Up</a><tt>&#x003E;</tt></div><a 
 id="tailclmse60.html"></a>  </div> </div> 
</body></html> 
