<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Numbers</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 16:10:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 181--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse4.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html#taildtypes.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse3.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html#clmse3.html" >Up</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h3 class="sectionHead"><span class="titlemark">2.1   </span> <a 
href="clm.html#QQ2-10-46" id="x10-410002.1">Numbers</a></h3>
<!--l. 183--><p class="noindent" >Several kinds of numbers are deﬁned in Common Lisp. They are divided into
<i>integers</i>; <i>ratios</i>; <i>ﬂoating-point numbers</i>, with names provided for up to four
diﬀerent ﬂoating-point representations; <i>reals</i> and <i>complex numbers</i>.
<!--l. 189--><p class="indent" >   The <tt>number</tt> data type encompasses all kinds of numbers. For convenience,
there are names for some subclasses of numbers as well. Integers and ratios are of
type <tt>rational</tt>. Rational numbers and ﬂoating-point numbers are of type <tt>real</tt>.
Real numbers and complex numbers are of type <tt>number</tt>.
<!--l. 196--><p class="indent" >   Although the names of these types were chosen with the terminology of
mathematics in mind, the correspondences are not always exact. Integers and
ratios model the corresponding mathematical concepts directly. Numbers
of type <tt><a 
href="symbols.html#x187-2636380r380">float</a></tt> may be used to approximate real numbers, both rational
and irrational. The <tt>real</tt> type includes all Common Lisp numbers that
represent mathematical real numbers, though there are mathematical real
numbers (irrational numbers) that do not have an exact Common Lisp
representation. Only <tt>real</tt> numbers may be ordered using the <tt><a 
href="symbols.html#x187-2636059r59">&#x003C;</a></tt>, <tt><a 
href="symbols.html#x187-2636062r62">&#x003E;</a></tt>, <tt><a 
href="symbols.html#x187-2636060r60">&#x003C;=</a></tt>, and <tt><a 
href="symbols.html#x187-2636063r63">&#x003E;=</a></tt>
functions.
<!--l. 209--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.1.1   </span> <a 
href="frontmatter.html#QQ2-10-47" id="x10-420002.1.1">Integers</a></h4>
                                                                          

                                                                          
<a 
 id="dx10-42001"></a>
<!--l. 213--><p class="noindent" >The <tt>integer</tt> data type is intended to represent mathematical integers. Unlike
most programming languages, Common Lisp in principle imposes no limit on the
magnitude of an integer; storage is automatically allocated as necessary to
represent large integers.
<!--l. 218--><p class="indent" >   In every Common Lisp implementation there is a range of integers that are
represented more eﬃciently than others; each such integer is called a <i>ﬁxnum</i>,
and an integer that is not a ﬁxnum is called a <i>bignum</i>. Common Lisp is
designed to hide this distinction as much as possible; the distinction between
ﬁxnums and bignums is visible to the user in only a few places where the
eﬃciency of representation is important. Exactly which integers are ﬁxnums is
implementation-dependent; typically they will be those integers in the range <span class="math"> − 2<sup>n</sup></span>
to <span class="math">2<sup>n</sup> − 1</span>, inclusive, for some <i>n</i> not less than 15. See <tt><a 
href="symbols.html#x187-2636589r589">most-positive-fixnum</a></tt> and
<tt><a 
href="symbols.html#x187-2636584r584">most-negative-fixnum</a></tt>.
<tt>
<!--l. 231--><p class="indent" >   fixnum</tt> must be a supertype of the type <tt>(signed-byte 16)</tt>, and additionally
that the value of <tt><a 
href="symbols.html#x187-2636091r91">array-dimension-limit</a></tt> must be a ﬁxnum (implying that the
implementor should choose the range of ﬁxnums to be large enough to
accommodate the largest size of array to be supported).___________________<div class="rationale">
<!--l. 238--><p class="noindent" ><b>Rationale:</b> This speciﬁcation allows programmers to declare variables in portable code
to be of type <tt>fixnum</tt> for eﬃciency. Fixnums are guaranteed to encompass at least the set
of 16-bit signed integers (compare this to the data type <tt>short int</tt> in the C
programming language). In addition, any valid array index must be a ﬁxnum, and
therefore variables used to hold array indices (such as a <tt><a 
href="symbols.html#x187-2636318r318">dotimes</a></tt> variable) may be
declared <tt>fixnum</tt> in portable code.
</div>___________________________________________________________________________________________________________
<!--l. 249--><p class="indent" >     Integers are ordinarily written in decimal notation, as a sequence of decimal
digits, optionally preceded by a sign and optionally followed by a decimal point.
For example: <div class="lisp"><div class="tabbing">
                                        0       ;Zero
     <br>                                       -0       ;This <i>always</i> means the same as <tt>0</tt><br>
                        +6       ;The ﬁrst perfect number<br>
                                      28       ;The second perfect number<br>
                                  1024.       ;Two to the tenth power<br>
                                                                          

                                                                          
                             -1      ;<span class="math">e<sup>πi</sup></span><br> 15511210043330985984000000.      ;25 factorial (25!), probably a bignum<br>
<!--l. 262--><p class="noindent" ></div>
<!--l. 262--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-430002.1.1" id="x10-430002.1.1"></a></span>
<!--l. 262--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-440002.1.1" id="x10-440002.1.1"></a></span>
</div>
<!--l. 264--><p class="indent" >   Integers may be notated in radices other than ten. The notation <div class="lisp"><div class="tabbing">
#<i>nn</i>r<i>ddddd</i> or #<i>nn</i>R<i>ddddd</i>
   <br>
<!--l. 268--><p class="noindent" ></div>
<!--l. 268--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-450002.1.1" id="x10-450002.1.1"></a></span>
<!--l. 268--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-460002.1.1" id="x10-460002.1.1"></a></span>
</div>
<!--l. 269--><p class="indent" >   means the integer in radix-<i>nn</i> notation denoted by the digits <i>ddddd</i>. More
precisely, one may write <tt>#</tt>, a non-empty sequence of decimal digits representing an
unsigned decimal integer <i>n</i>, <tt>r</tt> (or <tt>R</tt>), an optional sign, and a sequence of radix-<i>n</i>
digits, to indicate an integer written in radix <i>n</i> (which must be between 2 and
36, inclusive). Only legal digits for the speciﬁed radix may be used; for
example, an octal number may contain only the digits 0 through 7. For
digits above 9, letters of the alphabet of either case may be used in order.
Binary, octal, and hexadecimal radices are useful enough to warrant the
special abbreviations <tt>#b</tt> for <tt>#2r</tt>, <tt>#o</tt> for <tt>#8r</tt>, and <tt>#x</tt> for <tt>#16r</tt>. For example:
<div class="lisp"><div class="tabbing">
#2r11010101      ;Another way of writing <tt>213</tt> decimal
                                                                          

                                                                          
   <br>                                                              #b11010101       ;Ditto<br>
#b+11010101      ;Ditto<br>                #o325      ;Ditto, in octal radix<br>
      #xD5      ;Ditto, in hexadecimal radix<br>     #16r+D5      ;Ditto<br>
     #o-300      ;Decimal -192, written in base 8<br>
  #3r-21010      ;Same thing in base 3<br>
   #25R-7H      ;Same thing in base 25<br>
#xACCEDED      ;181202413, in hexadecimal radix<br>
<!--l. 295--><p class="noindent" ></div>
<!--l. 295--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-470002.1.1" id="x10-470002.1.1"></a></span>
<!--l. 295--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-480002.1.1" id="x10-480002.1.1"></a></span>
</div>
<!--l. 297--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.1.2   </span> <a 
href="frontmatter.html#QQ2-10-54" id="x10-490002.1.2">Ratios</a></h4>
<a 
 id="dx10-49001"></a>
<a 
 id="dx10-49002"></a>
<!--l. 301--><p class="noindent" >A <i>ratio</i> is a number representing the mathematical ratio of two integers. Integers
and ratios collectively constitute the type <tt>rational</tt>. The canonical representation
of a rational number is as an integer if its value is integral, and otherwise as the
ratio of two integers, the <i>numerator</i> and <i>denominator</i>, whose greatest common
divisor is 1, and of which the denominator is positive (and in fact greater than 1,
or else the value would be integral). A ratio is notated with <tt><a 
href="symbols.html#x187-2636055r55">/</a></tt> as a separator, thus:
<tt>3/5</tt>. It is possible to notate ratios in non-canonical (unreduced) forms, such as
<tt>4/6</tt>, but the Lisp function <tt>prin1</tt> always prints the canonical form for a
ratio.
<!--l. 315--><p class="indent" >   If any computation produces a result that is a ratio of two integers such that
the denominator evenly divides the numerator, then the result is immediately
converted to the equivalent integer. This is called the rule of <i>rational
canonicalization</i>.
<!--l. 320--><p class="indent" >   Rational numbers may be written as the possibly signed quotient of decimal
numerals: an optional sign followed by two non-empty sequences of digits
separated by a <tt>/</tt>. This syntax may be described as follows:
<!--l. 325--><p class="indent" >   <div class="tabbing">
                                                                          

                                                                          
<i>ratio</i> ::=  [<i><i>sign</i></i>]  {<i><i>digit</i></i>}+  <tt>/</tt> {<i><i>digit</i></i>}+
   <br>
<!--l. 327--><p class="noindent" ></div>
<!--l. 327--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-500002.1.2" id="x10-500002.1.2"></a></span>
   The second sequence may not consist entirely of zeros. For example:
<div class="lisp"><div class="tabbing">
2/3                    ;This is in canonical form
   <br>  4/6                    ;A non-canonical form for the same number<br>
-17/23                 ;A not very interesting ratio<br>
-30517578125/32768     ;This is <span class="math">(−5∕2)<sup>15</sup></span><br>
10/5                   ;The canonical form for this is <tt>2</tt><br>
<!--l. 338--><p class="noindent" ></div>
<!--l. 338--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-510002.1.2" id="x10-510002.1.2"></a></span>
<!--l. 338--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-520002.1.2" id="x10-520002.1.2"></a></span>
</div>
<!--l. 340--><p class="indent" >   To notate rational numbers in radices other than ten, one uses the
same radix speciﬁers (one of <tt>#<i>nn</i>R</tt>, <tt>#O</tt>, <tt>#B</tt>, or <tt>#X</tt>) as for integers. For
example:
<div class="lisp">
<!--l. 345--><p class="indent" >   <div class="tabbing">
#o-101/75          ;Octal notation for <tt>-65/61</tt>
   <br>                   #3r120/21          ;Ternary notation for <tt>15/7</tt><br>
#Xbc/ad            ;Hexadecimal notation for <tt>188/173</tt><br>
#xFADED/FACADE     ;Hexadecimal notation for <tt>1027565/16435934</tt><br>
<!--l. 350--><p class="noindent" ></div>
                                                                          

                                                                          
<!--l. 350--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-530002.1.2" id="x10-530002.1.2"></a></span>
<!--l. 350--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-540002.1.2" id="x10-540002.1.2"></a></span>
</div>
<!--l. 352--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.1.3   </span> <a 
href="frontmatter.html#QQ2-10-60" id="x10-550002.1.3">Floating-Point Numbers</a></h4>
<!--l. 354--><p class="noindent" >Common Lisp allows an implementation to provide one or more kinds
of ﬂoating-point number, which collectively make up the type <tt><a 
href="symbols.html#x187-2636380r380">float</a></tt>.
Now a ﬂoating-point number is a (mathematical) rational number of the
form <span class="math"><i>s</i> ⋅<i>f</i> ⋅<i>b</i><sup>e−p</sup></span>, where <i>s</i> is <span class="math"> + 1</span> or <span class="math"> − 1</span>, the <i>sign</i>; <i>b</i> is an integer greater
than 1, the <i>base</i> or <i>radix</i> of the representation; <i>p</i> is a positive integer, the
<i>precision</i> (in base-<i>b</i> digits) of the ﬂoating-point number; <i>f </i> is a positive
integer between <span class="math"><i>b</i><sup>p−1</sup></span> and <span class="math"><i>b</i><sup>p</sup> − 1</span> (inclusive), the <i>signiﬁcand</i>; and <i>e</i> is an
integer, the <i>exponent</i>. The value of <i>p</i> and the range of <i>e</i> depends on the
implementation and on the type of ﬂoating-point number within that
implementation. In addition, there is a ﬂoating-point zero; depending on the
implementation, there may also be a “minus zero.” If there is no minus
zero, then <tt>0.0</tt> and <tt>-0.0</tt> are both interpreted as simply a ﬂoating-point
zero.______________________________________________________________________<div class="implementation">
<!--l. 377--><p class="noindent" ><b>Implementation note:</b> The form of the above description should not be construed to
require the internal representation to be in sign-magnitude form. Two&#x2019;s-complement and
other representations are also acceptable. Note that the radix of the internal
representation may be other than 2, as on the IBM 360 and 370, which use radix 16; see
<tt><a 
href="symbols.html#x187-2636383r383">float-radix</a></tt>.
</div>___________________________________________________________________________________________________________
<!--l. 387--><p class="indent" >     Floating-point numbers may be provided in a variety of precisions
and sizes, depending on the implementation. High-quality ﬂoating-point
software tends to depend critically on the precise nature of the ﬂoating-point
arithmetic and so may not always be completely portable. As an aid in writing
programs that are moderately portable, however, certain deﬁnitions are made
here:
        <ul class="itemize1">
        <li class="itemize">A                  <i>short</i>                 ﬂoating-point                  number
                                                                          

                                                                          
      (type <tt>short-float</tt>) is of the representation of smallest ﬁxed precision
      provided by an implementation.
      </li>
      <li class="itemize">A   <i>long</i>   ﬂoating-point   number   (type   <tt>long-float</tt>)   is   of   the
      representation   of   the   largest   ﬁxed   precision   provided   by   an
      implementation.
      </li>
      <li class="itemize">Intermediate between short and long formats are two others, arbitrarily
      called <i>single</i> and <i>double</i> (types <tt>single-float</tt> and <tt>double-float</tt>).</li></ul>
<!--l. 409--><p class="indent" >   The precise deﬁnition of these categories is implementation-dependent.
However, the rough intent is that short ﬂoating-point numbers be precise to at
least four decimal places (but also have a space- eﬃcient representation); single
ﬂoating-point numbers, to at least seven decimal places; and double ﬂoating-point
numbers, to at least fourteen decimal places. It is suggested that the precision
(measured in bits, computed as <span class="math">p log <sub>2</sub>b</span>) and the exponent size (also measured in
bits, computed as the base-2 logarithm of 1 plus the maximum exponent value) be
at least as great as the values in table <a 
href="#x10-550011">2.1<!--tex4ht:ref: Floating-Format-Requirements-Table --></a>.
   <div class="table">
                                                                          

                                                                          
<!--l. 421--><p class="indent" >   <a 
 id="x10-550011"></a><hr class="float"><div class="float" 
>
                                                                          

                                                                          
 <div class="caption" 
><span class="id">Table 2.1: </span><span  
class="content">Recommended Minimum Floating-Point Precision and Exponent
Size</span></div><!--tex4ht:label?: x10-550011 -->
<div class="tabular"><table width="100%" class="tabular"><tr><td align="left" >Format   </td><td align="left" >Minimum Precision   </td><td align="left" >Minimum Exponent Size</td>
</tr><tr><td align="left" >Short     </td><td align="left" >13 bits                    </td><td align="left" >5 bits                         </td></tr><tr><td align="left" >Single </td><td align="left" >24 bits </td><td align="left" >8 bits</td>
</tr><tr><td align="left" >Double   </td><td align="left" >50 bits                    </td><td align="left" >8 bits                         </td>
</tr><tr><td align="left" >Long      </td><td align="left" >50 bits                    </td><td align="left" >8 bits                         </td></tr></table></div>
                                                                          

                                                                          
   </div><hr class="endfloat" />
   </div>
<!--l. 433--><p class="indent" >   Floating-point numbers are written in either decimal fraction or computerized
scientiﬁc notation: an optional sign, then a non-empty sequence of digits
with an embedded decimal point, then an optional decimal exponent
speciﬁcation. If there is no exponent speciﬁer, then the decimal point is required,
and there must be digits after it. The exponent speciﬁer consists of an
exponent marker, an optional sign, and a non-empty sequence of digits. For
preciseness, here is a modiﬁed-BNF description of ﬂoating-point notation.
<div class="tabbing">
<i>ﬂoating-point-number</i> ::=  [<i><i>sign</i></i>]  {<i><i>digit</i></i>}*  decimal-point {<i><i>digit</i></i>}+  [<i><i>exponent</i></i>]
   <br>                                |  [<i>sign</i>]  {<i><i>digit</i></i>}+  [<i><i>decimal-point</i>  {<i><i>digit</i></i>}*</i>]  exponent<br>
<i>sign</i> ::= <tt><a 
href="symbols.html#x187-2636051r51">+</a></tt> | <tt><a 
href="symbols.html#x187-2636054r54">-</a></tt><br> <i>decimal-point</i> ::= <tt>.</tt><br> <i>digit</i> ::= <tt>0</tt> | <tt>1</tt> | <tt>2</tt> | <tt>3</tt> | <tt>4</tt> | <tt>5</tt> | <tt>6</tt> | <tt>7</tt> | <tt>8</tt> | <tt>9</tt><br>
<i>exponent</i> ::= <i>exponent-marker</i> [<i><i>sign</i></i>]  {<i><i>digit</i></i>}+ <br>
<i>exponent-marker</i> ::= <tt>e</tt> | <tt>s</tt> | <tt>f</tt> | <tt>d</tt> | <tt>l</tt> | <tt>E</tt> | <tt>S</tt> | <tt>F</tt> | <tt>D</tt> | <tt>L</tt><br>
<!--l. 458--><p class="noindent" ></div>
<!--l. 458--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-560002.1.3" id="x10-560002.1.3"></a></span>
   If no exponent speciﬁer is present, or if the exponent marker <tt>e</tt> (or <tt>E</tt>) is used,
then the precise format to be used is not speciﬁed. When such a representation is
read and converted to an internal ﬂoating-point data object, the format speciﬁed
by the variable <tt><a 
href="symbols.html#x187-2636042r42">*read-default-float-format*</a></tt> is used; the initial value of this
variable is <tt>single-float</tt>.
<!--l. 466--><p class="indent" >   The letters <tt>s</tt>, <tt>f</tt>, <tt>d</tt>, and <tt>l</tt> (or their respective uppercase equivalents) explicitly
specify the use of <i>short</i>, <i>single</i>, <i>double</i>, and <i>long</i> format, respectively.
<!--l. 470--><p class="indent" >   Examples of ﬂoating-point numbers: <div class="lisp"><div class="tabbing">
0.0                         ;Floating-point zero in default format
   <br>0E0                         ;Also ﬂoating-point zero in default format<br>
-.0                         ;This may be a zero or a minus zero,<br>
                            ; depending on the implementation<br>
0.                          ;The <i>integer</i> zero, not a ﬂoating-point zero!<br>
0.0s0                       ;A ﬂoating-point zero in <i>short</i> format<br>
                                                                          

                                                                          
0s0                         ;Also a ﬂoating-point zero in <i>short</i> format<br>
3.1415926535897932384d0     ;A <i>double</i>-format approximation to <span class="math">π</span><br>
6.02E+23                    ;Avogadro&#x2019;s number, in default format<br>
602E+21                     ;Also Avogadro&#x2019;s number, in default format<br>
3.010299957f-1              ;<span class="math"> log <sub>10</sub>2</span>, in <i>single</i> format<br>
-0.000000001s9              ;<span class="math">e<sup>πi</sup></span> in <i>short</i> format, the hard way<br>
<!--l. 484--><p class="noindent" ></div>
<!--l. 484--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-570002.1.3" id="x10-570002.1.3"></a></span>
<!--l. 484--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-580002.1.3" id="x10-580002.1.3"></a></span>
</div>
<!--l. 486--><p class="indent" >   The internal format used for an external representation depends only on the
exponent marker and not on the number of decimal digits in the external
representation.
<!--l. 490--><p class="indent" >   While Common Lisp provides terminology and notation suﬃcient to
accommodate four distinct ﬂoating-point formats, not all implementations will
have the means to support that many distinct formats. An implementation is
therefore permitted to provide fewer than four distinct internal ﬂoating-point
formats, in which case at least one of them will be “shared” by more than one of
the external format names <i>short</i>, <i>single</i>, <i>double</i>, and <i>long</i> according to the
following rules:
      <ul class="itemize1">
      <li class="itemize">If one internal format is provided, then it is considered to be <i>single</i>, but
      serves also as <i>short</i>, <i>double</i>, and <i>long</i>. The data types <tt>short-float</tt>,
      <tt>single-float</tt>, <tt>double-float</tt>, and <tt>long-float</tt> are considered to be
      identical. An expression such as <tt>(eql 1.0s0 1.0d0)</tt> will be true in
      such an implementation because the two numbers <tt>1.0s0</tt> and <tt>1.0d0</tt>
      will  be  converted  into  the  same  internal  format  and  therefore  be
      considered to have the same data type, despite the diﬀering external
      syntax. Similarly, <tt>(typep 1.0L0 &#x2019;short-float)</tt> will be true in such
      an implementation. For output purposes all ﬂoating-point numbers are
      assumed to be of <i>single</i> format and thus will print using the exponent
      letter <tt>E</tt> or <tt>F</tt>.
                                                                          

                                                                          
      </li>
      <li class="itemize">If two internal formats are provided, then either of two correspondences may
      be used, depending on which is the more appropriate:
           <ul class="itemize2">
           <li class="itemize">One format is <i>short</i>; the other is <i>single</i> and serves also as <i>double</i>
           and  <i>long</i>.  The  data  types  <tt>single-float</tt>,  <tt>double-float</tt>,  and
           <tt>long-float</tt> are considered to be identical, but <tt>short-float</tt> is
           distinct. An expression such as <tt>(eql 1.0s0 1.0d0)</tt> will be false,
           but  <tt>(eql 1.0f0 1.0d0)</tt> will  be  true.  Similarly,  <tt>(typep 1.0L0
           &#x2019;short-float)</tt> will be false, but <tt>(typep 1.0L0 &#x2019;single-float)</tt>
           will be true. For output purposes all ﬂoating-point numbers are
           assumed to be of <i>short</i> or <i>single</i> format.
           </li>
           <li class="itemize">One  format  is  <i>single</i>  and  serves  also  as  <i>short</i>;  the  other  is
           <i>double</i>  and  serves  also  as  <i>long</i>.  The  data  types  <tt>short-float</tt>
           and  <tt>single-float</tt> are  considered  to  be  identical,  and  the
           data  types  <tt>double-float</tt> and  <tt>long-float</tt> are  considered  to
           be identical. An expression such as <tt>(eql 1.0s0 1.0d0)</tt> will be
           false, as will <tt>(eql 1.0f0 1.0d0)</tt>; but <tt>(eql 1.0d0 1.0L0)</tt> will be
           true. Similarly, <tt>(typep 1.0L0 &#x2019;short-float)</tt> will be false, but
           <tt>(typep 1.0L0 &#x2019;double-float)</tt> will be true. For output purposes
           all ﬂoating-point numbers are assumed to be of <i>single</i> or <i>double</i>
           format.</li></ul>
      </li>
      <li class="itemize">If three internal formats are provided, then either of two correspondences
      may be used, depending on which is the more appropriate:
           <ul class="itemize2">
           <li class="itemize">One format is <i>short</i>; another format is <i>single</i>; and the third format
           is <i>double</i> and serves also as <i>long</i>. Similar constraints apply.
           </li>
           <li class="itemize">One format is <i>single</i> and serves also as <i>short</i>; another is <i>double</i>;
           and the third format is <i>long</i>.</li></ul>
      </li></ul>
_____________________________________________________________________<div class="implementation">
                                                                          

                                                                          
<!--l. 563--><p class="noindent" ><b>Implementation note:</b> It is recommended that an implementation provide as many
distinct ﬂoating-point formats as feasible, using table <a 
href="#x10-550011">2.1<!--tex4ht:ref: Floating-Format-Requirements-Table --></a> as a guideline. Ideally,
short-format ﬂoating-point numbers should have an “immediate” representation that
does not require heap allocation; single-format ﬂoating-point numbers should
approximate IEEE proposed standard single-format ﬂoating-point numbers; and
double-format ﬂoating-point numbers should approximate IEEE proposed standard
double-format ﬂoating-point numbers <span class="cite">[<a 
href="bib.html#XIEEE-PROPOSED-FLOATING-POINT-STANDARD">23</a>, <a 
href="bib.html#XIEEE-FLOATING-POINT-IMPL-GUIDE">17</a>, <a 
href="bib.html#XIEEE-FLOATING-POINT-IMPL-GUIDE-ERRATA">16</a>]</span>.
</div>
__________________________________________________________________________
<!--l. 579--><p class="noindent" >
     <h4 class="subsectionHead"><span class="titlemark">2.1.4   </span> <a 
href="frontmatter.html#QQ2-10-65" id="x10-590002.1.4">Complex Numbers</a></h4>
<!--l. 581--><p class="noindent" >Complex numbers (type <tt><a 
href="symbols.html#x187-2636239r239">complex</a></tt>) are represented in Cartesian form, with a real
part and an imaginary part, each of which is a non-complex number (integer,
ratio, or ﬂoating-point number). It should be emphasized that the parts of a
complex number are not necessarily ﬂoating-point numbers; in this, Common Lisp
is like PL/I and diﬀers from Fortran. However, both parts must be of the
same type: either both are rational, or both are of the same ﬂoating-point
format.
<!--l. 590--><p class="indent" >     Complex numbers may be notated by writing the characters <tt>#C</tt> followed by a
list of the real and imaginary parts. If the two parts as notated are not of the
same type, then they are converted according to the rules of ﬂoating-point
contagion as described in chapter <a 
href="number.html#x80-95400012">12<!--tex4ht:ref: NUMBER --></a>. (Indeed, <tt>#C(<i>a</i> <i>b</i>)</tt> is equivalent to
<tt>#,(complex <i>a</i> <i>b</i>)</tt>; see the description of the function <tt><a 
href="symbols.html#x187-2636239r239">complex</a></tt>.) For example:
<div class="lisp"><div class="tabbing">
#C(3.0s1 2.0s-1)     ;Real and imaginary parts are short format
     <br>                                     #C(5 -3)             ;A Gaussian integer<br>
#C(5/3 7.0)          ;Will be converted internally to <tt>#C(1.66666 7.0)</tt><br>
#C(0 1)              ;The imaginary unit, that is, <i>i</i><br>
<!--l. 603--><p class="noindent" ></div>
<!--l. 603--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-600002.1.4" id="x10-600002.1.4"></a></span>
                                                                          

                                                                          
<!--l. 603--><p class="noindent" ><span class="paragraphHead"><a 
href="#x10-610002.1.4" id="x10-610002.1.4"></a></span>
</div>
<!--l. 605--><p class="indent" >   The type of a speciﬁc complex number is indicated by a list of the
word <tt><a 
href="symbols.html#x187-2636239r239">complex</a></tt> and the type of the components; for example, a specialized
representation for complex numbers with short ﬂoating-point parts would be of
type <tt>(complex short-float)</tt>. The type <tt><a 
href="symbols.html#x187-2636239r239">complex</a></tt> encompasses all complex
representations.
<!--l. 611--><p class="indent" >   A complex number of type <tt>(complex rational)</tt>, that is, one whose
components are rational, can never have a zero imaginary part. If the result of a
computation would be a complex rational with a zero imaginary part, the result is
immediately converted to a non-complex rational number by taking the real
part. This is called the rule of <i>complex canonicalization</i>. This rule does
not apply to ﬂoating-point complex numbers; <tt>#C(5.0 0.0)</tt> and <tt>5.0</tt> are
diﬀerent.
                                                                          

                                                                          
<!--l. 620--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse4.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html#taildtypes.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse3.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html#clmse3.html" >Up</a><tt>&#x003E;</tt></div><a 
 id="tailclmse3.html"></a>   </div> </div> 
</body></html> 
