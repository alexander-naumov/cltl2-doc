<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>16 Hash Tables</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 14:21:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 8--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse89.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse88.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse88.html#tailclmse88.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailhash.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clm.html#hash.html" >Up</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h2 class="chapterHead"><span class="titlemark">Chapter 16</span><br /><a 
href="clm.html#QQ2-109-1402" id="x109-137200016">Hash Tables</a></h2><div class="chapterTOCS">
    <span class="sectionToc" >16.1 <a 
href="clmse89.html#x110-137500016.1">Hash Table Functions</a></span>
<br />    <span class="sectionToc" >16.2 <a 
href="clmse90.html#x111-139300016.2">Primitive Hash Function</a></span>
   </div>
<!--l. 11--><p class="indent" >   A hash table is a Lisp object that can eﬃciently map a given Lisp object to
another Lisp object. Each hash table has a set of <i>entries</i>, each of which associates
a particular <i>key</i> with a particular <i>value</i>. The basic functions that deal with hash
tables can create entries, delete entries, and ﬁnd the value that is associated with
a given key. Finding the value is very fast, even if there are many entries, because
hashing is used; this is an important advantage of hash tables over property
lists.
<!--l. 20--><p class="indent" >   A given hash table can associate only one <i>value</i> with a given <i>key</i>; if you try to
add a second <i>value</i>, it will replace the ﬁrst. Also, adding a value to a hash table is
a destructive operation; the hash table is modiﬁed. By contrast, association lists
can be augmented non-destructively.
<!--l. 26--><p class="indent" >   Hash tables come in three kinds, the diﬀerence being whether the keys are
compared with <tt><a 
href="symbols.html#x185-2637337r337">eq</a></tt>, <tt><a 
href="symbols.html#x185-2637338r338">eql</a></tt>, or <tt><a 
href="symbols.html#x185-2637339r339">equal</a></tt>. In other words, there are hash tables that hash
on Lisp <i>objects</i> (using <tt><a 
href="symbols.html#x185-2637337r337">eq</a></tt> or <tt><a 
href="symbols.html#x185-2637338r338">eql</a></tt>) and there are hash tables that hash on <i>tree
structure</i> (using <tt><a 
href="symbols.html#x185-2637339r339">equal</a></tt>).
<!--l. 32--><p class="indent" >   Hash tables are created with the function <tt><a 
href="symbols.html#x185-2637539r539">make-hash-table</a></tt>, which
takes various options, including which kind of hash table to make (the
default being the <tt><a 
href="symbols.html#x185-2637338r338">eql</a></tt> kind). To look up a key and ﬁnd the associated
value, use <tt><a 
href="symbols.html#x185-2637422r422">gethash</a></tt>. New entries are added to hash tables using <tt><a 
href="symbols.html#x185-2637778r778">setf</a></tt> with
<tt><a 
href="symbols.html#x185-2637422r422">gethash</a></tt>. To remove an entry, use <tt><a 
href="symbols.html#x185-2637735r735">remhash</a></tt>. Here is a simple example.
<div class="lisp"><div class="tabbing">
(setq a (make-hash-table))
   <br>        (setf (gethash &#x2019;color a) &#x2019;brown)<br>        (setf (gethash &#x2019;name a) &#x2019;fred)<br>
(gethash &#x2019;color a) <span class="math"> ⇒</span> brown<br>                    (gethash &#x2019;name a) <span class="math"> ⇒</span> fred<br>
(gethash &#x2019;pointy a) <span class="math"> ⇒</span> <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt><br>
<!--l. 47--><p class="noindent" ></div>
<!--l. 47--><p class="noindent" ><span class="paragraphHead"><a 
href="#x109-137300016" id="x109-137300016"></a></span>
                                                                          

                                                                          
<!--l. 47--><p class="noindent" ><span class="paragraphHead"><a 
href="#x109-137400016" id="x109-137400016"></a></span>
</div>
<!--l. 49--><p class="indent" >   In this example, the symbols <tt>color</tt> and <tt>name</tt> are being used as keys, and the
symbols <tt>brown</tt> and <tt>fred</tt> are being used as the associated values. The hash table
has two items in it, one of which associates from <tt>color</tt> to <tt>brown</tt>, and the other of
which associates from <tt>name</tt> to <tt>fred</tt>.
<!--l. 55--><p class="indent" >   Keys do not have to be symbols; they can be any Lisp object. Similarly, values
can be any Lisp object.
<div class="newer">
<!--l. 59--><p class="indent" >   There is a discrepancy between the preceding description of the size of a hash
table and the description of the <tt>:size</tt> argument in the speciﬁcation below of
<tt><a 
href="symbols.html#x185-2637539r539">make-hash-table</a></tt>.
<!--l. 64--><p class="indent" >   X3J13 voted in June 1989 <a 
 id="dx109-1374001"></a>to regard the latter description as deﬁnitive: the
<tt>:size</tt> argument is approximately the number of entries that can be inserted
without having to enlarge the hash table. This deﬁnition is certainly more
convenient for the user.
</div>
<!--l. 71--><p class="noindent" >

                                                                          

                                                                          
   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse89.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse88.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse88.html#tailclmse88.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="hash.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clm.html#hash.html" >Up</a><tt>&#x003E;</tt></div><a 
 id="tailhash.html"></a>   </div> </div> 
</body></html> 
