<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Determining the Type of an Object</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 14:21:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 839--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse27.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html#tailclmse25.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse26.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtspec.html#clmse26.html" >Up</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h3 class="sectionHead"><span class="titlemark">4.9   </span> <a 
href="clm.html#QQ2-35-232" id="x35-2250004.9">Determining the Type of an
Object</a></h3>
<!--l. 841--><p class="noindent" >The following function may be used to obtain a type speciﬁer describing the type
of a given object.
<div class="defun">
<!--l. 844--><p class="noindent" ><div class="defunheader"> <i>[Function]</i><a 
 id="dx35-225001"></a><a 
 id="x35-225002r8"></a> <b>type-of</b>  <i>object</i>
</div>
<!--l. 847--><p class="indent" >   There are the following constraints on <tt><a 
href="symbols.html#x185-2637894r894">type-of</a></tt>:
      <ul class="itemize1">
      <li class="itemize">Let <i>x</i> be an object such that <tt>(typep <i>x</i> <i>type</i>)</tt> is true and <i>type</i> is one
      of the following:
      <div class="flushleft" 
>
<!--l. 854--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%" class="tabular"><tr><td align="left" >array            </td><td align="left" >ﬂoat          </td><td align="left" >package          </td><td align="left" >sequence   </td>
</tr><tr><td align="left" >bit-vector      </td><td align="left" >function     </td><td align="left" >pathname        </td><td align="left" >short-ﬂoat </td>
</tr><tr><td align="left" >character       </td><td align="left" >hash-table  </td><td align="left" >random-state  </td><td align="left" >single-ﬂoat</td>
</tr><tr><td align="left" >complex        </td><td align="left" >integer       </td><td align="left" >ratio              </td><td align="left" >stream     </td>
</tr><tr><td align="left" >condition       </td><td align="left" >long-ﬂoat  </td><td align="left" >rational          </td><td align="left" >string       </td>
</tr><tr><td align="left" >cons             </td><td align="left" >null           </td><td align="left" >readtable        </td><td align="left" >symbol     </td>
</tr><tr><td align="left" >double-ﬂoat  </td><td align="left" >number      </td><td align="left" >restart            </td><td align="left" >vector      </td></tr></table>
</div></div>
      <!--l. 867--><p class="noindent" >Then <tt>(subtypep (type-of <i>x</i>) <i>type</i>))</tt> must return the values <tt><a 
href="symbols.html#x185-2637871r871">t</a></tt> and <tt><a 
href="symbols.html#x185-2637871r871">t</a></tt>;
      that is, <tt><a 
href="symbols.html#x185-2637894r894">type-of</a></tt> applied to <i>x</i> must return either <i>type</i> itself or a subtype of
      <i>type</i> that <tt><a 
href="symbols.html#x185-2637858r858">subtypep</a></tt> can recognize in that implementation.
      </li>
      <li class="itemize">For any object <i>x</i>, <tt>(subtypep (type-of <i>x</i>) (class-of <i>x</i>))</tt> must produce
      the values <tt><a 
href="symbols.html#x185-2637871r871">t</a></tt> and <tt><a 
href="symbols.html#x185-2637871r871">t</a></tt>.
                                                                          

                                                                          
      </li>
      <li class="itemize">For every object <i>x</i>, <tt>(typep <i>x</i> (type-of <i>x</i>))</tt> must be true. (This
      implies that <tt><a 
href="symbols.html#x185-2637894r894">type-of</a></tt> can never return <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt>, for no object is of type
      <tt><a 
href="symbols.html#x185-2637609r609">nil</a></tt>.)
      </li>
      <li class="itemize"><tt><a 
href="symbols.html#x185-2637894r894">type-of</a></tt> never returns <tt><a 
href="symbols.html#x185-2637871r871">t</a></tt> and never uses a <tt>satisfies</tt>, <tt><a 
href="symbols.html#x185-2637078r78">and</a></tt>, <tt><a 
href="symbols.html#x185-2637642r642">or</a></tt>, <tt><a 
href="symbols.html#x185-2637615r615">not</a></tt>, or
      <tt><a 
href="symbols.html#x185-2637917r917">values</a></tt> type speciﬁer in its result.
      </li>
      <li class="itemize">For objects of CLOS metaclass <tt>structure-class</tt> or of <tt>standard-class</tt>,
      <tt><a 
href="symbols.html#x185-2637894r894">type-of</a></tt> returns the proper name of the class returned by <tt><a 
href="symbols.html#x185-2637219r219">class-of</a></tt> if it has
      a proper name, and otherwise returns the class itself. In particular, for
      any object created by a <tt><a 
href="symbols.html#x185-2637289r289">defstruct</a></tt> constructor function, where the
      <tt><a 
href="symbols.html#x185-2637289r289">defstruct</a></tt> had the name <i>name</i> and no <tt>:type</tt> option, <tt><a 
href="symbols.html#x185-2637894r894">type-of</a></tt> will return
      <i>name</i>.</li></ul>
<!--l. 897--><p class="indent" >   As an example, <tt>(type-of &#x0022;acetylcholinesterase&#x0022;)</tt> may return <tt><a 
href="symbols.html#x185-2637828r828">string</a></tt> or
<tt>simple-string</tt> or <tt>(simple-string  20)</tt>, but not <tt>array</tt> or <tt>simple-vector</tt>. As
another example, it is permitted for <tt>(type-of 1729)</tt> to return <tt>integer</tt> or
<tt>fixnum</tt> (if it is indeed a ﬁxnum) or <tt>(signed-byte 16)</tt> or <tt>(integer 1729 1729)</tt>
or <tt>(integer 1685 1750)</tt> or even <tt>(mod 1730)</tt>, but not <tt>rational</tt> or <tt>number</tt>,
because <div class="lisp"><div class="tabbing">
(typep (+ (expt 9 3) (expt 10 3)) &#x2019;integer)
   <br>
<!--l. 908--><p class="noindent" ></div>
<!--l. 908--><p class="noindent" ><span class="paragraphHead"><a 
href="#x35-2260004.9" id="x35-2260004.9"></a></span>
<!--l. 908--><p class="noindent" ><span class="paragraphHead"><a 
href="#x35-2270004.9" id="x35-2270004.9"></a></span>
</div>
<!--l. 909--><p class="indent" >   is true, <tt>integer</tt> is in the list of types mentioned above, and <div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(subtypep (type-of (+ (expt 1 3) (expt 12 3))) &#x2019;integer)
   <br>
<!--l. 912--><p class="noindent" ></div>
<!--l. 912--><p class="noindent" ><span class="paragraphHead"><a 
href="#x35-2280004.9" id="x35-2280004.9"></a></span>
<!--l. 912--><p class="noindent" ><span class="paragraphHead"><a 
href="#x35-2290004.9" id="x35-2290004.9"></a></span>
</div>
<!--l. 913--><p class="indent" >   would be false if <tt><a 
href="symbols.html#x185-2637894r894">type-of</a></tt> were to return <tt>rational</tt> or <tt>number</tt>.
</div>
                                                                          

                                                                          
<!--l. 917--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse27.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html#tailclmse25.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse26.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtspec.html#clmse26.html" >Up</a><tt>&#x003E;</tt></div><a 
 id="tailclmse26.html"></a>   </div> </div> 
</body></html> 
