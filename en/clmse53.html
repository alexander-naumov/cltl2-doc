<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Type Declaration for Forms</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 16:10:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 1024--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="symbol.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse52.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse52.html#tailclmse52.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse53.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="declar.html#clmse53.html" >Up</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h3 class="sectionHead"><span class="titlemark">9.3   </span> <a 
href="clm.html#QQ2-67-905" id="x67-8960009.3">Type Declaration for Forms</a></h3>
<!--l. 1026--><p class="noindent" >Frequently it is useful to declare that the value produced by the evaluation of
some form will be of a particular type. Using <tt><a 
href="symbols.html#x187-2636271r271">declare</a></tt> one can declare the type of
the value held by a bound variable, but there is no easy way to declare the type of
the value of an unnamed form. For this purpose the <tt><a 
href="symbols.html#x187-2636878r878">the</a></tt> special operator is
deﬁned; <tt>(the <i>type</i> <i>form</i>)</tt> means that the value of <i>form</i> is declared to be of type
<i>type</i>.
<div class="defspec">
<div class="defmacheader">
<!--l. 1035--><p class="indent" >   <div class="tabbing">
 <i>[Special operator]</i> <b>the</b> <a 
 id="dx67-896001"></a><a 
 id="x67-896002r146"></a> value-type form
   <br>
<!--l. 1036--><p class="noindent" ></div>
<!--l. 1036--><p class="noindent" ><span class="paragraphHead"><a 
href="#x67-8970009.3" id="x67-8970009.3"></a></span>
</div>
<!--l. 1037--><p class="indent" >   The <i>form</i> is evaluated; whatever it produces is returned by the <tt><a 
href="symbols.html#x187-2636878r878">the</a></tt>
form. In addition, it is an error if what is produced by the <i>form</i> does not
conform to the data type speciﬁed by <i>value-type</i> (which is not evaluated).
(A given implementation may or may not actually check for this error.
Implementations are encouraged to make an explicit error check when running
interpretively.) In eﬀect, this declares that the user undertakes to guarantee that
the values of the form will always be of the speciﬁed type. For example:
<div class="lisp"><div class="tabbing">
(the string (copy-seq x))     ;The result will be a string
   <br>          (the integer (+ x 3))         ;The result of <tt><a 
href="symbols.html#x187-2636051r51">+</a></tt> will be an integer<br>
(+ (the integer x) 3)         ;The value of <tt>x</tt> will be an integer<br>
(the (complex rational) (* z 3))<br>    (the (unsigned-byte 8) (logand x mask))<br>
                                                                          

                                                                          
<!--l. 1052--><p class="noindent" ></div>
<!--l. 1052--><p class="noindent" ><span class="paragraphHead"><a 
href="#x67-8980009.3" id="x67-8980009.3"></a></span>
<!--l. 1052--><p class="noindent" ><span class="paragraphHead"><a 
href="#x67-8990009.3" id="x67-8990009.3"></a></span>
</div>
<!--l. 1053--><p class="indent" >   The <tt><a 
href="symbols.html#x187-2636917r917">values</a></tt> type speciﬁer may be used to indicate the types of multiple
values: <div class="lisp"><div class="tabbing">
(the (values integer integer) (ﬂoor x y))
   <br>                                                                    (the (values string t)<br>
     (gethash the-key the-string-table))<br>
<!--l. 1059--><p class="noindent" ></div>
<!--l. 1059--><p class="noindent" ><span class="paragraphHead"><a 
href="#x67-9000009.3" id="x67-9000009.3"></a></span>
<!--l. 1059--><p class="noindent" ><span class="paragraphHead"><a 
href="#x67-9010009.3" id="x67-9010009.3"></a></span>
</div>
<i>
<!--l. 1061--><p class="indent" >   value-type</i> may be any valid type speciﬁer whatsoever. The point is that a
type speciﬁer need not be one suitable for discrimination but only for
declaration.
<!--l. 1065--><p class="indent" >   In the case that the <i>form</i> produces exactly one value and <i>value-type</i> is not a
<tt><a 
href="symbols.html#x187-2636917r917">values</a></tt> type speciﬁer, one may describe a <tt><a 
href="symbols.html#x187-2636878r878">the</a></tt> form as being entirely equivalent to
<div class="lisp"><div class="tabbing">
(let ((#1=#:temp <i>form</i>)) (declare (type <i>value-type</i> #1#)) #1#)
   <br>
<!--l. 1070--><p class="noindent" ></div>
                                                                          

                                                                          
<!--l. 1070--><p class="noindent" ><span class="paragraphHead"><a 
href="#x67-9020009.3" id="x67-9020009.3"></a></span>
<!--l. 1070--><p class="noindent" ><span class="paragraphHead"><a 
href="#x67-9030009.3" id="x67-9030009.3"></a></span>
</div>
<!--l. 1071--><p class="indent" >   A more elaborate expression could be written to describe the case where
<i>value-type</i> is a <tt><a 
href="symbols.html#x187-2636917r917">values</a></tt> type speciﬁer.
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 8--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="symbol.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse52.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse52.html#tailclmse52.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse53.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="declar.html#clmse53.html" >Up</a><tt>&#x003E;</tt></div><a 
 id="tailclmse53.html"></a>  </div> </div> 
</body></html> 
