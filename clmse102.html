<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>String Construction and Manipulation</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-02-20 00:42:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 251--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch19.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse101.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse101.html#tailclmse101.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse102.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch18.html#clmse102.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">18.3   </span> <a 
 id="x125-16700018.3"></a>String Construction and Manipulation</h3>
<!--l. 253--><p class="noindent" >Most of the interesting operations on strings may be performed with the generic
sequence functions described in chapter <a 
href="clmch14.html#x99-14100014">14<!--tex4ht:ref: KSEQUE --></a>. The following functions perform
additional operations that are speciﬁc to strings. <div class=new> Note that this remark,
predating the design of the Common Lisp Object System, uses the term “generic”
in a generic sense and not necessarily in the technical sense used by CLOS (see
chapter <a 
href="clmch2.html#x9-150002">2<!--tex4ht:ref: DTYPES --></a>).
</div>
<div class=obsolete>
<div class=defun>
<!--l. 265--><p class="noindent" > <i>[Function]</i>   <b>make-string</b> <a 
 id="dx125-167001"></a><a 
 id="x125-167002r606"></a>   <i>size</i>  <b>&#x0026;key</b>  :initial-element
<!--l. 267--><p class="noindent" >This returns a string (in fact a simple string) of length size, each of whose
characters has been initialized to the <i>:initial-element</i> argument. If an
<i>:initial-element</i> argument is not speciﬁed, then the string will be initialized in an
implementation-dependent way.
<div class=implementation>
<!--l. 275--><p class="noindent" ><b>Implementation note:</b> It may be convenient to initialize the string to null characters,
or to spaces, or to garbage (“whatever was there”).
</div>
<!--l. 281--><p class="indent" >   A string is really just a one-dimensional array of “string characters” (that is,
those characters that are members of type <i>string-char</i>). More complex character
arrays may be constructed using the function <i>make-array</i>.
</div>
</div>
<div class=newer>
<!--l. 289--><p class="indent" >   X3J13 voted in March 1989 ⟨<b>?</b>⟩ to eliminate the type <i>string-char</i> and to add a
keyword argument <i>:element-type</i> to <i>make-string</i>. The new function description is
as follows.
<div class=defun>
<!--l. 294--><p class="noindent" > <i>[Function]</i>   <b>make-string</b> <a 
 id="dx125-167003"></a><a 
 id="x125-167004r607"></a>   <i>size</i>  <b>&#x0026;key</b>  :initial-element  :element-type
<!--l. 296--><p class="noindent" >This returns a simple string of length size, each of whose characters has been
                                                                          

                                                                          
initialized to the <i>:initial-element</i> argument. If an <i>:initial-element</i> argument is not
speciﬁed, then the string will be initialized in an implementation-dependent
way.
<!--l. 303--><p class="indent" >   The <i>:element-type</i> argument names the type of the elements of the string; a
string is constructed of the most specialized type that can accommodate elements
of the given type. If <i>:element-type</i> is omitted, the type <i>character</i> is the
default.
<!--l. 308--><p class="indent" >   X3J13 voted in January 1989 ⟨<b>?</b>⟩ to clarify that the size argument must be a
non-negative integer less than the value of <i>array-dimension-limit</i>.
</div>
</div>
<div class=defun>
<!--l. 318--><p class="noindent" > <i>[Function]</i>   <b>string-trim</b> <a 
 id="dx125-167005"></a><a 
 id="x125-167006r608"></a>   <i>character-bag</i>  <i>string</i> <br 
class="newline" /><i>[Function]</i>   <b>string-left-trim</b> <a 
 id="dx125-167007"></a><a 
 id="x125-167008r609"></a>   <i>character-bag</i>  <i>string</i> <br 
class="newline" /><i>[Function]</i>   <b>string-right-trim</b> <a 
 id="dx125-167009"></a><a 
 id="x125-167010r610"></a>   <i>character-bag</i>  <i>string</i>
<!--l. 322--><p class="noindent" ><i>string-trim</i> returns a substring of string, with all characters in character-bag
stripped oﬀ the beginning and end. The function <i>string-left-trim</i> is similar but
strips characters oﬀ only the beginning; <i>string-right-trim</i> strips oﬀ only the end.
The argument character-bag may be any sequence containing characters. For
example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-trim &#x2019;(#<tt>\</tt>Space #<tt>\</tt>Tab #<tt>\</tt>Newline) &#x0022; garbanzo beans
</td></tr></table>
<!--l. 331--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        &#x0022;)  ⇒ &#x0022;garbanzo beans&#x0022;</td></tr></table>
<!--l. 332--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-trim &#x0022; (*)&#x0022; &#x0022; ( *three (silly) words* ) &#x0022;)</td></tr></table>
<!--l. 333--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ &#x0022;three (silly) words&#x0022;</td></tr></table>
<!--l. 334--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-left-trim &#x0022; (*)&#x0022; &#x0022; ( *three (silly) words* ) &#x0022;)</td></tr></table>
<!--l. 335--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ &#x0022;three (silly) words* ) &#x0022;</td></tr></table>
<!--l. 336--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-right-trim &#x0022; (*)&#x0022; &#x0022; ( *three (silly) words* ) &#x0022;)</td></tr></table>
<!--l. 337--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ &#x0022; ( *three (silly) words&#x0022;</td></tr></table>
<!--l. 339--><p class="indent" >
</div>
</div>
<!--l. 340--><p class="noindent" >If no characters need to be trimmed from the string, then either the argument string
itself or a copy of it may be returned, at the discretion of the implementation.
<div class=newer>
                                                                          

                                                                          
<!--l. 345--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to clarify string coercion (see <i>string</i>).
</div>
</div>
<div class=defun>
<!--l. 350--><p class="noindent" > <i>[Function]</i>   <b>string-upcase</b> <a 
 id="dx125-167011"></a><a 
 id="x125-167012r611"></a>   <i>string</i>  <b>&#x0026;key</b>  :start  :end <br 
class="newline" /><i>[Function]</i>   <b>string-downcase</b> <a 
 id="dx125-167013"></a><a 
 id="x125-167014r612"></a>   <i>string</i>  <b>&#x0026;key</b>  :start  :end <br 
class="newline" /><i>[Function]</i>   <b>string-capitalize</b> <a 
 id="dx125-167015"></a><a 
 id="x125-167016r613"></a>   <i>string</i>  <b>&#x0026;key</b>  :start  :end
<!--l. 354--><p class="noindent" ><i>string-upcase</i> returns a string just like string with all lowercase characters
replaced by the corresponding uppercase characters. More precisely, each
character of the result string is produced by applying the function <i>char-upcase</i> to
the corresponding character of string.
<i>
<!--l. 361--><p class="indent" >   string-downcase</i> is similar, except that uppercase characters are converted to
lowercase characters (using <i>char-downcase</i>).
<!--l. 364--><p class="indent" >   The keyword arguments <i>:start</i> and <i>:end</i> delimit the portion of the
string to be aﬀected. The result is always of the same length as string,
however.
<!--l. 368--><p class="indent" >   The argument is not destroyed. However, if no characters in the argument
require conversion, the result may be either the argument or a copy of it, at the
implementation&#x2019;s discretion. For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-upcase &#x0022;Dr. Livingstone, I presume?&#x0022;)
</td></tr></table>
<!--l. 373--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ &#x0022;DR. LIVINGSTONE, I PRESUME?&#x0022;</td></tr></table>
<!--l. 374--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-downcase &#x0022;Dr. Livingstone, I presume?&#x0022;)</td></tr></table>
<!--l. 375--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ &#x0022;dr. livingstone, i presume?&#x0022;</td></tr></table>
<!--l. 376--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-upcase &#x0022;Dr. Livingstone, I presume?&#x0022; <i>:start</i> 6 <i>:end</i> 10)</td></tr></table>
<!--l. 377--><p class="indent" >                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ &#x0022;Dr. LiVINGstone, I presume?&#x0022;</td></tr></table>
<!--l. 379--><p class="indent" >
</div>
</div>
<i>
<!--l. 381--><p class="indent" >   string-capitalize</i> produces a copy of string such that, for every word in the
copy, the ﬁrst character of the word, if case-modiﬁable, is uppercase and any other
case-modiﬁable characters in the word are lowercase. For the purposes of
<i>string-capitalize</i>, a word is deﬁned to be a consecutive subsequence consisting
                                                                          

                                                                          
of alphanumeric characters or digits, delimited at each end either by a
non-alphanumeric character or by an end of the string. For example: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-capitalize &#x0022; hello &#x0022;)  ⇒ &#x0022; Hello &#x0022;
</td></tr></table>
<!--l. 392--><p class="indent" >                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-capitalize</td></tr></table>
<!--l. 393--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:37;" 
class="tabbing">    </td><td  
class="tabbing">&#x0022;occlUDeD cASEmenTs FOreSTAll iNADVertent DEFenestraTION&#x0022;)</td></tr></table>
<!--l. 394--><p class="indent" >           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:37;" 
class="tabbing"> ⇒ </td><td  
class="tabbing">&#x0022;Occluded Casements Forestall Inadvertent Defenestration&#x0022;</td></tr></table>
<!--l. 395--><p class="indent" >          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-capitalize &#x2019;kludgy-hash-search)  ⇒ &#x0022;Kludgy-Hash-Search&#x0022;</td></tr></table>
<!--l. 396--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-capitalize &#x0022;DON&#x2019;T!&#x0022;)  ⇒ &#x0022;Don&#x2019;T!&#x0022;     ;not &#x0022;Don&#x2019;t!&#x0022;</td></tr></table>
<!--l. 397--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(string-capitalize &#x0022;pipe 13a, foo16c&#x0022;)  ⇒ &#x0022;Pipe 13a, Foo16c&#x0022;</td></tr></table>
<!--l. 399--><p class="indent" >
</div>
</div>
<div class=newer>
<!--l. 402--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to clarify string coercion (see <i>string</i>).
</div>
<div class=incompatibility>
<!--l. 407--><p class="noindent" ><b>Compatibility note:</b> Some very approximate Interlisp equivalents to <i>string-upcase</i>,
<i>string-downcase</i>, and <i>string-capitalize</i> are <i>u-case</i>, <i>l-case</i> with second argument <i>nil</i>, and
<i>l-case</i> with second argument <i>t</i>.
</div>
</div>
<div class=defun>
<!--l. 416--><p class="noindent" > <i>[Function]</i>   <b>nstring-upcase</b> <a 
 id="dx125-167017"></a><a 
 id="x125-167018r614"></a>   <i>string</i>  <b>&#x0026;key</b>  :start  :end <br 
class="newline" /><i>[Function]</i>   <b>nstring-downcase</b> <a 
 id="dx125-167019"></a><a 
 id="x125-167020r615"></a>   <i>string</i>  <b>&#x0026;key</b>  :start  :end <br 
class="newline" /><i>[Function]</i>   <b>nstring-capitalize</b> <a 
 id="dx125-167021"></a><a 
 id="x125-167022r616"></a>   <i>string</i>  <b>&#x0026;key</b>  :start  :end
<!--l. 420--><p class="noindent" >These three functions are just like <i>string-upcase</i>, <i>string-downcase</i>, and
<i>string-capitalize</i> but destructively modify the argument string by altering
case-modiﬁable characters as necessary.
<!--l. 426--><p class="indent" >   The keyword arguments <i>:start</i> and <i>:end</i> delimit the portion of the string to be
aﬀected. The argument string is returned as the result.
</div>
<div class=defun>
                                                                          

                                                                          
<!--l. 431--><p class="noindent" > <i>[Function]</i>   <b>string</b> <a 
 id="dx125-167023"></a><a 
 id="x125-167024r617"></a>   <i>x</i>
<!--l. 433--><p class="noindent" >Most of the string functions eﬀectively apply <i>string</i> to such of their arguments as
are supposed to be strings. If x is a string, it is returned. If x is a symbol, its print
name is returned. <div class=obsolete> If x is a string character (a character of type <i>string-char</i>), then
a string containing that one character is returned.
</div> <div class=newer> X3J13 voted in March 1989 ⟨<b>?</b>⟩ to eliminate the type <i>string-char</i> and to
redeﬁne the type <i>string</i> to be the union of one or more specialized vector
types, the types of whose elements are subtypes of the type <i>character</i>.
Presumably converting a character to a string always works according to this
vote.
</div> In any other situation, an error is signaled.
<!--l. 454--><p class="indent" >   To convert a sequence of characters to a string, use <i>coerce</i>. (Note that <i>(coerce x
&#x2019;string)</i> will not succeed if <i>x</i> is a symbol. Conversely, <i>string</i> will not convert a list
or other sequence to be a string.)
<!--l. 459--><p class="indent" >   To get the string representation of a number or any other Lisp object, use
<i>prin1-to-string</i>, <i>princ-to-string</i>, or <i>format</i>.
<div class=newer>
<!--l. 464--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to specify that the following functions perform
coercion on their string arguments identical to that performed by the function
<i>string</i>.
<div class="flushleft" 
>
<!--l. 469--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >string=   </td><td align="left" >string-equal         </td><td align="left" >string-trim       </td>
</tr><tr><td align="left" >string&#x003C;   </td><td align="left" >string-lessp          </td><td align="left" >string-left-trim  </td>
</tr><tr><td align="left" >string&#x003E;   </td><td align="left" >string-greaterp     </td><td align="left" >string-right-trim</td>
</tr><tr><td align="left" >string&#x003C;= </td><td align="left" >string-not-greaterp</td><td align="left" >string-upcase    </td>
</tr><tr><td align="left" >string&#x003E;= </td><td align="left" >string-not-lessp     </td><td align="left" >string-downcase </td>
</tr><tr><td align="left" >string/=  </td><td align="left" >string-not-equal    </td><td align="left" >string-capitalize </td></tr></table>
</div></div>
<!--l. 480--><p class="noindent" >Note that <i>nstring-upcase</i>, <i>nstring-downcase</i>, and <i>nstring-capitalize</i> are absent
from this list; because they modify destructively, the argument must be a
string.
<!--l. 484--><p class="indent" >   As part of the same vote X3J13 speciﬁed that <i>string</i> may perform
additional implementation-dependent coercions but the returned value must be
of type <i>string</i>. Only when no coercion is deﬁned, whether standard or
implementation-dependent, is <i>string</i> required to signal an error, in which case the
error condition must be of type <i>type-error</i>.
</div>
                                                                          

                                                                          
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
   <!--l. 6--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch19.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse101.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse101.html#tailclmse101.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse102.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch18.html#clmse102.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 6--><p class="indent" >   <a 
 id="tailclmse102.html"></a>  
</body></html> 
