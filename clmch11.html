<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>11 Packages Пакеты</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-11 14:56:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 6--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse57.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html#tailclmse56.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmch11.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clm.html#clmch11.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h2 class="chapterHead"><span class="titlemark">Chapter 11</span><br /><a 
 id="x72-18000011"></a>Packages Пакеты</h2>
<!--l. 9--><p class="noindent" >One problem with earlier Lisp systems is the use of a single name space for all
symbols. In large Lisp systems, with modules written by many diﬀerent
programmers, accidental name collisions become a serious problem. Common Lisp
addresses this problem through the <i>package system</i>, derived from an earlier
package system developed for Lisp Machine Lisp <span class="cite">[<a 
href="clmli5.html#XBLUE-LISPM">55</a>]</span>. In addition to preventing
name-space conﬂicts, the package system makes the modular structure of large
Lisp systems more explicit.
<!--l. 19--><p class="indent" >   Одна проблемка была с ранними реализациями Lisp систем — это
использование одного пространства имен для всех символов. В больших
Lisp&#x2019;овых системах, с модулями написанными разными программистами,
случайные совпадения имен стали серьезной проблемой. Common Lisp решает
эту проблему с помощью <i>системы пакетов</i>, производной от ранней системы
пакетов, разработанной для Lisp Machine <span class="cite">[<a 
href="clmli5.html#XBLUE-LISPM">55</a>]</span>. В дополнения к избежанию
конфликтов име, система пакетов делает модульную структуру больших Lisp
систем более явной.
<!--l. 28--><p class="indent" >   A <i>package</i> is a data structure that establishes a mapping from print names
(strings) to symbols. The package thus replaces the “oblist” or “obarray”
machinery of earlier Lisp systems. At any given time one package is current, and
this package is used by the Lisp reader in translating strings into symbols. The
current package is, by deﬁnition, the one that is the value of the global
variable <a 
href="clmse63.html#x79-187003r173">*package*</a>. It is possible to refer to symbols in packages other
than the current one through the use of <i>package qualiﬁers</i> in the printed
representation of the symbol. For example, foo:bar, when seen by the
reader, refers to the symbol whose name is bar in the package whose
name is foo. (Actually, this is true only if bar is an external symbol of
foo, that is, a symbol that is supposed to be visible outside of foo. A
reference to an internal symbol requires the intentionally clumsier syntax
foo::bar.)
<i>
<!--l. 45--><p class="indent" >   Пакет</i> — это структура данных, которая устанавливает связь между
выводимыми именами (строкой) и символами. Таким образом пакет заменяет
«oblist» или «obarray» из ранних версий Lisp&#x2019;овых систем. В любое время
только один пакет является текущим, и этот пакет используется Lisp&#x2019;овым
читателем при преобразовании строк в символы. Текущий пакет является, по
определению, значение глобальной переменной <a 
href="clmse63.html#x79-187003r173">*package*</a>. С помощью <i>имени
                                                                          

                                                                          
пакета</i> в выводимом имени символа существует возможность ссылаться на
символы других, а не текущего, пакетов. Например, когда foo:bar будет
прочтен Common Lisp&#x2019;ом, то будет ссылаться на символ bar из пакета foo.
(А точнее, это верно только, если bar является экспортированным
символом из foo, то есть символом, который является видимым извне
foo. Ссылка на внутренний символ требует удваивания двоеточего:
foo::bar.)
<!--l. 59--><p class="indent" >   The string-to-symbol mappings available in a given package are divided into
two classes, <i>external</i> and <i>internal</i>. We refer to the symbols accessible via these
mappings as being <i>external</i> and <i>internal</i> symbols of the package in question,
though really it is the mappings that are diﬀerent and not the symbols
themselves. Within a given package, a name refers to one symbol or to none; if it
does refer to a symbol, then it is either external or internal in that package, but
not both.
<!--l. 68--><p class="indent" >   Отображение строк в символы доступное в данном пакете делиться на два
вида: <i>внешнее</i> и <i>внутреннее</i>. Речь идет о символах доступных с помощью
этих отображений, как о <i>внешних</i> и <i>внутренних</i> символах пакета, хотя на
самом деле различаются отображения, а не символы. Внутри заданного
пакета, имя ссылается на один или ноль символов. Если оно ссылается на
символ, тогда этот символ в данном пакете внешний или внутренний в, но не
одновременно.
<!--l. 76--><p class="indent" >   External symbols are part of the package&#x2019;s public interface to other packages.
External symbols are supposed to be chosen with some care and are advertised to
users of the package. Internal symbols are for internal use only, and these symbols
are normally hidden from other packages. Most symbols are created as internal
symbols; they become external only if they appear explicitly in an <a 
href="clmse63.html#x79-188040r189">export</a>
command for the package.
<!--l. 83--><p class="indent" >   Внешние символы являются частью интерфейса пакета доступного в
других пакетах. Внешние символы должны быть выбраны с особой
тщательностью и публиковаться для пользователей этого пакета. Внутренние
символы предусмотрены только для внутреннего использования, и эти
символы обычно скрыты от других пакетов. Большинство символов
создаются как внутренние. Они становятся внешними только, если явно
передаются в команду <a 
href="clmse63.html#x79-188040r189">export</a>.
<!--l. 90--><p class="indent" >   A symbol may appear in many packages. It will always have the same name
wherever it appears, but it may be external in some packages and internal in
others. On the other hand, the same name (string) may refer to diﬀerent symbols
in diﬀerent packages.
                                                                          

                                                                          
<!--l. 96--><p class="indent" >   Символ может встречаться во многих пакетах. Он будет всегда иметь
одно и то же имя, но в некоторых пакетах может быть внешним, а в других
внутренним. С другой стороны, одно и то же имя (строка) может ссылаться
на различные символы в различных пакетах.
<!--l. 101--><p class="indent" >   Normally, a symbol that appears in one or more packages will be <i>owned</i> by one
particular package, called the <i>home package</i> of the symbol; that package is said to
<i>own</i> the symbol. Every symbol has a component called the <i>package cell</i>
that contains a pointer to its home package. A symbol that is owned by
some package is said to be <i>interned</i>. Some symbols are not owned by any
package; such a symbol is said to be <i>uninterned</i>, and its package cell contains
<a 
href="clmse31.html#x42-77002r19">nil</a>.
<!--l. 110--><p class="indent" >   Обычно, символ, который встречается в одном и более пакетах, будет
иметь только один родительский пакет, называемый <i>домашний пакет</i>
символа. Говорится, что такой пакет владеет символом. Все символы
содержат компонент, называется <i>ячейка пакета</i>, которая хранит указатель
на домашний пакет. Символ, который имеет домашний пакет, называется
<i>интернированным</i>. Некоторые символы не имеют домашнего пакета. Они
называются неинтернированными. Их ячейка пакета содержит значение
<a 
href="clmse31.html#x42-77002r19">nil</a>.
<!--l. 119--><p class="indent" >   Packages may be built up in layers. From the point of view of a package&#x2019;s user,
the package is a single collection of mappings from strings into internal and
external symbols. However, some of these mappings may be established
within the package itself, while other mappings are inherited from other
packages via the <a 
href="clmse63.html#x79-188057r194">use-package</a> construct. (The mechanisms responsible for
this inheritance are described below.) In what follows, we will refer to a
symbol as being <i>accessible</i> in a package if it can be referred to without a
package qualiﬁer when that package is current, regardless of whether the
mapping occurs within that package or via inheritance. We will refer to a
symbol as being <i>present</i> in a package if the mapping is in the package
itself and is not inherited from somewhere else. Thus a symbol present
in a package is accessible, but an accessible symbol is not necessarily
present.
<!--l. 134--><p class="indent" >   Пакеты могут быть представлены как слои. С этой точки зрения, для
пользователя, пакет выглядит как коллекция отображений из строк во
внутренние и внешние символы. Однако, некоторые из этих отображений
могут устанавливаться внутри самого пакета, тогда как другие отображения
наследуются из других пакетов с помощью конструкции <a 
href="clmse63.html#x79-188057r194">use-package</a>.
(Механизм такого наследования описан ниже.) В дальнейшем, мы будем
                                                                          

                                                                          
называть символ, <i>доступным</i> в пакете, если на него можно сослаться без
указания квалификатора пакета, вне зависимости от того унаследовано ли
отображение символов, или установлено текущим пакетом. И мы будем
называть символ <i>родным</i> в пакете, если отображение установлено самим
пакетом, а не унаследовано. Таким образом настоящий символ в пакете
является доступным, но доступный символ не обязательно является
настоящим.
<!--l. 146--><p class="indent" >   A symbol is said to be <i>interned in a package</i> if it is accessible in that package
and also is owned (by either that package or some other package). Normally all
the symbols accessible in a package will in fact be owned by some package, but
the terminology is useful when discussing the pathological case of an accessible
but unowned (uninterned) symbol.
<!--l. 154--><p class="indent" >   Символ называется <i>интернированным в пакет</i>, если он доступен в этом
пакете и имеет некоторый родительский пакет. Обычно все символы
доступные в пакете будут фактически в собственности некоторого пакета,
но такая терминология полезна, когда описываются патологические
случаи доступности никому не принадлежащего (неинтернированного)
символа.
<!--l. 160--><p class="indent" >   As a verb, to <i>intern</i> a symbol in a package means to cause the symbol to be
interned in the package if it was not already; this process is performed by the
function <a 
href="clmse63.html#x79-188030r186">intern</a>. If the symbol was previously unowned, then the package it is
being interned in becomes its owner (home package); but if the symbol was
previously owned by another package, that other package continues to own the
symbol.
<!--l. 168--><p class="indent" >   Как глагол, <i>интернировать</i> символ в пакет, означает сделать так, чтобы
пакет стал владельцем символа, если этого было не так. Этот процесс
выполняется функцией <a 
href="clmse63.html#x79-188030r186">intern</a>. Если символ прежде был бесхозным (никому
не принадлежал), тогда пакет становится его владельцем (домашним
пакетом). Но если символ уже принадлежал кому-то, то принадлежность не
меняется.
<!--l. 175--><p class="indent" >   To <i>unintern</i> a symbol from the package means to cause it to be not present in
the package and, additionally, to cause the symbol to be uninterned if the package
was the home package (owner) of the symbol. This process is performed by the
function <a 
href="clmse63.html#x79-188037r188">unintern</a>.
<i>
<!--l. 181--><p class="indent" >   Дезинтернировать</i> символ из пакета означает убрать владение символом
данным пакетом, при условии, что он был домашним. Данный процесс
выполняется функцией <a 
href="clmse63.html#x79-188037r188">unintern</a>.
                                                                          

                                                                          
   <div class="sectionTOCS">
    <span class="sectionToc" >11.1 <a 
href="clmse57.html#x73-18100011.1">Consistency Rules Правила согласования</a></span>
<br />    <span class="sectionToc" >11.2 <a 
href="clmse58.html#x74-18200011.2">Package Names Имена пакетов</a></span>
<br />    <span class="sectionToc" >11.3 <a 
href="clmse59.html#x75-18300011.3">Translating Strings to Symbols Преобразование строк в символы</a></span>
<br />    <span class="sectionToc" >11.4 <a 
href="clmse60.html#x76-18400011.4">Exporting and Importing Symbols Экспортирование и
импортирование символов</a></span>
<br />    <span class="sectionToc" >11.5 <a 
href="clmse61.html#x77-18500011.5">Name Conﬂicts Конфликты имен</a></span>
<br />    <span class="sectionToc" >11.6 <a 
href="clmse62.html#x78-18600011.6">Built-in Packages Встроенные пакеты</a></span>
<br />    <span class="sectionToc" >11.7 <a 
href="clmse63.html#x79-18700011.7">Package System Functions and Variables Функции и
переменные для системы пакетов</a></span>
<br />    <span class="sectionToc" >11.8 <a 
href="clmse64.html#x80-19400011.8">Modules</a></span>
<br />    <span class="sectionToc" >11.9 <a 
href="clmse65.html#x81-19500011.9">An Example</a></span>
   </div>








                                                                          

                                                                          
   <!--l. 14--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse57.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html#tailclmse56.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch11.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clm.html#clmch11.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 14--><p class="indent" >   <a 
 id="tailclmch11.html"></a>  
</body></html> 
