<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>11 Packages</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-02-26 02:27:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 6--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse57.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html#tailclmse56.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmch11.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clm.html#clmch11.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h2 class="chapterHead"><span class="titlemark">Chapter 11</span><br /><a 
 id="x72-11100011"></a>Packages</h2>
<!--l. 10--><p class="noindent" >One problem with earlier Lisp systems is the use of a single name space for all
symbols. In large Lisp systems, with modules written by many diﬀerent
programmers, accidental name collisions become a serious problem. Common Lisp
addresses this problem through the package system, derived from an earlier
package system developed for Lisp Machine Lisp <span class="cite">[<a 
href="clmli5.html#XBLUE-LISPM">55</a>]</span>. In addition to preventing
name-space conﬂicts, the package system makes the modular structure of large
Lisp systems more explicit.
<!--l. 20--><p class="indent" >   A package is a data structure that establishes a mapping from print names
(strings) to symbols. The package thus replaces the “oblist” or “obarray”
machinery of earlier Lisp systems. At any given time one package is current, and
this package is used by the Lisp reader in translating strings into symbols. The
current package is, by deﬁnition, the one that is the value of the global
variable *package*. It is possible to refer to symbols in packages other
than the current one through the use of package qualiﬁers in the printed
representation of the symbol. For example, foo:bar, when seen by the
reader, refers to the symbol whose name is bar in the package whose
name is foo. (Actually, this is true only if bar is an external symbol of
foo, that is, a symbol that is supposed to be visible outside of foo. A
reference to an internal symbol requires the intentionally clumsier syntax
foo::bar.)
<!--l. 37--><p class="indent" >   The string-to-symbol mappings available in a given package are divided into
two classes, external and internal. We refer to the symbols accessible via these
mappings as being external and internal symbols of the package in question,
though really it is the mappings that are diﬀerent and not the symbols
themselves. Within a given package, a name refers to one symbol or to none; if it
does refer to a symbol, then it is either external or internal in that package, but
not both.
<!--l. 46--><p class="indent" >   External symbols are part of the package&#x2019;s public interface to other packages.
External symbols are supposed to be chosen with some care and are advertised to
users of the package. Internal symbols are for internal use only, and these symbols
are normally hidden from other packages. Most symbols are created as internal
symbols; they become external only if they appear explicitly in an <a 
href="clmse63.html#x79-118056r189">export</a>
command for the package.
<!--l. 53--><p class="indent" >   A symbol may appear in many packages. It will always have the same name
wherever it appears, but it may be external in some packages and internal in
                                                                          

                                                                          
others. On the other hand, the same name (string) may refer to diﬀerent symbols
in diﬀerent packages.
<!--l. 59--><p class="indent" >   Normally, a symbol that appears in one or more packages will be owned by one
particular package, called the home package of the symbol; that package is said to
own the symbol. Every symbol has a component called the package cell
that contains a pointer to its home package. A symbol that is owned by
some package is said to be interned. Some symbols are not owned by any
package; such a symbol is said to be uninterned, and its package cell contains
<a 
href="clmse31.html#x42-70002r19">nil</a>.
<!--l. 68--><p class="indent" >   Packages may be built up in layers. From the point of view of a package&#x2019;s user,
the package is a single collection of mappings from strings into internal and
external symbols. However, some of these mappings may be established
within the package itself, while other mappings are inherited from other
packages via the <a 
href="clmse63.html#x79-118073r194">use-package</a> construct. (The mechanisms responsible for
this inheritance are described below.) In what follows, we will refer to a
symbol as being accessible in a package if it can be referred to without a
package qualiﬁer when that package is current, regardless of whether the
mapping occurs within that package or via inheritance. We will refer to a
symbol as being present in a package if the mapping is in the package
itself and is not inherited from somewhere else. Thus a symbol present
in a package is accessible, but an accessible symbol is not necessarily
present.
<!--l. 83--><p class="indent" >   A symbol is said to be interned in a package if it is accessible in that package
and also is owned (by either that package or some other package). Normally all
the symbols accessible in a package will in fact be owned by some package, but
the terminology is useful when discussing the pathological case of an accessible
but unowned (uninterned) symbol.
<!--l. 91--><p class="indent" >   As a verb, to intern a symbol in a package means to cause the symbol to be
interned in the package if it was not already; this process is performed by the
function <a 
href="clmse63.html#x79-118046r186">intern</a>. If the symbol was previously unowned, then the package it is
being interned in becomes its owner (home package); but if the symbol was
previously owned by another package, that other package continues to own the
symbol.
<!--l. 99--><p class="indent" >   To unintern a symbol from the package means to cause it to be not present in
the package and, additionally, to cause the symbol to be uninterned if the package
was the home package (owner) of the symbol. This process is performed by the
function <a 
href="clmse63.html#x79-118053r188">unintern</a>.
                                                                          

                                                                          
   <div class="sectionTOCS">
    <span class="sectionToc" >11.1 <a 
href="clmse57.html#x73-11200011.1">Consistency Rules</a></span>
<br />    <span class="sectionToc" >11.2 <a 
href="clmse58.html#x74-11300011.2">Package Names</a></span>
<br />    <span class="sectionToc" >11.3 <a 
href="clmse59.html#x75-11400011.3">Translating Strings to Symbols</a></span>
<br />    <span class="sectionToc" >11.4 <a 
href="clmse60.html#x76-11500011.4">Exporting and Importing Symbols</a></span>
<br />    <span class="sectionToc" >11.5 <a 
href="clmse61.html#x77-11600011.5">Name Conﬂicts</a></span>
<br />    <span class="sectionToc" >11.6 <a 
href="clmse62.html#x78-11700011.6">Built-in Packages</a></span>
<br />    <span class="sectionToc" >11.7 <a 
href="clmse63.html#x79-11800011.7">Package System Functions and Variables</a></span>
<br />    <span class="sectionToc" >11.8 <a 
href="clmse64.html#x80-11900011.8">Modules</a></span>
<br />    <span class="sectionToc" >11.9 <a 
href="clmse65.html#x81-12000011.9">An Example</a></span>
   </div>








                                                                          

                                                                          
   <!--l. 14--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse57.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html#tailclmse56.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch11.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clm.html#clmch11.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 14--><p class="indent" >   <a 
 id="tailclmch11.html"></a>  
</body></html> 
