<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>End-Test Control</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-02-20 00:42:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1017--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse139.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse137.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse137.html#tailclmse137.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse138.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch26.html#clmse138.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">26.7   </span> <a 
 id="x169-24500026.7"></a>End-Test Control</h3>
<!--l. 1020--><p class="noindent" >The loop keywords <i>always</i>, <i>never</i>, <i>thereis</i>, <i>until</i>, and <i>while</i> designate constructs
that use a single test condition to determine when loop iteration should
terminate.
<!--l. 1024--><p class="indent" >   The constructs <i>always</i>, <i>never</i>, and <i>thereis</i> provide speciﬁc values to be
returned when a loop terminates. Using <i>always</i>, <i>never</i>, or <i>thereis</i> with
value-returning accumulation clauses can produce unpredictable results. In all
other respects these constructs behave like the <i>while</i> and <i>until</i> constructs.
<!--l. 1031--><p class="indent" >   The macro <i>loop-ﬁnish</i> can be used at any time to cause normal termination. In
normal termination, <i>ﬁnally</i> clauses are executed and default return values are
returned.
<!--l. 1035--><p class="indent" >   End-test control constructs can be used anywhere within the loop
body. The termination conditions are tested in the order in which they
appear.
<!--l. 1040--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> while </b> <a 
 id="dx169-245001"></a><a 
 id="x169-245002r856"></a>   expr   <i>[Loop clause]</i><b> until </b> <a 
 id="dx169-245003"></a><a 
 id="x169-245004r857"></a>   expr
</td></tr></table>
<!--l. 1042--><p class="indent" >
</div>
   The <i>while</i> construct allows iteration to continue until the speciﬁed expression
expr evaluates to <i>nil</i>. The expression is re-evaluated at the location of the <i>while</i>
clause.
   The <i>until</i> construct is equivalent to <i>while</i> (<i>not</i> expr). If the value of the
speciﬁed expression is non-<i>nil</i>, iteration terminates.
   You can use <i>while</i> and <i>until</i> at any point in a loop. If a <i>while</i> or <i>until</i>
clause causes termination, any clauses that precede it in the source are still
evaluated.
   Examples: <div class=lisp> <div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; A classic &#x0022;while-loop&#x0022;.
</td></tr></table>
<!--l. 1058--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop while (hungry-p) do (eat))</td></tr></table>
<!--l. 1059--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1060--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; UNTIL NOT is equivalent to WHILE.</td></tr></table>
<!--l. 1061--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop until (not (hungry-p)) do (eat))</td></tr></table>
<!--l. 1062--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1063--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Collect the length and the items of STACK.</td></tr></table>
<!--l. 1064--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(let ((stack &#x2019;(a b c d e f)))</td></tr></table>
<!--l. 1065--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (loop while stack</td></tr></table>
<!--l. 1066--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        for item = (length stack) then (pop stack)</td></tr></table>
<!--l. 1067--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        collect item))</td></tr></table>
<!--l. 1068--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (6 A B C D E F)</td></tr></table>
<!--l. 1069--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1070--><p class="indent" >                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Use WHILE to terminate a loop that otherwise wouldn&#x2019;t</td></tr></table>
<!--l. 1071--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; terminate. Note that WHILE occurs after the WHEN.</td></tr></table>
<!--l. 1072--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i ﬁxnum from 3</td></tr></table>
<!--l. 1073--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      when (oddp i) collect i</td></tr></table>
<!--l. 1074--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      while (&#x003C; i 5))</td></tr></table>
<!--l. 1075--><p class="indent" >                                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (3 5)</td></tr></table>
<!--l. 1077--><p class="indent" >
</div>
</div>
<!--l. 1082--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> always </b> <a 
 id="dx169-245005"></a><a 
 id="x169-245006r858"></a>   expr   <i>[Loop clause]</i><b> never </b> <a 
 id="dx169-245007"></a><a 
 id="x169-245008r859"></a>   expr   <i>[Loop clause]</i><b> thereis </b> <a 
 id="dx169-245009"></a><a 
 id="x169-245010r860"></a>   expr
</td></tr></table>
<!--l. 1085--><p class="indent" >
</div>
   The <i>always</i> construct takes one form and terminates the loop if the form ever
evaluates to <i>nil</i>; in this case, it returns <i>nil</i>. Otherwise, it provides a default return
value of <i>t</i>.
   The <i>never</i> construct takes one form and terminates the loop if the form ever
evaluates to non-<i>nil</i>; in this case, it returns <i>nil</i>. Otherwise, it provides a default
return value of <i>t</i>.
                                                                          

                                                                          
   The <i>thereis</i> construct takes one form and terminates the loop if the form ever
evaluates to non-<i>nil</i>; in this case, it returns that value.
   If the <i>while</i> or <i>until</i> construct causes termination, control is passed to the loop
epilogue, where any <i>ﬁnally</i> clauses will be executed. Since <i>always</i>, <i>never</i>, and
<i>thereis</i> use the Common Lisp macro <i>return</i> to terminate iteration, any <i>ﬁnally</i>
clause that is speciﬁed is not evaluated.
   Examples: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Make sure I is always less than 11 (two ways).
</td></tr></table>
<!--l. 1107--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The FOR construct terminates these loops.</td></tr></table>
<!--l. 1109--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 0 to 10
</td></tr></table>
<!--l. 1111--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      always (&#x003C; i 11))</td></tr></table>
<!--l. 1112--><p class="indent" >                                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ T</td></tr></table>
<!--l. 1114--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 0 to 10
</td></tr></table>
<!--l. 1116--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      never (&#x003E; i 11))</td></tr></table>
<!--l. 1117--><p class="indent" >                                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ T</td></tr></table>
<!--l. 1119--><p class="indent" >
</div>
</div>
                                                                          

                                                                          
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; If I exceeds 10, return I; otherwise, return NIL.
</td></tr></table>
<!--l. 1121--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The THEREIS construct terminates this loop.</td></tr></table>
<!--l. 1123--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 0
</td></tr></table>
<!--l. 1125--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      thereis (when (&#x003E; i 10) i) )</td></tr></table>
<!--l. 1126--><p class="indent" >                                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 11</td></tr></table>
<!--l. 1128--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The FINALLY clause is not evaluated in these examples.
</td></tr></table>
<!--l. 1131--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 0 to 10
</td></tr></table>
<!--l. 1133--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      always (&#x003C; i 9)</td></tr></table>
                                                                          

                                                                          
<!--l. 1134--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ﬁnally (print &#x0022;you won&#x2019;t see this&#x0022;))</td></tr></table>
<!--l. 1135--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 1137--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop never t
</td></tr></table>
<!--l. 1139--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ﬁnally (print &#x0022;you won&#x2019;t see this&#x0022;))</td></tr></table>
<!--l. 1140--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 1142--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop thereis &#x0022;Here is my value&#x0022;
</td></tr></table>
<!--l. 1144--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ﬁnally (print &#x0022;you won&#x2019;t see this&#x0022;))</td></tr></table>
<!--l. 1145--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ &#x0022;Here is my value&#x0022;</td></tr></table>
<!--l. 1147--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The FOR construct terminates this loop,
</td></tr></table>
<!--l. 1149--><p class="indent" >                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; so the FINALLY clause is evaluated.</td></tr></table>
<!--l. 1151--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 1 to 10
</td></tr></table>
<!--l. 1153--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      thereis (&#x003E; i 11)</td></tr></table>
<!--l. 1154--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:184;" 
class="tabbing">      ﬁnally (print i)) </td><td style="width:400;" 
class="tabbing-right">                                      ;Prints 1 line</td></tr></table>
<!--l. 1155--><p class="indent" >                                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">11</td></tr></table>
<!--l. 1156--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 1158--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defstruct mountain height diﬃculty (why &#x0022;because it is there&#x0022;))
</td></tr></table>
<!--l. 1161--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq everest (make-mountain :height &#x2019;(2.86e-13 parsecs)))</td></tr></table>
<!--l. 1162--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq chocorua (make-mountain :height &#x2019;(1059180001 microns)))</td></tr></table>
<!--l. 1163--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defstruct desert area (humidity 0))</td></tr></table>
<!--l. 1164--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq sahara (make-desert :area &#x2019;(212480000 square furlongs)))</td></tr></table>
<!--l. 1165--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:585;" 
class="tabbing"></td><td style="width:340;" 
class="tabbing-right">       ;First there is a mountain, then there is no mountain, then there is …</td></tr></table>
<!--l. 1166--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:244;" 
class="tabbing">(loop for x in (list everest sahara chocorua) </td><td  
class="tabbing-right">                       ; —GLS</td></tr></table>
<!--l. 1167--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      thereis (and (mountain-p x) (mountain-height x)))</td></tr></table>
<!--l. 1168--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (2.86E-13 PARSECS)</td></tr></table>
<!--l. 1169--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1170--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; If you could use this code to ﬁnd a counterexample to</td></tr></table>
<!--l. 1171--><p class="indent" >                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Fermat&#x2019;s last theorem, it would still not return the value</td></tr></table>
<!--l. 1172--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; of the counterexample because all of the THEREIS clauses</td></tr></table>
<!--l. 1173--><p class="indent" >               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; in this example return only T.   Of course, this code has</td></tr></table>
                                                                          

                                                                          
<!--l. 1174--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; never been observed to terminate.</td></tr></table>
<!--l. 1175--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1176--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for z upfrom 2</td></tr></table>
<!--l. 1177--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      thereis</td></tr></table>
<!--l. 1178--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        (loop for n upfrom 3 below (log z 2)</td></tr></table>
<!--l. 1179--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">              thereis</td></tr></table>
<!--l. 1180--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                (loop for x below z</td></tr></table>
<!--l. 1181--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                      thereis</td></tr></table>
<!--l. 1182--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                        (loop for y below z</td></tr></table>
<!--l. 1183--><p class="indent" >               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                              thereis (= (+ (expt x n)</td></tr></table>
<!--l. 1184--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                                            (expt y n))</td></tr></table>
<!--l. 1185--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                                         (expt z n))))))</td></tr></table>
<!--l. 1187--><p class="indent" >
</div>
</div>
<div class=defmac>
<!--l. 1191--><p class="noindent" ><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> loop-ﬁnish </b> <a 
 id="dx169-245011"></a><a 
 id="x169-245012r861"></a>   <i></i>
</td></tr></table>
<!--l. 1192--><p class="indent" >
</div>
   The macro <i>loop-ﬁnish</i> terminates iteration normally and returns any
accumulated result. If speciﬁed, a <i>ﬁnally</i> clause is evaluated.
   In most cases it is not necessary to use <i>loop-ﬁnish</i> because other loop control
clauses terminate the loop. Use <i>loop-ﬁnish</i> to provide a normal exit from a nested
condition inside a loop.
   You can use <i>loop-ﬁnish</i> inside nested Lisp code to provide a normal exit from a
loop. Since <i>loop-ﬁnish</i> transfers control to the loop epilogue, using <i>loop-ﬁnish</i>
within a <i>ﬁnally</i> expression can cause inﬁnite looping.
   Implementations are allowed to provide this construct as a local macro by
using <i>macrolet</i>.
   Examples: <div class=lisp> <div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Print a date in February, but exclude leap day.
</td></tr></table>
<!--l. 1214--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; LOOP-FINISH exits from the nested condition.</td></tr></table>
<!--l. 1215--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for date in date-list</td></tr></table>
<!--l. 1216--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      do (case date</td></tr></table>
<!--l. 1217--><p class="indent" >                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">           (29 (when (eq month &#x2019;february)</td></tr></table>
<!--l. 1218--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                     (loop-ﬁnish))</td></tr></table>
<!--l. 1219--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">             (format t &#x0022;<tt>~</tt>:@(<tt>~</tt>A<tt>~</tt>) <tt>~</tt>A&#x0022; month date))))</td></tr></table>
<!--l. 1220--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1221--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Terminate the loop, but return the accumulated count.</td></tr></table>
<!--l. 1222--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(1 2 3 stop-here 4 5 6)</td></tr></table>
<!--l. 1223--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      when (symbolp i) do (loop-ﬁnish)</td></tr></table>
<!--l. 1224--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      count i)</td></tr></table>
<!--l. 1225--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 3</td></tr></table>
<!--l. 1226--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1227--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; This loop works just as well as the previous example.</td></tr></table>
<!--l. 1228--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(1 2 3 stop-here 4 5 6)</td></tr></table>
<!--l. 1229--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      until (symbolp i)</td></tr></table>
<!--l. 1230--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      count i)</td></tr></table>
<!--l. 1231--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 3</td></tr></table>
<!--l. 1233--><p class="indent" >
</div>
</div>
</div>
                                                                          

                                                                          
   <!--l. 1236--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse139.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse137.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse137.html#tailclmse137.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse138.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch26.html#clmse138.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 1236--><p class="indent" >   <a 
 id="tailclmse138.html"></a>  
</body></html> 
