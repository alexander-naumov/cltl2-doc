<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Создание символов</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-16 00:55:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="cltl2ed.css"></head><body 
>
<!--l. 743--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmch11.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse54.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse54.html#tailclmse54.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse55.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html#clmse55.html" >Наверх</a><tt>&#x003E;</tt></div><h3 class="sectionHead"><span class="titlemark">10.3   </span> <a 
href="clm.html#QQ2-70-895" id="x70-88700010.3">Создание
символов</a></h3>
<!--l. 745--><p class="noindent" >Символы могут использоваться двумя различными способами.
<i>Интернированный</i> символ один из них, который определяется его
выводимым именем и каталогом, называемым <i>пакет</i>. A request to locate a
symbol with that print name results in the same (<tt><a 
href="clmse33.html#x44-397002r44">eq</a></tt>) symbol. Every time input is
read with the function <tt><a 
href="clmse112.html#x139-1882002r652">read</a></tt>, and that print name appears, it is read as the same
symbol. This property of symbols makes them appropriate to use as names for
things and as hooks on which to hang permanent data objects (using the property
list, for example).
<!--l. 756--><p class="indent" >   Интернированные символы обычно создаются автоматически. Во время
первого обращения к символу в системе пакетов (с помощью <tt><a 
href="clmse112.html#x139-1882002r652">read</a></tt>,
например), данный символ создаётся автоматически. Для обращения к
интернированному символу используется функция <tt>inter</tt>, или другая с ней
связанная.
<!--l. 762--><p class="indent" >   Несмотря на то, что интернированные символы используются чаще всего,
они не будут больше здесь рассматриваться. Для подробной информации
смотрите главу <a 
href="clmch11.html#x71-89500011">11<!--tex4ht:ref: XPACK --></a>.
<i>
<!--l. 766--><p class="indent" >   Неинтернированный</i> символ является символом, используемым в качестве
объекта данных, без связи с каталогом (он не имеет родительского пакета).
Неинтернированный символ выводится как <tt>#:</tt> с последующим выводимым
именем.
<div class="defun">
<!--l. 770--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx70-887001"></a><a 
 id="x70-887002r151"></a><b> make-symbol</b>  <i>print-name</i>
</div>
<!--l. 772--><p class="noindent" ><span class="paragraphHead"><a 
href="#x70-88800010.3" id="x70-88800010.3"></a></span>
<tt>
   (make-symbol <i>print-name</i>)</tt> создаёт новый неинтернированный символ, у
которого выводимое имя является строкой <i>print-name</i>. Полученный символ
не имеет значения функции (unbound) и пустой список свойств.
                                                                          

                                                                          
<!--l. 777--><p class="indent" >   Строка, переданная в аргументе, может использоваться сразу, либо
сначала копироваться. Это зависит от реализации. Пользователь не может
полагаться на то, что <tt>(symbol-name (make-symbol x))</tt> равно <tt><a 
href="clmse33.html#x44-397002r44">eq</a></tt> <tt>x</tt>, но и
также не может изменять строку переданную в качестве аргумента для
<tt><a 
href="#x70-887002r151">make-symbol</a></tt>.
</div>
<div class="defun">
<!--l. 784--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx70-888001"></a><a 
 id="x70-888002r152"></a><b> copy-symbol</b>  <i>sym</i> &#x0026;optional  <i>copy-props</i>
</div>
<!--l. 786--><p class="noindent" ><span class="paragraphHead"><a 
href="#x70-88900010.3" id="x70-88900010.3"></a></span>
   Эта функция возвращает новый неинтернированный символ с тем же
выводимым именем, что <i>sym</i>.
<!--l. 790--><p class="indent" >   Если <i>copy-props</i> не-<tt><a 
href="clmse31.html#x42-312002r18">nil</a></tt>, тогда начальное значение и определение функции
нового символа будут те же, что и в переданном <i>sym</i>, а список свойств будет
скопирован из исходного символа.
<!--l. 794--><p class="indent" >   Если <i>copy-props</i> является <tt><a 
href="clmse31.html#x42-312002r18">nil</a></tt> (по-умолчанию), тогда новый символ не
будет связан, не будет иметь определения функции, и список свойств будет
пуст.
</div>
<div class="defun">
<!--l. 798--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx70-889001"></a><a 
 id="x70-889002r153"></a><b> gensym</b>  &#x0026;optional  <i>x</i>
</div>
<!--l. 800--><p class="noindent" ><span class="paragraphHead"><a 
href="#x70-89000010.3" id="x70-89000010.3"></a></span>
<tt>
   <a 
href="#x70-889002r153">gensym</a></tt> создаёт выводимое имя и создаёт новый символ с этим именем.
Она возвращает новый неинтернированный символ.
<!--l. 804--><p class="indent" >   Созданное имя содержит префикс (по-умолчанию <tt>G</tt>), с последующим
десятичным представлением числа.
<tt>
<!--l. 807--><p class="indent" >   <a 
href="#x70-889002r153">gensym</a></tt> обычно используется для создания символа, который не виден
пользователю, и его имя не имеет важности. Необязательный аргумент
используется нечасто. Имя образовано от «генерация символа», и символы
созданные, таким образом, часто называются «gensyms».
<!--l. 812--><p class="indent" >   Если необходимо, чтобы сгенерированные символы были интернированными
и отличными от существующих символов, тогда удобно использовать
                                                                          

                                                                          
функцию <tt><a 
href="#x70-891002r155">gentemp</a></tt>.
</div>
<div class="defun">
<!--l. 816--><p class="noindent" ><div class="defunheader"> <i>[Переменная]</i><a 
 id="dx70-890001"></a><a 
 id="x70-890002r154"></a><b> *gensym-counter*</b>
</div>
<!--l. 818--><p class="noindent" ><span class="paragraphHead"><a 
href="#x70-89100010.3" id="x70-89100010.3"></a></span>
   Переменная хранит состояние счётчика для функции <tt><a 
href="#x70-889002r153">gensym</a></tt>. <tt><a 
href="#x70-889002r153">gensym</a></tt>
использует десятичное представление этого значения в качестве части имени
генерируемого символа, а затем наращивает этот счётчик.
<!--l. 823--><p class="indent" >   Первоначальное значение этой переменной зависит от реализации, но
должно быть неотрицательным целым.
<!--l. 826--><p class="indent" >   Пользователь в любое время может присваивать или связывать это
переменную, но значение должно быть неотрицательным целым.
</div>
<div class="defun">
<!--l. 830--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx70-891001"></a><a 
 id="x70-891002r155"></a><b> gentemp</b>  &#x0026;optional  <i>preﬁx</i> <i>package</i>
</div>
<!--l. 832--><p class="noindent" ><span class="paragraphHead"><a 
href="#x70-89200010.3" id="x70-89200010.3"></a></span>
<tt>
   <a 
href="#x70-891002r155">gentemp</a></tt>, как и <tt><a 
href="#x70-889002r153">gensym</a></tt>, создаёт и возвращает новый символ. <tt><a 
href="#x70-891002r155">gentemp</a></tt>
отличается от <tt><a 
href="#x70-889002r153">gensym</a></tt> в том, что возвращает интернированный символ
(смотрите <tt><a 
href="clmse62.html#x78-916002r170">intern</a></tt>) в пакете <i>package</i> (который по-умолчанию является
текущим, смотрите <tt><a 
href="clmse62.html#x78-904002r158">*package*</a></tt>). <tt><a 
href="#x70-891002r155">gentemp</a></tt> гарантирует, что символ
будет новым, и не существовал ранее в указанном пакете. Она также
использует счётчик, однако если полученный символ уже существует
счётчик наращивается, и действия повторяются, пока не будет найдено
имя ещё не существующего символа. Сбросить счётчик невозможно.
Кроме того, префикс для <tt><a 
href="#x70-891002r155">gentemp</a></tt> не сохраняется между вызовами.
Если аргумент <i>preﬁx</i> опущен, то используется значение по-умолчанию
<tt>T</tt>.
</div>
<div class="defun">
<!--l. 846--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx70-892001"></a><a 
 id="x70-892002r156"></a><b> symbol-package</b>  <i>sym</i>
</div>
                                                                          

                                                                          
<!--l. 848--><p class="noindent" ><span class="paragraphHead"><a 
href="#x70-89300010.3" id="x70-89300010.3"></a></span>
   Для заданного символа возвращает содержимое ячейки пакета. Результат
может быть объектом пакета или <tt><a 
href="clmse31.html#x42-312002r18">nil</a></tt>.
</div>
<div class="defun">
<!--l. 853--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx70-893001"></a><a 
 id="x70-893002r157"></a><b> keywordp</b>  <i>object</i>
</div>
<!--l. 855--><p class="noindent" ><span class="paragraphHead"><a 
href="#x70-89400010.3" id="x70-89400010.3"></a></span>
   Аргумент может быть любым Lisp&#x2019;овым объектом. Предикат <tt><a 
href="#x70-893002r157">keywordp</a></tt>
истинен, если аргумент является символом и этот символ является ключевым
(значит, что принадлежит пакету ключевых символов). Ключевые символы —
это символы, которые записываются с двоеточием в начала. Каждый
ключевой символ является константой, в смысле, что выполняются сами в
себя. Смотрите <tt><a 
href="clmse106.html#x131-1642002r585">constantp</a></tt>.
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 2026--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmch11.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse54.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse54.html#tailclmse54.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse55.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html#clmse55.html" >Наверх</a><tt>&#x003E;</tt></div><a 
 id="tailclmse55.html"></a>  </div> </div> 
</body></html> 
