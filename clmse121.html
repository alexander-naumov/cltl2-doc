<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Renaming, Deleting, and Other File Operations</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-02-22 17:23:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 2456--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse122.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse120.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse120.html#tailclmse120.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse121.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch23.html#clmse121.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">23.3   </span> <a 
 id="x149-21600023.3"></a>Renaming, Deleting, and Other File Operations</h3>
<!--l. 2458--><p class="noindent" >These functions provide a standard interface to operations provided in some form
by most ﬁle systems. It may be that some implementations of Common Lisp
cannot support them all completely.
<div class=defun>
<!--l. 2462--><p class="noindent" > <i>[Function]</i>   <b>rename-ﬁle</b> <a 
 id="dx149-216001"></a><a 
 id="x149-216002r768"></a>   <i>ﬁle</i>  <i>new-name</i>
<!--l. 2464--><p class="noindent" >The speciﬁed ﬁle is renamed to new-name (which must be a ﬁle name). The ﬁle
may be a string, a pathname, or a stream. If it is an open stream associated with
a ﬁle, then the stream itself and the ﬁle associated with it are aﬀected (if the ﬁle
system permits).
<div class=new>
<!--l. 2471--><p class="indent" >   X3J13 voted in March 1988 ⟨<b>?</b>⟩ to specify exactly which streams may be used
as pathnames. See section <a 
href="clmse119.html#x147-21400023.1.6">23.1.6<!--tex4ht:ref: PATHNAME-FUNCTIONS --></a>.
</div>
<!--l. 2477--><p class="indent" >   <a 
href="#x149-216002r768">rename-ﬁle</a> returns three values if successful. The ﬁrst value is the new-name
with any missing components ﬁlled in by performing a <a 
href="clmse119.html#x147-214008r743">merge-pathnames</a>
operation using ﬁle as the defaults. The second value is the <a 
href="clmse119.html#x147-214004r741">truename</a> of the ﬁle
before it was renamed. The third value is the <a 
href="clmse119.html#x147-214004r741">truename</a> of the ﬁle after it was
renamed.
<!--l. 2483--><p class="indent" >   If the renaming operation is not successful, an error is signaled.
<div class=obsolete>
<!--l. 2486--><p class="indent" >   It is an error to specify a ﬁle name containing a <i>:wild</i> component, for ﬁle to
contain a <a 
href="clmse31.html#x42-70002r19">nil</a> component where the ﬁle system does not permit a <a 
href="clmse31.html#x42-70002r19">nil</a> component, or
for the result of defaulting missing components of new-name from ﬁle
to contain a <a 
href="clmse31.html#x42-70002r19">nil</a> component where the ﬁle system does not permit a <a 
href="clmse31.html#x42-70002r19">nil</a>
component.
</div> <div class=newer> X3J13 voted in June 1989 ⟨<b>?</b>⟩ to specify that supplying a wild pathname as the
ﬁle argument to <a 
href="#x149-216002r768">rename-ﬁle</a> has implementation-dependent consequences;
<a 
href="#x149-216002r768">rename-ﬁle</a> might signal an error, for example, or might rename all ﬁles that
match the wild pathname.
</div>
                                                                          

                                                                          
<div class=newer>
<!--l. 2501--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to require <a 
href="#x149-216002r768">rename-ﬁle</a> to accept logical
pathnames (see section <a 
href="clmse119.html#x147-20800023.1.5">23.1.5<!--tex4ht:ref: LOGICAL-PATHNAMES-SECTION --></a>).
</div>
<div class=incompatibility>
<!--l. 2506--><p class="noindent" ><b>Compatibility note:</b> This corresponds to the function called renamef in MacLisp and
Lisp Machine Lisp. The name renamef is not used in Common Lisp because the
convention that a trailing <a 
href="clmse151.html#x184-311004r904">f</a> means “ﬁle” conﬂicts with the use of a trailing <a 
href="clmse151.html#x184-311004r904">f</a> for forms
related to <a 
href="clmse36.html#x48-80002r66">setf</a>.
</div>
</div>
<div class=defun>
<!--l. 2517--><p class="noindent" > <i>[Function]</i>   <b>delete-ﬁle</b> <a 
 id="dx149-216003"></a><a 
 id="x149-216004r769"></a>   <i>ﬁle</i>
<!--l. 2519--><p class="noindent" >The speciﬁed ﬁle is deleted. The ﬁle may be a string, a pathname, or a stream. If
it is an open stream associated with a ﬁle, then the stream itself and the ﬁle
associated with it are aﬀected (if the ﬁle system permits), in which case the
stream may or may not be closed immediately, and the deletion may be
immediate or delayed until the stream is explicitly closed, depending on the
requirements of the ﬁle system.
<div class=new>
<!--l. 2529--><p class="indent" >   X3J13 voted in March 1988 ⟨<b>?</b>⟩ to specify exactly which streams may be used
as pathnames. See section <a 
href="clmse119.html#x147-21400023.1.6">23.1.6<!--tex4ht:ref: PATHNAME-FUNCTIONS --></a>.
</div>
<!--l. 2535--><p class="indent" >   <a 
href="#x149-216004r769">delete-ﬁle</a> returns a non-<a 
href="clmse31.html#x42-70002r19">nil</a> value if successful. It is left to the discretion of the
implementation whether an attempt to delete a non-existent ﬁle is considered
to be successful. If the deleting operation is not successful, an error is
signaled.
<div class=obsolete>
<!--l. 2541--><p class="indent" >   It is an error to specify a ﬁle name that contains a <i>:wild</i> component or one
that contains a <a 
href="clmse31.html#x42-70002r19">nil</a> component where the ﬁle system does not permit a <a 
href="clmse31.html#x42-70002r19">nil</a>
component.
</div> <div class=newer> X3J13 voted in June 1989 ⟨<b>?</b>⟩ to clarify that supplying a wild pathname as the
ﬁle argument to <a 
href="#x149-216004r769">delete-ﬁle</a> has implementation-dependent consequences; <a 
href="#x149-216004r769">delete-ﬁle</a>
might signal an error, for example, or might delete all ﬁles that match the wild
pathname.
</div>
<div class=newer>
<!--l. 2554--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to require <a 
href="#x149-216004r769">delete-ﬁle</a> to accept logical pathnames
                                                                          

                                                                          
(see section <a 
href="clmse119.html#x147-20800023.1.5">23.1.5<!--tex4ht:ref: LOGICAL-PATHNAMES-SECTION --></a>).
</div>
<div class=incompatibility>
<!--l. 2559--><p class="noindent" ><b>Compatibility note:</b> This corresponds to the function called deletef in MacLisp and
Lisp Machine Lisp.
</div>
</div>
<div class=defun>
<!--l. 2566--><p class="noindent" > <i>[Function]</i>   <b>probe-ﬁle</b> <a 
 id="dx149-216005"></a><a 
 id="x149-216006r770"></a>   <i>ﬁle</i>
<!--l. 2568--><p class="noindent" >This predicate is false if there is no ﬁle named ﬁle, and otherwise returns a
pathname that is the true name of the ﬁle (which may be diﬀerent from
ﬁle because of ﬁle links, version numbers, or other artifacts of the ﬁle
system). Note that if the ﬁle is an open stream associated with a ﬁle, then
<a 
href="#x149-216006r770">probe-ﬁle</a> cannot return <a 
href="clmse31.html#x42-70002r19">nil</a> but will produce the true name of the associated
ﬁle. See <a 
href="clmse119.html#x147-214004r741">truename</a> and the <i>:probe</i> value for the <i>:direction</i> argument to
<a 
href="clmse120.html#x148-215002r766">open</a>.
<div class=incompatibility>
<!--l. 2580--><p class="noindent" ><b>Compatibility note:</b> This corresponds to the function called probef in MacLisp and
Lisp Machine Lisp.
</div>
<div class=new>
<!--l. 2587--><p class="indent" >   X3J13 voted in March 1988 ⟨<b>?</b>⟩ to specify exactly which streams may be used
as pathnames. See section <a 
href="clmse119.html#x147-21400023.1.6">23.1.6<!--tex4ht:ref: PATHNAME-FUNCTIONS --></a>.
</div>
<div class=newer>
<!--l. 2594--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to clarify that <a 
href="#x149-216006r770">probe-ﬁle</a> accepts only non-wild
pathnames; an error is signaled if <a 
href="clmse119.html#x147-207002r731">wild-pathname-p</a> would be true of the ﬁle
argument.
</div>
<div class=newer>
<!--l. 2601--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to require <a 
href="#x149-216006r770">probe-ﬁle</a> to accept logical
pathnames (see section <a 
href="clmse119.html#x147-20800023.1.5">23.1.5<!--tex4ht:ref: LOGICAL-PATHNAMES-SECTION --></a>). However, <a 
href="#x149-216006r770">probe-ﬁle</a> never returns a logical
pathname.
</div>
<div class=new>
<!--l. 2607--><p class="indent" >   X3J13 voted in January 1989 ⟨<b>?</b>⟩ to specify that <a 
href="#x149-216006r770">probe-ﬁle</a> is unaﬀected by
whether the ﬁrst argument, if a stream, is open or closed. If the ﬁrst
argument is a stream, <a 
href="#x149-216006r770">probe-ﬁle</a> behaves as if the function <a 
href="clmse119.html#x147-214002r740">pathname</a>
                                                                          

                                                                          
were applied to the stream and the resulting pathname used instead.
However, X3J13 further commented that the treatment of open streams may
diﬀer considerably from one implementation to another; for example,
in some operating systems open ﬁles are written under a temporary or
invisible name and later renamed when closed. In general, programmers
writing code intended to be portable should be very careful when using
<a 
href="#x149-216006r770">probe-ﬁle</a>.
</div>
</div>
<div class=defun>
<!--l. 2621--><p class="noindent" > <i>[Function]</i>   <b>ﬁle-write-date</b> <a 
 id="dx149-216007"></a><a 
 id="x149-216008r771"></a>   <i>ﬁle</i>
<!--l. 2623--><p class="noindent" >ﬁle can be a ﬁle name or a stream that is open to a ﬁle. This returns the time at
which the ﬁle was created or last written as an integer in universal time format
(see section <a 
href="clmse130.html#x160-23200025.4.1">25.4.1<!--tex4ht:ref: TIME-SECTION --></a>), or <a 
href="clmse31.html#x42-70002r19">nil</a> if this cannot be determined.
<div class=new>
<!--l. 2631--><p class="indent" >   X3J13 voted in March 1988 ⟨<b>?</b>⟩ to specify exactly which streams may be used
as pathnames. See section <a 
href="clmse119.html#x147-21400023.1.6">23.1.6<!--tex4ht:ref: PATHNAME-FUNCTIONS --></a>.
</div>
<div class=newer>
<!--l. 2638--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to clarify that <a 
href="#x149-216008r771">ﬁle-write-date</a> accepts only
non-wild pathnames; an error is signaled if <a 
href="clmse119.html#x147-207002r731">wild-pathname-p</a> would be true of the
ﬁle argument.
</div>
<div class=newer>
<!--l. 2645--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to require <a 
href="#x149-216008r771">ﬁle-write-date</a> to accept logical
pathnames (see section <a 
href="clmse119.html#x147-20800023.1.5">23.1.5<!--tex4ht:ref: LOGICAL-PATHNAMES-SECTION --></a>).
</div>
</div>
<div class=defun>
<!--l. 2650--><p class="noindent" > <i>[Function]</i>   <b>ﬁle-author</b> <a 
 id="dx149-216009"></a><a 
 id="x149-216010r772"></a>   <i>ﬁle</i>
<!--l. 2652--><p class="noindent" >ﬁle can be a ﬁle name or a stream that is open to a ﬁle. This returns
the name of the author of the ﬁle as a string, or <a 
href="clmse31.html#x42-70002r19">nil</a> if this cannot be
determined.
<div class=new>
<!--l. 2658--><p class="indent" >   X3J13 voted in March 1988 ⟨<b>?</b>⟩ to specify exactly which streams may be used
as pathnames. See section <a 
href="clmse119.html#x147-21400023.1.6">23.1.6<!--tex4ht:ref: PATHNAME-FUNCTIONS --></a>.
</div>
<div class=newer>
                                                                          

                                                                          
<!--l. 2665--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to clarify that <a 
href="#x149-216010r772">ﬁle-author</a> accepts only non-wild
pathnames; an error is signaled if <a 
href="clmse119.html#x147-207002r731">wild-pathname-p</a> would be true of the ﬁle
argument.
</div>
<div class=newer>
<!--l. 2672--><p class="indent" >   X3J13 voted in June 1989 ⟨<b>?</b>⟩ to require <a 
href="#x149-216010r772">ﬁle-author</a> to accept logical
pathnames (see section <a 
href="clmse119.html#x147-20800023.1.5">23.1.5<!--tex4ht:ref: LOGICAL-PATHNAMES-SECTION --></a>).
</div>
</div>
<div class=defun>
<!--l. 2677--><p class="noindent" > <i>[Function]</i>   <b>ﬁle-position</b> <a 
 id="dx149-216011"></a><a 
 id="x149-216012r773"></a>   <i>ﬁle-stream</i>  <b>&#x0026;optional</b>  <i>position</i>
<!--l. 2679--><p class="noindent" ><a 
href="#x149-216012r773">ﬁle-position</a> returns or sets the current position within a random-access
ﬁle.
<i>
<!--l. 2683--><p class="indent" >   (ﬁle-position ﬁle-stream)</i> returns a non-negative integer indicating the current
position within the ﬁle-stream, or <a 
href="clmse31.html#x42-70002r19">nil</a> if this cannot be determined. The ﬁle
position at the start of a ﬁle will be zero. The value returned by <a 
href="#x149-216012r773">ﬁle-position</a>
increases monotonically as input or output operations are performed. For a
character ﬁle, performing a single <a 
href="clmse116.html#x143-195012r699">read-char</a> or <a 
href="clmse117.html#x144-198022r718">write-char</a> operation may cause the
ﬁle position to be increased by more than 1 because of character-set translations
(such as translating between the Common Lisp <i>#<tt>\</tt>Newline</i> character and an
external ASCII carriage-return/line-feed sequence) and other aspects of the
implementation. For a binary ﬁle, every <a 
href="clmse116.html#x143-196002r707">read-byte</a> or <a 
href="clmse117.html#x144-199002r727">write-byte</a> operation
increases the ﬁle position by 1.
<i>
<!--l. 2696--><p class="indent" >   (ﬁle-position ﬁle-stream position)</i> sets the position within ﬁle-stream to be
position. The position may be an integer, or <i>:start</i> for the beginning of the stream,
or <i>:end</i> for the end of the stream. If the integer is too large or otherwise
inappropriate, an error is signaled (the <a 
href="#x149-216014r774">ﬁle-length</a> function returns the length
beyond which <a 
href="#x149-216012r773">ﬁle-position</a> may not access). An integer returned by <a 
href="#x149-216012r773">ﬁle-position</a> of
one argument should, in general, be acceptable as a second argument for use with
the same ﬁle. With two arguments, <a 
href="#x149-216012r773">ﬁle-position</a> returns <a 
href="clmse31.html#x42-70004r20">t</a> if the repositioning was
performed successfully, or <a 
href="clmse31.html#x42-70002r19">nil</a> if it was not (for example, because the ﬁle was not
random-access).
<div class=implementation>
<!--l. 2711--><p class="noindent" ><b>Implementation note:</b> Implementations that have character ﬁles represented as a
sequence of records of bounded size might choose to encode the ﬁle position as, for
example, record-number*256+character-within-record. This is a valid encoding because it
                                                                          

                                                                          
increases monotonically as each character is read or written, though not necessarily by 1
at each step. An integer might then be considered “inappropriate” as a second argument
to <a 
href="#x149-216012r773">ﬁle-position</a> if, when decoded into record number and character number, it
turned out that the speciﬁed record was too short for the speciﬁed character
number.
</div>
<div class=incompatibility>
<!--l. 2724--><p class="noindent" ><b>Compatibility note:</b> This corresponds to the function called ﬁlepos in MacLisp and
Lisp Machine Lisp.
</div>
</div>
<div class=defun>
<!--l. 2731--><p class="noindent" > <i>[Function]</i>   <b>ﬁle-length</b> <a 
 id="dx149-216013"></a><a 
 id="x149-216014r774"></a>   <i>ﬁle-stream</i>
<!--l. 2733--><p class="noindent" >ﬁle-stream must be a stream that is open to a ﬁle. The length of the ﬁle is
returned as a non-negative integer, or <a 
href="clmse31.html#x42-70002r19">nil</a> if the length cannot be determined. For
a binary ﬁle, the length is speciﬁcally measured in units of the <i>:element-type</i>
speciﬁed when the ﬁle was opened (see <a 
href="clmse120.html#x148-215002r766">open</a>).
<div class=incompatibility>
<!--l. 2743--><p class="noindent" ><b>Compatibility note:</b> This corresponds to the function called lengthf in MacLisp and
Lisp Machine Lisp.
</div>
</div>
<div class=newer>
<div class=defun>
<!--l. 2752--><p class="noindent" > <i>[Function]</i>   <b>ﬁle-string-length</b> <a 
 id="dx149-216015"></a><a 
 id="x149-216016r775"></a>   <i>ﬁle-stream</i>  <i>object</i>
<!--l. 2754--><p class="noindent" >X3J13 voted in June 1989 ⟨<b>?</b>⟩ to add the function <a 
href="#x149-216016r775">ﬁle-string-length</a>. The object
must be a string or a character. The function <a 
href="#x149-216016r775">ﬁle-string-length</a> returns a
non-negative integer that is the diﬀerence between what the <a 
href="#x149-216012r773">ﬁle-position</a> of the
ﬁle-stream would be after and before writing the object to the ﬁle-stream, or <a 
href="clmse31.html#x42-70002r19">nil</a> if
this diﬀerence cannot be determined. The value returned may depend on the
current state of the ﬁle-stream; that is, calling <a 
href="#x149-216016r775">ﬁle-string-length</a> on the
same arguments twice may in certain circumstances produce two diﬀerent
integers.
</div>
</div>
                                                                          

                                                                          
   <!--l. 2769--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse122.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse120.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse120.html#tailclmse120.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse121.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch23.html#clmse121.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 2769--><p class="indent" >   <a 
 id="tailclmse121.html"></a>  
</body></html> 
