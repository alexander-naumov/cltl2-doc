<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Conditionals Условные операторы</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-09 00:03:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 3511--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse41.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse39.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse39.html#tailclmse39.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse40.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch7.html#clmse40.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">7.6   </span> <a 
 id="x52-1170007.6"></a>Conditionals Условные операторы</h3>
<!--l. 3513--><p class="noindent" >The traditional conditional construct in Lisp is <a 
href="#x52-120002r100">cond</a>. However, <a 
href="clmse141.html#x172-364002r878">if</a> is much simpler
and is directly comparable to conditional constructs in other programming
languages, so it is considered to be primitive in Common Lisp and is described
ﬁrst. Common Lisp also provides the dispatching constructs <a 
href="#x52-121002r101">case</a> and <a 
href="#x52-122002r102">typecase</a>,
which are often more convenient than <a 
href="#x52-120002r100">cond</a>.
<!--l. 3520--><p class="indent" >   Традиционная условная конструкция в Lisp&#x2019;е это <a 
href="#x52-120002r100">cond</a>. Однако, <a 
href="clmse141.html#x172-364002r878">if</a>
гораздо проще и очень похожа на условные конструкции в других
языках программирования. Она сделана примитивом в Common Lisp&#x2019;е.
Common Lisp также предоставляет конструкции диспетчеризации
(распределения) <a 
href="#x52-121002r101">case</a> и <a 
href="#x52-122002r102">typecase</a>, которые часто более удобны, чем
<a 
href="#x52-120002r100">cond</a>.
<div class=defspec>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Special form]</i><b> if </b><a 
 id="dx52-117001"></a><a 
 id="x52-117002r97"></a> test then [else]
</td></tr></table>
<!--l. 3528--><p class="indent" >
</div>
<!--l. 3528--><p class="noindent" ><span class="paragraphHead"><a 
 id="x52-1180007.6"></a></span>
   The <a 
href="clmse141.html#x172-364002r878">if</a> special form corresponds to the <b>if</b>-<b>then</b>-<b>else</b> construct found in most
algebraic programming languages. First the form <i>test</i> is evaluated. If the result is
not <a 
href="clmse31.html#x42-77002r19">nil</a>, then the form <i>then</i> is selected; otherwise the form <i>else</i> is selected.
Whichever form is selected is then evaluated, and <a 
href="clmse141.html#x172-364002r878">if</a> returns whatever is returned
by evaluation of the selected form. <div class=lisp> <div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(if <i>test</i> <i>then</i> <i>else</i>)  ≡ (cond (<i>test</i> <i>then</i>) (<a 
href="clmse31.html#x42-77004r20">t</a> <i>else</i>))
</td></tr></table>
<!--l. 3537--><p class="indent" >
</div>
</div>
<!--l. 3538--><p class="noindent" >but <a 
href="clmse141.html#x172-364002r878">if</a> is considered more readable in some situations.
<!--l. 3540--><p class="indent" >   The <i>else</i> form may be omitted, in which case if the value of <i>test</i> is <a 
href="clmse31.html#x42-77002r19">nil</a>
then nothing is done and the value of the <a 
href="clmse141.html#x172-364002r878">if</a> form is <a 
href="clmse31.html#x42-77002r19">nil</a>. If the value of
the <a 
href="clmse141.html#x172-364002r878">if</a> form is important in this situation, then the <a 
href="clmse34.html#x45-82004r51">and</a> construct may
be stylistically preferable, depending on the context. If the value is not
important, but only the eﬀect, then the <a 
href="clmse141.html#x172-364004r879">when</a> construct may be stylistically
preferable.
<!--l. 3549--><p class="indent" >   Специальная формы <a 
href="clmse141.html#x172-364002r878">if</a> обозначает то же, что и конструкция <b>if</b>-<b>then</b>-<b>else</b> в
большинстве других языках программирования. Сначала выполняется форма
<i>test</i>. Если резльутат не равен <a 
href="clmse31.html#x42-77002r19">nil</a>, тогда выбирается форма <i>then</i>. Иначе
выбирается форма <i>else</i>. Выбранная ранее форма выполняется, и <a 
href="clmse141.html#x172-364002r878">if</a>
возвращает то, что вернула это форма. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(if <i>test</i> <i>then</i> <i>else</i>)  ≡ (cond (<i>test</i> <i>then</i>) (<a 
href="clmse31.html#x42-77004r20">t</a> <i>else</i>))
</td></tr></table>
<!--l. 3558--><p class="indent" >
</div>
</div>
<!--l. 3559--><p class="noindent" >Но в некоторых ситуациях <a 
href="clmse141.html#x172-364002r878">if</a> оказывается более читабельным.
<!--l. 3561--><p class="indent" >   Форма <i>else</i> может быть опущена. В таком случае, если значение формы
<i>test</i> является <a 
href="clmse31.html#x42-77002r19">nil</a>, тогда ничего не будет выполнено и возвращаемое значение
формы <a 
href="clmse141.html#x172-364002r878">if</a> будет <a 
href="clmse31.html#x42-77002r19">nil</a>. Если в этой ситуации значение формы <a 
href="clmse141.html#x172-364002r878">if</a> важно, тогда в
зависимости от контекста стилистически удобнее использовать форму <a 
href="clmse34.html#x45-82004r51">and</a>.
Если значение не важно, тогда удобнее использовать конструкцию
<a 
href="clmse141.html#x172-364004r879">when</a>.
</div>
<div class=defmac>
<div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> when </b><a 
 id="dx52-118001"></a><a 
 id="x52-118002r98"></a> test  { form}*
</td></tr></table>
<!--l. 3571--><p class="indent" >
</div>
<!--l. 3571--><p class="noindent" ><span class="paragraphHead"><a 
 id="x52-1190007.6"></a></span>
   (when <i>test</i> <i>form1</i> <i>form2</i> ... ) ﬁrst evaluates <i>test</i>. If the result is <a 
href="clmse31.html#x42-77002r19">nil</a>, then no
<i>form</i> is evaluated, and <a 
href="clmse31.html#x42-77002r19">nil</a> is returned. Otherwise the <i>form</i>s constitute an implicit
<a 
href="clmse38.html#x50-102002r80">progn</a> and are evaluated sequentially from left to right, and the value of the last
one is returned. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(when <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (and <i>p</i> (progn <i>a</i> <i>b</i> <i>c</i>))
</td></tr></table>
<!--l. 3579--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(when <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (cond (<i>p</i> <i>a</i> <i>b</i> <i>c</i>))</td></tr></table>
<!--l. 3580--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(when <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (if <i>p</i> (progn <i>a</i> <i>b</i> <i>c</i>) <a 
href="clmse31.html#x42-77002r19">nil</a>)</td></tr></table>
<!--l. 3581--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(when <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (unless (not <i>p</i>) <i>a</i> <i>b</i> <i>c</i>)</td></tr></table>
<!--l. 3583--><p class="indent" >
</div>
</div>
<!--l. 3584--><p class="noindent" >As a matter of style, <a 
href="clmse141.html#x172-364004r879">when</a> is normally used to conditionally produce some side
eﬀects, and the value of the <a 
href="clmse141.html#x172-364004r879">when</a> form is normally not used. If the value
is relevant, then it may be stylistically more appropriate to use <a 
href="clmse34.html#x45-82004r51">and</a> or
<a 
href="clmse141.html#x172-364002r878">if</a>.
<!--l. 3590--><p class="indent" >   (when <i>test</i> <i>form1</i> <i>form2</i> ... ) сначала выполняет <i>test</i>. Если результат <a 
href="clmse31.html#x42-77002r19">nil</a>,
тогда ничего не выполняется и возвращается <a 
href="clmse31.html#x42-77002r19">nil</a>. Иначе, последовательно
выполняются формы <i>form</i> слева направо (как неявный <a 
href="clmse38.html#x50-102002r80">progn</a>), и возвращается
значение последней формы. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(when <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (and <i>p</i> (progn <i>a</i> <i>b</i> <i>c</i>))
</td></tr></table>
<!--l. 3597--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(when <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (cond (<i>p</i> <i>a</i> <i>b</i> <i>c</i>))</td></tr></table>
<!--l. 3598--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(when <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (if <i>p</i> (progn <i>a</i> <i>b</i> <i>c</i>) <a 
href="clmse31.html#x42-77002r19">nil</a>)</td></tr></table>
<!--l. 3599--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(when <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (unless (not <i>p</i>) <i>a</i> <i>b</i> <i>c</i>)</td></tr></table>
<!--l. 3601--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 3602--><p class="noindent" >В целях хорошего стиля, <a 
href="clmse141.html#x172-364004r879">when</a> обычно используется для выполнения побочных
эффектов при некоторых условиях, и значение <a 
href="clmse141.html#x172-364004r879">when</a> не используется. Если
значение все-таки важно, тогда может быть стилистически более подходящи
функции <a 
href="clmse34.html#x45-82004r51">and</a> или <a 
href="clmse141.html#x172-364002r878">if</a>.
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> unless </b><a 
 id="dx52-119001"></a><a 
 id="x52-119002r99"></a> test  { form}*
</td></tr></table>
<!--l. 3610--><p class="indent" >
</div>
<!--l. 3610--><p class="noindent" ><span class="paragraphHead"><a 
 id="x52-1200007.6"></a></span>
   (unless <i>test</i> <i>form1</i> <i>form2</i> ... ) ﬁrst evaluates <i>test</i>. If the result is <i>not</i> <a 
href="clmse31.html#x42-77002r19">nil</a>, then
the <i>form</i>s are not evaluated, and <a 
href="clmse31.html#x42-77002r19">nil</a> is returned. Otherwise the <i>form</i>s constitute
an implicit <a 
href="clmse38.html#x50-102002r80">progn</a> and are evaluated sequentially from left to right, and the value
of the last one is returned. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(unless <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (cond ((not <i>p</i>) <i>a</i> <i>b</i> <i>c</i>))
</td></tr></table>
<!--l. 3618--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(unless <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (if <i>p</i> <a 
href="clmse31.html#x42-77002r19">nil</a> (progn <i>a</i> <i>b</i> <i>c</i>))</td></tr></table>
<!--l. 3619--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(unless <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (when (not <i>p</i>) <i>a</i> <i>b</i> <i>c</i>)</td></tr></table>
<!--l. 3621--><p class="indent" >
</div>
</div>
<!--l. 3622--><p class="noindent" >As a matter of style, <a 
href="clmse141.html#x172-364006r880">unless</a> is normally used to conditionally produce some
side eﬀects, and the value of the <a 
href="clmse141.html#x172-364006r880">unless</a> form is normally not used. If the
value is relevant, then it may be stylistically more appropriate to use
<a 
href="clmse141.html#x172-364002r878">if</a>.
                                                                          

                                                                          
<!--l. 3628--><p class="indent" >   (unless <i>test</i> <i>form1</i> <i>form2</i> ... ) сначала выполняет <i>test</i>. Если результат <i>не</i>
<a 
href="clmse31.html#x42-77002r19">nil</a>, тогда ничего не выполняется и возвращается <a 
href="clmse31.html#x42-77002r19">nil</a>. Иначе, последовательно
выполняются формы <i>form</i> слева направо (как неявный <a 
href="clmse38.html#x50-102002r80">progn</a>), и возвращается
значение последней формы. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(unless <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (cond ((not <i>p</i>) <i>a</i> <i>b</i> <i>c</i>))
</td></tr></table>
<!--l. 3635--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(unless <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (if <i>p</i> <a 
href="clmse31.html#x42-77002r19">nil</a> (progn <i>a</i> <i>b</i> <i>c</i>))</td></tr></table>
<!--l. 3636--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(unless <i>p</i> <i>a</i> <i>b</i> <i>c</i>)  ≡ (when (not <i>p</i>) <i>a</i> <i>b</i> <i>c</i>)</td></tr></table>
<!--l. 3638--><p class="indent" >
</div>
</div>
<!--l. 3639--><p class="noindent" >В целях хорошего стиля, <a 
href="clmse141.html#x172-364006r880">unless</a> обычно используется для выполнения побочных
эффектов при некоторых условиях, и значение <a 
href="clmse141.html#x172-364006r880">unless</a> не используется. Если
значение все-таки важно, тогда может быть стилистически более подходящая
функция <a 
href="clmse141.html#x172-364002r878">if</a>.
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> cond </b><a 
 id="dx52-120001"></a><a 
 id="x52-120002r100"></a> {(test  { form}* )}*
</td></tr></table>
<!--l. 3648--><p class="indent" >
</div>
<!--l. 3648--><p class="noindent" ><span class="paragraphHead"><a 
 id="x52-1210007.6"></a></span>
   A <a 
href="#x52-120002r100">cond</a> form has a number (possibly zero) of <i>clauses</i>, which are lists of forms.
Each clause consists of a <i>test</i> followed by zero or more <i>consequents</i>. For example: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cond (<i>test-1</i> <i>consequent-1-1</i> <i>consequent-1-2</i> ...)
</td></tr></table>
                                                                          

                                                                          
<!--l. 3655--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (<i>test-2</i>)</td></tr></table>
<!--l. 3656--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (<i>test-3</i> <i>consequent-3-1</i> ...)</td></tr></table>
<!--l. 3657--><p class="indent" >                                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ... )</td></tr></table>
<!--l. 3659--><p class="indent" >
</div>
</div>
<!--l. 3661--><p class="indent" >   The ﬁrst clause whose <i>test</i> evaluates to non-<a 
href="clmse31.html#x42-77002r19">nil</a> is selected; all other clauses are
ignored, and the consequents of the selected clause are evaluated in order (as an
implicit <a 
href="clmse38.html#x50-102002r80">progn</a>).
<!--l. 3665--><p class="indent" >   Форма <a 
href="#x52-120002r100">cond</a> содержит некоторое (возможно нулевое) количество
подвыражений, которые является списками форм. Каждое подвыражение
содержит форму условия и ноль и более форм для выполнения. Например: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cond (<i>test-1</i> <i>consequent-1-1</i> <i>consequent-1-2</i> ...)
</td></tr></table>
<!--l. 3670--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (<i>test-2</i>)</td></tr></table>
<!--l. 3671--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (<i>test-3</i> <i>consequent-3-1</i> ...)</td></tr></table>
<!--l. 3672--><p class="indent" >                                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ... )</td></tr></table>
<!--l. 3674--><p class="indent" >
</div>
</div>
<!--l. 3676--><p class="indent" >   Отбирается первое подвыражение, чья форма условия вычисляется в
не-<a 
href="clmse31.html#x42-77002r19">nil</a>. Все остальные подвыражения игнорируются. Формы отобранного
подвыражения последовательно выполняются (как неявный <a 
href="clmse38.html#x50-102002r80">progn</a>).
<!--l. 3680--><p class="indent" >   More speciﬁcally, <a 
href="#x52-120002r100">cond</a> processes its clauses in order from left to right. For
each clause, the <i>test</i> is evaluated. If the result is <a 
href="clmse31.html#x42-77002r19">nil</a>, <a 
href="#x52-120002r100">cond</a> advances to the next
clause. Otherwise, the <i>cdr</i> of the clause is treated as a list of forms, or
consequents; these forms are evaluated in order from left to right, as an
implicit <a 
href="clmse38.html#x50-102002r80">progn</a>. After evaluating the consequents, <a 
href="#x52-120002r100">cond</a> returns without
inspecting any remaining clauses. The <a 
href="#x52-120002r100">cond</a> special form returns the results of
evaluating the last of the selected consequents; if there were no consequents
in the selected clause, then the single (and necessarily non-null) value
of the <i>test</i> is returned. If <a 
href="#x52-120002r100">cond</a> runs out of clauses (every test produced
<a 
href="clmse31.html#x42-77002r19">nil</a>, and therefore no clause was selected), the value of the <a 
href="#x52-120002r100">cond</a> form is
<a 
href="clmse31.html#x42-77002r19">nil</a>.
                                                                          

                                                                          
<!--l. 3696--><p class="indent" >   Если быть точнее, <a 
href="#x52-120002r100">cond</a> обрабатывает свои подвыражения слева направо.
Для каждого подвыражения, вычисляется форма условия. Если результат
<a 
href="clmse31.html#x42-77002r19">nil</a>, <a 
href="#x52-120002r100">cond</a> переходит к следующему подвыражению. Если результат <a 
href="clmse31.html#x42-77004r20">t</a>, <i>cdr</i>
подвыражения обрабатывается, как список форм. Этот список выполняется
слева направо, как неявный <a 
href="clmse38.html#x50-102002r80">progn</a>. После выполнения списка форм, <a 
href="#x52-120002r100">cond</a>
возвращает управление без обработки оставщихся подвыражений.
Специальная форма <a 
href="#x52-120002r100">cond</a> возвращает результат выполнения последней
формы из списка. Если этот список пустой, тогда возвращается значение
формы условия. Если <a 
href="#x52-120002r100">cond</a> вернула управление без вычисления какой-либо
ветки (все условные формы вычислились в <a 
href="clmse31.html#x42-77002r19">nil</a>), возвращается значение
<a 
href="clmse31.html#x42-77002r19">nil</a>.
<!--l. 3708--><p class="indent" >   If it is desired to select the last clause unconditionally if all others fail, the
standard convention is to use <a 
href="clmse31.html#x42-77004r20">t</a> for the <i>test</i>. As a matter of style, it is desirable to
write a last clause (<a 
href="clmse31.html#x42-77004r20">t</a> <a 
href="clmse31.html#x42-77002r19">nil</a>) if the value of the <a 
href="#x52-120002r100">cond</a> form is to be used for something.
Similarly, it is in questionable taste to let the last clause of a <a 
href="#x52-120002r100">cond</a> be a “singleton
clause”; an explicit <a 
href="clmse31.html#x42-77004r20">t</a> should be provided. (Note moreover that (cond ... (<i>x</i>)) may
behave diﬀerently from (cond ... (<a 
href="clmse31.html#x42-77004r20">t</a> <i>x</i>)) if <i>x</i> might produce multiple values; the
former always returns a single value, whereas the latter returns whatever values
<i>x</i> returns. However, as a matter of style it is preferable to obtain this
behavior by writing (cond ... (t (values <i>x</i>))), using the <a 
href="clmse44.html#x56-144002r123">values</a> function
explicitly to indicate the discarding of any excess values.) For example: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:427;" 
class="tabbing">(setq z (cond (a &#x2019;foo) (b &#x2019;bar)))                                </td><td  
class="tabbing">;Possibly confusing
</td></tr></table>
<!--l. 3725--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:427;" 
class="tabbing">(setq z (cond (a &#x2019;foo) (b &#x2019;bar) (<a 
href="clmse31.html#x42-77004r20">t</a> <a 
href="clmse31.html#x42-77002r19">nil</a>)))                       </td><td  
class="tabbing">;Better</td></tr></table>
<!--l. 3726--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:427;" 
class="tabbing">(cond (a b) (c d) (e))                                             </td><td  
class="tabbing">;Possibly confusing</td></tr></table>
<!--l. 3727--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:427;" 
class="tabbing">(cond (a b) (c d) (<a 
href="clmse31.html#x42-77004r20">t</a> e))                                           </td><td  
class="tabbing">;Better</td></tr></table>
<!--l. 3728--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:427;" 
class="tabbing">(cond (a b) (c d) (<a 
href="clmse31.html#x42-77004r20">t</a> (values e)))                               </td><td  
class="tabbing">;Better (if one value</td></tr></table>
<!--l. 3729--><p class="indent" >           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:427;" 
class="tabbing">                                                                         </td><td  
class="tabbing">; needed)</td></tr></table>
<!--l. 3730--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:427;" 
class="tabbing">(cond (a b) (c))                                                    </td><td  
class="tabbing">;Possibly confusing</td></tr></table>
<!--l. 3731--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:427;" 
class="tabbing">(cond (a b) (t c))                                                  </td><td  
class="tabbing">;Better</td></tr></table>
<!--l. 3732--><p class="indent" >        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:427;" 
class="tabbing">(if a b c)                                                             </td><td  
class="tabbing">;Also better</td></tr></table>
<!--l. 3734--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 3735--><p class="noindent" >A Lisp <a 
href="#x52-120002r100">cond</a> form may be compared to a continued <b>if</b>-<b>then</b>-<b>else</b> as found in many
algebraic programming languages: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:185;" 
class="tabbing">(cond (<i>p</i> ...)                </td><td style="width:195;" 
class="tabbing">                                 </td><td  
class="tabbing"><b>if</b> <i>p</i> <b>then</b> ...
</td></tr></table>
<!--l. 3739--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:185;" 
class="tabbing">      (<i>q</i> ...)               </td><td style="width:195;" 
class="tabbing">roughly                       </td><td  
class="tabbing"><b>else</b> <b>if</b> <i>q</i> <b>then</b> ...</td></tr></table>
<!--l. 3740--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:185;" 
class="tabbing">      (<i>r</i> ...)               </td><td style="width:195;" 
class="tabbing">corresponds                  </td><td  
class="tabbing"><b>else</b> <b>if</b> <i>r</i> <b>then</b> ...</td></tr></table>
<!--l. 3741--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:185;" 
class="tabbing">      ...                    </td><td style="width:195;" 
class="tabbing">to                               </td><td  
class="tabbing">...</td></tr></table>
<!--l. 3742--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:185;" 
class="tabbing">      (<a 
href="clmse31.html#x42-77004r20">t</a> ...))              </td><td style="width:195;" 
class="tabbing">                                 </td><td  
class="tabbing"><b>else</b> ...</td></tr></table>
<!--l. 3744--><p class="indent" >
</div>
</div>
<!--l. 3746--><p class="indent" >   Для того, чтобы выполнить последнее подвыражение, в случае если
раньше ничего не выполнилось, можно использовать <a 
href="clmse31.html#x42-77004r20">t</a> для формы условия. В
целях стиля, если значение <a 
href="#x52-120002r100">cond</a> будет для чего-то использоваться,
желательно записывать последнее выражение так: (<a 
href="clmse31.html#x42-77004r20">t</a> <a 
href="clmse31.html#x42-77002r19">nil</a>). Также вопросом
вкуса является запись последнего подвыражения <a 
href="#x52-120002r100">cond</a> как «синглтон», в
таком случае, используется неявный <a 
href="clmse31.html#x42-77004r20">t</a>. (Следует отметить, если <i>x</i> может
возвращать несколько значений, то (cond ... (<i>x</i>)) может вести себя отлично от
(cond ... (<a 
href="clmse31.html#x42-77004r20">t</a> <i>x</i>)). Первое выражение всегда возвращает одно выражение, тогда
как второе возвращает все то же, что и <i>x</i>. В зависимости от стиля, можно
указывать поведение явно (cond ... (t (values <i>x</i>))), используя функцию
<a 
href="clmse44.html#x56-144002r123">values</a> для явного указания возврата одного значения.) Например: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq z (cond (a &#x2019;foo) (b &#x2019;bar)))                                </td><td  
class="tabbing">;Возможна неопределенность
</td></tr></table>
<!--l. 3761--><p class="indent" >        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq z (cond (a &#x2019;foo) (b &#x2019;bar) (<a 
href="clmse31.html#x42-77004r20">t</a> <a 
href="clmse31.html#x42-77002r19">nil</a>)))                       </td><td  
class="tabbing">;Уже лучше</td></tr></table>
<!--l. 3762--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cond (a b) (c d) (e))                                             </td><td  
class="tabbing">;Возможна неопределенность</td></tr></table>
<!--l. 3763--><p class="indent" >        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cond (a b) (c d) (<a 
href="clmse31.html#x42-77004r20">t</a> e))                                           </td><td  
class="tabbing">;Уже лучше</td></tr></table>
<!--l. 3764--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cond (a b) (c d) (<a 
href="clmse31.html#x42-77004r20">t</a> (values e)))                               </td><td  
class="tabbing">;Неплохо (если необходимо</td></tr></table>
<!--l. 3765--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                                                      </td><td  
class="tabbing">; одно значение)</td></tr></table>
<!--l. 3766--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cond (a b) (c))                                                    </td><td  
class="tabbing">;Возможна неопределенность</td></tr></table>
                                                                          

                                                                          
<!--l. 3767--><p class="indent" >        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cond (a b) (t c))                                                  </td><td  
class="tabbing">;Уже лучше</td></tr></table>
<!--l. 3768--><p class="indent" >
<!--l. 3773--><p class="indent" ><table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cond (<i>p</i> ...)                </td><td  
class="tabbing">                                 </td><td  
class="tabbing"><b>if</b> <i>p</i> <b>then</b> ...
</td></tr></table>
<!--l. 3775--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (<i>q</i> ...)               </td><td  
class="tabbing">roughly                       </td><td  
class="tabbing"><b>else</b> <b>if</b> <i>q</i> <b>then</b> ...</td></tr></table>
<!--l. 3776--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (<i>r</i> ...)               </td><td  
class="tabbing">corresponds                  </td><td  
class="tabbing"><b>else</b> <b>if</b> <i>r</i> <b>then</b> ...</td></tr></table>
<!--l. 3777--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ...                    </td><td  
class="tabbing">to                               </td><td  
class="tabbing">...</td></tr></table>
<!--l. 3778--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (<a 
href="clmse31.html#x42-77004r20">t</a> ...))              </td><td  
class="tabbing">                                 </td><td  
class="tabbing"><b>else</b> ...</td></tr></table>
<!--l. 3780--><p class="indent" >
</div>
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> case </b><a 
 id="dx52-121001"></a><a 
 id="x52-121002r101"></a> keyform  {( {( {key}* ) | key} { form}* )}*
</td></tr></table>
<!--l. 3786--><p class="indent" >
</div>
<!--l. 3786--><p class="noindent" ><span class="paragraphHead"><a 
 id="x52-1220007.6"></a></span>
   <a 
href="#x52-121002r101">case</a> is a conditional that chooses one of its clauses to execute by comparing a
value to various constants, which are typically keyword symbols, integers, or
characters (but may be any objects). Its form is as follows: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(case <i>keyform</i>
</td></tr></table>
<!--l. 3792--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>keylist-1</i> <i>consequent-1-1</i> <i>consequent-1-2</i> ...)</td></tr></table>
<!--l. 3793--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>keylist-2</i> <i>consequent-2-1</i> ...)</td></tr></table>
<!--l. 3794--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>keylist-3</i> <i>consequent-3-1</i> ...)</td></tr></table>
<!--l. 3795--><p class="indent" >                                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  ...)</td></tr></table>
<!--l. 3797--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 3798--><p class="noindent" >Structurally <a 
href="#x52-121002r101">case</a> is much like <a 
href="#x52-120002r100">cond</a>, and it behaves like <a 
href="#x52-120002r100">cond</a> in selecting one clause
and then executing all consequents of that clause. However, <a 
href="#x52-121002r101">case</a> diﬀers in the
mechanism of clause selection.
<!--l. 3803--><p class="indent" >   <a 
href="#x52-121002r101">case</a> условный оператор, который выбирает ветку для выполнения, в
зависимости от равенства некоторой переменной некоторой константе.
Константа обычно представляет собой ключевой символ, целое число или
строковый символ (но может быть и любой другой объект). Вот развернутая
форма: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(case <i>keyform</i>
</td></tr></table>
<!--l. 3808--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>keylist-1</i> <i>consequent-1-1</i> <i>consequent-1-2</i> ...)</td></tr></table>
<!--l. 3809--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>keylist-2</i> <i>consequent-2-1</i> ...)</td></tr></table>
<!--l. 3810--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>keylist-3</i> <i>consequent-3-1</i> ...)</td></tr></table>
<!--l. 3811--><p class="indent" >                                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  ...)</td></tr></table>
<!--l. 3813--><p class="indent" >
</div>
</div>
<!--l. 3814--><p class="noindent" >Структурно <a 
href="#x52-121002r101">case</a> очень похож на <a 
href="#x52-120002r100">cond</a>, и поведение такое же: выбрать список
форм и выполнить их. Однако <a 
href="#x52-121002r101">case</a> отличается механизмом выбора
подвыражения.
<!--l. 3818--><p class="indent" >   The ﬁrst thing <a 
href="#x52-121002r101">case</a> does is to evaluate the form <i>keyform</i> to produce an
object called the <i>key object</i>. Then <a 
href="#x52-121002r101">case</a> considers each of the clauses in
turn. If <i>key</i> is in the <i>keylist</i> (that is, is <a 
href="clmse33.html#x44-81005r47">eql</a> to any item in the <i>keylist</i>) of a
clause, the consequents of that clause are evaluated as an implicit <a 
href="clmse38.html#x50-102002r80">progn</a>;
<a 
href="#x52-121002r101">case</a> returns what was returned by the last consequent (or <a 
href="clmse31.html#x42-77002r19">nil</a> if there
are no consequents in that clause). If no clause is satisﬁed, <a 
href="#x52-121002r101">case</a> returns
<a 
href="clmse31.html#x42-77002r19">nil</a>.
<!--l. 3829--><p class="indent" >   Сперва <a 
href="#x52-121002r101">case</a> вычисляет форму <i>keyform</i> для получения объекта, который
называется <i>ключевой объект</i>. Затем <a 
href="#x52-121002r101">case</a> рассматривает все подвыражения.
Если <i>ключевой объект</i> присутствует в списке <i>keylist</i> (то есть, если <i>ключевой
объект</i> равен <a 
href="clmse33.html#x44-81005r47">eql</a> хотя бы одному элементу из списка <i>keylist</i>), то список форм
выбранного подвыражения вычисляется, как неявный <a 
href="clmse38.html#x50-102002r80">progn</a>. <a 
href="#x52-121002r101">case</a> возвращает
то же, что и последняя форма списка (или <a 
href="clmse31.html#x42-77002r19">nil</a> если список форм был пустой).
                                                                          

                                                                          
Если ни одно подвыражение не удовлетворило условию, то <a 
href="#x52-121002r101">case</a> возвращает
<a 
href="clmse31.html#x42-77002r19">nil</a>.
<!--l. 3840--><p class="indent" >   The keys in the keylists are <i>not</i> evaluated; literal key values must appear in
the keylists. It is an error for the same key to appear in more than one clause; a
consequence is that the order of the clauses does not aﬀect the behavior of the
<a 
href="#x52-121002r101">case</a> construct.
<!--l. 3846--><p class="indent" >   Ключи в списке ключей <i>keylist</i> <i>не</i> выполняются. В данном списке должны
быть указаны литеральные ключи. Если один ключ попадается более чем в
одном подвыражении, это считается ошибкой. Следствием является то, что
порядок этих подвыражений не влияет на поведение конструкции
<a 
href="#x52-121002r101">case</a>.
<!--l. 3853--><p class="indent" >   Instead of a <i>keylist</i>, one may write one of the symbols <a 
href="clmse31.html#x42-77004r20">t</a> and otherwise. A
clause with such a symbol always succeeds and must be the last clause (this is an
exception to the order-independence of clauses). See also <a 
href="clmse155.html#x189-477002r998">ecase</a> and <a 
href="clmse155.html#x189-478002r999">ccase</a>, each of
which provides an implicit otherwise clause to signal an error if no clause is
satisﬁed.
<!--l. 3861--><p class="indent" >   Вместо <i>keylist</i> можно записать один из символов: <a 
href="clmse31.html#x42-77004r20">t</a> или otherwise.
Подвыражение с одним из таких символов всегда удовлетворяет условию
выбора. Такое подвыражение должно быть последним (это исключение из
правила о произвольности положения подвыражений). Смотрите также <a 
href="clmse155.html#x189-477002r998">ecase</a>
и <a 
href="clmse155.html#x189-478002r999">ccase</a>, каждая из которых предоставляет неявное otherwise подвыражение
для сигнализировании об ошибке, если ни одно подвыражение не
удволетворило условию.
<!--l. 3869--><p class="indent" >   If there is only one key for a clause, then that key may be written in place of a
list of that key, provided that no ambiguity results. Such a “singleton key” may
not be <a 
href="clmse31.html#x42-77002r19">nil</a> (which is confusable with (), a list of no keys), <a 
href="clmse31.html#x42-77004r20">t</a>, otherwise, or a
cons.
<!--l. 3874--><p class="indent" >   Если в подвыражении только один ключ, тогда этот ключ может быть
записан вместо списка. Такой «синглтоновый ключ» не может быть <a 
href="clmse31.html#x42-77002r19">nil</a> (так
как возникают конфликты с (), который означает список без ключей), <a 
href="clmse31.html#x42-77004r20">t</a>,
otherwise или cons-ячейкой.
<div class=incompatibility>
<!--l. 3881--><p class="noindent" ><b>Compatibility note:</b> The Lisp Machine Lisp caseq construct uses <a 
href="clmse33.html#x44-81002r46">eq</a> for the
comparison. In Lisp Machine Lisp caseq therefore works for ﬁxnums but not bignums.
The MacLisp caseq construct simply prohibits the use of bignums; indeed, it permits
only ﬁxnums and symbols as clause keys. In the interest of hiding the ﬁxnum-bignum
distinction, and for general language consistency, <a 
href="#x52-121002r101">case</a> uses <a 
href="clmse33.html#x44-81005r47">eql</a> in Common
Lisp.
                                                                          

                                                                          
<!--l. 3892--><p class="indent" >   The Interlisp selectq construct is similar to <a 
href="#x52-121002r101">case</a>.
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> typecase </b><a 
 id="dx52-122001"></a><a 
 id="x52-122002r102"></a> keyform  {(type  { form}* )}*
</td></tr></table>
<!--l. 3899--><p class="indent" >
</div>
<!--l. 3899--><p class="noindent" ><span class="paragraphHead"><a 
 id="x52-1230007.6"></a></span>
   <a 
href="#x52-122002r102">typecase</a> is a conditional that chooses one of its clauses by examining the type
of an object. Its form is as follows: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typecase <i>keyform</i>
</td></tr></table>
<!--l. 3904--><p class="indent" >                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>type-1</i> <i>consequent-1-1</i> <i>consequent-1-2</i> ...)</td></tr></table>
<!--l. 3905--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>type-2</i> <i>consequent-2-1</i> ...)</td></tr></table>
<!--l. 3906--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>type-3</i> <i>consequent-3-1</i> ...)</td></tr></table>
<!--l. 3907--><p class="indent" >                                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  ...)</td></tr></table>
<!--l. 3909--><p class="indent" >
</div>
</div>
<!--l. 3910--><p class="noindent" >Structurally <a 
href="#x52-122002r102">typecase</a> is much like <a 
href="#x52-120002r100">cond</a> or <a 
href="#x52-121002r101">case</a>, and it behaves like them in selecting
one clause and then executing all consequents of that clause. It diﬀers in the
mechanism of clause selection.
<!--l. 3915--><p class="indent" >   <a 
href="#x52-122002r102">typecase</a> условный оператор, который выбирает подвыражение на основе
типа объекта. Развернутая форма: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typecase <i>keyform</i>
</td></tr></table>
                                                                          

                                                                          
<!--l. 3919--><p class="indent" >                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>type-1</i> <i>consequent-1-1</i> <i>consequent-1-2</i> ...)</td></tr></table>
<!--l. 3920--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>type-2</i> <i>consequent-2-1</i> ...)</td></tr></table>
<!--l. 3921--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (<i>type-3</i> <i>consequent-3-1</i> ...)</td></tr></table>
<!--l. 3922--><p class="indent" >                                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  ...)</td></tr></table>
<!--l. 3924--><p class="indent" >
</div>
</div>
<!--l. 3925--><p class="noindent" >Структура <a 
href="#x52-122002r102">typecase</a> похожа на <a 
href="#x52-120002r100">cond</a> или <a 
href="#x52-121002r101">case</a>. Поведение также схоже в том, что
выбирается подвыражение в зависимости от условия. Различие заключается
в механизме выбора подвыражения.
<!--l. 3929--><p class="indent" >   The ﬁrst thing <a 
href="#x52-122002r102">typecase</a> does is to evaluate the form <i>keyform</i> to produce an
object called the key object. Then <a 
href="#x52-122002r102">typecase</a> considers each of the clauses in turn.
The <i>type</i> that appears in each clause is a type speciﬁer; it is not evaluated but is a
literal type speciﬁer. The ﬁrst clause for which the key is of that clause&#x2019;s speciﬁed
<i>type</i> is selected, the consequents of this clause are evaluated as an implicit <a 
href="clmse38.html#x50-102002r80">progn</a>,
and <a 
href="#x52-122002r102">typecase</a> returns what was returned by the last consequent (or <a 
href="clmse31.html#x42-77002r19">nil</a> if there are
no consequents in that clause). If no clause is satisﬁed, <a 
href="#x52-122002r102">typecase</a> returns
<a 
href="clmse31.html#x42-77002r19">nil</a>.
<!--l. 3943--><p class="indent" >   Сперва <a 
href="#x52-122002r102">typecase</a> вычисляет форму <i>keyform</i> для создания объекта,
называемого ключевым объектом. Далее <a 
href="#x52-122002r102">typecase</a> друг за другом рассматривает
каждое подвыражение. Форма <i>type</i>, которая встречается в каждом
подвыражении, является спецификатором типа. Данный спецификатор не
вычисляется, поэтому должен быть литеральным. Когда ключевой объект
приндалежит некоторый типу, то выделенный список форм <i>consequent</i>
выполняется последовательно (как неявный <a 
href="clmse38.html#x50-102002r80">progn</a>). <a 
href="#x52-122002r102">typecase</a> возвращает то,
что вернула последняя форма из списка (или <a 
href="clmse31.html#x42-77002r19">nil</a> если список был пуст).
Если не одно подвыражение не было выбрано, <a 
href="#x52-122002r102">typecase</a> возвращает
<a 
href="clmse31.html#x42-77002r19">nil</a>.
<!--l. 3954--><p class="indent" >   As for <a 
href="#x52-121002r101">case</a>, the symbol <a 
href="clmse31.html#x42-77004r20">t</a> or otherwise may be written for <i>type</i> to indicate that
the clause should always be selected. See also <a 
href="clmse155.html#x189-475002r996">etypecase</a> and <a 
href="clmse155.html#x189-476002r997">ctypecase</a>, each of
which provides an implicit otherwise clause to signal an error if no clause is
satisﬁed.
<!--l. 3960--><p class="indent" >   Как и для <a 
href="#x52-121002r101">case</a> можно использовать <a 
href="clmse31.html#x42-77004r20">t</a> или otherwise на позиции <i>типа</i> для
задания подвыражений, которые будут выполняться, только если не
было выполнено других подвыражений. Смотрите также <a 
href="clmse155.html#x189-475002r996">etypecase</a> и
<a 
href="clmse155.html#x189-476002r997">ctypecase</a>, каждая из которых предоставляет неявную ветку otherwise для
сигнализировании об ошибке, что ни одно подвыражение не удовлетворило
                                                                          

                                                                          
условию.
<!--l. 3967--><p class="indent" >   It is permissible for more than one clause to specify a given type, particularly
if one is a subtype of another; the earliest applicable clause is chosen. Thus for
<a 
href="#x52-122002r102">typecase</a>, unlike <a 
href="#x52-121002r101">case</a>, the order of the clauses may aﬀect the behavior of the
construct. For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typecase an-object
</td></tr></table>
<!--l. 3974--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   (string ...)                             </td><td  
class="tabbing">;This clause handles strings</td></tr></table>
<!--l. 3975--><p class="indent" >     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   ((array t) ...)                          </td><td  
class="tabbing">;This clause handles general arrays</td></tr></table>
<!--l. 3976--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   ((array bit) ...)                       </td><td  
class="tabbing">;This clause handles bit arrays</td></tr></table>
<!--l. 3977--><p class="indent" >          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   (array ...)                              </td><td  
class="tabbing">;This handles all other arrays</td></tr></table>
<!--l. 3978--><p class="indent" >        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   ((or list number) ...)                </td><td  
class="tabbing">;This handles lists and numbers</td></tr></table>
<!--l. 3979--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   (t ...))                                   </td><td  
class="tabbing">;This handles all other objects</td></tr></table>
<!--l. 3981--><p class="indent" >
</div>
</div>
<!--l. 3982--><p class="noindent" >A Common Lisp compiler may choose to issue a warning if a clause cannot be
selected because it is completely shadowed by earlier clauses.
<!--l. 3986--><p class="indent" >   Допустимо указывать более одного подвыражение, тип условия которого
уже является подтипом условия другого подвыражения. В таком случае
будет выбрано первое встретившееся подвыражение. Таким образом в
<a 
href="#x52-122002r102">typecase</a>, в отличие от <a 
href="#x52-121002r101">case</a>, порядок следования подвыражений влияет на
поведение всей конструкции. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typecase an-object
</td></tr></table>
<!--l. 3993--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   (string ...)                             </td><td  
class="tabbing">;Подвыражение обрабатывает строки</td></tr></table>
<!--l. 3994--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   ((array t) ...)                          </td><td  
class="tabbing">;Подвыражение обрабатывает общие массивы</td></tr></table>
<!--l. 3995--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   ((array bit) ...)                       </td><td  
class="tabbing">;Подвыражение обрабатывает битовые массивы</td></tr></table>
<!--l. 3996--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   (array ...)                              </td><td  
class="tabbing">;Обрабатывает все остальные массивы</td></tr></table>
<!--l. 3997--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   ((or list number) ...)                </td><td  
class="tabbing">;Подвыражение обрабатывает списки и числа</td></tr></table>
<!--l. 3998--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:278;" 
class="tabbing">   (t ...))                                   </td><td  
class="tabbing">;Подвыражение обрабатывает все остальные объекты</td></tr></table>
<!--l. 4000--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
</div>
                                                                          

                                                                          
   <!--l. 4004--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse41.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse39.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse39.html#tailclmse39.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse40.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch7.html#clmse40.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 4004--><p class="indent" >   <a 
 id="tailclmse40.html"></a>  
</body></html> 
