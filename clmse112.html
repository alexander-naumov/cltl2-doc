<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Standard Streams Стандартные потоки</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-11 14:56:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 47--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse113.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch21.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch21.html#tailclmch21.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse112.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch21.html#clmse112.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">21.1   </span> <a 
 id="x138-26400021.1"></a>Standard Streams Стандартные потоки</h3>
<!--l. 49--><p class="noindent" >There are several variables whose values are streams used by many functions in
the Lisp system. These variables and their uses are listed here. By convention,
variables that are expected to hold a stream capable of input have names ending
with -input, and variables that are expected to hold a stream capable of output
have names ending with -output. Variables expected to hold a bidirectional
stream have names ending with -io.
<!--l. 58--><p class="indent" >   В Lisp системе есть несколько переменных, значения которых
является потоками, используемыми большим количеством функций. Эти
переменные и их использование описаны ниже. По соглашению, переменные,
которые содержат поток для чтения, имеют имена заканчивающиеся на
-input, и переменные, которые содержат поток дл записи, имеют имена,
заканчивающиеся на -output. Имена переменных, содержащих потоки и для
чтения, и для записи, заканчиваются на -io.
<div class=defun>
<!--l. 66--><p class="noindent" ><i>[Variable]</i><a 
 id="dx138-264001"></a><a 
 id="x138-264002r636"></a><b> *standard-input*</b>
<!--l. 68--><p class="noindent" >In the normal Lisp top-level loop, input is read from <a 
href="#x138-264002r636">*standard-input*</a> (that is,
whatever stream is the value of the global variable <a 
href="#x138-264002r636">*standard-input*</a>). Many input
functions, including <a 
href="clmse116.html#x143-281003r696">read</a> and <a 
href="clmse116.html#x143-281015r701">read-char</a>, take a stream argument that defaults to
<a 
href="#x138-264002r636">*standard-input*</a>.
<!--l. 75--><p class="indent" >   В обычном Lisp&#x2019;овом цикле взаимодействия с пользователем, входные
данные читаются из <a 
href="#x138-264002r636">*standard-input*</a> (то есть, из потока, который является
значением глобальной переменной <a 
href="#x138-264002r636">*standard-input*</a>). Большинство функций,
включая <a 
href="clmse116.html#x143-281003r696">read</a> и <a 
href="clmse116.html#x143-281015r701">read-char</a>, принимают аргумент — поток, который
по-умолчанию <a 
href="#x138-264002r636">*standard-input*</a>.
</div>
<div class=defun>
<!--l. 82--><p class="noindent" ><i>[Variable]</i><a 
 id="dx138-264003"></a><a 
 id="x138-264004r637"></a><b> *standard-output*</b>
<!--l. 84--><p class="noindent" >In the normal Lisp top-level loop, output is sent to <a 
href="#x138-264004r637">*standard-output*</a> (that is,
whatever stream is the value of the global variable <a 
href="#x138-264004r637">*standard-output*</a>). Many
output functions, including <a 
href="clmse117.html#x144-284010r713">print</a> and <a 
href="clmse117.html#x144-284028r720">write-char</a>, take a stream argument that
defaults to <a 
href="#x138-264004r637">*standard-output*</a>.
<!--l. 91--><p class="indent" >   В обычном Lisp&#x2019;овом цикле взаимодействия с пользователем, выходные
данные посылаются в <a 
href="#x138-264004r637">*standard-output*</a> (то есть, в поток, который является
значением глобальной переменной <a 
href="#x138-264004r637">*standard-output*</a>). Большинство фунций,
                                                                          

                                                                          
включая <a 
href="clmse117.html#x144-284010r713">print</a> и <a 
href="clmse117.html#x144-284028r720">write-char</a>, принимают аргумент – поток, который
по-умолчанию <a 
href="#x138-264004r637">*standard-output*</a>.
</div>
<div class=defun>
<!--l. 98--><p class="noindent" ><i>[Variable]</i><a 
 id="dx138-264005"></a><a 
 id="x138-264006r638"></a><b> *error-output*</b>
<!--l. 100--><p class="noindent" >The value of <a 
href="#x138-264006r638">*error-output*</a> is a stream to which error messages should be sent.
Normally this is the same as <a 
href="#x138-264004r637">*standard-output*</a>, but <a 
href="#x138-264004r637">*standard-output*</a> might be
bound to a ﬁle and <a 
href="#x138-264006r638">*error-output*</a> left going to the terminal or to a separate ﬁle
of error messages.
<!--l. 106--><p class="indent" >   Значение <a 
href="#x138-264006r638">*error-output*</a> является потоком, в который должны посылаться
сообщения об ошибках. Обычно значение совпадает с <a 
href="#x138-264004r637">*standard-output*</a>, но
<a 
href="#x138-264004r637">*standard-output*</a> может быть связан с файлов и <a 
href="#x138-264006r638">*error-output*</a> остается
направленной на терминал или отдельный файл для сообщений об
ошибках.
</div>
<div class=defun>
<!--l. 112--><p class="noindent" ><i>[Variable]</i><a 
 id="dx138-264007"></a><a 
 id="x138-264008r639"></a><b> *query-io*</b>
<!--l. 114--><p class="noindent" >The value of <a 
href="#x138-264008r639">*query-io*</a> is a stream to be used when asking questions of the user.
The question should be output to this stream, and the answer read from it. When
the normal input to a program may be coming from a ﬁle, questions such as “Do
you really want to delete all of the ﬁles in your directory?” should nevertheless be
sent directly to the user; and the answer should come from the user, not from
the data ﬁle. For such purposes <a 
href="#x138-264008r639">*query-io*</a> should be used instead of
<a 
href="#x138-264002r636">*standard-input*</a> and <a 
href="#x138-264004r637">*standard-output*</a>. <a 
href="#x138-264008r639">*query-io*</a> is used by such functions as
<a 
href="clmse118.html#x145-288006r732">yes-or-no-p</a>.
<!--l. 127--><p class="indent" >   Значение <a 
href="#x138-264008r639">*query-io*</a> является потоком, используемым, когда необходимо
получить от пользователя ответ на некоторый вопрос. Вопрос должен быть
выведен в этот поток, и ответ из него прочитан. Когда входной поток для
программы может производится из файла, вопрос «Вы действительно хотите
удалить все файлы в вашей директории?» никогда не должен посылаться
напрямую к пользователю. И ответ должен прийти от пользователя, а не
из данных файла. Поэтому в этих целях, вместо <a 
href="#x138-264002r636">*standard-input*</a> и
<a 
href="#x138-264004r637">*standard-output*</a>, должен использоваться <a 
href="#x138-264008r639">*query-io*</a> с помощью функции
<a 
href="clmse118.html#x145-288006r732">yes-or-no-p</a>.
</div>
<div class=defun>
<!--l. 137--><p class="noindent" ><i>[Variable]</i><a 
 id="dx138-264009"></a><a 
 id="x138-264010r640"></a><b> *debug-io*</b>
<!--l. 139--><p class="noindent" >The value of <a 
href="#x138-264010r640">*debug-io*</a> is a stream to be used for interactive debugging
                                                                          

                                                                          
purposes. This is often the same as the value of <a 
href="#x138-264008r639">*query-io*</a>, but need not
be.
<!--l. 144--><p class="indent" >   Значение <a 
href="#x138-264010r640">*debug-io*</a> является потоком, используемым для интерактивной
отладки. Частно может совпадать с <a 
href="#x138-264008r639">*query-io*</a>, но это необязательно.
</div>
<div class=defun>
<!--l. 148--><p class="noindent" ><i>[Variable]</i><a 
 id="dx138-264011"></a><a 
 id="x138-264012r641"></a><b> *terminal-io*</b>
<!--l. 150--><p class="noindent" >The value of <a 
href="#x138-264012r641">*terminal-io*</a> is ordinarily the stream that connects to the user&#x2019;s
console. Typically, writing to this stream would cause the output to appear on a
display screen, for example, and reading from the stream would accept input from
a keyboard.
<!--l. 157--><p class="indent" >   It is intended that standard input functions such as <a 
href="clmse116.html#x143-281003r696">read</a> and <a 
href="clmse116.html#x143-281015r701">read-char</a>, when
used with this stream, would cause “echoing” of the input into the output side of
the stream. (The means by which this is accomplished are of course highly
implementation-dependent.)
<!--l. 163--><p class="indent" >   Значение <a 
href="#x138-264012r641">*terminal-io*</a> является потоком, который соединен с
пользовательской консолью. Обычно, запись в этот поток выводит данные на
экран, например, а чтение из потока осуществляет чтение ввода с
клавиатуры.
<!--l. 167--><p class="indent" >   Когда стандартные функции, такие как <a 
href="clmse116.html#x143-281003r696">read</a> и <a 
href="clmse116.html#x143-281015r701">read-char</a> используются с
этим потоком, то происходит копирование входных данных обратно в поток
или «эхо». (Способ, с помощью которого это происходит, зависит от
реализации.)
</div>
<div class=defun>
<!--l. 172--><p class="noindent" ><i>[Variable]</i><a 
 id="dx138-264013"></a><a 
 id="x138-264014r642"></a><b> *trace-output*</b>
<!--l. 174--><p class="noindent" >The value of <a 
href="#x138-264014r642">*trace-output*</a> is the stream on which the <a 
href="clmse129.html#x159-326002r809">trace</a> function prints its
output.
<!--l. 178--><p class="indent" >   Значение <a 
href="#x138-264014r642">*trace-output*</a> является потоком, в который функция <a 
href="clmse129.html#x159-326002r809">trace</a>
выводит информацию.
</div>
<!--l. 182--><p class="indent" >   The variables <a 
href="#x138-264002r636">*standard-input*</a>, <a 
href="#x138-264004r637">*standard-output*</a>, <a 
href="#x138-264006r638">*error-output*</a>,
<a 
href="#x138-264014r642">*trace-output*</a>, <a 
href="#x138-264008r639">*query-io*</a>, and <a 
href="#x138-264010r640">*debug-io*</a> are initially bound to synonym
streams that pass all operations on to the stream that is the value of
<a 
href="#x138-264012r641">*terminal-io*</a>. (See <a 
href="clmse113.html#x139-265002r643">make-synonym-stream</a>.) Thus any operations performed on
those streams will go to the terminal.
<!--l. 192--><p class="indent" >   Переменные <a 
href="#x138-264002r636">*standard-input*</a>, <a 
href="#x138-264004r637">*standard-output*</a>, <a 
href="#x138-264006r638">*error-output*</a>,
<a 
href="#x138-264014r642">*trace-output*</a>, <a 
href="#x138-264008r639">*query-io*</a> и <a 
href="#x138-264010r640">*debug-io*</a> первоначально связаны с
                                                                          

                                                                          
потоками-синонимами, которые направляют все операции в поток
<a 
href="#x138-264012r641">*terminal-io*</a>. (Смотрите <a 
href="clmse113.html#x139-265002r643">make-synonym-stream</a>.) Таким образом все
проделанные операции на этих потоках отобразятся на терминале.
<div class=new>
<!--l. 202--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx138-264015"></a>to replace the requirements of the preceding
paragraph with the following new requirements:
<!--l. 207--><p class="indent" >   The seven standard stream variables, <a 
href="#x138-264002r636">*standard-input*</a>, <a 
href="#x138-264004r637">*standard-output*</a>,
<a 
href="#x138-264008r639">*query-io*</a>, <a 
href="#x138-264010r640">*debug-io*</a>, <a 
href="#x138-264012r641">*terminal-io*</a>, <a 
href="#x138-264006r638">*error-output*</a>, and <a 
href="#x138-264014r642">*trace-output*</a>, are
initially bound to open streams. (These will be called <i>the standard initial
streams</i>.)
<!--l. 215--><p class="indent" >   The streams that are the initial values of <a 
href="#x138-264002r636">*standard-input*</a>, <a 
href="#x138-264008r639">*query-io*</a>,
<a 
href="#x138-264010r640">*debug-io*</a>, and <a 
href="#x138-264012r641">*terminal-io*</a> must support input.
<!--l. 219--><p class="indent" >   The streams that are the initial values of <a 
href="#x138-264004r637">*standard-output*</a>, <a 
href="#x138-264006r638">*error-output*</a>,
<a 
href="#x138-264014r642">*trace-output*</a>, <a 
href="#x138-264008r639">*query-io*</a>, <a 
href="#x138-264010r640">*debug-io*</a>, and <a 
href="#x138-264012r641">*terminal-io*</a> must support
output.
<!--l. 225--><p class="indent" >   None of the standard initial streams (including the one to which <a 
href="#x138-264012r641">*terminal-io*</a>
is initially bound) may be a synonym, either directly or indirectly, for any of the
standard stream variables except <a 
href="#x138-264012r641">*terminal-io*</a>. For example, the initial value of
<a 
href="#x138-264014r642">*trace-output*</a> may be a synonym stream for <a 
href="#x138-264012r641">*terminal-io*</a> but not a synonym
stream for <a 
href="#x138-264004r637">*standard-output*</a> or <a 
href="#x138-264008r639">*query-io*</a>. (These are examples of direct
synonyms.) As another example, <a 
href="#x138-264008r639">*query-io*</a> may be a two-way stream or echo
stream whose input component is a synonym for <a 
href="#x138-264012r641">*terminal-io*</a>, but its input
component may not be a synonym for <a 
href="#x138-264002r636">*standard-input*</a> or <a 
href="#x138-264010r640">*debug-io*</a>. (These are
examples of indirect synonyms.)
<!--l. 237--><p class="indent" >   Any or all of the standard initial streams may be direct or indirect
synonyms for one or more common implementation-dependent streams. For
example, the standard initial streams might all be synonym streams (or
two-way or echo streams whose components are synonym streams) to
a pair of hidden terminal input and output streams maintained by the
implementation.
<!--l. 244--><p class="indent" >   Part of the intent of these rules is to ensure that it is always safe to bind any
standard stream variable to the value of any other standard stream variable
(that is, unworkable circularities are avoided) without unduly restricting
implementation ﬂexibility.
</div>
<!--l. 250--><p class="indent" >   No user program should ever change the value of <a 
href="#x138-264012r641">*terminal-io*</a>. A program
that wants (for example) to divert output to a ﬁle should do so by binding the
value of <a 
href="#x138-264004r637">*standard-output*</a>; that way error messages sent to <a 
href="#x138-264006r638">*error-output*</a> can
                                                                          

                                                                          
still get to the user by going through <a 
href="#x138-264012r641">*terminal-io*</a>, which is usually what is
desired.
<!--l. 256--><p class="indent" >   Пользовательская программа не должна изменять значение <a 
href="#x138-264012r641">*terminal-io*</a>.
Программа, которая, например, хочет перенаправить вывод в файл, должна
изменить значение переменной <a 
href="#x138-264004r637">*standard-output*</a>. В таком случае, сообщения
об ошибках будут продолжать посылаться в <a 
href="#x138-264006r638">*error-output*</a>, а следовательно в
<a 
href="#x138-264012r641">*terminal-io*</a>, и пользователи сможет их увидеть.
                                                                          

                                                                          
   <!--l. 262--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse113.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch21.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch21.html#tailclmch21.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse112.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch21.html#clmse112.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 262--><p class="indent" >   <a 
 id="tailclmse112.html"></a>  
</body></html> 
