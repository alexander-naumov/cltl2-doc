<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Determining the Type of an Object Определение типа объекта</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-02-20 00:42:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1523--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse27.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html#tailclmse25.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse26.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch4.html#clmse26.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">4.9   </span> <a 
 id="x35-530004.9"></a>Determining the Type of an Object Определение типа объекта</h3>
<!--l. 1525--><p class="noindent" >The following function may be used to obtain a type speciﬁer describing the type
of a given object.
<!--l. 1528--><p class="indent" >   Следующие функции могут быть использованы для получения
спецификатора, обозначающего тип заданного объекта.
<div class=defun>
<!--l. 1531--><p class="noindent" > <i>[Function]</i>   <b>type-of</b> <a 
 id="dx35-53001"></a><a 
 id="x35-53002r9"></a>   <i>object</i>
<!--l. 1533--><p class="noindent" ><div class=obsolete> <i>(type-of <i>object</i>)</i> returns an implementation-dependent result: some <i>type</i> of which
the <i>object</i> is a member. Implementors are encouraged to arrange for <i>type-of </i> to
return the most speciﬁc type that can be conveniently computed and is
likely to be useful to the user. If the argument is a user-deﬁned named
structure created by <i>defstruct</i>, then <i>type-of </i> will return the type name of that
structure. Because the result is implementation-dependent, it is usually
better to use <i>type-of </i> primarily for debugging purposes; however, in a few
situations portable code requires the use of <i>type-of </i>, such as when the result
is to be given to the <i>coerce</i> or <i>map</i> function. On the other hand, often
the <i>typep</i> function or the <i>typecase</i> construct is more appropriate than
<i>type-of </i>.
</div>
<div class=incompatibility>
<!--l. 1555--><p class="noindent" ><b>Compatibility note:</b> In MacLisp the function <i>type-of </i> is called <i>typep</i>, and anomalously
so, for it is not a predicate.
</div>
<div class=new>
<!--l. 1562--><p class="indent" >   Many have observed (and rightly so) that this speciﬁcation is totally wimpy
and therefore nearly useless. X3J13 voted in June 1989 ⟨<b>?</b>⟩ to place the following
constraints on <i>type-of </i>:
      <ul class="itemize1">
      <li class="itemize">Let <i>x</i> be an object such that <i>(typep <i>x</i> <i>type</i>)</i> is true and <i>type</i> is one of
      the following:
                                                                          

                                                                          
      <div class="flushleft" 
>
<!--l. 1572--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >array            </td><td align="left" >ﬂoat          </td><td align="left" >package          </td><td align="left" >sequence   </td>
</tr><tr><td align="left" >bit-vector      </td><td align="left" >function     </td><td align="left" >pathname        </td><td align="left" >short-ﬂoat </td>
</tr><tr><td align="left" >character       </td><td align="left" >hash-table  </td><td align="left" >random-state  </td><td align="left" >single-ﬂoat</td>
</tr><tr><td align="left" >complex        </td><td align="left" >integer       </td><td align="left" >ratio              </td><td align="left" >stream     </td>
</tr><tr><td align="left" >condition       </td><td align="left" >long-ﬂoat  </td><td align="left" >rational          </td><td align="left" >string       </td>
</tr><tr><td align="left" >cons             </td><td align="left" >null           </td><td align="left" >readtable        </td><td align="left" >symbol     </td>
</tr><tr><td align="left" >double-ﬂoat  </td><td align="left" >number      </td><td align="left" >restart            </td><td align="left" >vector      </td></tr></table>
</div></div>
      <!--l. 1585--><p class="noindent" >Then <i>(subtypep (type-of <i>x</i>) <i>type</i>))</i> must return the values <i>t</i> and <i>t</i>; that is,
      <i>type-of </i> applied to <i>x</i> must return either <i>type</i> itself or a subtype of <i>type</i> that
      <i>subtypep</i> can recognize in that implementation.
      </li>
      <li class="itemize">Пусть <i>x</i> является объектом, и <i>(typep <i>x</i> <i>тип</i>)</i> вычисляется в true и <i>тип</i>
      один из:
      <div class="flushleft" 
>
<!--l. 1595--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >array            </td><td align="left" >ﬂoat          </td><td align="left" >package          </td><td align="left" >sequence   </td>
</tr><tr><td align="left" >bit-vector      </td><td align="left" >function     </td><td align="left" >pathname        </td><td align="left" >short-ﬂoat </td>
</tr><tr><td align="left" >character       </td><td align="left" >hash-table  </td><td align="left" >random-state  </td><td align="left" >single-ﬂoat</td>
</tr><tr><td align="left" >complex        </td><td align="left" >integer       </td><td align="left" >ratio              </td><td align="left" >stream     </td>
</tr><tr><td align="left" >condition       </td><td align="left" >long-ﬂoat  </td><td align="left" >rational          </td><td align="left" >string       </td>
</tr><tr><td align="left" >cons             </td><td align="left" >null           </td><td align="left" >readtable        </td><td align="left" >symbol     </td>
</tr><tr><td align="left" >double-ﬂoat  </td><td align="left" >number      </td><td align="left" >restart            </td><td align="left" >vector      </td></tr></table>
</div></div>
      </li>
      <li class="itemize">For any object <i>x</i>, <i>(subtypep (type-of <i>x</i>) (class-of <i>x</i>))</i> must produce the values
      <i>t</i> and <i>t</i>.
      </li>
      <li class="itemize">Для любого объекта <i>x</i>, <i>(subtypep (type-of <i>x</i>) (class-of <i>x</i>))</i> должно
      предоставить значения <i>t</i> и <i>t</i>.
      </li>
      <li class="itemize">For every object <i>x</i>, <i>(typep <i>x</i> (type-of <i>x</i>))</i> must be true. (This implies that
      <i>type-of </i> can never return <i>nil</i>, for no object is of type <i>nil</i>.)
                                                                          

                                                                          
      </li>
      <li class="itemize">Для каждого объекта <i>x</i>, <i>(typep <i>x</i> (type-of <i>x</i>))</i> должно быть true. (Это
      означает, что <i>type-of </i> никогда не может вернуть <i>nil</i>, для объектов, не
      являющихся <i>nil</i>.)
      </li>
      <li class="itemize"><i>type-of </i> never returns <i>t</i> and never uses a <i>satisﬁes</i>, <i>and</i>, <i>or</i>, <i>not</i>, or <i>values</i>
      type speciﬁer in its result.
      </li>
      <li class="itemize"><i>type-of </i> никогда не возвращает <i>t</i> и никогда не использует
      спецификаторы типа <i>satisﬁes</i>, <i>and</i>, <i>or</i>, <i>not</i> или <i>values</i> в качестве
      результата.
      </li>
      <li class="itemize">For objects of CLOS metaclass <i>structure-class</i> or of <i>standard-class</i>, <i>type-of </i>
      returns the proper name of the class returned by <i>class-of </i> if it has a
      proper name, and otherwise returns the class itself. In particular, for
      any object created by a <i>defstruct</i> constructor function, where the
      <i>defstruct</i> had the name <i>name</i> and no <i>:type</i> option, <i>type-of </i> will return
      <i>name</i>.
      </li>
      <li class="itemize">Для объектов CLOS метакласса <i>structure-class</i> или <i>standard-class</i>,
      <i>type-of </i> возвращает имя класса, получаемое с помощью <i>class-of </i>, если оно
      имеется, в противном случае возвращается сам класс. В частности, для
      любого объекта созданного с помощью <i>defstruct</i> функции-конструктора,
      и <i>defstruct</i> имело имя <i>name</i> и не имело опции <i>:type</i>, <i>type-of </i> вернет
      <i>name</i>.
      </li></ul>
<!--l. 1656--><p class="indent" >   As an example, <i>(type-of &#x0022;acetylcholinesterase&#x0022;)</i> may return <i>string</i> or
<i>simple-string</i> or <i>(simple-string  20)</i>, but not <i>array</i> or <i>simple-vector</i>. As another
example, it is permitted for <i>(type-of 1729)</i> to return <i>integer</i> or <i>ﬁxnum</i>
(if it is indeed a ﬁxnum) or <i>(signed-byte 16)</i> or <i>(integer 1729 1729)</i> or
<i>(integer 1685 1750)</i> or even <i>(mod 1730)</i>, but not <i>rational</i> or <i>number</i>,
because
<!--l. 1666--><p class="indent" >   В качестве примера, <i>(type-of &#x0022;acetylcholinesterase&#x0022;)</i> может вернуть <i>string</i>
или <i>simple-string</i> или <i>(simple-string  20)</i>, но не <i>array</i> или <i>simple-vector</i>. Другой
                                                                          

                                                                          
пример, <i>(type-of 1729)</i> может вернуть <i>integer</i> или <i>ﬁxnum</i> или <i>(signed-byte 16)</i>
или <i>(integer 1729 1729)</i> или <i>(integer 1685 1750)</i> или даже <i>(mod 1730)</i>, но не
<i>rational</i> или <i>number</i>, потому что <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typep (+ (expt 9 3) (expt 10 3)) &#x2019;integer)
</td></tr></table>
<!--l. 1674--><p class="indent" >
</div>
</div>
<!--l. 1675--><p class="noindent" >is true, <i>integer</i> is in the list of types mentioned above, and
<!--l. 1677--><p class="indent" >   является true, <i>integer</i> содержится в списке упомянутом выше, и <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(subtypep (type-of (+ (expt 1 3) (expt 12 3))) &#x2019;integer)
</td></tr></table>
<!--l. 1680--><p class="indent" >
</div>
</div>
<!--l. 1681--><p class="noindent" >would be false if <i>type-of </i> were to return <i>rational</i> or <i>number</i>.
<!--l. 1683--><p class="indent" >   будет false, если <i>type-of </i> вернет <i>rational</i> или <i>number</i>.
</div>
</div>
<div class=new>
                                                                          

                                                                          
   <!--l. 1691--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse27.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html#tailclmse25.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse26.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch4.html#clmse26.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 1691--><p class="indent" >   <a 
 id="tailclmse26.html"></a>  
</body></html> 
