<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Determining the Type of an Object Определение типа объекта</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-11 14:56:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1523--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse27.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html#tailclmse25.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse26.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch4.html#clmse26.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">4.9   </span> <a 
 id="x35-560004.9"></a>Determining the Type of an Object Определение типа объекта</h3>
<!--l. 1525--><p class="noindent" >The following function may be used to obtain a type speciﬁer describing the type
of a given object.
<!--l. 1528--><p class="indent" >   Следующие функции могут быть использованы для получения
спецификатора, обозначающего тип заданного объекта.
<div class=defun>
<!--l. 1531--><p class="noindent" ><i>[Function]</i><a 
 id="dx35-56001"></a><a 
 id="x35-56002r8"></a><b> type-of</b>  <i>object</i>
<!--l. 1533--><p class="noindent" ><div class=obsolete> (type-of <i>object</i>) returns an implementation-dependent result: some <i>type</i> of which
the <i>object</i> is a member. Implementors are encouraged to arrange for <a 
href="#x35-56002r8">type-of</a> to
return the most speciﬁc type that can be conveniently computed and is
likely to be useful to the user. If the argument is a user-deﬁned named
structure created by <a 
href="clmse104.html#x128-250002r619">defstruct</a>, then <a 
href="#x35-56002r8">type-of</a> will return the type name of that
structure. Because the result is implementation-dependent, it is usually
better to use <a 
href="#x35-56002r8">type-of</a> primarily for debugging purposes; however, in a few
situations portable code requires the use of <a 
href="#x35-56002r8">type-of</a>, such as when the result
is to be given to the <a 
href="clmse25.html#x34-55002r7">coerce</a> or <a 
href="clmse82.html#x101-219005r407">map</a> function. On the other hand, often
the <a 
href="clmse32.html#x43-79002r21">typep</a> function or the <a 
href="clmse40.html#x52-122002r102">typecase</a> construct is more appropriate than
<a 
href="#x35-56002r8">type-of</a>.
</div>
<div class=incompatibility>
<!--l. 1555--><p class="noindent" ><b>Compatibility note:</b> In MacLisp the function <a 
href="#x35-56002r8">type-of</a> is called <a 
href="clmse32.html#x43-79002r21">typep</a>, and anomalously
so, for it is not a predicate.
</div>
<div class=new>
<!--l. 1562--><p class="indent" >   Many have observed (and rightly so) that this speciﬁcation is totally wimpy
and therefore nearly useless. X3J13 voted in June 1989 <a 
 id="dx35-56003"></a>to place the following
constraints on <a 
href="#x35-56002r8">type-of</a>:
      <ul class="itemize1">
      <li class="itemize">Let <i>x</i> be an object such that (typep <i>x</i> <i>type</i>) is true and <i>type</i> is one of
      the following:
                                                                          

                                                                          
      <div class="flushleft" 
>
<!--l. 1572--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >array            </td><td align="left" >ﬂoat          </td><td align="left" >package          </td><td align="left" >sequence   </td>
</tr><tr><td align="left" >bit-vector      </td><td align="left" >function     </td><td align="left" >pathname        </td><td align="left" >short-ﬂoat </td>
</tr><tr><td align="left" >character       </td><td align="left" >hash-table  </td><td align="left" >random-state  </td><td align="left" >single-ﬂoat</td>
</tr><tr><td align="left" >complex        </td><td align="left" >integer       </td><td align="left" >ratio              </td><td align="left" >stream     </td>
</tr><tr><td align="left" >condition       </td><td align="left" >long-ﬂoat  </td><td align="left" >rational          </td><td align="left" >string       </td>
</tr><tr><td align="left" >cons             </td><td align="left" >null           </td><td align="left" >readtable        </td><td align="left" >symbol     </td>
</tr><tr><td align="left" >double-ﬂoat  </td><td align="left" >number      </td><td align="left" >restart            </td><td align="left" >vector      </td></tr></table>
</div></div>
      <!--l. 1585--><p class="noindent" >Then (subtypep (type-of <i>x</i>) <i>type</i>)) must return the values <a 
href="clmse31.html#x42-77004r20">t</a> and <a 
href="clmse31.html#x42-77004r20">t</a>; that is,
      <a 
href="#x35-56002r8">type-of</a> applied to <i>x</i> must return either <i>type</i> itself or a subtype of <i>type</i> that
      <a 
href="clmse32.html#x43-79005r22">subtypep</a> can recognize in that implementation.
      </li>
      <li class="itemize">Пусть <i>x</i> является объектом, и (typep <i>x</i> <i>тип</i>) вычисляется в true, и <i>тип</i>
      один из:
      <div class="flushleft" 
>
<!--l. 1595--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >array            </td><td align="left" >ﬂoat          </td><td align="left" >package          </td><td align="left" >sequence   </td>
</tr><tr><td align="left" >bit-vector      </td><td align="left" >function     </td><td align="left" >pathname        </td><td align="left" >short-ﬂoat </td>
</tr><tr><td align="left" >character       </td><td align="left" >hash-table  </td><td align="left" >random-state  </td><td align="left" >single-ﬂoat</td>
</tr><tr><td align="left" >complex        </td><td align="left" >integer       </td><td align="left" >ratio              </td><td align="left" >stream     </td>
</tr><tr><td align="left" >condition       </td><td align="left" >long-ﬂoat  </td><td align="left" >rational          </td><td align="left" >string       </td>
</tr><tr><td align="left" >cons             </td><td align="left" >null           </td><td align="left" >readtable        </td><td align="left" >symbol     </td>
</tr><tr><td align="left" >double-ﬂoat  </td><td align="left" >number      </td><td align="left" >restart            </td><td align="left" >vector      </td></tr></table>
</div></div>
      </li>
      <li class="itemize">For any object <i>x</i>, (subtypep (type-of <i>x</i>) (class-of <i>x</i>)) must produce the
      values <a 
href="clmse31.html#x42-77004r20">t</a> and <a 
href="clmse31.html#x42-77004r20">t</a>.
      </li>
      <li class="itemize">Для любого объекта <i>x</i>, (subtypep (type-of <i>x</i>) (class-of <i>x</i>)) должно вернуть
      значения <a 
href="clmse31.html#x42-77004r20">t</a> и <a 
href="clmse31.html#x42-77004r20">t</a>.
      </li>
      <li class="itemize">For every object <i>x</i>, (typep <i>x</i> (type-of <i>x</i>)) must be true. (This implies that
      <a 
href="#x35-56002r8">type-of</a> can never return <a 
href="clmse31.html#x42-77002r19">nil</a>, for no object is of type <a 
href="clmse31.html#x42-77002r19">nil</a>.)
                                                                          

                                                                          
      </li>
      <li class="itemize">Для каждого объекта <i>x</i>, (typep <i>x</i> (type-of <i>x</i>)) должно быть true. (Это
      означает, что <a 
href="#x35-56002r8">type-of</a> никогда не может вернуть <a 
href="clmse31.html#x42-77002r19">nil</a>, так как нет
      объектов принадлежащий типу <a 
href="clmse31.html#x42-77002r19">nil</a>.)
      </li>
      <li class="itemize"><a 
href="#x35-56002r8">type-of</a> never returns <a 
href="clmse31.html#x42-77004r20">t</a> and never uses a satisﬁes, <a 
href="clmse34.html#x45-82004r51">and</a>, <a 
href="clmse34.html#x45-83002r52">or</a>, <a 
href="clmse34.html#x45-82002r50">not</a>, or <a 
href="clmse44.html#x56-144002r123">values</a> type
      speciﬁer in its result.
      </li>
      <li class="itemize"><a 
href="#x35-56002r8">type-of</a> никогда не возвращает <a 
href="clmse31.html#x42-77004r20">t</a> и никогда не использует
      спецификаторы типа satisﬁes, <a 
href="clmse34.html#x45-82004r51">and</a>, <a 
href="clmse34.html#x45-83002r52">or</a>, <a 
href="clmse34.html#x45-82002r50">not</a> или <a 
href="clmse44.html#x56-144002r123">values</a> в качестве
      результата.
      </li>
      <li class="itemize">For objects of CLOS metaclass structure-class or of standard-class, <a 
href="#x35-56002r8">type-of</a>
      returns the proper name of the class returned by <a 
href="clmse151.html#x184-437018r918">class-of</a> if it has a
      proper name, and otherwise returns the class itself. In particular, for
      any object created by a <a 
href="clmse104.html#x128-250002r619">defstruct</a> constructor function, where the
      <a 
href="clmse104.html#x128-250002r619">defstruct</a> had the name <i>name</i> and no :type option, <a 
href="#x35-56002r8">type-of</a> will return
      <i>name</i>.
      </li>
      <li class="itemize">Для объектов CLOS метакласса structure-class или standard-class, <a 
href="#x35-56002r8">type-of</a>
      возвращает имя класса, получаемое с помощью <a 
href="clmse151.html#x184-437018r918">class-of</a>, если оно
      имеется, в противном случае возвращается сам класс. В частности, для
      любого объекта созданного с помощью <a 
href="clmse104.html#x128-250002r619">defstruct</a> функции-конструктора,
      и <a 
href="clmse104.html#x128-250002r619">defstruct</a> имело имя <i>name</i> и не имело опции :type, <a 
href="#x35-56002r8">type-of</a> вернет
      <i>name</i>.
      </li></ul>
<!--l. 1656--><p class="indent" >   As an example, (type-of &#x0022;acetylcholinesterase&#x0022;) may return <a 
href="clmse102.html#x125-247028r618">string</a> or
simple-string or (simple-string  20), but not array or simple-vector. As
another example, it is permitted for (type-of 1729) to return integer or
ﬁxnum (if it is indeed a ﬁxnum) or (signed-byte 16) or (integer 1729 1729)
or (integer 1685 1750) or even (mod 1730), but not <a 
href="clmse71.html#x88-206004r252">rational</a> or number,
because
<!--l. 1666--><p class="indent" >   В качестве примера, (type-of &#x0022;acetylcholinesterase&#x0022;) может вернуть <a 
href="clmse102.html#x125-247028r618">string</a>
или simple-string или (simple-string  20), но не array или simple-vector. Другой
                                                                          

                                                                          
пример, (type-of 1729) может вернуть integer или ﬁxnum или (signed-byte 16)
или (integer 1729 1729) или (integer 1685 1750) или даже (mod 1730), но не
<a 
href="clmse71.html#x88-206004r252">rational</a> или number, потому что <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(typep (+ (expt 9 3) (expt 10 3)) &#x2019;integer)
</td></tr></table>
<!--l. 1674--><p class="indent" >
</div>
</div>
<!--l. 1675--><p class="noindent" >is true, integer is in the list of types mentioned above, and
<!--l. 1677--><p class="indent" >   является true, integer содержится в списке упомянутом выше, и <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(subtypep (type-of (+ (expt 1 3) (expt 12 3))) &#x2019;integer)
</td></tr></table>
<!--l. 1680--><p class="indent" >
</div>
</div>
<!--l. 1681--><p class="noindent" >would be false if <a 
href="#x35-56002r8">type-of</a> were to return <a 
href="clmse71.html#x88-206004r252">rational</a> or number.
<!--l. 1683--><p class="indent" >   будет false, если <a 
href="#x35-56002r8">type-of</a> вернет <a 
href="clmse71.html#x88-206004r252">rational</a> или number.
</div>
</div>
<div class=new>
                                                                          

                                                                          
   <!--l. 1691--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse27.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse25.html#tailclmse25.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse26.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch4.html#clmse26.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 1691--><p class="indent" >   <a 
 id="tailclmse26.html"></a>  
</body></html> 
