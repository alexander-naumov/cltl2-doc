<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Строковые символы</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 14:55:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 2125--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse5.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse3.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse3.html#tailclmse3.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse4.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html#clmse4.html" >Наверх</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h3 class="sectionHead"><span class="titlemark">2.2   </span> <a 
href="clm.html#QQ2-11-68" id="x11-620002.2">Строковые
символы</a></h3>
<!--l. 2127--><p class="noindent" >Строковые символы представляют собой объекты данных, принадлежащих
типу <tt>строковый символ (character)</tt>.
<!--l. 2130--><p class="indent" >   Объект строкового символа может быть записан, как знак <tt>#\</tt> и
последующий строковый символ. Например: <tt>#\g</tt> обозначает строковый
символ g в нижнем регистре. Это работает достаточно хорошо для вывода
символов. Невыводимые строковые символы имеют имена, и могут быть
записаны с помощью <tt>#\</tt> и последующего имени; например, <tt>#\Space</tt> (или
<tt>#\SPACE</tt> или <tt>#\space</tt> или <tt>#\sPaCE</tt>) обозначает символ пробела. Синтаксис
для записи имени строкового символа после <tt>#\</tt>, такой же как и для Lisp
символов. Однако в работе могут использоваться только те имена, которые
известны данной реализации.
<!--l. 2141--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.2.1   </span> <a 
href="frontmatter.html#QQ2-11-69" id="x11-630002.2.1">Стандартные строковые символы</a></h4>
<!--l. 2143--><p class="noindent" >Common Lisp определяет множество стандартных символов (подтип
<tt>standard-char</tt>) для двух целей. Common Lisp программы, которые <i>записаны</i>
используя множество стандартных символов, могут быть прочитаны любой
реализацией Common Lisp; и Common Lisp программы, которые <i>используют</i>
только стандартные символы в качестве объектов данных, скорее всего будут
портируемыми. Множество строковых символов Common Lisp состоит
из символа пробела, <tt>#\Space</tt>, символа новой строки <tt>#\Newline</tt>, и
следующих сорока четырёх печатаемых символов и их эквивалентов:
<div class="lisp"><div class="tabbing">
! &#x0022; # $ % &#x0026; &#x2019; ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; &#x003C; = &#x003E; ?
<br>  @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ̂ _<br>
‘ a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~<br>
                                                                          

                                                                          
<!--l. 2156--><p class="noindent" ></div>
<!--l. 2156--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-640002.2.1" id="x11-640002.2.1"></a></span>
<!--l. 2156--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-650002.2.1" id="x11-650002.2.1"></a></span>
</div>
<!--l. 2158--><p class="indent" >   Множество стандартных строковых символов Common Lisp&#x2019;а явно
соответствует множеству из сорока пяти стандартных ASCII печатаемых
символов и символа новой строки. Как бы то ни было, Common Lisp
спроектирован так, чтобы быть независимым от ASCII кодировки символов.
Например, сортировка последовательности не определена, кроме того, что
можно сказать, что цифры могут быть корректно отсортированы, буквы в
верхнем регистре могут быть корректно отсортированы и буквы в нижнем
регистре могут быть корректно отсортированы (смотрите спецификацию
функции <tt><a 
href="symbols.html#x185-2605209r209">char&#x003C;</a></tt>). Другие реализация кодировка строковых символов, в
частности EBCDIC, должна быть легко приспособлена (с необходимым
соответствием выводимых символов).
<!--l. 2169--><p class="indent" >   Из сорока четырёх печатаемых символов, следующие используются с
ограничениями связанными с синтаксисом Common Lisp программ:
<div class="lisp"><div class="tabbing">
[  ]  {  }  ?  !  ̂  _  ~  $  %
   <br>
<!--l. 2173--><p class="noindent" ></div>
<!--l. 2173--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-660002.2.1" id="x11-660002.2.1"></a></span>
<!--l. 2173--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-670002.2.1" id="x11-670002.2.1"></a></span>
</div>
<!--l. 2175--><p class="indent" >   Следующие строковые символы называются <i>слегка стандартизированными</i>:
<div class="lisp"><div class="tabbing">
                                                                          

                                                                          
#\Backspace  #\Tab  #\Linefeed  #\Page  #\Return  #\Rubout
   <br>
<!--l. 2178--><p class="noindent" ></div>
<!--l. 2178--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-680002.2.1" id="x11-680002.2.1"></a></span>
<!--l. 2178--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-690002.2.1" id="x11-690002.2.1"></a></span>
</div>
<!--l. 2180--><p class="indent" >   Не все реализации Common Lisp&#x2019;а нуждаются в поддержке этих
символов; но те реализации, что используют ASCII кодировку должны их
поддерживать, соответственно BS (восьмеричный код 010), HT (011), LF
(012), FF (014), CR (015) и DEL (177). Эти строковые символы не являются
членами подтипа <tt>standard-char</tt>, если не будут созданы синонимы для них.
Например, разработчик реализации может определить <tt>#\Linefeed</tt> или
<tt>#\Return</tt> как синоним для <tt>#\Newline</tt>, или <tt>#\Tab</tt> как синоним для
<tt>#\Space</tt>.
<!--l. 2190--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.2.2   </span> <a 
href="frontmatter.html#QQ2-11-76" id="x11-700002.2.2">Разделители строк</a></h4>
<!--l. 2192--><p class="noindent" >Обработка разделителей строк является одним из самых сложных моментов
в проектировании переносимой программы, преимущественно потому, что
между операционными системами очень мало соглашений по этому поводу.
Некоторые используют только один символ, и рекомендуемый для этого
ASCII символ является символом перевода строки LF (также называемый
символом новой строки, NL), но некоторые системы используют символ
перевода каретки CR. Более широко используется последовательность из
двух символов CR и последующем LF. Часто разделители строк не имеют
выводимого представления, но неявно влияют на структурирование файла в
записи, каждая запись содержит строку текста. Например, дека перфокарт
имеет такую структуру.
<!--l. 2203--><p class="indent" >   Common Lisp предоставляет абстрактный интерфейс, требуя наличия
одного символа <tt>#\Newline</tt>, который являет разделителем строк. (Язык
                                                                          

                                                                          
C имеет подобное требование.) Реализация Common Lisp&#x2019;а должна
транслировать это односимвольное представление разделители в то, что
требуется во внешних системах в данной операционной системе.________<div class="implementation">
<!--l. 2210--><p class="noindent" ><b>Заметка для реализации:</b> How the character called <tt>#\Newline</tt> is represented
internally is not speciﬁed here, but it is strongly suggested that the ASCII LF
character be used in Common Lisp implementations that use the ASCII character
encoding. The ASCII CR character is a workable, but in most cases inferior,
alternative.
</div>___________________________________________________________________________________________________________
<!--l. 2219--><p class="indent" >     Требование того, что разделитель строк должен быть представлен одним
символом, имеет следующие последствия. Строковый объект, записанный в
середине программы и содержащий несколько строк, должен содержать
только один символ для каждого разделителя. Рассмотрим фрагмент
следующего кода: <div class="lisp"><div class="tabbing">
(setq a-string &#x0022;This string
     <br>                                                                                    contains<br>
forty-two characters.&#x0022;)<br>
<!--l. 2227--><p class="noindent" ></div>
<!--l. 2227--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-710002.2.2" id="x11-710002.2.2"></a></span>
<!--l. 2227--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-720002.2.2" id="x11-720002.2.2"></a></span>
</div>
<!--l. 2229--><p class="indent" >     Между <tt>g</tt> and <tt>c</tt> должен быть только один символ, <tt>#\Newline</tt>;
последовательность из двух строковых символов такая, как <tt>#\Return</tt>
и<tt>#\Newline</tt>, некорректна. Такая же ситуация и между <tt>s</tt> и <tt><a 
href="symbols.html#x185-2605351r351">f</a></tt>.
<!--l. 2235--><p class="indent" >     Когда строковый символ <tt>#\Newline</tt> записывается в выходной файл,
реализация Common Lisp&#x2019;а должна предпринять соответствующие действия
для разделения строк. Это может быть реализовано, как трансляция
<tt>#\Newline</tt> в последовательность CR/LF.___________________________________________<div class="implementation">
                                                                          

                                                                          
<!--l. 2241--><p class="noindent" ><b>Заметка для реализации:</b> If an implementation uses the ASCII character encoding,
uses the CR/LF sequence externally to delimit lines, uses LF to represent <tt>#\Newline</tt>
internally, and supports <tt>#\Return</tt> as a data object corresponding to the ASCII character
CR, the question arises as to what action to take when the program writes out
<tt>#\Return</tt> followed by <tt>#\Newline</tt>. It should ﬁrst be noted that <tt>#\Return</tt> is not a
standard Common Lisp character, and the action to be taken when <tt>#\Return</tt> is
written out is therefore not deﬁned by the Common Lisp language. A plausible
approach is to buﬀer the <tt>#\Return</tt> character and suppress it if and only if the
next character is <tt>#\Newline</tt> (the net eﬀect is to generate a CR/LF sequence).
Another plausible approach is simply to ignore the diﬃculty and declare that
writing <tt>#\Return</tt> and then <tt>#\Newline</tt> results in the sequence CR/CR/LF in the
output.
</div>
__________________________________________________________________________
<!--l. 2261--><p class="noindent" >
     <h4 class="subsectionHead"><span class="titlemark">2.2.3   </span> <a 
href="frontmatter.html#QQ2-11-79" id="x11-730002.2.3">Нестандартные символы</a></h4>
<!--l. 2263--><p class="noindent" >Любая реализация может предоставлять дополнительные строковые
символы, и печатаемые и именованные. Некоторые вероятные примеры:
<div class="lisp">
<!--l. 2266--><p class="indent" >     <div class="tabbing">
#\<span class="math">π</span>  #\<span class="math">α</span>  #\Break  #\Home-Up  #\Escape
     <br>
<!--l. 2268--><p class="noindent" ></div>
<!--l. 2268--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-740002.2.3" id="x11-740002.2.3"></a></span>
<!--l. 2268--><p class="noindent" ><span class="paragraphHead"><a 
href="#x11-750002.2.3" id="x11-750002.2.3"></a></span>
</div>
<!--l. 2270--><p class="indent" >     Использование таких символов, может создавать проблемы для
портируемости Common Lisp программы.
                                                                          

                                                                          
<!--l. 2273--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse5.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse3.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse3.html#tailclmse3.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse4.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="dtypes.html#clmse4.html" >Наверх</a><tt>&#x003E;</tt></div><a 
 id="tailclmse4.html"></a>   </div> </div> 
</body></html> 
