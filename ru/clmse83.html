<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Cons-ячейки</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-05-16 17:02:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
   <div id="toplinks"> &lt;<a href="../index.html">Главная</a>&gt; &lt;<a href="symbols.html">Символы</a>&gt; <br />&#x003C;<a 
href="clmse84.html" >Далее</a>&#x003E;&#x003C;<a 
href="list.html" >Назад</a>&#x003E;&#x003C;<a 
href="list.html#taillist.html" >Назад-и-вниз</a>&#x003E;&#x003C;<a 
href="#tailclmse83.html">В-конец</a>&#x003E;&#x003C;<a 
href="list.html#clmse83.html" >Наверх</a>&#x003E;</div><h3 class="sectionHead"><span class="titlemark">15.1
</span> <a 
href="clm.html#QQ2-103-173" id="x103-14300015.1">Cons-ячейки</a></h3>
<!--l. 1328--><p class="noindent" >Ниже представлены несколько основных операций над cons-ячейками. В
данных случаях cons-ячейки рассматриваются как пары, а не компоненты
списка.
<div class="defun">
<div class="defunheader">
<em>
<!--l. 1332--><p class="noindent" >[Функция]</em><a 
 id="dx103-143001"></a> <b>car</b> <i>list</i>
</div>
<!--l. 1334--><p class="indent" >   Функция возвращает <em>car</em> элемент списка <em>list</em>, который должен быть
или <em>cons</em>-ячейкой или (). То есть аргумент должен удовлетворять
предикату <b><a 
href="symbols.html#x188-375540r540">listp</a></b>. По определению <em>car</em> элемент пустого списка является
пустым списком. Если cons-ячейка является первым звеном списке, то
можно сказать, что <b><a 
href="symbols.html#x188-375179r179">car</a></b> возвращает первый элемент списка. Например:
                                                                          

                                                                          
<div class="lisp"><tt><div class="tabbing">
(car &#x2019;(a b c)) <span class="math"> ⇒</span> a
   <br>
<!--l. 1343--><p class="noindent" ></div>
</tt>
</div>
<!--l. 1344--><p class="indent" >   Смотрите <b><a 
href="symbols.html#x188-375412r412">ﬁrst</a></b>.
<em>
<!--l. 1346--><p class="indent" >   car</em> элемент cons-ячейки может быть изменён с помощью <b><a 
href="symbols.html#x188-375813r813">rplaca</a></b> или
<b><a 
href="symbols.html#x188-375833r833">setf</a></b>.
<hr></div>
<div class="defun">
<div class="defunheader">
<em>
<!--l. 1351--><p class="noindent" >[Функция]</em><a 
 id="dx103-143002"></a> <b>cdr</b> <i>list</i>
</div>
<!--l. 1353--><p class="indent" >   Функция возвращает <em>cdr</em> элемент списка <em>list</em>, который должен быть или
<em>cons</em> ячейкой или (). То есть аргумент должен удовлетворять предикату
<b><a 
href="symbols.html#x188-375540r540">listp</a></b>. По определению <em>cdr</em> элемент пустого списка является пустым списком.
Если cons-ячейка является первым звеном списке, то можно сказать, что <b><a 
href="symbols.html#x188-375197r197">cdr</a></b>
возвращает остаток исходного списка без первого элемента. Например:
<div class="lisp"><tt><div class="tabbing">
(cdr &#x2019;(a b c)) <span class="math"> ⇒</span> (b c)
   <br>
<!--l. 1362--><p class="noindent" ></div>
</tt>
</div>
<!--l. 1363--><p class="indent" >   Смотрите <b><a 
href="symbols.html#x188-375800r800">rest</a></b>.
<em>
                                                                          

                                                                          
<!--l. 1365--><p class="indent" >   cdr</em> элемент cons-ячейки может быть изменён с помощью <b><a 
href="symbols.html#x188-375814r814">rplacd</a></b> или
<b><a 
href="symbols.html#x188-375833r833">setf</a></b>.
<hr></div>
<div class="defun">
<div class="defunheader">
<em>
<!--l. 1370--><p class="noindent" >[Функция]</em><a 
 id="dx103-143003"></a> <b>caar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143004"></a> <b>cadr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143005"></a> <b>cdar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143006"></a> <b>cddr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143007"></a> <b>caaar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143008"></a> <b>caadr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143009"></a> <b>cadar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143010"></a> <b>caddr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143011"></a> <b>cdaar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143012"></a> <b>cdadr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143013"></a> <b>cddar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143014"></a> <b>cdddr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143015"></a> <b>caaaar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143016"></a> <b>caaadr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143017"></a> <b>caadar</b> <i>list</i><br />
<em>
                                                                          

                                                                          
[Функция]</em><a 
 id="dx103-143018"></a> <b>caaddr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143019"></a> <b>cadaar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143020"></a> <b>cadadr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143021"></a> <b>caddar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143022"></a> <b>cadddr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143023"></a> <b>cdaaar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143024"></a> <b>cdaadr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143025"></a> <b>cdadar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143026"></a> <b>cdaddr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143027"></a> <b>cddaar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143028"></a> <b>cddadr</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143029"></a> <b>cdddar</b> <i>list</i><br />
<em>
[Функция]</em><a 
 id="dx103-143030"></a> <b>cddddr</b> <i>list</i>
</div>
<!--l. 1399--><p class="indent" >   Все композиции до четырёх <b><a 
href="symbols.html#x188-375179r179">car</a></b> и <b><a 
href="symbols.html#x188-375197r197">cdr</a></b> операций определены как
самостоятельные функции. Их имена начинаются с <b>c</b> и заканчиваются <b>r</b>.
Середина имени содержит последовательность букв <b>a</b> и <b>d</b> в соответствие с
композиций выполняемых этими функциями. Например: <div class="lisp"><tt><div class="tabbing">
(cddadr x) is the same as (cdr (cdr (car (cdr x))))
   <br>
<!--l. 1407--><p class="noindent" ></div>
</tt>
                                                                          

                                                                          
</div>
<!--l. 1408--><p class="indent" >   Если в качестве аргумента указан список, тогда <b><a 
href="symbols.html#x188-375175r175">cadr</a></b> вернёт второй
элемент списка, <b><a 
href="symbols.html#x188-375174r174">caddr</a></b> — третий, и <b><a 
href="symbols.html#x188-375173r173">cadddr</a></b> — четвёртый. Если первый
элемент списка является списком, тогда <b><a 
href="symbols.html#x188-375168r168">caar</a></b> вернёт первый элемент этого
подсписка, <b><a 
href="symbols.html#x188-375189r189">cdar</a></b> — остаток подсписка без первого элемента, <b><a 
href="symbols.html#x188-375171r171">cadar</a></b> — второй
элемент подсписка и так далее.
<!--l. 1414--><p class="indent" >   В целях стиля, предпочтительнее определить функцию или макрос для
доступа к части сложной структуры данных, а не использовать длинные
<b><a 
href="symbols.html#x188-375179r179">car</a></b>/<b><a 
href="symbols.html#x188-375197r197">cdr</a></b> строки. Например, можно определить макрос для получения списка
параметров лямбда-выражения: <div class="lisp"><tt><div class="tabbing">
(defmacro lambda-vars (lambda-exp) ‘(cadr ,lambda-exp))
   <br>
<!--l. 1420--><p class="noindent" ></div>
</tt>
</div>
<!--l. 1421--><p class="indent" >   и затем использовать <b>lambda-vars</b> вместо <b><a 
href="symbols.html#x188-375175r175">cadr</a></b>. Смотрите также
<b><a 
href="symbols.html#x188-375313r313">defstruct</a></b>, которая будет автоматически определять новые типы данных и
функции доступа к частям экземпляров этих структур.
<!--l. 1425--><p class="indent" >   Любая из этих функций может использоваться в связке с <b><a 
href="symbols.html#x188-375833r833">setf</a></b>.
<hr></div>
<div class="defun">
<div class="defunheader">
<em>
<!--l. 1429--><p class="noindent" >[Функция]</em><a 
 id="dx103-143031"></a> <b>cons</b> <i>x</i> <i>y</i>
</div>
<b>
<!--l. 1431--><p class="indent" >   cons</b> является (примитивной) функцией для создания новой <em>cons</em>-ячейки,
у которой <em>car</em> элемент будет <em>x</em>, а <em>cdr</em> элемент — <em>y</em>. Например: <div class="lisp"><tt><div class="tabbing">
(cons &#x2019;a &#x2019;b) <span class="math"> ⇒</span> (a . b)
   <br>                                        (cons &#x2019;a (cons &#x2019;b (cons &#x2019;c &#x2019;()))) <span class="math"> ⇒</span> (a b c)<br>
(cons &#x2019;a &#x2019;(b c d)) <span class="math"> ⇒</span> (a b c d)<br>
                                                                          

                                                                          
<!--l. 1439--><p class="noindent" ></div>
</tt>
</div>
<b>
<!--l. 1440--><p class="indent" >   cons</b> может рассматриваться как для создания <em>cons</em>-ячейки, так и для
добавления нового элемента в начало списка.
<hr></div>
<div class="defun">
<div class="defunheader">
<em>
<!--l. 1445--><p class="noindent" >[Функция]</em><a 
 id="dx103-143032"></a> <b>tree-equal</b> <i>x</i> <i>y</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;key</a></tt> <i>:test</i> <i>:test-not</i>
</div>
<!--l. 1447--><p class="indent" >   Данный предикат истинен, если <em>x</em> и <em>y</em> являются изоморфными деревьями
с идентичными листьями, то есть, если <em>x</em> и <em>y</em> являются атомами, которые
удовлетворяют проверке (по-умолчанию <b><a 
href="symbols.html#x188-375367r367">eql</a></b>), или если они оба являются
cons-ячейками и их <em>car</em> элементы удовлетворяют <b><a 
href="symbols.html#x188-375956r956">tree-equal</a></b> и <em>cdr</em> элементы
удовлетворяют <b><a 
href="symbols.html#x188-375956r956">tree-equal</a></b>. Таким образом <b><a 
href="symbols.html#x188-375956r956">tree-equal</a></b> рекурсивно сравнивает
cons-ячейки (но не любой другой составной объект). Смотрите <b><a 
href="symbols.html#x188-375369r369">equal</a></b>,
который рекурсивно сравнивает другие составные объекты, как например
строки.
<div class="new">
<!--l. 1457--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx103-143033"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-900007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
<hr></div>
                                                                          

                                                                          
<!--l. 1463--><p class="indent" >   <div id="bottomlinks">&#x003C;<a 
href="clmse84.html" >Далее</a>&#x003E;&#x003C;<a 
href="list.html" >Назад</a>&#x003E;&#x003C;<a 
href="list.html#taillist.html" >Назад-и-вниз</a>&#x003E;&#x003C;<a 
href="clmse83.html" >В-начало</a>&#x003E;&#x003C;<a 
href="list.html#clmse83.html" >Наверх</a>&#x003E;<br> &lt;<a href="../index.html">Главная</a>&gt; &lt;<a href="symbols.html">Символы</a>&gt;</div><a 
 id="tailclmse83.html"></a>
 
</body></html> 
