<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Арифметические операции</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 16:17:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 4088--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse68.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse66.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse66.html#tailclmse66.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse67.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="number.html#clmse67.html" >Наверх</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h3 class="sectionHead"><span class="titlemark">12.4   </span> <a 
href="clm.html#QQ2-84-948" id="x84-93900012.4">Арифметические
операции</a></h3>
<!--l. 4090--><p class="noindent" >Каждая из функций в этом разделе в качестве аргументов принимает числа.
Применение какой-либо из них к нечисловому аргументу является ошибкой.
Каждая из них работает со всеми типами чисел, автоматически приводя
типы для различных аргументов, если не указано иное.
<div class="defun">
<!--l. 4095--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx84-939001"></a><a 
 id="x84-939002r200"></a> <b>+</b>  <b>&#x0026;rest</b>  <i>numbers</i>
</div>
<!--l. 4098--><p class="indent" >   Данная функция возвращает сумму всех аргументов. Если аргументов не
было, результатом является <tt>0</tt>.
</div>
<div class="defun">
<!--l. 4102--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx84-939003"></a><a 
 id="x84-939004r201"></a> <b>-</b>  <i>number</i> <b>&#x0026;rest</b>  <i>more-numbers</i>
</div>
<!--l. 4105--><p class="indent" >   Функция <tt><a 
href="symbols.html#x187-2604054r54">-</a></tt> при использовании с одним аргументом возвращает
отрицательное значение для этого аргумента.
<!--l. 4108--><p class="indent" >   Функция <tt><a 
href="symbols.html#x187-2604054r54">-</a></tt> при использовании с более чем одним аргументом вычитает из
первого аргумента все остальные и возвращает результат. Например, <tt>(- 3 4
5)</tt> <span class="math"> ⇒</span> <tt>-6</tt>.
</div>
<div class="defun">
<!--l. 4113--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx84-939005"></a><a 
 id="x84-939006r202"></a> <b>*</b>  <b>&#x0026;rest</b>  <i>numbers</i>
</div>
<!--l. 4116--><p class="indent" >   Функция возвращает произведение всех аргументов. Если вызывается без
аргументов, тогда возвращает <tt>1</tt>.
</div>
<div class="defun">
                                                                          

                                                                          
<!--l. 4120--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx84-939007"></a><a 
 id="x84-939008r203"></a> <b>/</b>  <i>number</i> <b>&#x0026;rest</b>  <i>more-numbers</i>
</div>
<!--l. 4123--><p class="indent" >   Функция <tt><a 
href="symbols.html#x187-2604055r55">/</a></tt> при использовании с более чем одним аргументом производит
деление первого аргумента на все остальные значения и возвращает
полученный результат.
<!--l. 4127--><p class="indent" >   Ноль может использоваться только для первого аргумента.
<!--l. 4129--><p class="indent" >   Для одного аргумента <tt><a 
href="symbols.html#x187-2604055r55">/</a></tt> возвращает обратное значение. В таком случае
ноль в первом аргументе недопустим.
<!--l. 4132--><p class="indent" >   Если математическое отношение двух целых чисел не является целым
числом, <tt><a 
href="symbols.html#x187-2604055r55">/</a></tt> вернёт дробный тип. Например: <div class="lisp"><div class="tabbing">
(/ 12 4) <span class="math"> ⇒</span> 3
   <br>                          (/ 13 4) <span class="math"> ⇒</span> 13/4<br>                          (/ -8) <span class="math"> ⇒</span> -1/8<br>
(/ 3 4 5) <span class="math"> ⇒</span> 3/20<br>
<!--l. 4140--><p class="noindent" ></div>
<!--l. 4140--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94000012.4" id="x84-94000012.4"></a></span>
<!--l. 4140--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94100012.4" id="x84-94100012.4"></a></span>
</div>
<!--l. 4142--><p class="indent" >   Для целочисленного деления используйте одну из функций <tt><a 
href="symbols.html#x187-2604388r388">floor</a></tt>,
<tt><a 
href="symbols.html#x187-2604190r190">ceiling</a></tt>, <tt><a 
href="symbols.html#x187-2604885r885">truncate</a></tt> или <tt><a 
href="symbols.html#x187-2604755r755">round</a></tt>.
<!--l. 4146--><p class="indent" >   Если один из аргументов является числом с плавающей точкой, тогда
применяются правила обработки чисел с плавающей точкой.
</div>
<div class="defun">
<!--l. 4150--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx84-941001"></a><a 
 id="x84-941002r204"></a> <b>1+</b>  <i>number</i><br />
<i>
[Функция]</i><a 
 id="dx84-941003"></a><a 
 id="x84-941004r205"></a> <b>1-</b>  <i>number</i>
</div>
<tt>
                                                                          

                                                                          
<!--l. 4154--><p class="indent" >   (1+ <i>x</i>)</tt> является тем же самым, что <tt>(+ <i>x</i> 1)</tt>. <tt>(1- <i>x</i>)</tt> является тем же
самым, что <tt>(- <i>x</i> 1)</tt>. Следует отметить, что короткое имя может ввести в
заблуждение: <tt>(1- <i>x</i>)</tt> <i>не значит</i> то же, что и <span class="math">1 −<i>x</i></span>._____________________<div class="implementation">
<!--l. 4160--><p class="noindent" ><b>Заметка для реализации:</b> Compiler writers are very strongly encouraged to ensure
that <tt>(1+ x)</tt> and <tt>(+ x 1)</tt> compile into identical code, and similarly for <tt>(1- x)</tt> and
<tt>(- x 1)</tt>, to avoid pressure on a Lisp programmer to write possibly less clear
code for the sake of eﬃciency. This can easily be done as a source-language
transformation.
</div>___________________________________________________________________________________________________________
</div>
<div class="defmac">
<div class="defmacheader">
<!--l. 4171--><p class="indent" >     <div class="tabbing">
  <i>[Макрос]</i> <b>incf</b> <a 
 id="dx84-941005"></a><a 
 id="x84-941006r206"></a> place [delta]
     <br>
<!--l. 4171--><p class="noindent" ></div>
<!--l. 4171--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94200012.4" id="x84-94200012.4"></a></span>
</div>
<div class="defmacheader">
<!--l. 4171--><p class="indent" >     <div class="tabbing">
  <i>[Макрос]</i> <b>decf</b> <a 
 id="dx84-942001"></a><a 
 id="x84-942002r207"></a> place [delta]
     <br>
<!--l. 4173--><p class="noindent" ></div>
<!--l. 4173--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94300012.4" id="x84-94300012.4"></a></span>
</div>
<!--l. 4174--><p class="indent" >     Значение обобщённой переменной <i>place</i> увеличивается (<tt><a 
href="symbols.html#x187-2604441r441">incf</a></tt>) или
уменьшается (<tt><a 
href="symbols.html#x187-2604268r268">decf</a></tt>) на значение формы <i>delta</i> и затем присваивается
переменной <i>place</i>. Результатом формы является присвоенное значение.
Форма <i>place</i> может быть любой формой подходящей для <tt><a 
href="symbols.html#x187-2604776r776">setf</a></tt>. Если
форма <i>delta</i> не указана, тогда число в <i>place</i> изменяется на <tt>1</tt>. Например:
<div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(setq n 0)
   <br>                                              (incf n) <span class="math"> ⇒</span> 1          and now n <span class="math"> ⇒</span> 1<br>
(decf n 3) <span class="math"> ⇒</span> -2      and now n <span class="math"> ⇒</span> -2<br>
(decf n -5) <span class="math"> ⇒</span> 3      and now n <span class="math"> ⇒</span> 3<br> (decf n) <span class="math"> ⇒</span> 2         and now n <span class="math"> ⇒</span> 2<br>
<!--l. 4189--><p class="noindent" ></div>
<!--l. 4189--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94400012.4" id="x84-94400012.4"></a></span>
<!--l. 4189--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94500012.4" id="x84-94500012.4"></a></span>
</div>
<!--l. 4190--><p class="indent" >   Результат <tt>(incf <i>place</i> <i>delta</i>)</tt> примерно эквивалентен <div class="lisp"><div class="tabbing">
(setf <i>place</i> (+ <i>place</i> <i>delta</i>))
   <br>
<!--l. 4193--><p class="noindent" ></div>
<!--l. 4193--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94600012.4" id="x84-94600012.4"></a></span>
<!--l. 4193--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94700012.4" id="x84-94700012.4"></a></span>
</div>
<!--l. 4194--><p class="indent" >   за исключением того, что в последнем случае <i>place</i> вычисляется дважды,
тогда как <tt><a 
href="symbols.html#x187-2604441r441">incf</a></tt> гарантирует, что вычисление <i>place</i> будет выполнено только
один раз. Более того, для некоторых форма <i>place</i> <tt><a 
href="symbols.html#x187-2604441r441">incf</a></tt> может быть
эффективнее чем <tt><a 
href="symbols.html#x187-2604776r776">setf</a></tt>. <div class="newer"> X3J13 voted in March 1988 <a 
 id="dx84-947001"></a>to clarify order of
evaluation (see section <a 
href="clmse36.html#x48-4260007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>).
</div>
</div>
<div class="defun">
                                                                          

                                                                          
<!--l. 4205--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx84-947002"></a><a 
 id="x84-947003r208"></a> <b>conjugate</b>  <i>number</i>
</div>
<!--l. 4208--><p class="indent" >   Функция возвращает комплексное сопряжение с числа <i>number</i>.
Сопряжением некомплексного числа является само число. Для комплексного
числа <tt>z</tt>, <div class="lisp"><div class="tabbing">
(conjugate z) <span class="math"> ≡</span> (complex (realpart z) (- (imagpart z)))
   <br>
<!--l. 4213--><p class="noindent" ></div>
<!--l. 4213--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94800012.4" id="x84-94800012.4"></a></span>
<!--l. 4213--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-94900012.4" id="x84-94900012.4"></a></span>
</div>
<!--l. 4214--><p class="indent" >   Например, <div class="lisp"><div class="tabbing">
(conjugate #C(3/5 4/5)) <span class="math"> ⇒</span> #C(3/5 -4/5)
   <br>                         (conjugate #C(0.0D0 -1.0D0)) <span class="math"> ⇒</span> #C(0.0D0 1.0D0)<br>
(conjugate 3.7) <span class="math"> ⇒</span> 3.7<br>
<!--l. 4219--><p class="noindent" ></div>
<!--l. 4219--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95000012.4" id="x84-95000012.4"></a></span>
<!--l. 4219--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95100012.4" id="x84-95100012.4"></a></span>
</div>
</div>
<div class="defun">
<!--l. 4222--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx84-951001"></a><a 
 id="x84-951002r209"></a> <b>gcd</b>  <b>&#x0026;rest</b>  <i>integers</i>
                                                                          

                                                                          
</div>
<!--l. 4225--><p class="indent" >   Функция возвращает наибольший общий делитель всех аргументов,
которые в свою очередь должны быть целыми числами. Результатом <tt><a 
href="symbols.html#x187-2604404r404">gcd</a></tt>
всегда является неотрицательное целое число. Если передан только один
параметр, то возвращается его абсолютное значение (модуль). Если ни один
параметр не был передан, <tt><a 
href="symbols.html#x187-2604404r404">gcd</a></tt> возвращает <tt>0</tt>. Для трёх и более аргументов,
<div class="lisp"><div class="tabbing">
(gcd <i>a</i> <i>b</i> <i>c</i> ... <i>z</i>) <span class="math"> ≡</span> (gcd (gcd <i>a</i> <i>b</i>) <i>c</i> ... <i>z</i>)
   <br>
<!--l. 4234--><p class="noindent" ></div>
<!--l. 4234--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95200012.4" id="x84-95200012.4"></a></span>
<!--l. 4234--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95300012.4" id="x84-95300012.4"></a></span>
</div>
<!--l. 4236--><p class="indent" >   Несколько примеров использования <tt><a 
href="symbols.html#x187-2604404r404">gcd</a></tt>: <div class="lisp"><div class="tabbing">
(gcd 91 -49) <span class="math"> ⇒</span> 7
   <br>                                                                   (gcd 63 -42 35) <span class="math"> ⇒</span> 7<br>
(gcd 5) <span class="math"> ⇒</span> 5<br>                                                (gcd -4) <span class="math"> ⇒</span> 4<br>
(gcd) <span class="math"> ⇒</span> 0<br>
<!--l. 4243--><p class="noindent" ></div>
<!--l. 4243--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95400012.4" id="x84-95400012.4"></a></span>
<!--l. 4243--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95500012.4" id="x84-95500012.4"></a></span>
</div>
</div>
<div class="defun">
                                                                          

                                                                          
<!--l. 4246--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx84-955001"></a><a 
 id="x84-955002r210"></a> <b>lcm</b>  <i>integer</i> <b>&#x0026;rest</b>  <i>more-integers</i>
</div>
<!--l. 4249--><p class="indent" >   Функция возвращает наименьшее общее кратное для аргументов, которые
в свою очередь должны быть целыми числами. Результатом <tt><a 
href="symbols.html#x187-2604466r466">lcm</a></tt> всегда
является неотрицательное целое число. Для двух аргументов, не являющихся
нулями, <div class="lisp"><div class="tabbing">
(lcm <i>a</i> <i>b</i>) <span class="math"> ≡</span> (/ (abs (* <i>a</i> <i>b</i>)) (gcd <i>a</i> <i>b</i>))
   <br>
<!--l. 4255--><p class="noindent" ></div>
<!--l. 4255--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95600012.4" id="x84-95600012.4"></a></span>
<!--l. 4255--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95700012.4" id="x84-95700012.4"></a></span>
</div>
<!--l. 4256--><p class="indent" >   Если один или оба аргумента является нулём. <div class="lisp"><div class="tabbing">
(lcm <i>a</i> 0) <span class="math"> ≡</span> (lcm 0 <i>a</i>) <span class="math"> ≡</span> 0
   <br>
<!--l. 4259--><p class="noindent" ></div>
<!--l. 4259--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95800012.4" id="x84-95800012.4"></a></span>
<!--l. 4259--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-95900012.4" id="x84-95900012.4"></a></span>
</div>
<!--l. 4261--><p class="indent" >   Для одного аргумента, <tt><a 
href="symbols.html#x187-2604466r466">lcm</a></tt> возвращает абсолютное значение этого
аргумента (модуль). Для трёх и более аргументов, <div class="lisp"><div class="tabbing">
(lcm <i>a</i> <i>b</i> <i>c</i> ... <i>z</i>) <span class="math"> ≡</span> (lcm (lcm <i>a</i> <i>b</i>) <i>c</i> ... <i>z</i>)
   <br>
                                                                          

                                                                          
<!--l. 4266--><p class="noindent" ></div>
<!--l. 4266--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-96000012.4" id="x84-96000012.4"></a></span>
<!--l. 4266--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-96100012.4" id="x84-96100012.4"></a></span>
</div>
<!--l. 4268--><p class="indent" >   Примеры использования: <div class="lisp"><div class="tabbing">
(lcm 14 35) <span class="math"> ⇒</span> 70
   <br>                                                                           (lcm 0 5) <span class="math"> ⇒</span> 0<br>
(lcm 1 2 3 4 5 6) <span class="math"> ⇒</span> 60<br>
<!--l. 4273--><p class="noindent" ></div>
<!--l. 4273--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-96200012.4" id="x84-96200012.4"></a></span>
<!--l. 4273--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-96300012.4" id="x84-96300012.4"></a></span>
</div>
<tt>
<!--l. 4279--><p class="indent" >   <a 
href="symbols.html#x187-2604466r466">lcm</a></tt>, вызванная без аргументов, возвращает <tt>1</tt>. <div class="lisp"><div class="tabbing">
(lcm) <span class="math"> ⇒</span> 1
   <br>
<!--l. 4282--><p class="noindent" ></div>
<!--l. 4282--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-96400012.4" id="x84-96400012.4"></a></span>
<!--l. 4282--><p class="noindent" ><span class="paragraphHead"><a 
href="#x84-96500012.4" id="x84-96500012.4"></a></span>
</div>
</div>
                                                                          

                                                                          
<!--l. 4285--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse68.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse66.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse66.html#tailclmse66.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse67.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="number.html#clmse67.html" >Наверх</a><tt>&#x003E;</tt></div><a 
 id="tailclmse67.html"></a>    </div> </div> 
</body></html> 
