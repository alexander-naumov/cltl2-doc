<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Создание символов</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-20 14:55:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
<!--l. 776--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="xpack.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse55.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse55.html#tailclmse55.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse56.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="symbol.html#clmse56.html" >Наверх</a><tt>&#x003E;</tt>&lt;<a href="../index.html">Main Page</a>&gt;</div><h3 class="sectionHead"><span class="titlemark">10.3   </span> <a 
href="clm.html#QQ2-71-907" id="x71-89800010.3">Создание
символов</a></h3>
<!--l. 778--><p class="noindent" >Символы бывают двух видов. Интернированный символ – это символ,
который может быть задан с помощью имени и каталога (<i>пакета</i>) и
непосредственно имени символа.
<!--l. 782--><p class="indent" >   A request to locate a symbol with that print name results in the same (<tt><a 
href="symbols.html#x185-2605337r337">eq</a></tt>)
symbol. Every time input is read with the function <tt><a 
href="symbols.html#x185-2605717r717">read</a></tt>, and that print name
appears, it is read as the same symbol. This property of symbols makes them
appropriate to use as names for things and as hooks on which to hang permanent
data objects (using the property list, for example).
<!--l. 790--><p class="indent" >   Обращение к символу с некоторым именем возвращает символ, равный <tt><a 
href="symbols.html#x185-2605337r337">eq</a></tt>
необходимому. Каждый раз когда функция <tt><a 
href="symbols.html#x185-2605717r717">read</a></tt> встречает строку
для символа, они находит соотвествующий данной строке символ.
FIXME
<!--l. 794--><p class="indent" >   Интернированные символы обычно создаются автоматически. Во время
первого обращения к символу в системе пакетов (с помощью <tt><a 
href="symbols.html#x185-2605717r717">read</a></tt>,
например), данный символ создаётся автоматически. Для обращения к
интернированному символу используется функция <tt>inter</tt>, или другая с ней
связанная.
<!--l. 800--><p class="indent" >   Несмотря на то, что интернированные символы используются чаще всего,
они не будут больше здесь рассматриваться. Для подробной информации
смотрите главу <a 
href="xpack.html#x72-89900011">11<!--tex4ht:ref: XPACK --></a>.
<i>
<!--l. 804--><p class="indent" >   Дезинтернированный</i> символ является символом, используемым в
качестве объекта данных, без связи с каталогом (он не имеет родительского
пакета). Неинтернированный символ выводится как <tt>#:</tt> с последующим
выводимым именем.
<div class="defun">
<!--l. 808--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx71-898001"></a><a 
 id="x71-898002r152"></a> <b>make-symbol</b>  <i>print-name</i>
</div>
<tt>
                                                                          

                                                                          
<!--l. 811--><p class="indent" >   (make-symbol <i>print-name</i>)</tt> создаёт новый неинтернированный символ, у
которого выводимое имя является строкой <i>print-name</i>. Полученный символ
не имеет значения функции (unbound) и пустой список свойств.
<!--l. 815--><p class="indent" >   Строка, переданная в аргументе, может использоваться сразу, либо
сначала копироваться. Это зависит от реализации. Пользователь не может
полагаться на то, что <tt>(symbol-name (make-symbol x))</tt> равно <tt><a 
href="symbols.html#x185-2605337r337">eq</a></tt> <tt>x</tt>, но и
также не может изменять строку переданную в качестве аргумента для
<tt><a 
href="symbols.html#x185-2605552r552">make-symbol</a></tt>._____________________________________________________________<div class="implementation">
<!--l. 822--><p class="noindent" ><b>Заметка для реализации:</b> Реализация может, например, скопировать строку в
область «только для чтения», полагаясь на то, что строка никогда не будет
изменена.
</div>___________________________________________________________________________________________________________
</div>
<div class="defun">
<!--l. 829--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx71-898003"></a><a 
 id="x71-898004r153"></a> <b>copy-symbol</b>  <i>sym</i> <b>&#x0026;optional</b>  <i>copy-props</i>
</div>
<!--l. 832--><p class="indent" >    Эта функция возвращает новый неинтернированный символ с тем же
выводимым именем, что <i>sym</i>.
<div class="newer">
<!--l. 836--><p class="indent" >     X3J13 voted in March 1989 <a 
 id="dx71-898005"></a>that the print name of the new symbol is
required to be the same only in the sense of <tt><a 
href="symbols.html#x185-2605844r844">string=</a></tt>; in other words, an
implementation is permitted (but not required) to make a copy of the print name.
User programs should not assume that the print names of the old and
new symbols will be <tt><a 
href="symbols.html#x185-2605337r337">eq</a></tt>, although they may happen to be <tt><a 
href="symbols.html#x185-2605337r337">eq</a></tt> in some
implementations.
</div>
<!--l. 845--><p class="indent" >     Если <i>copy-props</i> не-<tt><a 
href="symbols.html#x185-2605609r609">nil</a></tt>, тогда начальное значение и определение функции
нового символа будут те же, что и в переданном <i>sym</i>, а список свойств будет
скопирован из исходного символа.
<!--l. 849--><p class="indent" >     При использовании данной функции копируются cons-ячейки только
верхнего уровня. <div class="newer"> It is as if <tt>(copy-list (symbol-plist <i>sym</i>))</tt> were used as the
property list of the new symbol.
</div>
<!--l. 855--><p class="indent" >     Если <i>copy-props</i> является <tt><a 
href="symbols.html#x185-2605609r609">nil</a></tt> (по-умолчанию), тогда новый символ не
будет связан, не будет иметь определения функции, и список свойств будет
пуст.
                                                                          

                                                                          
</div>
<div class="defun">
<!--l. 859--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx71-898006"></a><a 
 id="x71-898007r154"></a> <b>gensym</b>  <b>&#x0026;optional</b>  <i>x</i>
</div>
<tt>
<!--l. 862--><p class="indent" >   <a 
href="symbols.html#x185-2605408r408">gensym</a></tt> создаёт выводимое имя и создаёт новый символ с этим именем.
Она возвращает новый неинтернированный символ.
<!--l. 865--><p class="indent" >   Созданное имя содержит префикс (по-умолчанию <tt>G</tt>), с последующим
десятичным представлением числа.
<tt>
<!--l. 868--><p class="indent" >   <a 
href="symbols.html#x185-2605408r408">gensym</a></tt> обычно используется для создания символа, который не виден
пользователю, и его имя не имеет важности. Необязательный аргумент
используется нечасто. Имя образовано от «генерация символа», и символы
созданные, таким образом, часто называются «gensyms».
<!--l. 873--><p class="indent" >   Если необходимо, чтобы сгенерированные символы были интернированными
и отличными от существующих символов, тогда удобно использовать
функцию <tt><a 
href="symbols.html#x185-2605409r409">gentemp</a></tt>.
<div class="newer">
<!--l. 877--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx71-898008"></a>to alter the speciﬁcation of <tt><a 
href="symbols.html#x185-2605408r408">gensym</a></tt> so that
supplying an optional argument (whether a string or a number) does <i>not</i> alter the
internal state maintained by <tt><a 
href="symbols.html#x185-2605408r408">gensym</a></tt>. Instead, the internal counter is made
explicitly available as a variable named <tt>*gensym-counter*</tt>.
<!--l. 884--><p class="indent" >   If a string argument is given to <tt><a 
href="symbols.html#x185-2605408r408">gensym</a></tt>, that string is used as the preﬁx;
otherwise “<tt>G</tt>” is used. If a number is provided, its decimal representation is used,
but the internal counter is unaﬀected. X3J13 deprecates the use of a number as an
argument.
</div>
</div>
<div class="defun">
<!--l. 891--><p class="noindent" ><div class="defunheader"> <i>[Переменная]</i><a 
 id="dx71-898009"></a><a 
 id="x71-898010r155"></a> <b>*gensym-counter*</b>
</div>
<!--l. 894--><p class="indent" >   Переменная хранит состояние счётчика для функции <tt><a 
href="symbols.html#x185-2605408r408">gensym</a></tt>. <tt><a 
href="symbols.html#x185-2605408r408">gensym</a></tt>
использует десятичное представление этого значения в качестве части имени
генерируемого символа, а затем наращивает этот счётчик.
                                                                          

                                                                          
<!--l. 898--><p class="indent" >   Первоначальное значение этой переменной зависит от реализации, но
должно быть неотрицательным целым.
<!--l. 901--><p class="indent" >   Пользователь в любое время может присваивать или связывать это
переменную, но значение должно быть неотрицательным целым.
</div>
<div class="defun">
<!--l. 905--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx71-898011"></a><a 
 id="x71-898012r156"></a> <b>gentemp</b>  <b>&#x0026;optional</b>  <i>preﬁx</i> <i>package</i>
</div>
<tt>
<!--l. 908--><p class="indent" >   <a 
href="symbols.html#x185-2605409r409">gentemp</a></tt>, как и <tt><a 
href="symbols.html#x185-2605408r408">gensym</a></tt>, создаёт и возвращает новый символ. <tt><a 
href="symbols.html#x185-2605409r409">gentemp</a></tt>
отличается от <tt><a 
href="symbols.html#x185-2605408r408">gensym</a></tt> в том, что возвращает интернированный символ
(смотрите <tt><a 
href="symbols.html#x185-2605451r451">intern</a></tt>) в пакете <i>package</i> (который по-умолчанию является
текущим, смотрите <tt><a 
href="symbols.html#x185-2605023r23">*package*</a></tt>). <tt><a 
href="symbols.html#x185-2605409r409">gentemp</a></tt> гарантирует, что символ
будет новым, и не существовал ранее в указанном пакете. Она также
использует счётчик, однако если полученный символ уже существует
счётчик наращивается, и действия повторяются, пока не будет найдено
имя ещё не существующего символа. Сбросить счётчик невозможно.
Кроме того, префикс для <tt><a 
href="symbols.html#x185-2605409r409">gentemp</a></tt> не сохраняется между вызовами.
Если аргумент <i>preﬁx</i> опущен, то используется значение по-умолчанию
<tt>T</tt>.
</div>
<div class="defun">
<!--l. 921--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx71-898013"></a><a 
 id="x71-898014r157"></a> <b>symbol-package</b>  <i>sym</i>
</div>
<!--l. 924--><p class="indent" >   Для заданного символа возвращает содержимое ячейки пакета. Результат
может быть объектом пакета или <tt><a 
href="symbols.html#x185-2605609r609">nil</a></tt>.
</div>
<div class="defun">
<!--l. 928--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx71-898015"></a><a 
 id="x71-898016r158"></a> <b>keywordp</b>  <i>object</i>
</div>
<!--l. 931--><p class="indent" >   Аргумент может быть любым Lisp&#x2019;овым объектом. Предикат <tt><a 
href="symbols.html#x185-2605460r460">keywordp</a></tt>
истинен, если аргумент является символом и этот символ является ключевым
(значит, что принадлежит пакету ключевых символов). Ключевые символы —
                                                                          

                                                                          
это символы, которые записываются с двоеточием в начала. Каждый
ключевой символ является константой, в смысле, что выполняются сами в
себя. Смотрите <tt><a 
href="symbols.html#x185-2605251r251">constantp</a></tt>.
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 1561--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="xpack.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse55.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse55.html#tailclmse55.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="symbol.html#clmse56.html" >Наверх</a><tt>&#x003E;</tt></div><a 
 id="tailclmse56.html"></a>  </div> </div> 
</body></html> 
