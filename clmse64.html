<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Arithmetic Operations</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-20 19:35:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 559--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse65.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse63.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse63.html#tailclmse63.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse64.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch12.html#clmse64.html" >Вверх</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">12.4   </span> <a 
href="clm.html#QQ2-81-185" id="x81-17800012.4">Arithmetic Operations</a></h3>
<!--l. 561--><p class="noindent" >Each of the functions in this section requires that its arguments all be numbers; to
call one with a non-number is an error. Unless otherwise speciﬁed, each works on
all types of numbers, automatically performing any required coercions when
arguments are of diﬀerent types.
<div class=defun>
<!--l. 566--><p class="noindent" ><i>[Function]</i><a 
 id="dx81-178001"></a><a 
 id="x81-178002r181"></a><b> +</b>  &#x0026;rest  <i>numbers</i>
<!--l. 568--><p class="noindent" >This returns the sum of the arguments. If there are no arguments, the result is 0,
which is an identity for this operation.
<div class=incompatibility>
<!--l. 573--><p class="noindent" ><b>Compatibility note:</b> While <a 
href="clmse106.html#x131-239002r586">+</a> is compatible with its use in Lisp Machine Lisp, it is
incompatible with MacLisp, which uses <a 
href="clmse106.html#x131-239002r586">+</a> for ﬁxnum-only addition.
</div>
</div>
<div class=defun>
<!--l. 581--><p class="noindent" ><i>[Function]</i><a 
 id="dx81-178003"></a><a 
 id="x81-178004r182"></a><b> -</b>  <i>number</i> &#x0026;rest  <i>more-numbers</i>
<!--l. 583--><p class="noindent" >The function <a 
href="clmse106.html#x131-239008r589">-</a>, when given one argument, returns the negative of that
argument.
<!--l. 587--><p class="indent" >   The function <a 
href="clmse106.html#x131-239008r589">-</a>, when given more than one argument, successively subtracts
from the ﬁrst argument all the others, and returns the result. For example, (- 3 4
5) <span class="math"> ⇒</span> -6.
<div class=incompatibility>
<!--l. 592--><p class="noindent" ><b>Compatibility note:</b> While <a 
href="clmse106.html#x131-239008r589">-</a> is compatible with its use in Lisp Machine Lisp,
it is incompatible with MacLisp, which uses <a 
href="clmse106.html#x131-239008r589">-</a> for ﬁxnum-only subtraction.
Also, <a 
href="clmse106.html#x131-239008r589">-</a> diﬀers from diﬀerence as used in most Lisp systems in the case of one
argument.
</div>
</div>
<div class=defun>
<!--l. 602--><p class="noindent" ><i>[Function]</i><a 
 id="dx81-178005"></a><a 
 id="x81-178006r183"></a><b> *</b>  &#x0026;rest  <i>numbers</i>
<!--l. 604--><p class="noindent" >This returns the product of the arguments. If there are no arguments, the result is
                                                                          

                                                                          
1, which is an identity for this operation.
<div class=incompatibility>
<!--l. 610--><p class="noindent" ><b>Compatibility note:</b> While <a 
href="clmse106.html#x131-239010r590">*</a> is compatible with its use in Lisp Machine Lisp, it is
incompatible with MacLisp, which uses <a 
href="clmse106.html#x131-239010r590">*</a> for ﬁxnum-only multiplication.
</div>
</div>
<div class=defun>
<!--l. 618--><p class="noindent" ><i>[Function]</i><a 
 id="dx81-178007"></a><a 
 id="x81-178008r184"></a><b> /</b>  <i>number</i> &#x0026;rest  <i>more-numbers</i>
<!--l. 620--><p class="noindent" >The function <a 
href="clmse106.html#x131-239016r593">/</a>, when given more than one argument, successively divides the ﬁrst
argument by all the others and returns the result.
<div class=new>
<!--l. 625--><p class="indent" >   It is generally accepted that it is an error for any argument other than the ﬁrst
to be zero.
</div>
<!--l. 629--><p class="indent" >   With one argument, <a 
href="clmse106.html#x131-239016r593">/</a> reciprocates the argument.
<div class=new>
<!--l. 632--><p class="indent" >   It is generally accepted that it is an error in this case for the argument to be
zero.
</div>
<!--l. 636--><p class="indent" >   <a 
href="clmse106.html#x131-239016r593">/</a> will produce a ratio if the mathematical quotient of two integers is not an
exact integer. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ 12 4) <span class="math"> ⇒</span> 3
</td></tr></table>
<!--l. 639--><p class="indent" >                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ 13 4) <span class="math"> ⇒</span> 13/4</td></tr></table>
<!--l. 640--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ -8) <span class="math"> ⇒</span> -1/8</td></tr></table>
<!--l. 641--><p class="indent" >                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ 3 4 5) <span class="math"> ⇒</span> 3/20</td></tr></table>
<!--l. 643--><p class="indent" >
</div>
</div>
<!--l. 644--><p class="noindent" >To divide one integer by another producing an integer result, use one of the functions
<a 
href="clmse66.html#x83-184012r219">ﬂoor</a>, <a 
href="clmse66.html#x83-184014r220">ceiling</a>, <a 
href="clmse66.html#x83-184016r221">truncate</a>, or <a 
href="clmse66.html#x83-184018r222">round</a>.
<!--l. 648--><p class="indent" >   If any argument is a ﬂoating-point number, then the rules of ﬂoating-point
contagion apply.
<div class=incompatibility>
<!--l. 652--><p class="noindent" ><b>Compatibility note:</b> What <a 
href="clmse106.html#x131-239016r593">/</a> does is totally unlike what the usual <a 
href="clmse106.html#x131-239018r594">//</a> or quotient
operator does. In most Lisp systems, quotient behaves like <a 
href="clmse106.html#x131-239016r593">/</a> except when dividing
                                                                          

                                                                          
integers, in which case it behaves like <a 
href="clmse66.html#x83-184016r221">truncate</a> of two arguments; this behavior is
mathematically intractable, leading to such anomalies as <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(quotient 1.0 2.0) <span class="math"> ⇒</span> 0.5 but (quotient 1 2) <span class="math"> ⇒</span> 0
</td></tr></table>
<!--l. 661--><p class="indent" >
</div>
</div>
<!--l. 662--><p class="noindent" >In contrast, the Common Lisp function <a 
href="clmse106.html#x131-239016r593">/</a> produces these results: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ 1.0 2.0) <span class="math"> ⇒</span> 0.5 and (/ 1 2) <span class="math"> ⇒</span> 1/2
</td></tr></table>
<!--l. 665--><p class="indent" >
</div>
</div>
<!--l. 666--><p class="noindent" >In practice quotient is used only when one is sure that both arguments are integers, <i>or</i> when
one is sure that at least one argument is a ﬂoating-point number. <a 
href="clmse106.html#x131-239016r593">/</a> is tractable for its
purpose and works for <i>any</i> numbers.
</div>
</div>
<div class=defun>
<!--l. 674--><p class="noindent" ><i>[Function]</i><a 
 id="dx81-178009"></a><a 
 id="x81-178010r185"></a><b> 1+</b>  <i>number</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx81-178011"></a><a 
 id="x81-178012r186"></a><b> 1-</b>  <i>number</i>
<!--l. 677--><p class="noindent" >(1+ <i>x</i>) is the same as (+ <i>x</i> 1).
<!--l. 680--><p class="indent" >   (1- <i>x</i>) is the same as (- <i>x</i> 1). Note that the short name may be confusing: (1-
<i>x</i>) does <i>not</i> mean <span class="math">1 −<i>x</i></span>; rather, it means <span class="math"><i>x</i> − 1</span>.
<div class=rationale>
<!--l. 685--><p class="noindent" ><b>Rationale:</b> These are included primarily for compatibility with MacLisp and Lisp
Machine Lisp. Some programmers prefer always to write (+ x 1) and (- x 1) instead of
(1+ x) and (1- x).
</div>
<div class=implementation>
<!--l. 691--><p class="noindent" ><b>Implementation note:</b> Compiler writers are very strongly encouraged to ensure that
(1+ x) and (+ x 1) compile into identical code, and similarly for (1- x) and
(- x 1), to avoid pressure on a Lisp programmer to write possibly less clear
code for the sake of eﬃciency. This can easily be done as a source-language
transformation.
                                                                          

                                                                          
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> incf </b><a 
 id="dx81-178013"></a><a 
 id="x81-178014r187"></a> place [delta]
</td></tr></table>
<!--l. 702--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Макрос]</i><b> decf </b><a 
 id="dx81-178015"></a><a 
 id="x81-178016r188"></a> place [delta]</td></tr></table>
<!--l. 704--><p class="indent" >
</div>
<!--l. 704--><p class="noindent" ><span class="paragraphHead"><a 
href="#x81-17900012.4" id="x81-17900012.4"></a></span>
   The number produced by the form <i>delta</i> is added to (<a 
href="#x81-178014r187">incf</a>) or subtracted from
(<a 
href="#x81-178016r188">decf</a>) the number in the generalized variable named by <i>place</i>, and the sum is
stored back into <i>place</i> and returned. The form <i>place</i> may be any form acceptable
as a generalized variable to <a 
href="clmse36.html#x48-90002r64">setf</a>. If <i>delta</i> is not supplied, then the number in <i>place</i>
is changed by 1. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq n 0)
</td></tr></table>
<!--l. 716--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:162;" 
class="tabbing">(incf n) <span class="math"> ⇒</span> 1          </td><td  
class="tabbing">and now n <span class="math"> ⇒</span> 1</td></tr></table>
<!--l. 717--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:162;" 
class="tabbing">(decf n 3) <span class="math"> ⇒</span> -2      </td><td  
class="tabbing">and now n <span class="math"> ⇒</span> -2</td></tr></table>
<!--l. 718--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:162;" 
class="tabbing">(decf n -5) <span class="math"> ⇒</span> 3      </td><td  
class="tabbing">and now n <span class="math"> ⇒</span> 3</td></tr></table>
<!--l. 719--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:162;" 
class="tabbing">(decf n) <span class="math"> ⇒</span> 2         </td><td  
class="tabbing">and now n <span class="math"> ⇒</span> 2</td></tr></table>
<!--l. 721--><p class="indent" >
</div>
</div>
<!--l. 722--><p class="noindent" >The eﬀect of (incf <i>place</i> <i>delta</i>) is roughly equivalent to <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf <i>place</i> (+ <i>place</i> <i>delta</i>))
</td></tr></table>
<!--l. 726--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 727--><p class="noindent" >except that the latter would evaluate any subforms of <i>place</i> twice, whereas <a 
href="#x81-178014r187">incf</a> takes
care to evaluate them only once. Moreover, for certain <i>place</i> forms <a 
href="#x81-178014r187">incf</a> may be
signiﬁcantly more eﬃcient than the <a 
href="clmse36.html#x48-90002r64">setf</a> version. <div class=newer> X3J13 voted in March 1988 <a 
 id="dx81-179001"></a>to
clarify order of evaluation (see section <a 
href="clmse36.html#x48-900007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>).
</div>
</div>
<div class=defun>
<!--l. 737--><p class="noindent" ><i>[Function]</i><a 
 id="dx81-179002"></a><a 
 id="x81-179003r189"></a><b> conjugate</b>  <i>number</i>
<!--l. 739--><p class="noindent" >This returns the complex conjugate of <i>number</i>. The conjugate of a non-complex
number is itself. For a complex number z, <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(conjugate z) <span class="math"> ≡</span> (complex (realpart z) (- (imagpart z)))
</td></tr></table>
<!--l. 744--><p class="indent" >
</div>
</div>
<!--l. 745--><p class="noindent" >For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(conjugate #C(3/5 4/5)) <span class="math"> ⇒</span> #C(3/5 -4/5)
</td></tr></table>
<!--l. 747--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(conjugate #C(0.0D0 -1.0D0)) <span class="math"> ⇒</span> #C(0.0D0 1.0D0)</td></tr></table>
<!--l. 748--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(conjugate 3.7) <span class="math"> ⇒</span> 3.7</td></tr></table>
<!--l. 750--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 753--><p class="noindent" ><i>[Function]</i><a 
 id="dx81-179004"></a><a 
 id="x81-179005r190"></a><b> gcd</b>  &#x0026;rest  <i>integers</i>
<!--l. 755--><p class="noindent" >This returns the greatest common divisor of all the arguments, which must be
integers. The result of <a 
href="#x81-179005r190">gcd</a> is always a non-negative integer. If one argument is
given, its absolute value is returned. If no arguments are given, <a 
href="#x81-179005r190">gcd</a> returns 0,
which is an identity for this operation. For three or more arguments,
<div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd <i>a</i> <i>b</i> <i>c</i> ... <i>z</i>) <span class="math"> ≡</span> (gcd (gcd <i>a</i> <i>b</i>) <i>c</i> ... <i>z</i>)
</td></tr></table>
<!--l. 765--><p class="indent" >
</div>
</div>
<!--l. 767--><p class="indent" >   Here are some examples of the use of <a 
href="#x81-179005r190">gcd</a>: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd 91 -49) <span class="math"> ⇒</span> 7
</td></tr></table>
<!--l. 769--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd 63 -42 35) <span class="math"> ⇒</span> 7</td></tr></table>
<!--l. 770--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd 5) <span class="math"> ⇒</span> 5</td></tr></table>
<!--l. 771--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd -4) <span class="math"> ⇒</span> 4</td></tr></table>
<!--l. 772--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd) <span class="math"> ⇒</span> 0</td></tr></table>
<!--l. 774--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 777--><p class="noindent" ><i>[Function]</i><a 
 id="dx81-179006"></a><a 
 id="x81-179007r191"></a><b> lcm</b>  <i>integer</i> &#x0026;rest  <i>more-integers</i>
<!--l. 779--><p class="noindent" >This returns the least common multiple of its arguments, which must be integers.
The result of <a 
href="#x81-179007r191">lcm</a> is always a non-negative integer. For two arguments that are not
both zero, <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm <i>a</i> <i>b</i>) <span class="math"> ≡</span> (/ (abs (* <i>a</i> <i>b</i>)) (gcd <i>a</i> <i>b</i>))
</td></tr></table>
<!--l. 786--><p class="indent" >
</div>
</div>
<!--l. 787--><p class="noindent" >If one or both arguments are zero, <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm <i>a</i> 0) <span class="math"> ≡</span> (lcm 0 <i>a</i>) <span class="math"> ≡</span> 0
</td></tr></table>
<!--l. 790--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 792--><p class="indent" >   For one argument, <a 
href="#x81-179007r191">lcm</a> returns the absolute value of that argument. For three
or more arguments, <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm <i>a</i> <i>b</i> <i>c</i> ... <i>z</i>) <span class="math"> ≡</span> (lcm (lcm <i>a</i> <i>b</i>) <i>c</i> ... <i>z</i>)
</td></tr></table>
<!--l. 796--><p class="indent" >
</div>
</div>
<!--l. 798--><p class="indent" >   Some examples: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm 14 35) <span class="math"> ⇒</span> 70
</td></tr></table>
<!--l. 800--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm 0 5) <span class="math"> ⇒</span> 0</td></tr></table>
<!--l. 801--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm 1 2 3 4 5 6) <span class="math"> ⇒</span> 60</td></tr></table>
<!--l. 803--><p class="indent" >
</div>
</div>
<!--l. 805--><p class="indent" >   Mathematically, (lcm) should return inﬁnity. Because Common Lisp does not
have a representation for inﬁnity, <a 
href="#x81-179007r191">lcm</a>, unlike <a 
href="#x81-179005r190">gcd</a>, always requires at least one
argument.
<div class=new>
<!--l. 810--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx81-179008"></a>to specify that (lcm) <span class="math"> ⇒</span> 1.
<!--l. 814--><p class="indent" >   This is one of my biggest boners. The identity for <a 
href="#x81-179007r191">lcm</a> is of course 1,
not inﬁnity, and so (lcm) ought to have been deﬁned to return 1. Sorry
about that, though in point of fact very few users have complained to me
that this mistake in the ﬁrst edition has cramped their programming
style.
</div>
</div>
                                                                          

                                                                          
   <!--l. 821--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse65.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse63.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse63.html#tailclmse63.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse64.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch12.html#clmse64.html" >Вверх</a><tt>&#x003E;</tt></p></div>
<!--l. 821--><p class="indent" >   <a 
 id="tailclmse64.html"></a>  
</body></html> 
