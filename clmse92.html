<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Изменение измерений массива</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-12 23:02:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="cltl2ed.css"></head><body 
>
<!--l. 1657--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmch18.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse91.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse91.html#tailclmse91.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse92.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch17.html#clmse92.html" >Наверх</a><tt>&#x003E;</tt></div><h3 class="sectionHead"><span class="titlemark">17.6   </span> <a 
href="clm.html#QQ2-114-227" id="x114-21800017.6">Изменение
измерений массива</a></h3>
<!--l. 1659--><p class="noindent" >Следующие функции могут использоваться для изменения размера
или формы массива. Их опции почти совпадают с опциями функции
<tt><a 
href="clmse87.html#x109-213002r501">make-array</a></tt>.
<div class=defun>
<!--l. 1662--><p class="noindent" ><i>[Функция]</i><a 
 id="dx114-218001"></a><a 
 id="x114-218002r535"></a><b> adjust-array</b>  <i>array</i> <i>new-dimensions</i> &#x0026;key  <i>:element-type</i>
<i>:initial-element</i> <i>:initial-contents</i> <i>:ﬁll-pointer</i> <i>:displaced-to</i> <i>:displaced-index-oﬀset</i>
<!--l. 1664--><p class="noindent" ><tt><a 
href="#x114-218002r535">adjust-array</a></tt> принимает массив и те же аргументы, что и для <tt><a 
href="clmse87.html#x109-213002r501">make-array</a></tt>.
Количество измерений, указанных в <i>new-dimensions</i> должно равняться рангу
массива <i>array</i>.
<tt>
<!--l. 1669--><p class="indent" >   <a 
href="#x114-218002r535">adjust-array</a></tt> возвращает массив такого же типа и ранга, что и массив
<i>array</i>, но с другим измерениями <i>new-dimensions</i>. Фактически, аргумент <i>array</i>
модифицируется в соответствие с новыми указаниями. Но это может быть
достигнуто двумя путями: модификацией массива <i>array</i> или созданием
нового массива и модификацией аргумента <i>array</i> для <i>соединения</i> его с новым
массивом.
<!--l. 1676--><p class="indent" >   В простейшем случае, можно указать только измерения <i>new-dimensions</i> и,
возможно, аргумент <tt>:initial-element</tt>. Не пустые элементы массива <i>array</i>
вставляются в новый массив. Элементы нового массива, которые не были
заполнены значениями из старого массива, получают значение из
<tt>:initial-element</tt>. Если аргумент не был указан, то первоначальное значение
элементов не определено.
<!--l. 1683--><p class="indent" >   Если указан <tt>:element-type</tt>, тогда массив <i>array</i> должен был быть создан с
указанием такого же типа. В противном случае сигнализируется ошибка.
Указание <tt>:element-type</tt> в <tt><a 
href="#x114-218002r535">adjust-array</a></tt> служит только для проверки на
существование ошибки несовпадения типов.
<!--l. 1688--><p class="indent" >   Если указаны <tt>:initial-contents</tt> или <tt>:displaced-to</tt>, тогда они
обрабатываются как для <tt><a 
href="clmse87.html#x109-213002r501">make-array</a></tt>. В таком случае,
<!--l. 1691--><p class="indent" >   Если указан <tt>:fill-pointer</tt>, тогда указатель заполнения массива <i>array</i>
принимает указанное значение. Если массив <i>array</i> не содержал указателя
заполнения сигнализируется ошибка.
                                                                          

                                                                          
<tt>
<!--l. 1695--><p class="indent" >   <a 
href="#x114-218002r535">adjust-array</a></tt> может, в зависимости от реализации и аргументов, просто
изменить исходный массив или создать и вернуть новый. В последнем случае
исходный массив изменяется, а именно <i>соединяется</i> с новым массивом, и
имеет новые измерения.
<!--l. 1700--><p class="indent" >   Если <tt>adjust-array</tt> применяется к массиву <i>array</i>, который соединён с
другим массивом <i>x</i>, тогда ни массив <i>array</i>, ни возвращённый результат не
будет <i>соединены</i> с <i>x</i>, если только такое соединения не задано явно в вызове
<tt><a 
href="#x114-218002r535">adjust-array</a></tt>.
<!--l. 1705--><p class="indent" >   Например, предположим что массив 4-на-4 <tt>m</tt> выглядит так: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">#2A( ( alpha     beta      gamma     delta )
</td></tr></table>
<!--l. 1707--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">     ( epsilon   zeta      eta       theta )</td></tr></table>
<!--l. 1708--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">     ( iota      kappa     lambda    mu    )</td></tr></table>
<!--l. 1709--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">     ( nu        xi        omicron   pi    ) )</td></tr></table>
<!--l. 1711--><p class="indent" >
</div>
</div>
<!--l. 1712--><p class="noindent" >Тогда результат выражения <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(adjust-array m &#x2019;(3 5) :initial-element &#x2019;baz)
</td></tr></table>
<!--l. 1715--><p class="indent" >
</div>
</div>
<!--l. 1716--><p class="noindent" >является массивом 3-на-5 с содержимым <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">#2A( ( alpha     beta      gamma     delta     baz )
</td></tr></table>
<!--l. 1718--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">     ( epsilon   zeta      eta       theta     baz )</td></tr></table>
<!--l. 1719--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">     ( iota      kappa     lambda    mu        baz ) )</td></tr></table>
<!--l. 1721--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 1722--><p class="noindent" >Следует отметить, что если массив <tt>a</tt> создаётся <i>соединённым</i> с массивом <tt>b</tt>
и затем массив <tt>b</tt> передаётся в <tt><a 
href="#x114-218002r535">adjust-array</a></tt>, то массив <tt>a</tt> все ещё
будет <i>соединён</i> с массивом <tt>b</tt>. При этом должны быть приняты во
внимание правила <i>соединения</i> массивов и построчный порядок следования
элементов.
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 441--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmch18.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse91.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse91.html#tailclmse91.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse92.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch17.html#clmse92.html" >Наверх</a><tt>&#x003E;</tt></div><a 
 id="tailclmse92.html"></a>  </div> </div> 
</body></html> 
