<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>The Property List</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-08 00:30:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 51--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse55.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html#tailclmch10.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse54.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html#clmse54.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">10.1   </span> <a 
 id="x69-17600010.1"></a>The Property List</h3>
<!--l. 53--><p class="noindent" >Since its inception, Lisp has associated with each symbol a kind of tabular data
structure called a property list (plist for short). A property list contains zero or
more entries; each entry associates with a key (called the indicator), which is
typically a symbol, an arbitrary Lisp object (called the value or, sometimes, the
property). There are no duplications among the indicators; a property list may
only have one property at a time with a given name. In this way, given a
symbol and an indicator (another symbol), an associated value can be
retrieved.
<!--l. 65--><p class="indent" >   A property list is very similar in purpose to an association list. The
diﬀerence is that a property list is an object with a unique identity; the
operations for adding and removing property-list entries are destructive
operations that alter the property list rather than making a new one.
Association lists, on the other hand, are normally augmented non-destructively
(without side eﬀects) by adding new entries to the front (see <a 
href="clmse91.html#x111-232002r533">acons</a> and
<a 
href="clmse91.html#x111-232004r534">pairlis</a>).
<!--l. 74--><p class="indent" >   A property list is implemented as a memory cell containing a list with an even
number (possibly zero) of elements. (Usually this memory cell is the property-list
cell of a symbol, but any memory cell acceptable to <a 
href="clmse36.html#x48-93002r66">setf</a> can be used if <a 
href="#x69-176010r162">getf</a> and
<a 
href="#x69-176014r163">remf</a> are used.) Each pair of elements in the list constitutes an entry; the ﬁrst
item is the indicator, and the second is the value. Because property-list
functions are given the symbol and not the list itself, modiﬁcations to the
property list can be recorded by storing back into the property-list cell of the
symbol.
<!--l. 85--><p class="indent" >   When a symbol is created, its property list is initially empty. Properties are
created by using <a 
href="#x69-176002r159">get</a> within a <a 
href="clmse36.html#x48-93002r66">setf</a> form.
<!--l. 88--><p class="indent" >   Common Lisp does not use a symbol&#x2019;s property list as extensively as earlier
Lisp implementations did. Less-used data, such as compiler, debugging,
and documentation information, is kept on property lists in Common
Lisp.
<div class=incompatibility>
<!--l. 94--><p class="noindent" ><b>Compatibility note:</b> In older Lisp implementations, the print name, value, and
function deﬁnition of a symbol were kept on its property list. The value cell was
introduced into MacLisp and Interlisp to speed up access to variables; similarly for the
print-name cell and function cell (MacLisp does not use a function cell). Recent Lisp
                                                                          

                                                                          
implementations such as Spice Lisp, Lisp Machine Lisp, and NIL have introduced all of
these cells plus the package cell. None of the MacLisp system property names (expr,
fexpr, macro, array, subr, lsubr, fsubr, and in former times value and pname) exist in
Common Lisp.
<!--l. 109--><p class="indent" >   In Common Lisp, the notion of “disembodied property list” introduced in MacLisp is
eliminated. It tended to be used for rather kludgy things, and in Lisp Machine Lisp is
often associated with the use of locatives (to make it “oﬀ by one” for searching
alternating keyword lists). In Common Lisp special <a 
href="clmse36.html#x48-93002r66">setf</a>-like property-list functions are
introduced: <a 
href="#x69-176010r162">getf</a> and <a 
href="#x69-176014r163">remf</a>.
</div>
<div class=defun>
<!--l. 119--><p class="noindent" ><i>[Function]</i><a 
 id="dx69-176001"></a><a 
 id="x69-176002r159"></a><b> get</b>  <i>symbol</i> <i>indicator</i> &#x0026;optional  <i>default</i>
<!--l. 121--><p class="noindent" ><a 
href="#x69-176002r159">get</a> searches the property list of symbol for an indicator <a 
href="clmse33.html#x44-81002r46">eq</a> to indicator. The ﬁrst
argument must be a symbol. If one is found, then the corresponding value is
returned; otherwise default is returned.
<!--l. 128--><p class="indent" >   If default is not speciﬁed, then <a 
href="clmse31.html#x42-77002r19">nil</a> is used for default.
<!--l. 131--><p class="indent" >   Note that there is no way to distinguish an absent property from one whose
value is default. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(get x y)  ≡ (getf (symbol-plist x) y)
</td></tr></table>
<!--l. 135--><p class="indent" >
</div>
</div>
<!--l. 136--><p class="noindent" >Suppose that the property list of foo is (bar t baz 3 hunoz &#x0022;Huh?&#x0022;). Then, for
example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(get &#x2019;foo &#x2019;baz)  ⇒ 3
</td></tr></table>
<!--l. 139--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(get &#x2019;foo &#x2019;hunoz)  ⇒ &#x0022;Huh?&#x0022;</td></tr></table>
<!--l. 140--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(get &#x2019;foo &#x2019;zoo)  ⇒ <a 
href="clmse31.html#x42-77002r19">nil</a></td></tr></table>
<!--l. 142--><p class="indent" >
</div>
</div>
<div class=incompatibility>
                                                                          

                                                                          
<!--l. 145--><p class="noindent" ><b>Compatibility note:</b> In MacLisp, the ﬁrst argument to <a 
href="#x69-176002r159">get</a> could be a list, in which
case the cdr of the list was treated as a so-called “disembodied property list.” The ﬁrst
argument to <a 
href="#x69-176002r159">get</a> could also be any other object, in which case <a 
href="#x69-176002r159">get</a> would always return
<a 
href="clmse31.html#x42-77002r19">nil</a>. In Common Lisp, it is an error to give anything but a symbol as the ﬁrst argument
to <a 
href="#x69-176002r159">get</a>.
<!--l. 154--><p class="indent" >   What Common Lisp calls <a 
href="#x69-176002r159">get</a>, Interlisp calls getprop.
<!--l. 156--><p class="indent" >   What MacLisp and Interlisp call putprop is accomplished in Common Lisp by using
<a 
href="#x69-176002r159">get</a> with <a 
href="clmse36.html#x48-93002r66">setf</a>.
</div>
<!--l. 162--><p class="indent" >   <a 
href="clmse36.html#x48-93002r66">setf</a> may be used with <a 
href="#x69-176002r159">get</a> to create a new property-value pair, possibly
replacing an old pair with the same property name. For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(get &#x2019;clyde &#x2019;species)  ⇒ <a 
href="clmse31.html#x42-77002r19">nil</a>
</td></tr></table>
<!--l. 166--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf (get &#x2019;clyde &#x2019;species) &#x2019;elephant)  ⇒ elephant</td></tr></table>
<!--l. 167--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">and now (get &#x2019;clyde &#x2019;species)  ⇒ elephant</td></tr></table>
<!--l. 169--><p class="indent" >
</div>
</div>
<!--l. 170--><p class="noindent" >The default argument may be speciﬁed to <a 
href="#x69-176002r159">get</a> in this context; it is ignored by
<a 
href="clmse36.html#x48-93002r66">setf</a> but may be useful in such macros as <a 
href="clmse87.html#x107-225060r503">push</a> that are related to <a 
href="clmse36.html#x48-93002r66">setf</a>: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(push item (get sym &#x2019;token-stack &#x2019;(initial-item)))
</td></tr></table>
<!--l. 175--><p class="indent" >
</div>
</div>
<!--l. 176--><p class="noindent" >means approximately the same as <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf (get sym &#x2019;token-stack &#x2019;(initial-item))
</td></tr></table>
<!--l. 178--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (cons item (get sym &#x2019;token-stack &#x2019;(initial-item))))</td></tr></table>
<!--l. 180--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 181--><p class="noindent" >which in turn would be treated as simply <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf (get sym &#x2019;token-stack)
</td></tr></table>
<!--l. 183--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (cons item (get sym &#x2019;token-stack &#x2019;(initial-item))))</td></tr></table>
<!--l. 185--><p class="indent" >
</div>
</div>
<div class=newer>
<!--l. 188--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx69-176003"></a>to clarify the permissible side eﬀects of
certain operations; (setf (get symbol indicator) newvalue) is required to
behave exactly the same as (setf (getf (symbol-plist symbol) indicator)
newvalue).
</div>
</div>
<div class=defun>
<!--l. 197--><p class="noindent" ><i>[Function]</i><a 
 id="dx69-176004"></a><a 
 id="x69-176005r160"></a><b> remprop</b>  <i>symbol</i> <i>indicator</i>
<!--l. 199--><p class="noindent" >This removes from symbol the property with an indicator <a 
href="clmse33.html#x44-81002r46">eq</a> to indicator. The
property indicator and the corresponding value are removed by destructively
splicing the property list. It returns <a 
href="clmse31.html#x42-77002r19">nil</a> if no such property was found, or non-<a 
href="clmse31.html#x42-77002r19">nil</a> if
a property was found. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(remprop x y)  ≡ (remf (symbol-plist x) y)
</td></tr></table>
<!--l. 207--><p class="indent" >
</div>
</div>
<!--l. 208--><p class="noindent" >For example, if the property list of foo is initially <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(color blue height 6.3 near-to bar)
</td></tr></table>
<!--l. 211--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 212--><p class="noindent" >then the call <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(remprop &#x2019;foo &#x2019;height)
</td></tr></table>
<!--l. 215--><p class="indent" >
</div>
</div>
<!--l. 216--><p class="noindent" >returns a non-<a 
href="clmse31.html#x42-77002r19">nil</a> value after altering foo&#x2019;s property list to be <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(color blue near-to bar)
</td></tr></table>
<!--l. 219--><p class="indent" >
</div>
</div>
<div class=newer>
<!--l. 222--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx69-176006"></a>to clarify the permissible side eﬀects of certain
operations; (remprop symbol indicator) is required to behave exactly the same as
(remf (symbol-plist symbol) indicator).
</div>
</div>
<div class=defun>
<!--l. 230--><p class="noindent" ><i>[Function]</i><a 
 id="dx69-176007"></a><a 
 id="x69-176008r161"></a><b> symbol-plist</b>  <i>symbol</i>
<!--l. 232--><p class="noindent" >This returns the list that contains the property pairs of symbol; the contents of the
property-list cell are extracted and returned.
<!--l. 236--><p class="indent" >   Note that using <a 
href="#x69-176002r159">get</a> on the result of <a 
href="#x69-176008r161">symbol-plist</a> does not work. One must give
the symbol itself to <a 
href="#x69-176002r159">get</a> or else use the function <a 
href="#x69-176010r162">getf</a>.
<!--l. 240--><p class="indent" >   <a 
href="clmse36.html#x48-93002r66">setf</a> may be used with <a 
href="#x69-176008r161">symbol-plist</a> to destructively replace the entire property
list of a symbol. This is a relatively dangerous operation, as it may destroy
important information that the implementation may happen to store in property
lists. Also, care must be taken that the new property list is in fact a list of even
length. <div class=incompatibility>
<!--l. 247--><p class="noindent" ><b>Compatibility note:</b> In MacLisp, this function is called plist; in Interlisp, it is called
getproplist.
                                                                          

                                                                          
</div>
</div>
<div class=defun>
<!--l. 254--><p class="noindent" ><i>[Function]</i><a 
 id="dx69-176009"></a><a 
 id="x69-176010r162"></a><b> getf</b>  <i>place</i> <i>indicator</i> &#x0026;optional  <i>default</i>
<!--l. 256--><p class="noindent" ><a 
href="#x69-176010r162">getf</a> searches the property list stored in place for an indicator <a 
href="clmse33.html#x44-81002r46">eq</a> to indicator. If
one is found, then the corresponding value is returned; otherwise default is
returned. If default is not speciﬁed, then <a 
href="clmse31.html#x42-77002r19">nil</a> is used for default. Note that
there is no way to distinguish an absent property from one whose value is
default. Often place is computed from a generalized variable acceptable to
<a 
href="clmse36.html#x48-93002r66">setf</a>.
<!--l. 267--><p class="indent" >   <a 
href="clmse36.html#x48-93002r66">setf</a> may be used with <a 
href="#x69-176010r162">getf</a>, in which case the place must indeed be acceptable
as a place to <a 
href="clmse36.html#x48-93002r66">setf</a>. The eﬀect is to add a new property-value pair, or update an
existing pair, in the property list kept in the place. The default argument may be
speciﬁed to <a 
href="#x69-176010r162">getf</a> in this context; it is ignored by <a 
href="clmse36.html#x48-93002r66">setf</a> but may be useful in such
macros as <a 
href="clmse87.html#x107-225060r503">push</a> that are related to <a 
href="clmse36.html#x48-93002r66">setf</a>. See the description of <a 
href="#x69-176002r159">get</a> for an example
of this.
<div class=newer>
<!--l. 277--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx69-176011"></a>to clarify the permissible side eﬀects of certain
operations; <a 
href="clmse36.html#x48-93002r66">setf</a> used with <a 
href="#x69-176010r162">getf</a> is permitted to perform a <a 
href="clmse36.html#x48-93002r66">setf</a> on the place
or on any part, car or cdr, of the top-level list structure held by that
place.
</div>
<div class=newer>
<!--l. 285--><p class="indent" >   X3J13 voted in March 1988 <a 
 id="dx69-176012"></a>to clarify order of evaluation (see section <a 
href="clmse36.html#x48-930007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>).
</div>
<div class=incompatibility>
<!--l. 290--><p class="noindent" ><b>Compatibility note:</b> The Interlisp function listget is similar to <a 
href="#x69-176010r162">getf</a>. The Interlisp
function listput is similar to using <a 
href="#x69-176010r162">getf</a> with <a 
href="clmse36.html#x48-93002r66">setf</a>.
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> remf </b><a 
 id="dx69-176013"></a><a 
 id="x69-176014r163"></a> place indicator
</td></tr></table>
<!--l. 300--><p class="indent" >
                                                                          

                                                                          
</div>
<!--l. 300--><p class="noindent" ><span class="paragraphHead"><a 
 id="x69-17700010.1"></a></span>
   This removes from the property list stored in place the property with an
indicator <a 
href="clmse33.html#x44-81002r46">eq</a> to indicator. The property indicator and the corresponding value are
removed by destructively splicing the property list. <a 
href="#x69-176014r163">remf</a> returns <a 
href="clmse31.html#x42-77002r19">nil</a> if no
such property was found, or some non-<a 
href="clmse31.html#x42-77002r19">nil</a> value if a property was found.
The form place may be any generalized variable acceptable to <a 
href="clmse36.html#x48-93002r66">setf</a>. See
<a 
href="#x69-176005r160">remprop</a>.
<div class=newer>
<!--l. 311--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx69-177001"></a>to clarify the permissible side eﬀects of certain
operations; <a 
href="#x69-176014r163">remf</a> is permitted to perform a <a 
href="clmse36.html#x48-93002r66">setf</a> on the place or on any part, car or
cdr, of the top-level list structure held by that place.
</div>
<div class=newer>
<!--l. 319--><p class="indent" >   X3J13 voted in March 1988 <a 
 id="dx69-177002"></a>to clarify order of evaluation (see section <a 
href="clmse36.html#x48-930007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>).
</div>
</div>
<div class=defun>
<!--l. 324--><p class="noindent" ><i>[Function]</i><a 
 id="dx69-177003"></a><a 
 id="x69-177004r164"></a><b> get-properties</b>  <i>place</i> <i>indicator-list</i>
<!--l. 326--><p class="noindent" ><a 
href="#x69-177004r164">get-properties</a> is like <a 
href="#x69-176010r162">getf</a>, except that the second argument is a list of
indicators. <a 
href="#x69-177004r164">get-properties</a> searches the property list stored in place for
any of the indicators in indicator-list until it ﬁnds the ﬁrst property in
the property list whose indicator is one of the elements of indicator-list.
Normally place is computed from a generalized variable acceptable to
<a 
href="clmse36.html#x48-93002r66">setf</a>.
<!--l. 335--><p class="indent" >   <a 
href="#x69-177004r164">get-properties</a> returns three values. If any property was found, then the ﬁrst
two values are the indicator and value for the ﬁrst property whose indicator was
in indicator-list, and the third is that tail of the property list whose car was the
indicator (and whose cadr is therefore the value). If no property was found, all
three values are <a 
href="clmse31.html#x42-77002r19">nil</a>. Thus the third value serves as a ﬂag indicating success or
failure and also allows the search to be restarted, if desired, after the property was
found.
</div>
                                                                          

                                                                          
   <!--l. 347--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse55.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html#tailclmch10.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse54.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html#clmse54.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 347--><p class="indent" >   <a 
 id="tailclmse54.html"></a>  
</body></html> 
