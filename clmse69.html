<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Arithmetic Operations</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-10 13:43:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 428--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse70.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse68.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse68.html#tailclmse68.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse69.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch12.html#clmse69.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">12.4   </span> <a 
 id="x86-20000012.4"></a>Arithmetic Operations</h3>
<!--l. 430--><p class="noindent" >Each of the functions in this section requires that its arguments all be numbers; to
call one with a non-number is an error. Unless otherwise speciﬁed, each works on
all types of numbers, automatically performing any required coercions when
arguments are of diﬀerent types.
<div class=defun>
<!--l. 435--><p class="noindent" ><i>[Function]</i><a 
 id="dx86-200001"></a><a 
 id="x86-200002r218"></a><b> +</b>  &#x0026;rest  <i>numbers</i>
<!--l. 437--><p class="noindent" >This returns the sum of the arguments. If there are no arguments, the result is 0,
which is an identity for this operation.
<div class=incompatibility>
<!--l. 442--><p class="noindent" ><b>Compatibility note:</b> While <a 
href="clmse111.html#x136-262002r626">+</a> is compatible with its use in Lisp Machine Lisp, it is
incompatible with MacLisp, which uses <a 
href="clmse111.html#x136-262002r626">+</a> for ﬁxnum-only addition.
</div>
</div>
<div class=defun>
<!--l. 450--><p class="noindent" ><i>[Function]</i><a 
 id="dx86-200003"></a><a 
 id="x86-200004r219"></a><b> -</b>  <i>number</i> &#x0026;rest  <i>more-numbers</i>
<!--l. 452--><p class="noindent" >The function <a 
href="clmse111.html#x136-262008r629">-</a>, when given one argument, returns the negative of that
argument.
<!--l. 456--><p class="indent" >   The function <a 
href="clmse111.html#x136-262008r629">-</a>, when given more than one argument, successively subtracts
from the ﬁrst argument all the others, and returns the result. For example, (- 3 4
5)  ⇒ -6.
<div class=incompatibility>
<!--l. 461--><p class="noindent" ><b>Compatibility note:</b> While <a 
href="clmse111.html#x136-262008r629">-</a> is compatible with its use in Lisp Machine Lisp,
it is incompatible with MacLisp, which uses <a 
href="clmse111.html#x136-262008r629">-</a> for ﬁxnum-only subtraction.
Also, <a 
href="clmse111.html#x136-262008r629">-</a> diﬀers from diﬀerence as used in most Lisp systems in the case of one
argument.
</div>
</div>
<div class=defun>
<!--l. 471--><p class="noindent" ><i>[Function]</i><a 
 id="dx86-200005"></a><a 
 id="x86-200006r220"></a><b> *</b>  &#x0026;rest  <i>numbers</i>
<!--l. 473--><p class="noindent" >This returns the product of the arguments. If there are no arguments, the result is
                                                                          

                                                                          
1, which is an identity for this operation.
<div class=incompatibility>
<!--l. 479--><p class="noindent" ><b>Compatibility note:</b> While <a 
href="clmse111.html#x136-262010r630">*</a> is compatible with its use in Lisp Machine Lisp, it is
incompatible with MacLisp, which uses <a 
href="clmse111.html#x136-262010r630">*</a> for ﬁxnum-only multiplication.
</div>
</div>
<div class=defun>
<!--l. 487--><p class="noindent" ><i>[Function]</i><a 
 id="dx86-200007"></a><a 
 id="x86-200008r221"></a><b> /</b>  <i>number</i> &#x0026;rest  <i>more-numbers</i>
<!--l. 489--><p class="noindent" >The function <a 
href="clmse111.html#x136-262016r633">/</a>, when given more than one argument, successively divides the ﬁrst
argument by all the others and returns the result.
<div class=new>
<!--l. 494--><p class="indent" >   It is generally accepted that it is an error for any argument other than the ﬁrst
to be zero.
</div>
<!--l. 498--><p class="indent" >   With one argument, <a 
href="clmse111.html#x136-262016r633">/</a> reciprocates the argument.
<div class=new>
<!--l. 501--><p class="indent" >   It is generally accepted that it is an error in this case for the argument to be
zero.
</div>
<!--l. 505--><p class="indent" >   <a 
href="clmse111.html#x136-262016r633">/</a> will produce a ratio if the mathematical quotient of two integers is not an
exact integer. For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ 12 4)  ⇒ 3
</td></tr></table>
<!--l. 508--><p class="indent" >                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ 13 4)  ⇒ 13/4</td></tr></table>
<!--l. 509--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ -8)  ⇒ -1/8</td></tr></table>
<!--l. 510--><p class="indent" >                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ 3 4 5)  ⇒ 3/20</td></tr></table>
<!--l. 512--><p class="indent" >
</div>
</div>
<!--l. 513--><p class="noindent" >To divide one integer by another producing an integer result, use one of the functions
<a 
href="clmse71.html#x88-206012r256">ﬂoor</a>, <a 
href="clmse71.html#x88-206014r257">ceiling</a>, <a 
href="clmse71.html#x88-206016r258">truncate</a>, or <a 
href="clmse71.html#x88-206018r259">round</a>.
<!--l. 517--><p class="indent" >   If any argument is a ﬂoating-point number, then the rules of ﬂoating-point
contagion apply.
<div class=incompatibility>
<!--l. 521--><p class="noindent" ><b>Compatibility note:</b> What <a 
href="clmse111.html#x136-262016r633">/</a> does is totally unlike what the usual <a 
href="clmse111.html#x136-262018r634">//</a> or quotient
operator does. In most Lisp systems, quotient behaves like <a 
href="clmse111.html#x136-262016r633">/</a> except when dividing
                                                                          

                                                                          
integers, in which case it behaves like <a 
href="clmse71.html#x88-206016r258">truncate</a> of two arguments; this behavior is
mathematically intractable, leading to such anomalies as <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(quotient 1.0 2.0)  ⇒ 0.5 but (quotient 1 2)  ⇒ 0
</td></tr></table>
<!--l. 530--><p class="indent" >
</div>
</div>
<!--l. 531--><p class="noindent" >In contrast, the Common Lisp function <a 
href="clmse111.html#x136-262016r633">/</a> produces these results: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(/ 1.0 2.0)  ⇒ 0.5 and (/ 1 2)  ⇒ 1/2
</td></tr></table>
<!--l. 534--><p class="indent" >
</div>
</div>
<!--l. 535--><p class="noindent" >In practice quotient is used only when one is sure that both arguments are integers, or when
one is sure that at least one argument is a ﬂoating-point number. <a 
href="clmse111.html#x136-262016r633">/</a> is tractable for its
purpose and works for any numbers.
</div>
</div>
<div class=defun>
<!--l. 543--><p class="noindent" ><i>[Function]</i><a 
 id="dx86-200009"></a><a 
 id="x86-200010r222"></a><b> 1+</b>  <i>number</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx86-200011"></a><a 
 id="x86-200012r223"></a><b> 1-</b>  <i>number</i>
<!--l. 546--><p class="noindent" >(1+ x) is the same as (+ x 1).
<!--l. 549--><p class="indent" >   (1- x) is the same as (- x 1). Note that the short name may be confusing: (1- x)
does not mean 1 − x; rather, it means x − 1.
<div class=rationale>
<!--l. 554--><p class="noindent" ><b>Rationale:</b> These are included primarily for compatibility with MacLisp and Lisp
Machine Lisp. Some programmers prefer always to write (+ x 1) and (- x 1) instead of
(1+ x) and (1- x).
</div>
<div class=implementation>
<!--l. 560--><p class="noindent" ><b>Implementation note:</b> Compiler writers are very strongly encouraged to ensure that
(1+ x) and (+ x 1) compile into identical code, and similarly for (1- x) and
(- x 1), to avoid pressure on a Lisp programmer to write possibly less clear
code for the sake of eﬃciency. This can easily be done as a source-language
transformation.
                                                                          

                                                                          
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> incf </b><a 
 id="dx86-200013"></a><a 
 id="x86-200014r224"></a> place [delta]
</td></tr></table>
<!--l. 571--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Macro]</i><b> decf </b><a 
 id="dx86-200015"></a><a 
 id="x86-200016r225"></a> place [delta]</td></tr></table>
<!--l. 573--><p class="indent" >
</div>
<!--l. 573--><p class="noindent" ><span class="paragraphHead"><a 
 id="x86-20100012.4"></a></span>
   The number produced by the form delta is added to (<a 
href="#x86-200014r224">incf</a>) or subtracted from
(<a 
href="#x86-200016r225">decf</a>) the number in the generalized variable named by place, and the sum is
stored back into place and returned. The form place may be any form acceptable
as a generalized variable to <a 
href="clmse36.html#x48-93002r66">setf</a>. If delta is not supplied, then the number in place
is changed by 1. For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq n 0)
</td></tr></table>
<!--l. 585--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:162;" 
class="tabbing">(incf n)  ⇒ 1          </td><td  
class="tabbing">and now n  ⇒ 1</td></tr></table>
<!--l. 586--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:162;" 
class="tabbing">(decf n 3)  ⇒ -2      </td><td  
class="tabbing">and now n  ⇒ -2</td></tr></table>
<!--l. 587--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:162;" 
class="tabbing">(decf n -5)  ⇒ 3      </td><td  
class="tabbing">and now n  ⇒ 3</td></tr></table>
<!--l. 588--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:162;" 
class="tabbing">(decf n)  ⇒ 2         </td><td  
class="tabbing">and now n  ⇒ 2</td></tr></table>
<!--l. 590--><p class="indent" >
</div>
</div>
<!--l. 591--><p class="noindent" >The eﬀect of (incf place delta) is roughly equivalent to <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf place (+ place delta))
</td></tr></table>
<!--l. 595--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 596--><p class="noindent" >except that the latter would evaluate any subforms of place twice, whereas <a 
href="#x86-200014r224">incf</a> takes
care to evaluate them only once. Moreover, for certain place forms <a 
href="#x86-200014r224">incf</a> may be
signiﬁcantly more eﬃcient than the <a 
href="clmse36.html#x48-93002r66">setf</a> version. <div class=newer> X3J13 voted in March 1988 <a 
 id="dx86-201001"></a>to
clarify order of evaluation (see section <a 
href="clmse36.html#x48-930007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>).
</div>
</div>
<div class=defun>
<!--l. 606--><p class="noindent" ><i>[Function]</i><a 
 id="dx86-201002"></a><a 
 id="x86-201003r226"></a><b> conjugate</b>  <i>number</i>
<!--l. 608--><p class="noindent" >This returns the complex conjugate of number. The conjugate of a non-complex
number is itself. For a complex number z, <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(conjugate z)  ≡ (complex (realpart z) (- (imagpart z)))
</td></tr></table>
<!--l. 613--><p class="indent" >
</div>
</div>
<!--l. 614--><p class="noindent" >For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(conjugate #C(3/5 4/5))  ⇒ #C(3/5 -4/5)
</td></tr></table>
<!--l. 616--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(conjugate #C(0.0D0 -1.0D0))  ⇒ #C(0.0D0 1.0D0)</td></tr></table>
<!--l. 617--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(conjugate 3.7)  ⇒ 3.7</td></tr></table>
<!--l. 619--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 622--><p class="noindent" ><i>[Function]</i><a 
 id="dx86-201004"></a><a 
 id="x86-201005r227"></a><b> gcd</b>  &#x0026;rest  <i>integers</i>
<!--l. 624--><p class="noindent" >This returns the greatest common divisor of all the arguments, which must be
integers. The result of <a 
href="#x86-201005r227">gcd</a> is always a non-negative integer. If one argument is
given, its absolute value is returned. If no arguments are given, <a 
href="#x86-201005r227">gcd</a> returns 0,
which is an identity for this operation. For three or more arguments, <div class=lisp>
<div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd a b c ... z)  ≡ (gcd (gcd a b) c ... z)
</td></tr></table>
<!--l. 634--><p class="indent" >
</div>
</div>
<!--l. 636--><p class="indent" >   Here are some examples of the use of <a 
href="#x86-201005r227">gcd</a>: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd 91 -49)  ⇒ 7
</td></tr></table>
<!--l. 638--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd 63 -42 35)  ⇒ 7</td></tr></table>
<!--l. 639--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd 5)  ⇒ 5</td></tr></table>
<!--l. 640--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd -4)  ⇒ 4</td></tr></table>
<!--l. 641--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd)  ⇒ 0</td></tr></table>
<!--l. 643--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 646--><p class="noindent" ><i>[Function]</i><a 
 id="dx86-201006"></a><a 
 id="x86-201007r228"></a><b> lcm</b>  <i>integer</i> &#x0026;rest  <i>more-integers</i>
<!--l. 648--><p class="noindent" >This returns the least common multiple of its arguments, which must be integers.
The result of <a 
href="#x86-201007r228">lcm</a> is always a non-negative integer. For two arguments that are not
both zero, <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm a b)  ≡ (/ (abs (* a b)) (gcd a b))
</td></tr></table>
<!--l. 655--><p class="indent" >
</div>
</div>
<!--l. 656--><p class="noindent" >If one or both arguments are zero, <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm a 0)  ≡ (lcm 0 a)  ≡ 0
</td></tr></table>
<!--l. 659--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 661--><p class="indent" >   For one argument, <a 
href="#x86-201007r228">lcm</a> returns the absolute value of that argument. For three
or more arguments, <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm a b c ... z)  ≡ (lcm (lcm a b) c ... z)
</td></tr></table>
<!--l. 665--><p class="indent" >
</div>
</div>
<!--l. 667--><p class="indent" >   Some examples: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm 14 35)  ⇒ 70
</td></tr></table>
<!--l. 669--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm 0 5)  ⇒ 0</td></tr></table>
<!--l. 670--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lcm 1 2 3 4 5 6)  ⇒ 60</td></tr></table>
<!--l. 672--><p class="indent" >
</div>
</div>
<!--l. 674--><p class="indent" >   Mathematically, (lcm) should return inﬁnity. Because Common Lisp does not
have a representation for inﬁnity, <a 
href="#x86-201007r228">lcm</a>, unlike <a 
href="#x86-201005r227">gcd</a>, always requires at least one
argument.
<div class=new>
<!--l. 679--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx86-201008"></a>to specify that (lcm)  ⇒ 1.
<!--l. 683--><p class="indent" >   This is one of my biggest boners. The identity for <a 
href="#x86-201007r228">lcm</a> is of course 1,
not inﬁnity, and so (lcm) ought to have been deﬁned to return 1. Sorry
about that, though in point of fact very few users have complained to me
that this mistake in the ﬁrst edition has cramped their programming
style.
</div>
</div>
                                                                          

                                                                          
   <!--l. 690--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse70.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse68.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse68.html#tailclmse68.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse69.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch12.html#clmse69.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 690--><p class="indent" >   <a 
 id="tailclmse69.html"></a>  
</body></html> 
