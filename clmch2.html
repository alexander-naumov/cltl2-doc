<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>2 Типы данных</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-18 01:47:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1877--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse3.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse2.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse2.html#tailclmse2.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmch2.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clm.html#clmch2.html" >Вверх</a><tt>&#x003E;</tt></p></div>
   <h2 class="chapterHead"><span class="titlemark">Глава 2</span><br /><a 
 id="x9-170002"></a>Типы данных</h2>
<!--l. 1880--><p class="noindent" >Common Lisp предоставляет множество типов для объектов данных.
Необходимо подчеркнуть, что в Lisp&#x2019;е типизированы данные, а не
переменные. Любая переменная может содержать данные любого типа.
(Можно указать явно, что некоторая переменная фактически может
содержать только один или конечное множество типов объектов.
Однако, такая декларация может быть опущена, и программа будет
выполняться корректно. Такая декларация содержит рекомендация от
пользователя, и это может быть полезным при оптимизации. См.
<a 
href="clmse48.html#x62-150003r123">declare</a>.)
<!--l. 1890--><p class="indent" >   В Common Lisp&#x2019;е тип данных является (возможно бесконечным)
множеством Lisp объектов. Многие объекты Lisp&#x2019;а принадлежат к более чем
одному множеству типов, так что иногда не имеет смысла спрашивать тип
объекта; вместо этого задаётся вопрос о принадлежности объекта к
нужному типу. Предикат <a 
href="clmse32.html#x43-76002r20">typep</a> может использоваться для определения
принадлежности объекта к заданному типу, а функция <a 
href="clmse26.html#x35-54002r8">type-of</a> возвращает
тип, к которому принадлежит заданный объект.
<!--l. 1899--><p class="indent" >   Типы данных в Common Lisp сложены в иерархию (фактически в порядке
убывания объёма) определённую отношениями подмножеств. Несомненно
множества объектов, такие как множество чисел и множество строк
заслуживают идентификаторы. Для многих этих идентификаторов
используются символы (здесь и далее, слово «символ» ссылается на тип Lisp
объектов символ, известный также как literal atom). См. главу <a 
href="clmch4.html#x26-440004">4<!--tex4ht:ref: DTSPEC --></a> подробно
описывающую определения типов.
<!--l. 1908--><p class="indent" >   Множество все объектов определяется символом <a 
href="clmse31.html#x42-74004r19">t</a>. Пустой тип данных,
который не содержит объектов обозначается с помощью <a 
href="clmse31.html#x42-74002r18">nil</a>.
<!--l. 1912--><p class="indent" >   Следующие категории объектов Common Lisp&#x2019;а в особенности интересны:
числа (numbers), знаки (characters), символы (symbols), списки (lists),
массивы (arrays), структуры (structures) и функции (functions). Другие типы
тоже, конечно, интересны. Некоторые из этих категорий имеют много
подразделов. Так же есть стандартные типы, которые определены,
как объединение двух и более данных категорий. Вышеупомянутые
категории, являясь типами объектов, are neither more nor less «real»
than other data types; они просто составляют объединения типов для
наглядности.
<!--l. 1922--><p class="indent" >   Вот краткое изложение о различных Common Lisp&#x2019;овых типах данных.
                                                                          

                                                                          
Оставшиеся разделы данной главы рассматривают типы более детально, а
также описывают нотации для объектов для каждого типа. Описание
Lisp&#x2019;овых функций, что оперируют объектами данных каждого типа будет
даваться в следующих главах.
      <ul class="itemize1">
      <li class="itemize"><i>Числа</i> имеют различные формы и представления. Common Lisp
      предоставляет целочисленный (integer) тип данных: любое целое
      число, положительное или отрицательное ограничено размерами
      памяти  (преимущественно  равными  ширине  машинного  слова).
      Также  предоставляется  рациональный  или  дробный  (rational)
      тип  данных:  это  отношение  двух  целых  чисел,  не  являющееся
      целым числом. Также предоставляются числа с плавающей точкой
      различных интервалов и точностей. И наконец в языке также есть
      комплексные числа.
      </li>
      <li class="itemize"><i>Строковые</i> символы представляют печатные символы такие, как
      буквы  или  управляющие  форматированием  символы.  Строки
      являются   одномерными   массивами   символов.   Common   Lisp
      предоставляет  богатое  множество  символов,  включая  пути  для
      представления различных стилей печати.
      </li>
      <li class="itemize"><i>Символы</i>   (иногда   называемые   <i>atomic   symbols</i>   для   ясности)
      являются  именованными  объектами  данных.  Lisp  предоставляет
      механизм  определяющий  местоположение  объекта  символа  по
      заданному  имени  (в  форме  строки).  У  символов  есть  <i>списки
      свойств</i>,  которые  фактически  позволяют  использовать  символы
      в  качестве  структур,  с  расширяемым  множеством  имён  полей,
      каждое из которых может быть любым Lisp объектом. Символы
      также   служат   для   именования   функций   и   переменных   в
      программе.
      </li>
      <li class="itemize"><i>Списки</i> (прим. автора: те самые, из которых и заварилась вся каша)
      это последовательности представленная в форме связанных ячеек,
      называемых  <i>cons-ячейками</i>.  Для  обозначения  пустого  списка
      служит  специальный  объект  (обозначаемые  символом  <a 
href="clmse31.html#x42-74002r18">nil</a>).  Все
      остальные списки создаются рекурсивно, с помощью добавления
                                                                          

                                                                          
      новых элементов в начало существующего списка. Это происходит
      так:  создаётся  новая  cons-ячейка,  которая  является  объектом,
      имеющим  два  компонента,  называемых  <i>car</i>  и  cdr.  Car  может
      хранить,  что  угодно,  а  cdr  создан  для  хранения  указателя  на
      существующий ранее список. (Cons-ячейки могут использоваться
      для хранения хранения записи структуры из двух элементов, но
      это не главное их предназначение.)
      </li>
      <li class="itemize"><i>Массивы</i> - это n-мерные коллекции объектов. Массив может иметь
      любое неотрицательное количество измерений и индексироваться
      с помощью последовательности целых чисел. Общий тип массива
      может  содержать  любой  Lisp  объект;  другие  типы  массивов
      специализируются для эффективности и могут содержать только
      определённые типы Lisp объектов. Также существует возможность
      того, что два массива, возможно с разным количеством измерений,
      указывают на одно и то же подмножество объектов (если изменить
      первый массив, изменится и второй). Это достигается с помощью
      указания для одного массива <i>быть относительным</i> для другого
      массива. Одномерные массивы любого типа называются <i>векторами
      (vectors)</i>. Одномерные массивы строковых символов называются
      <i>строки</i>.  Одномерные  массивы  битов  (это  целое  число,  которое
      может  содержать  0  или  1)  называются  <i>битовыми  векторами
      (bit-vectors)</i>.
      </li>
      <li class="itemize"><i>Хеш-таблицы</i> предоставляют эффективный путь для связывания
      любого Lisp объекта (<i>ключа</i>) с другим объектом (значением).
      </li>
      <li class="itemize"><i>Таблицы
      символов Lisp парсера (readtables)</i> используется  для  управления
      парсером  выражений  <a 
href="clmse111.html#x138-257003r653">read</a>.  Этот  функционал  используется  для
      создания макроридеров для ограниченного изменения синтаксиса
      языка.
      </li>
      <li class="itemize"><i>Пакеты</i> являются коллекциями символов и служат для разделения
      пространств имён. Парсер распознает символы с помощью поиска
                                                                          

                                                                          
      последовательностей строковых символов в текущем пакете.
      </li>
      <li class="itemize"><i>Pathnames</i> представляют имена файлов на кроссплатформенный
      лад. Они используются для взаимодействия с внешней файловой
      системой.
      </li>
      <li class="itemize"><i>Потоки</i>  представляют  источники  данных,  обычно  строковых
      символов или байт. Они используются для ввода/вывода, а также
      для внутренних нужд, например для парсинга строк.
      </li>
      <li class="itemize"><i>Random-states</i> - это структуры данных, используемые для хранения
      состояния встроенного генератора случайных чисел (ГСЧ).
      </li>
      <li class="itemize"><i>Структуры</i> - это определённые пользователем объекты, имеющие
      именованные поля. <a 
href="clmse99.html#x123-227002r580">defstruct</a> используется для определения новых
      типов  структур.  Некоторые  реализации  Common  Lisp  могут
      предоставлять  некоторые  системные  типы  такие,  как  <i>bignums</i>,
      <i>readtables</i>,  <i>streams</i>,  <i>hash  tables</i>  и  pathnames  как  структуры,  но
      фактически это не будет видно пользователю.</li></ul>
<div class=new>
<!--l. 2025--><p class="indent" >   X3J13 проголосовал в июне 1988 адаптировать Систему Условий Common
Lisp&#x2019;а, что добавило следующие категории объектов данных:
      <ul class="itemize1">
      <li class="itemize"><i>Условия (conditions)</i> - это объекты, используемые для управления
      ходом
      выполнения  программы,  с  помощью  сигналов  и  обработчиков
      этих  самых  сигналов.  В  частности,  ошибки  сигнализируются  с
      помощью генерации условия, и эти ошибки могут быть обработаны
      с помощью установки обработчиков для генерируемых условий.</li></ul>
</div>
<div class=new>
<!--l. 2039--><p class="indent" >   X3J13 проголосовал в июне 1988 адаптировать Объектную Систему
Common Lisp, что добавило следующие категории объектов данных:
                                                                          

                                                                          
      <ul class="itemize1">
      <li class="itemize"><i>Классы</i>  определяют  структуру  и  поведение  других  объектов,
      являющихся  <i>экземплярами</i>  данных  классов.  Каждый  объект
      данных принадлежит некоторому классу.
      </li>
      <li class="itemize"><i>Методы</i>                                                                          -
      это код, который оперирует аргументами, которые соответствуют
      некоторому  шаблону.  Методы  не  являются  функциями;  они  не
      вызываются  напрямую,  а  объединяются  в  обобщённые  функции
      (generic functions).
      </li>
      <li class="itemize"><i>Обобщённые                                                           функции</i>
      - это функции, которые содержат, кроме всего прочего, множество
      методов. При вызове generic функция вызывает подмножество её
      методов. Подмножество для выполнения выделяется с помощью
      определения  классов  аргументов  и  выбора  им  соответствующих
      методов.</li></ul>
</div>
<!--l. 2063--><p class="indent" >   Эти категории не всегда взаимоисключаемы. Указанные отношения
между различными типами данных более детально описано в разделе ??.
   <div class="sectionTOCS">
    <span class="sectionToc" >2.1 <a 
href="clmse3.html#x10-180002.1">Числа</a></span>
<br />     <span class="subsectionToc" >2.1.1 <a 
href="clmse3.html#x10-190002.1.1">Целые числа</a></span>
<br />     <span class="subsectionToc" >2.1.2 <a 
href="clmse3.html#x10-200002.1.2">Дробные числа</a></span>
<br />     <span class="subsectionToc" >2.1.3 <a 
href="clmse3.html#x10-210002.1.3">Числа с плавающей точкой</a></span>
<br />     <span class="subsectionToc" >2.1.4 <a 
href="clmse3.html#x10-220002.1.4">Комплексные числа</a></span>
<br />    <span class="sectionToc" >2.2 <a 
href="clmse4.html#x11-230002.2">Строковые символы</a></span>
<br />     <span class="subsectionToc" >2.2.1 <a 
href="clmse4.html#x11-240002.2.1">Стандартные строковые символы</a></span>
<br />     <span class="subsectionToc" >2.2.2 <a 
href="clmse4.html#x11-250002.2.2">Разделители строк</a></span>
<br />     <span class="subsectionToc" >2.2.3 <a 
href="clmse4.html#x11-260002.2.3">Нестандартные символы</a></span>
<br />    <span class="sectionToc" >2.3 <a 
href="clmse5.html#x12-270002.3">Символы</a></span>
<br />    <span class="sectionToc" >2.4 <a 
href="clmse6.html#x13-280002.4">Списки и Cons-ячейки</a></span>
<br />    <span class="sectionToc" >2.5 <a 
href="clmse7.html#x14-290002.5">Массивы</a></span>
<br />     <span class="subsectionToc" >2.5.1 <a 
href="clmse7.html#x14-300002.5.1">Векторы</a></span>
                                                                          

                                                                          
<br />     <span class="subsectionToc" >2.5.2 <a 
href="clmse7.html#x14-310002.5.2">Строки</a></span>
<br />     <span class="subsectionToc" >2.5.3 <a 
href="clmse7.html#x14-320002.5.3">Битовые векторы</a></span>
<br />    <span class="sectionToc" >2.6 <a 
href="clmse8.html#x15-330002.6">Хеш-таблицы</a></span>
<br />    <span class="sectionToc" >2.7 <a 
href="clmse9.html#x16-340002.7">Таблицы символов Lisp парсера (Readtables)</a></span>
<br />    <span class="sectionToc" >2.8 <a 
href="clmse10.html#x17-350002.8">Пакеты</a></span>
<br />    <span class="sectionToc" >2.9 <a 
href="clmse11.html#x18-360002.9">Имена файлов</a></span>
<br />    <span class="sectionToc" >2.10 <a 
href="clmse12.html#x19-370002.10">Потоки</a></span>
<br />    <span class="sectionToc" >2.11 <a 
href="clmse13.html#x20-380002.11">Объект для ГСЧ (Random-States)</a></span>
<br />    <span class="sectionToc" >2.12 <a 
href="clmse14.html#x21-390002.12">Структуры</a></span>
<br />    <span class="sectionToc" >2.13 <a 
href="clmse15.html#x22-400002.13">Функции</a></span>
<br />    <span class="sectionToc" >2.14 <a 
href="clmse16.html#x23-410002.14">Нечитаемые объекты данных</a></span>
<br />    <span class="sectionToc" >2.15 <a 
href="clmse17.html#x24-420002.15">Пересечение, включение и дизъюнктивность типов</a></span>
   </div>














                                                                          

                                                                          
   <!--l. 396--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse3.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse2.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse2.html#tailclmse2.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch2.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clm.html#clmch2.html" >Вверх</a><tt>&#x003E;</tt></p></div>
<!--l. 396--><p class="indent" >   <a 
 id="tailclmch2.html"></a>  
</body></html> 
