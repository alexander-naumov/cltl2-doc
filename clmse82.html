<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Lists</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-19 16:08:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 153--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse83.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse81.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse81.html#tailclmse81.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse82.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse82.html" >Вверх</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">15.2   </span> <a 
href="clm.html#QQ2-102-231" id="x102-20300015.2">Lists</a></h3>
<!--l. 156--><p class="noindent" >The following functions perform various operations on lists. <div class=newer> The list is one of the
original Lisp data types. The very name “Lisp” is an abbreviation for “LISt
Processing.”
</div>
<div class=defun>
<!--l. 165--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203001"></a><a 
 id="x102-203002r439"></a><b> endp</b>  <i>object</i>
<!--l. 167--><p class="noindent" >The predicate <a 
href="#x102-203002r439">endp</a> is the recommended way to test for the end of a list. It is false
of conses, true of <a 
href="clmse31.html#x42-74002r18">nil</a>, and an error for all other arguments.
<div class=implementation>
<!--l. 173--><p class="noindent" ><b>Implementation note:</b> Implementations are encouraged to signal an error, especially
in the interpreter, for a non-list argument. The <a 
href="#x102-203002r439">endp</a> function is deﬁned so as to allow
compiled code to perform simply an atom check or a null check if speed is more
important than safety.
</div>
</div>
<div class=defun>
<!--l. 183--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203003"></a><a 
 id="x102-203004r440"></a><b> list-length</b>  <i>list</i>
<!--l. 185--><p class="noindent" ><a 
href="#x102-203004r440">list-length</a> returns, as an integer, the length of list. <a 
href="#x102-203004r440">list-length</a> diﬀers from <a 
href="clmse76.html#x95-196008r365">length</a>
when the list is circular; <a 
href="clmse76.html#x95-196008r365">length</a> may fail to return, whereas <a 
href="#x102-203004r440">list-length</a> will return
<a 
href="clmse31.html#x42-74002r18">nil</a>. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list-length &#x2019;()) <span class="math"> ⇒</span> 0
</td></tr></table>
<!--l. 192--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list-length &#x2019;(a b c d)) <span class="math"> ⇒</span> 4</td></tr></table>
<!--l. 193--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list-length &#x2019;(a (b c) d)) <span class="math"> ⇒</span> 3</td></tr></table>
<!--l. 194--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(let ((x (list &#x2019;a b c)))</td></tr></table>
<!--l. 195--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (rplacd (last x) x)</td></tr></table>
<!--l. 196--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (list-length x)) <span class="math"> ⇒</span> <a 
href="clmse31.html#x42-74002r18">nil</a></td></tr></table>
<!--l. 198--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 199--><p class="noindent" ><a 
href="#x102-203004r440">list-length</a> could be implemented as follows: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defun list-length (x)
</td></tr></table>
<!--l. 201--><p class="indent" >                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (do ((n 0 (+ n 2))            ;Counter</td></tr></table>
<!--l. 202--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       (fast x (cddr fast))     ;Fast pointer: leaps by 2</td></tr></table>
<!--l. 203--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">       (slow x (cdr slow)))     ;Slow pointer: leaps by 1</td></tr></table>
<!--l. 204--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      (nil)</td></tr></table>
<!--l. 205--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; If fast pointer hits the end, return the count.</td></tr></table>
<!--l. 206--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    (when (endp fast) (return n))</td></tr></table>
<!--l. 207--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    (when (endp (cdr fast)) (return (+ n 1)))</td></tr></table>
<!--l. 208--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; If fast pointer eventually equals slow pointer,</td></tr></table>
<!--l. 209--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; then we must be stuck in a circular list.</td></tr></table>
<!--l. 210--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; (A deeper property is the converse: if we are</td></tr></table>
<!--l. 211--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; stuck in a circular list, then eventually the</td></tr></table>
<!--l. 212--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; fast pointer will equal the slow pointer.</td></tr></table>
<!--l. 213--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ;; That fact justiﬁes this implementation.)</td></tr></table>
<!--l. 214--><p class="indent" >                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    (when (and (eq fast slow) (&#x003E; n 0)) (return nil))))</td></tr></table>
<!--l. 216--><p class="indent" >
</div>
</div>
<!--l. 217--><p class="noindent" >See <a 
href="clmse76.html#x95-196008r365">length</a>, which will return the length of any sequence.
</div>
<div class=defun>
<!--l. 220--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203005"></a><a 
 id="x102-203006r441"></a><b> nth</b>  <i>n</i> <i>list</i>
<!--l. 222--><p class="noindent" >(nth n list) returns the nth element of list, where the car of the list is the “zeroth”
element. The argument n must be a non-negative integer. If the length of
the list is not greater than n, then the result is (), that is, <a 
href="clmse31.html#x42-74002r18">nil</a>. (This is
consistent with the idea that the car and cdr of () are each ().) For example:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nth 0 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> foo
</td></tr></table>
<!--l. 232--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nth 1 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> bar</td></tr></table>
                                                                          

                                                                          
<!--l. 233--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nth 3 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 235--><p class="indent" >
</div>
</div>
<div class=incompatibility>
<!--l. 238--><p class="noindent" ><b>Compatibility note:</b> This is not the same as the Interlisp function called <a 
href="#x102-203006r441">nth</a>, which
is similar to but not exactly the same as the Common Lisp function <a 
href="#x102-203030r453">nthcdr</a>.
This deﬁnition of <a 
href="#x102-203006r441">nth</a> is compatible with Lisp Machine Lisp and NIL (New
Implementation of Lisp). Also, some people have used macros and functions called <a 
href="#x102-203006r441">nth</a>
of their own in their old MacLisp programs, which may not work the same
way.
</div>
<!--l. 249--><p class="indent" >   <a 
href="#x102-203006r441">nth</a> may be used to specify a place to <a 
href="clmse36.html#x48-90002r64">setf</a>; when <a 
href="#x102-203006r441">nth</a> is used in this way, the
argument n must be less than the length of the list.
<!--l. 253--><p class="indent" >   Note that the arguments to <a 
href="#x102-203006r441">nth</a> are reversed from the order used by most
other sequence selector functions such as <a 
href="clmse76.html#x95-196002r362">elt</a>.
</div>
<div class=defun>
<!--l. 258--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203007"></a><a 
 id="x102-203008r442"></a><b> ﬁrst</b>  <i>list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx102-203009"></a><a 
 id="x102-203010r443"></a><b> second</b>  <i>list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx102-203011"></a><a 
 id="x102-203012r444"></a><b> third</b>  <i>list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx102-203013"></a><a 
 id="x102-203014r445"></a><b> fourth</b>  <i>list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx102-203015"></a><a 
 id="x102-203016r446"></a><b> ﬁfth</b>  <i>list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx102-203017"></a><a 
 id="x102-203018r447"></a><b> sixth</b>  <i>list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx102-203019"></a><a 
 id="x102-203020r448"></a><b> seventh</b>  <i>list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx102-203021"></a><a 
 id="x102-203022r449"></a><b> eighth</b>  <i>list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx102-203023"></a><a 
 id="x102-203024r450"></a><b> ninth</b>  <i>list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx102-203025"></a><a 
 id="x102-203026r451"></a><b> tenth</b>  <i>list</i>
<!--l. 269--><p class="noindent" >These functions are sometimes convenient for accessing particular elements of a
list. <a 
href="#x102-203008r442">ﬁrst</a> is the same as <a 
href="clmse81.html#x101-202002r407">car</a>, <a 
href="#x102-203010r443">second</a> is the same as <a 
href="clmse81.html#x101-202008r410">cadr</a>, <a 
href="#x102-203012r444">third</a> is the same as <a 
href="clmse81.html#x101-202020r416">caddr</a>,
and so on. Note that the ordinal numbering used here is one-origin, as opposed to
the zero-origin numbering used by <a 
href="#x102-203006r441">nth</a>: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬁfth x) <span class="math"> ≡</span> (nth 4 x)
</td></tr></table>
<!--l. 278--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 280--><p class="indent" >   <a 
href="clmse36.html#x48-90002r64">setf</a> may be used with each of these functions to store into the indicated
position of a list.
</div>
<div class=defun>
<!--l. 284--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203027"></a><a 
 id="x102-203028r452"></a><b> rest</b>  <i>list</i>
<!--l. 286--><p class="noindent" ><a 
href="#x102-203028r452">rest</a> means the same as <a 
href="clmse81.html#x101-202004r408">cdr</a> but mnemonically complements <a 
href="#x102-203008r442">ﬁrst</a>. <a 
href="clmse36.html#x48-90002r64">setf</a> may be used
with <a 
href="#x102-203028r452">rest</a> to replace the cdr of a list with a new value.
</div>
<div class=defun>
<!--l. 292--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203029"></a><a 
 id="x102-203030r453"></a><b> nthcdr</b>  <i>n</i> <i>list</i>
<!--l. 294--><p class="noindent" >(nthcdr n list) performs the <a 
href="clmse81.html#x101-202004r408">cdr</a> operation n times on list, and returns the result.
For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nthcdr 0 &#x2019;(a b c)) <span class="math"> ⇒</span> (a b c)
</td></tr></table>
<!--l. 299--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nthcdr 2 &#x2019;(a b c)) <span class="math"> ⇒</span> (c)</td></tr></table>
<!--l. 300--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nthcdr 4 &#x2019;(a b c)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 302--><p class="indent" >
</div>
</div>
<!--l. 303--><p class="noindent" >In other words, it returns the nth cdr of the list.
<div class=incompatibility>
<!--l. 306--><p class="noindent" ><b>Compatibility note:</b> This is similar to the Interlisp function <a 
href="#x102-203006r441">nth</a>, except that the
Interlisp function is one-based instead of zero-based.
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(car (nthcdr n x)) <span class="math"> ≡</span> (nth n x)
</td></tr></table>
<!--l. 314--><p class="indent" >
</div>
                                                                          

                                                                          
</div>
<div class=new>
<!--l. 316--><p class="noindent" >X3J13 voted in January 1989 <a 
 id="dx102-203031"></a>to clarify that the argument n must be a non-negative
integer.
</div>
</div>
<div class=obsolete>
<div class=defun>
<!--l. 325--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203032"></a><a 
 id="x102-203033r454"></a><b> last</b>  <i>list</i>
<!--l. 327--><p class="noindent" ><a 
href="#x102-203036r455">last</a> returns the last cons (not the last element!) of list. If list is (), it returns ().
For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c d))
</td></tr></table>
<!--l. 332--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last x) <span class="math"> ⇒</span> (d)</td></tr></table>
<!--l. 333--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(rplacd (last x) &#x2019;(e f))</td></tr></table>
<!--l. 334--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">x <span class="math"> ⇒</span> &#x2019;(a b c d e f)</td></tr></table>
<!--l. 335--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d)) <span class="math"> ⇒</span> (c . d)</td></tr></table>
<!--l. 337--><p class="indent" >
</div>
</div>
</div>
</div>
<div class=new>
<!--l. 342--><p class="indent" >   X3J13 voted in June 1988 <a 
 id="dx102-203034"></a>to extend the <a 
href="#x102-203036r455">last</a> function to accept an optional
second argument. The eﬀect is to make <a 
href="#x102-203036r455">last</a> complementary in operation to
<a 
href="#x102-206003r469">butlast</a>. The new description (with some additional examples) would be as
follows.
<div class=defun>
<!--l. 349--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203035"></a><a 
 id="x102-203036r455"></a><b> last</b>  <i>list</i> &#x0026;optional  (<i>n</i> 1)
<!--l. 351--><p class="noindent" ><a 
href="#x102-203036r455">last</a> returns the tail of the list consisting of the last n conses of list. The list may
be a dotted list. It is an error if the list is circular.
<!--l. 356--><p class="indent" >   The argument n must be a non-negative integer. If n is zero, then the atom
that terminates the list is returned. If n is not less than the number of cons cells
making up the list, then the list itself is returned.
<!--l. 361--><p class="indent" >   For example: <div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c d))
</td></tr></table>
<!--l. 363--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last x) <span class="math"> ⇒</span> (d)</td></tr></table>
<!--l. 364--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(rplacd (last x) &#x2019;(e f))</td></tr></table>
<!--l. 365--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">x <span class="math"> ⇒</span> &#x2019;(a b c d e f)</td></tr></table>
<!--l. 366--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last x 3) <span class="math"> ⇒</span> (d e f)</td></tr></table>
<!--l. 367--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;()) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 368--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d)) <span class="math"> ⇒</span> (c . d)</td></tr></table>
<!--l. 369--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d) 0) <span class="math"> ⇒</span> d</td></tr></table>
<!--l. 370--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d) 2) <span class="math"> ⇒</span> (b c . d)</td></tr></table>
<!--l. 371--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(last &#x2019;(a b c . d) 1729) <span class="math"> ⇒</span> (a b c . d)</td></tr></table>
<!--l. 373--><p class="indent" >
</div>
</div>
</div>
</div>
<div class=defun>
<!--l. 377--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203037"></a><a 
 id="x102-203038r456"></a><b> list</b>  &#x0026;rest  <i>args</i>
<!--l. 379--><p class="noindent" ><a 
href="#x102-203038r456">list</a> constructs and returns a list of its arguments. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list 3 4 &#x2019;a (car &#x2019;(b . c)) (+ 6 -2)) <span class="math"> ⇒</span> (3 4 a b 4)
</td></tr></table>
<!--l. 384--><p class="indent" >
</div>
</div>
<div class=newer>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list) <span class="math"> ⇒</span> ()
</td></tr></table>
<!--l. 388--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list (list &#x2019;a &#x2019;b) (list &#x2019;c &#x2019;d &#x2019;e)) <span class="math"> ⇒</span> ((a b) (c d e))</td></tr></table>
<!--l. 390--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
</div>
</div>
<div class=defun>
<!--l. 394--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203039"></a><a 
 id="x102-203040r457"></a><b> list*</b>  <i>arg</i> &#x0026;rest  <i>others</i>
<!--l. 396--><p class="noindent" >list* is like <a 
href="#x102-203038r456">list</a> except that the last cons of the constructed list is “dotted.” The
last argument to list* is used as the cdr of the last cons constructed; this need not
be an atom. If it is not an atom, then the eﬀect is to add several new elements to
the front of a list. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list* &#x2019;a &#x2019;b &#x2019;c &#x2019;d) <span class="math"> ⇒</span> (a b c . d)
</td></tr></table>
<!--l. 405--><p class="indent" >
</div>
</div>
<!--l. 406--><p class="noindent" >This is like <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(cons &#x2019;a (cons &#x2019;b (cons &#x2019;c &#x2019;d)))
</td></tr></table>
<!--l. 409--><p class="indent" >
</div>
</div>
<!--l. 410--><p class="noindent" >Also: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list* &#x2019;a &#x2019;b &#x2019;c &#x2019;(d e f)) <span class="math"> ⇒</span> (a b c d e f)
</td></tr></table>
<!--l. 412--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(list* x) <span class="math"> ≡</span> x</td></tr></table>
<!--l. 414--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
                                                                          

                                                                          
<!--l. 417--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203041"></a><a 
 id="x102-203042r458"></a><b> make-list</b>  <i>size</i> &#x0026;key  <i>:initial-element</i>
<!--l. 419--><p class="noindent" >This creates and returns a list containing size elements, each of which is initialized
to the :initial-element argument (which defaults to <a 
href="clmse31.html#x42-74002r18">nil</a>). size should be a
non-negative integer. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(make-list 5) <span class="math"> ⇒</span> (<a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a>)
</td></tr></table>
<!--l. 426--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(make-list 3 :initial-element &#x2019;rah) <span class="math"> ⇒</span> (rah rah rah)</td></tr></table>
<!--l. 428--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 431--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203043"></a><a 
 id="x102-203044r459"></a><b> append</b>  &#x0026;rest  <i>lists</i>
<!--l. 433--><p class="noindent" >The arguments to <a 
href="clmse134.html#x165-333002r822">append</a> are lists. The result is a list that is the concatenation of
the arguments. The arguments are not destroyed. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(append &#x2019;(a b c) &#x2019;(d e f) &#x2019;() &#x2019;(g)) <span class="math"> ⇒</span> (a b c d e f g)
</td></tr></table>
<!--l. 440--><p class="indent" >
</div>
</div>
<!--l. 441--><p class="noindent" >Note that <a 
href="clmse134.html#x165-333002r822">append</a> copies the top-level list structure of each of its arguments except
the last. The function <a 
href="clmse77.html#x96-197002r369">concatenate</a> can perform a similar operation, but always
copies all its arguments. See also <a 
href="clmse134.html#x165-333006r824">nconc</a>, which is like <a 
href="clmse134.html#x165-333002r822">append</a> but destroys all
arguments but the last.
<!--l. 447--><p class="indent" >   The last argument actually need not be a list but may be any Lisp object,
which becomes the tail end of the constructed list. For example, (append &#x2019;(a b c)
&#x2019;d) <span class="math"> ⇒</span> (a b c . d).
<!--l. 451--><p class="indent" >   (append x &#x2019;()) is an idiom once frequently used to copy the list x, but the
<a 
href="#x102-203046r460">copy-list</a> function is more appropriate to this task.
</div>
<div class=defun>
<!--l. 456--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203045"></a><a 
 id="x102-203046r460"></a><b> copy-list</b>  <i>list</i>
<!--l. 458--><p class="noindent" >This returns a list that is <a 
href="clmse33.html#x44-78006r46">equal</a> to list, but not <a 
href="clmse33.html#x44-78002r44">eq</a>. Only the top level of list
                                                                          

                                                                          
structure is copied; that is, <a 
href="#x102-203046r460">copy-list</a> copies in the cdr direction but not in the
car direction. If the list is “dotted,” that is, (cdr (last list)) is a non-<a 
href="clmse31.html#x42-74002r18">nil</a>
atom, this will be true of the returned list also. See also <a 
href="clmse76.html#x95-196006r364">copy-seq</a> and
<a 
href="#x102-203050r462">copy-tree</a>.
</div>
<div class=defun>
<!--l. 467--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203047"></a><a 
 id="x102-203048r461"></a><b> copy-alist</b>  <i>list</i>
<!--l. 469--><p class="noindent" ><a 
href="#x102-203048r461">copy-alist</a> is for copying association lists. The top level of list structure of
list is copied, just as for <a 
href="#x102-203046r460">copy-list</a>. In addition, each element of list that
is a cons is replaced in the copy by a new cons with the same car and
cdr.
</div>
<div class=defun>
<!--l. 476--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203049"></a><a 
 id="x102-203050r462"></a><b> copy-tree</b>  <i>object</i>
<!--l. 478--><p class="noindent" ><a 
href="#x102-203050r462">copy-tree</a> is for copying trees of conses. The argument object may be any Lisp
object. If it is not a cons, it is returned; otherwise the result is a new cons of the
results of calling <a 
href="#x102-203050r462">copy-tree</a> on the car and cdr of the argument. In other words, all
conses in the tree are copied recursively, stopping only when non-conses
are encountered. Circularities and the sharing of substructure are not
preserved.
<div class=incompatibility>
<!--l. 489--><p class="noindent" ><b>Compatibility note:</b> This function is called copy in Interlisp.
</div>
</div>
<div class=defun>
<!--l. 495--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203051"></a><a 
 id="x102-203052r463"></a><b> revappend</b>  <i>x</i> <i>y</i>
<!--l. 497--><p class="noindent" >(revappend x y) is exactly the same as (append (reverse x) y) except that it is
potentially more eﬃcient. Both x and y should be lists. The argument x is
copied, not destroyed. Compare this with <a 
href="#x102-203057r465">nreconc</a>, which destroys its ﬁrst
argument.
</div>
<div class=defun>
<!--l. 505--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203053"></a><a 
 id="x102-203054r464"></a><b> nconc</b>  &#x0026;rest  <i>lists</i>
<!--l. 507--><p class="noindent" ><a 
href="clmse134.html#x165-333006r824">nconc</a> takes lists as arguments. It returns a list that is the arguments
concatenated together. The arguments are changed rather than copied. (Compare
this with <a 
href="clmse134.html#x165-333002r822">append</a>, which copies arguments rather than destroying them.) For
example: <div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c))
</td></tr></table>
<!--l. 514--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq y &#x2019;(d e f))</td></tr></table>
<!--l. 515--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nconc x y) <span class="math"> ⇒</span> (a b c d e f)</td></tr></table>
<!--l. 516--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">x <span class="math"> ⇒</span> (a b c d e f)</td></tr></table>
<!--l. 518--><p class="indent" >
</div>
</div>
<!--l. 519--><p class="noindent" >Note, in the example, that the value of x is now diﬀerent, since its last cons has
been <a 
href="clmse83.html#x103-207004r473">rplacd</a>&#x2019;d to the value of y. If one were then to evaluate (nconc x y)
again, it would yield a piece of “circular” list structure, whose printed
representation would be (a b c d e f d e f d e f ...), repeating forever; if the
*print-circle* switch were non-<a 
href="clmse31.html#x42-74002r18">nil</a>, it would be printed as (a b c . #1=(d e f .
#1#)).
<div class=newer>
<!--l. 529--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx102-203055"></a>to clarify the permissible side eﬀects of
certain operations. The side-eﬀect behavior of <a 
href="clmse134.html#x165-333006r824">nconc</a> is speciﬁed by a
recursive relationship outlined in the following table, in which a call to
<a 
href="clmse134.html#x165-333006r824">nconc</a> matching the earliest possible pattern on the left is required to have
side-eﬀect behavior equivalent to the corresponding expression on the
right.
<div class="flushleft" 
>
<!--l. 536--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >(nconc)               </td><td align="left" >nil     ;No side eﬀects</td>
</tr><tr><td align="left" >(nconc nil . r)    </td><td align="left" >(nconc . r)                 </td>
</tr><tr><td align="left" >(nconc x)            </td><td align="left" >x                            </td>
</tr><tr><td align="left" >(nconc x y)          </td><td align="left" >(let ((p x) (q y))         </td>
</tr><tr><td align="left" >                         </td><td align="left" >  (rplacd (last p) q)    </td>
</tr><tr><td align="left" >                         </td><td align="left" >  p)                         </td>
</tr><tr><td align="left" >(nconc x y . r)      </td><td align="left" >(nconc (nconc x y) . r) </td></tr></table>
</div></div>
</div>
</div>
                                                                          

                                                                          
<div class=defun>
<!--l. 552--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-203056"></a><a 
 id="x102-203057r465"></a><b> nreconc</b>  <i>x</i> <i>y</i>
<!--l. 554--><p class="noindent" >(nreconc x y) is exactly the same as (nconc (nreverse x) y) except that it is
potentially more eﬃcient. Both x and y should be lists. The argument x is
destroyed. Compare this with <a 
href="#x102-203052r463">revappend</a>.
<div class=newer>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq planets &#x2019;(jupiter mars earth venus mercury))
</td></tr></table>
<!--l. 563--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq more-planets &#x2019;(saturn uranus pluto neptune))</td></tr></table>
<!--l. 564--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nreconc more-planets planets)</td></tr></table>
<!--l. 565--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:585;" 
class="tabbing"></td><td  
class="tabbing-right">       <span class="math"> ⇒</span> (neptune pluto uranus saturn jupiter mars earth venus mercury)</td></tr></table>
<!--l. 566--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  and now the value of more-planets is not well deﬁned</td></tr></table>
<!--l. 568--><p class="indent" >
</div>
</div>
</div>
<div class=newer>
<!--l. 572--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx102-203058"></a>to clarify the permissible side eﬀects of certain
operations; (nreconc x y) is permitted and required to have side-eﬀect behavior
equivalent to that of (nconc (nreverse x) y).
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> push </b><a 
 id="dx102-203059"></a><a 
 id="x102-203060r466"></a> item place
</td></tr></table>
<!--l. 584--><p class="indent" >
</div>
                                                                          

                                                                          
<!--l. 584--><p class="noindent" ><span class="paragraphHead"><a 
href="#x102-20400015.2" id="x102-20400015.2"></a></span>
   The form place should be the name of a generalized variable containing
a list; item may refer to any Lisp object. The item is consed onto the
front of the list, and the augmented list is stored back into place and
returned. The form place may be any form acceptable as a generalized
variable to <a 
href="clmse36.html#x48-90002r64">setf</a>. If the list held in place is viewed as a push-down stack,
then <a 
href="#x102-203060r466">push</a> pushes an element onto the top of the stack. For example:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a (b c) d))
</td></tr></table>
<!--l. 595--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(push 5 (cadr x)) <span class="math"> ⇒</span> (5 b c) and now x <span class="math"> ⇒</span> (a (5 b c) d)</td></tr></table>
<!--l. 597--><p class="indent" >
</div>
</div>
<!--l. 598--><p class="noindent" >The eﬀect of (push item place) is roughly equivalent to <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf place (cons item place))
</td></tr></table>
<!--l. 602--><p class="indent" >
</div>
</div>
<!--l. 603--><p class="noindent" >except that the latter would evaluate any subforms of place twice, while <a 
href="#x102-203060r466">push</a> takes
care to evaluate them only once. Moreover, for certain place forms <a 
href="#x102-203060r466">push</a> may be
signiﬁcantly more eﬃcient than the <a 
href="clmse36.html#x48-90002r64">setf</a> version. <div class=newer> X3J13 voted in March 1988 <a 
 id="dx102-204001"></a>to
clarify order of evaluation (see section <a 
href="clmse36.html#x48-900007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>). Note that item is fully evaluated
before any part of place is evaluated.
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> pushnew </b><a 
 id="dx102-204002"></a><a 
 id="x102-204003r467"></a> item place &#x0026;key :test :test-not :key
</td></tr></table>
<!--l. 617--><p class="indent" >
                                                                          

                                                                          
</div>
<!--l. 617--><p class="noindent" ><span class="paragraphHead"><a 
href="#x102-20500015.2" id="x102-20500015.2"></a></span>
   The form place should be the name of a generalized variable containing a list;
item may refer to any Lisp object. If the item is not already a member of the list
(as determined by comparisons using the :test predicate, which defaults to <a 
href="clmse33.html#x44-78004r45">eql</a>),
then the item is consed onto the front of the list, and the augmented list is stored
back into place and returned; otherwise the unaugmented list is returned. The
form place may be any form acceptable as a generalized variable to <a 
href="clmse36.html#x48-90002r64">setf</a>. If the list
held in place is viewed as a set, then <a 
href="#x102-204003r467">pushnew</a> adjoins an element to the set; see
<a 
href="clmse85.html#x105-209012r486">adjoin</a>.
<!--l. 629--><p class="indent" >   The keyword arguments to <a 
href="#x102-204003r467">pushnew</a> follow the conventions for the generic
sequence functions. See chapter <a 
href="clmch14.html#x94-19500014">14<!--tex4ht:ref: KSEQUE --></a>. In eﬀect, these keywords are simply passed on
to the <a 
href="clmse85.html#x105-209012r486">adjoin</a> function.
<!--l. 634--><p class="indent" >   <a 
href="#x102-204003r467">pushnew</a> returns the new contents of the place. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a (b c) d))
</td></tr></table>
<!--l. 637--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pushnew 5 (cadr x)) <span class="math"> ⇒</span> (5 b c) and now x <span class="math"> ⇒</span> (a (5 b c) d)</td></tr></table>
<!--l. 638--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pushnew &#x2019;b (cadr x)) <span class="math"> ⇒</span> (5 b c) and x is unchanged</td></tr></table>
<!--l. 640--><p class="indent" >
</div>
</div>
<!--l. 641--><p class="noindent" >The eﬀect of <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pushnew item place :test p)
</td></tr></table>
<!--l. 644--><p class="indent" >
</div>
</div>
<!--l. 645--><p class="noindent" >is roughly equivalent to <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setf place (adjoin item place :test p))
</td></tr></table>
<!--l. 648--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 649--><p class="noindent" >except that the latter would evaluate any subforms of place twice, while <a 
href="#x102-204003r467">pushnew</a>
takes care to evaluate them only once. Moreover, for certain place forms <a 
href="#x102-204003r467">pushnew</a>
may be signiﬁcantly more eﬃcient than the <a 
href="clmse36.html#x48-90002r64">setf</a> version. <div class=newer> X3J13 voted in March
1988 <a 
 id="dx102-205001"></a>to clarify order of evaluation (see section <a 
href="clmse36.html#x48-900007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>). Note that item is fully
evaluated before any part of place is evaluated.
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> pop </b><a 
 id="dx102-205002"></a><a 
 id="x102-205003r468"></a> place
</td></tr></table>
<!--l. 663--><p class="indent" >
</div>
<!--l. 663--><p class="noindent" ><span class="paragraphHead"><a 
href="#x102-20600015.2" id="x102-20600015.2"></a></span>
   The form place should be the name of a generalized variable containing a list.
The result of <a 
href="#x102-205003r468">pop</a> is the <a 
href="clmse81.html#x101-202002r407">car</a> of the contents of place, and as a side eﬀect the <a 
href="clmse81.html#x101-202004r408">cdr</a> of
the contents is stored back into place. The form place may be any form acceptable
as a generalized variable to <a 
href="clmse36.html#x48-90002r64">setf</a>. If the list held in place is viewed as a push-down
stack, then <a 
href="#x102-205003r468">pop</a> pops an element from the top of the stack and returns it. For
example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq stack &#x2019;(a b c))
</td></tr></table>
<!--l. 673--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pop stack) <span class="math"> ⇒</span> a and now stack <span class="math"> ⇒</span> (b c)</td></tr></table>
<!--l. 675--><p class="indent" >
</div>
</div>
<!--l. 676--><p class="noindent" >The eﬀect of (pop place) is roughly equivalent to <div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog1 (car place) (setf place (cdr place)))
</td></tr></table>
<!--l. 679--><p class="indent" >
</div>
</div>
<!--l. 680--><p class="noindent" >except that the latter would evaluate any subforms of place three times, while <a 
href="#x102-205003r468">pop</a>
takes care to evaluate them only once. Moreover, for certain place forms <a 
href="#x102-205003r468">pop</a> may
be signiﬁcantly more eﬃcient than the <a 
href="clmse36.html#x48-90002r64">setf</a> version. <div class=newer> X3J13 voted in March 1988
<a 
 id="dx102-206001"></a>to clarify order of evaluation (see section <a 
href="clmse36.html#x48-900007.2">7.2<!--tex4ht:ref: SETF-SECTION --></a>).
</div>
</div>
<div class=defun>
<!--l. 690--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-206002"></a><a 
 id="x102-206003r469"></a><b> butlast</b>  <i>list</i> &#x0026;optional  <i>n</i>
<!--l. 692--><p class="noindent" >This creates and returns a list with the same elements as list, excepting the last n
elements. n defaults to 1. The argument is not destroyed. If the list has fewer than
n elements, then () is returned. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast &#x2019;(a b c d)) <span class="math"> ⇒</span> (a b c)
</td></tr></table>
<!--l. 699--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast &#x2019;((a b) (c d))) <span class="math"> ⇒</span> ((a b))</td></tr></table>
<!--l. 700--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast &#x2019;(a)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 701--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(butlast nil) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 703--><p class="indent" >
</div>
</div>
<!--l. 704--><p class="noindent" >The name is from the phrase “all elements but the last.”
</div>
<div class=defun>
<!--l. 707--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-206004"></a><a 
 id="x102-206005r470"></a><b> nbutlast</b>  <i>list</i> &#x0026;optional  <i>n</i>
<!--l. 709--><p class="noindent" >This is the destructive version of <a 
href="#x102-206003r469">butlast</a>; it changes the cdr of the cons n+1 from
the end of the list to <a 
href="clmse31.html#x42-74002r18">nil</a>. n defaults to 1. If the list has fewer than n elements, then
<a 
href="#x102-206005r470">nbutlast</a> returns (), and the argument is not modiﬁed. (Therefore one normally
writes (setq a (nbutlast a)) rather than simply (nbutlast a).) For example:
<div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq foo &#x2019;(a b c d))
</td></tr></table>
<!--l. 718--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nbutlast foo) <span class="math"> ⇒</span> (a b c)</td></tr></table>
<!--l. 719--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">foo <span class="math"> ⇒</span> (a b c)</td></tr></table>
<!--l. 720--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nbutlast &#x2019;(a)) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 721--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(nbutlast &#x2019;<a 
href="clmse31.html#x42-74002r18">nil</a>) <span class="math"> ⇒</span> ()</td></tr></table>
<!--l. 723--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 727--><p class="noindent" ><i>[Function]</i><a 
 id="dx102-206006"></a><a 
 id="x102-206007r471"></a><b> ldiﬀ</b>  <i>list</i> <i>sublist</i>
<!--l. 729--><p class="noindent" >list should be a list, and sublist should be a sublist of list, that is, one of the
conses that make up list. <a 
href="#x102-206007r471">ldiﬀ</a> (meaning “list diﬀerence”) will return a new (freshly
consed) list, whose elements are those elements of list that appear before sublist. If
sublist is not a tail of list (and in particular if sublist is <a 
href="clmse31.html#x42-74002r18">nil</a>), then a copy of the
entire list is returned. The argument list is not destroyed. For example:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq x &#x2019;(a b c d e))
</td></tr></table>
<!--l. 740--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq y (cdddr x)) <span class="math"> ⇒</span> (d e)</td></tr></table>
<!--l. 741--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ldiﬀ x y) <span class="math"> ⇒</span> (a b c)</td></tr></table>
<!--l. 742--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">but (ldiﬀ &#x2019;(a b c d) &#x2019;(c d)) <span class="math"> ⇒</span> (a b c d)
</td></tr></table>
<!--l. 744--><p class="indent" >
</div>
</div>
<!--l. 745--><p class="noindent" >since the sublist was not <a 
href="clmse33.html#x44-78002r44">eq</a> to any part of the list.
</div>
                                                                          

                                                                          
   <!--l. 749--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse83.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse81.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse81.html#tailclmse81.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse82.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse82.html" >Вверх</a><tt>&#x003E;</tt></p></div>
<!--l. 749--><p class="indent" >   <a 
 id="tailclmse82.html"></a>  
</body></html> 
