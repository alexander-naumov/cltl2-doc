<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Списки</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-16 23:44:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="cltl2ed.css"></head><body 
>
<!--l. 1463--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse85.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse83.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse83.html#tailclmse83.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse84.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse84.html" >Наверх</a><tt>&#x003E;</tt></div><h3 class="sectionHead"><span class="titlemark">15.2   </span> <a 
href="clm.html#QQ2-104-1481" id="x104-145100015.2">Списки</a></h3>
<!--l. 1465--><p class="noindent" >Следующие функции выполняет различные операции над списками.
<!--l. 1467--><p class="indent" >   Список является одним из первых Lisp&#x2019;овых типов данных. Имя «Lisp»
расшифровывается как «LISt Processing».
<div class="defun">
<!--l. 1471--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1451001"></a><a 
 id="x104-1451002r445"></a><b> endp</b>  <i>object</i>
</div>
<!--l. 1473--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-145200015.2" id="x104-145200015.2"></a></span>
   Предикат <tt><a 
href="clmli7.html#x196-3479363r363">endp</a></tt> используется для проверки конца списка. Возвращает
ложь для cons-ячеек, истину для <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>, и генерирует ошибку для всех
остальных объектов других типов.
<div class="implementation">
<!--l. 1479--><p class="noindent" ><b>Заметка для реализации:</b> Implementations are encouraged to signal an error,
especially in the interpreter, for a non-list argument. The <tt><a 
href="clmli7.html#x196-3479363r363">endp</a></tt> function is deﬁned so as
to allow compiled code to perform simply an atom check or a null check if speed is more
important than safety.
</div>
</div>
<div class="defun">
<!--l. 1489--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1452001"></a><a 
 id="x104-1452002r446"></a><b> list-length</b>  <i>list</i>
</div>
<!--l. 1491--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-145300015.2" id="x104-145300015.2"></a></span>
<tt>
   <a 
href="clmli7.html#x196-3479531r531">list-length</a></tt> возвращает длину списка <i>list</i>. <tt><a 
href="clmli7.html#x196-3479531r531">list-length</a></tt> отличается от
<tt><a 
href="clmli7.html#x196-3479523r523">length</a></tt> при использовании с циклическим списком. В таком случае <tt><a 
href="clmli7.html#x196-3479523r523">length</a></tt>
может не вернуть управление, тогда как <tt><a 
href="clmli7.html#x196-3479531r531">list-length</a></tt> вернёт <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>. Например:
<div class="lisp"><div class="tabbing">
(list-length &#x2019;()) <span class="math"> ⇒</span> 0
                                                                          

                                                                          
   <br>          (list-length &#x2019;(a b c d)) <span class="math"> ⇒</span> 4<br>          (list-length &#x2019;(a (b c) d)) <span class="math"> ⇒</span> 3<br>
(let ((x (list &#x2019;a b c)))<br>                                    (rplacd (last x) x)<br>
  (list-length x)) <span class="math"> ⇒</span> <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt><br>
<!--l. 1504--><p class="noindent" ></div>
<!--l. 1504--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-145400015.2" id="x104-145400015.2"></a></span>
<!--l. 1504--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-145500015.2" id="x104-145500015.2"></a></span>
</div>
<tt>
<!--l. 1505--><p class="indent" >   <a 
href="clmli7.html#x196-3479531r531">list-length</a></tt> может быть реализован так: <div class="lisp"><div class="tabbing">
(defun list-length (x)
   <br>                                       (do ((n 0 (+ n 2))            ;Счётчик<br>
       (fast x (cddr fast))     ;Быстрый указатель: на две позиции вперёд<br>
       (slow x (cdr slow)))     ;Медленный указатель: на одну позицию<br>
      (nil)<br>    ;; Если быстрый указатель дошёл до конца, вернуть длину.<br>
    (when (endp fast) (return n))<br>    (when (endp (cdr fast)) (return (+ n 1)))<br>
    ;; If fast pointer eventually equals slow pointer,<br>
    ;; then we must be stuck in a circular list.<br>
    ;; (A deeper property is the converse: if we are<br>
    ;; stuck in a circular list, then eventually the<br>
    ;; fast pointer will equal the slow pointer.<br>
    ;; That fact justiﬁes this implementation.)<br>
    (when (and (eq fast slow) (&#x003E; n 0)) (return nil))))<br>
<!--l. 1522--><p class="noindent" ></div>
<!--l. 1522--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-145600015.2" id="x104-145600015.2"></a></span>
<!--l. 1522--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-145700015.2" id="x104-145700015.2"></a></span>
</div>
                                                                          

                                                                          
<!--l. 1523--><p class="indent" >   Смотрите <tt><a 
href="clmli7.html#x196-3479523r523">length</a></tt>, которая возвращает длину любой последовательности.
</div>
<div class="defun">
<!--l. 1526--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1457001"></a><a 
 id="x104-1457002r447"></a><b> nth</b>  <i>n</i> <i>list</i>
</div>
<!--l. 1528--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-145800015.2" id="x104-145800015.2"></a></span>
<tt>
   (nth <i>n</i> <i>list</i>)</tt> возвращает <i>n</i>-нный элемент списка <i>list</i>. <i>car</i> элемент
списка принимается за «нулевой» элемент. Аргумент <i>n</i> должен быть
неотрицательным целым числом. Если длина списка не больше чем <i>n</i>, тогда
результат (), или другими словами <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>. (Это согласовывается с концепцией
того, что <i>car</i> и <i>cdr</i> от () являются ().) Например: <div class="lisp"><div class="tabbing">
(nth 0 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> foo
   <br>                                                       (nth 1 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> bar<br>
(nth 3 &#x2019;(foo bar gack)) <span class="math"> ⇒</span> ()<br>
<!--l. 1541--><p class="noindent" ></div>
<!--l. 1541--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-145900015.2" id="x104-145900015.2"></a></span>
<!--l. 1541--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146000015.2" id="x104-146000015.2"></a></span>
</div>
<tt>
<!--l. 1543--><p class="indent" >   <a 
href="clmli7.html#x196-3479673r673">nth</a></tt> может быть использован в связке с <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt> для изменения элемента
списка. В этом случае, аргумент <i>n</i> должен быть меньше чем длина списка
<i>list</i>.
<!--l. 1547--><p class="indent" >   Следует отметить, что порядок аргументов в <tt><a 
href="clmli7.html#x196-3479673r673">nth</a></tt> обратный в отличие от
большинства других функций селекторов для последовательностей, таких ка
<tt><a 
href="clmli7.html#x196-3479358r358">elt</a></tt>.
</div>
<div class="defun">
<!--l. 1552--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1460001"></a><a 
 id="x104-1460002r448"></a><b> ﬁrst</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx104-1460003"></a><a 
 id="x104-1460004r449"></a><b> second</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx104-1460005"></a><a 
 id="x104-1460006r450"></a><b> third</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx104-1460007"></a><a 
 id="x104-1460008r451"></a><b> fourth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx104-1460009"></a><a 
 id="x104-1460010r452"></a><b> ﬁfth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx104-1460011"></a><a 
 id="x104-1460012r453"></a><b> sixth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx104-1460013"></a><a 
 id="x104-1460014r454"></a><b> seventh</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx104-1460015"></a><a 
 id="x104-1460016r455"></a><b> eighth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx104-1460017"></a><a 
 id="x104-1460018r456"></a><b> ninth</b>  <i>list</i><br 
class="newline" /><i>[Функция]</i><a 
 id="dx104-1460019"></a><a 
 id="x104-1460020r457"></a><b> tenth</b>  <i>list</i>
</div>
<!--l. 1563--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146100015.2" id="x104-146100015.2"></a></span>
   Иногда эти функции удобно использовать для доступа к определёнными
элементам списка. <tt><a 
href="clmli7.html#x196-3479409r409">first</a></tt> то же, что и <tt><a 
href="clmli7.html#x196-3479178r178">car</a></tt>, <tt><a 
href="clmli7.html#x196-3479829r829">second</a></tt> то же, что и <tt><a 
href="clmli7.html#x196-3479174r174">cadr</a></tt>, <tt><a 
href="clmli7.html#x196-3479945r945">third</a></tt> то
же, что и <tt><a 
href="clmli7.html#x196-3479173r173">caddr</a></tt>, и так далее. Следует отметить, что нумерация начинается с
единицы (ﬁrst) в отличие от нумерации, которая начинается с нуля и
используется в <tt><a 
href="clmli7.html#x196-3479673r673">nth</a></tt>. <div class="lisp"><div class="tabbing">
(ﬁfth x) <span class="math"> ≡</span> (nth 4 x)
   <br>
<!--l. 1572--><p class="noindent" ></div>
<!--l. 1572--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146200015.2" id="x104-146200015.2"></a></span>
<!--l. 1572--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146300015.2" id="x104-146300015.2"></a></span>
</div>
<!--l. 1574--><p class="indent" >   Каждая из этих функций может быть использована в связке <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt> для
изменения элемента массива.
</div>
<div class="defun">
<!--l. 1578--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1463001"></a><a 
 id="x104-1463002r458"></a><b> rest</b>  <i>list</i>
</div>
                                                                          

                                                                          
<!--l. 1580--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146400015.2" id="x104-146400015.2"></a></span>
<tt>
   <a 
href="clmli7.html#x196-3479792r792">rest</a></tt> означает то же, что и <tt><a 
href="clmli7.html#x196-3479197r197">cdr</a></tt>, но мнемонически согласуется с <tt><a 
href="clmli7.html#x196-3479409r409">first</a></tt>.
<tt><a 
href="clmli7.html#x196-3479792r792">rest</a></tt> может использоваться в связке с <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt> для изменения элементов
массива.
</div>
<div class="defun">
<!--l. 1587--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1464001"></a><a 
 id="x104-1464002r459"></a><b> nthcdr</b>  <i>n</i> <i>list</i>
</div>
<!--l. 1589--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146500015.2" id="x104-146500015.2"></a></span>
<tt>
   (nthcdr <i>n</i> <i>list</i>)</tt> выполняет для списка <i>lisp</i> операцию <tt><a 
href="clmli7.html#x196-3479197r197">cdr</a></tt> <i>n</i> раз, и
возвращает результат. Например: <div class="lisp"><div class="tabbing">
(nthcdr 0 &#x2019;(a b c)) <span class="math"> ⇒</span> (a b c)
   <br>                                                             (nthcdr 2 &#x2019;(a b c)) <span class="math"> ⇒</span> (c)<br>
(nthcdr 4 &#x2019;(a b c)) <span class="math"> ⇒</span> ()<br>
<!--l. 1597--><p class="noindent" ></div>
<!--l. 1597--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146600015.2" id="x104-146600015.2"></a></span>
<!--l. 1597--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146700015.2" id="x104-146700015.2"></a></span>
</div>
<!--l. 1598--><p class="indent" >   Другими словами, она возвращает <i>n</i>-нную <i>cdr</i> часть списка.
<div class="lisp">
<!--l. 1600--><p class="indent" >   <div class="tabbing">
(car (nthcdr n x)) <span class="math"> ≡</span> (nth n x)
   <br>
<!--l. 1602--><p class="noindent" ></div>
                                                                          

                                                                          
<!--l. 1602--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146800015.2" id="x104-146800015.2"></a></span>
<!--l. 1602--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-146900015.2" id="x104-146900015.2"></a></span>
</div>
<!--l. 1603--><p class="indent" >   Аргумент <i>n</i> должен быть неотрицательным целым числом.
</div>
<div class="defun">
<!--l. 1606--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1469001"></a><a 
 id="x104-1469002r460"></a><b> last</b>  <i>list</i> &#x0026;optional  (<i>n</i> 1)
</div>
<!--l. 1608--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147000015.2" id="x104-147000015.2"></a></span>
<tt>
   <a 
href="clmli7.html#x196-3479501r501">last</a></tt> возвращает последние <i>n</i> cons-ячеек списка <i>lisp</i>. Список <i>list</i>
может быть списком с точкой. Передача зацикленного списка является
ошибкой.
<!--l. 1613--><p class="indent" >   Аргумент <i>n</i> должен быть неотрицательным целым числом. Если <i>n</i> равен
нулю, тогда возвращается последний атом списка <i>list</i>. Если <i>n</i> не меньше чем
количество cons-ячеек, то возвращается весь список.
<!--l. 1618--><p class="indent" >   Например: <div class="lisp"><div class="tabbing">
(setq x &#x2019;(a b c d))
   <br>                       (last x) <span class="math"> ⇒</span> (d)<br>                       (rplacd (last x) &#x2019;(e f))<br>
x <span class="math"> ⇒</span> &#x2019;(a b c d e f)<br>                                    (last x 3) <span class="math"> ⇒</span> (d e f)<br>
(last &#x2019;()) <span class="math"> ⇒</span> ()<br>                                (last &#x2019;(a b c . d)) <span class="math"> ⇒</span> (c . d)<br>
(last &#x2019;(a b c . d) 0) <span class="math"> ⇒</span> d<br>                  (last &#x2019;(a b c . d) 2) <span class="math"> ⇒</span> (b c . d)<br>
(last &#x2019;(a b c . d) 1729) <span class="math"> ⇒</span> (a b c . d)<br>
<!--l. 1630--><p class="noindent" ></div>
<!--l. 1630--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147100015.2" id="x104-147100015.2"></a></span>
<!--l. 1630--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147200015.2" id="x104-147200015.2"></a></span>
</div>
</div>
                                                                          

                                                                          
<div class="defun">
<!--l. 1633--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1472001"></a><a 
 id="x104-1472002r461"></a><b> list</b>  &#x0026;rest  <i>args</i>
</div>
<!--l. 1635--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147300015.2" id="x104-147300015.2"></a></span>
<tt>
   <a 
href="clmli7.html#x196-3479528r528">list</a></tt> создаёт и возвращает список, составленный из аргументов.
Например: <div class="lisp"><div class="tabbing">
(list 3 4 &#x2019;a (car &#x2019;(b . c)) (+ 6 -2)) <span class="math"> ⇒</span> (3 4 a b 4)
   <br>
<!--l. 1640--><p class="noindent" ></div>
<!--l. 1640--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147400015.2" id="x104-147400015.2"></a></span>
<!--l. 1640--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147500015.2" id="x104-147500015.2"></a></span>
</div>
<div class="lisp">
<!--l. 1642--><p class="indent" >   <div class="tabbing">
(list) <span class="math"> ⇒</span> ()
   <br>                                (list (list &#x2019;a &#x2019;b) (list &#x2019;c &#x2019;d &#x2019;e)) <span class="math"> ⇒</span> ((a b) (c d e))<br>
<!--l. 1645--><p class="noindent" ></div>
<!--l. 1645--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147600015.2" id="x104-147600015.2"></a></span>
<!--l. 1645--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147700015.2" id="x104-147700015.2"></a></span>
</div>
</div>
<div class="defun">
<!--l. 1648--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1477001"></a><a 
 id="x104-1477002r462"></a><b> list*</b>  <i>arg</i> &#x0026;rest  <i>others</i>
</div>
                                                                          

                                                                          
<!--l. 1650--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147800015.2" id="x104-147800015.2"></a></span>
<tt>
   <a 
href="clmli7.html#x196-3479529r529">list*</a></tt> похожа на <tt><a 
href="clmli7.html#x196-3479528r528">list</a></tt> за исключением того, что последняя <i>cons</i>-ячейка
создаваемого списка будет «с точкой». Последний аргумент используется как
последний элемент списка, а именно в последней cons-ячейки в <i>cdr</i> элементе.
Данный аргумент необязательно должен быть атомом, и если он не атом, то в
результате список будет иметь большую длину чем количество аргументов.
Например: <div class="lisp"><div class="tabbing">
(list* &#x2019;a &#x2019;b &#x2019;c &#x2019;d) <span class="math"> ⇒</span> (a b c . d)
   <br>
<!--l. 1660--><p class="noindent" ></div>
<!--l. 1660--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-147900015.2" id="x104-147900015.2"></a></span>
<!--l. 1660--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148000015.2" id="x104-148000015.2"></a></span>
</div>
<!--l. 1661--><p class="indent" >   Это то же, что и <div class="lisp"><div class="tabbing">
(cons &#x2019;a (cons &#x2019;b (cons &#x2019;c &#x2019;d)))
   <br>
<!--l. 1664--><p class="noindent" ></div>
<!--l. 1664--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148100015.2" id="x104-148100015.2"></a></span>
<!--l. 1664--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148200015.2" id="x104-148200015.2"></a></span>
</div>
<!--l. 1665--><p class="indent" >   А также: <div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(list* &#x2019;a &#x2019;b &#x2019;c &#x2019;(d e f)) <span class="math"> ⇒</span> (a b c d e f)
   <br>                                                                             (list* x) <span class="math"> ≡</span> x<br>
<!--l. 1669--><p class="noindent" ></div>
<!--l. 1669--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148300015.2" id="x104-148300015.2"></a></span>
<!--l. 1669--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148400015.2" id="x104-148400015.2"></a></span>
</div>
</div>
<div class="defun">
<!--l. 1672--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1484001"></a><a 
 id="x104-1484002r463"></a><b> make-list</b>  <i>size</i> &#x0026;key  <i>:initial-element</i>
</div>
<!--l. 1674--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148500015.2" id="x104-148500015.2"></a></span>
   Функция создаёт и возвращает список содержащий количество <i>size</i>
элементов, каждый из которых будет инициализирован значением аргумента
<tt>:initial-element</tt> (который по-умолчанию <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>). <i>size</i> должен быть
неотрицательным целым числом. Например: <div class="lisp"><div class="tabbing">
(make-list 5) <span class="math"> ⇒</span> (<tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt> <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt> <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt> <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt> <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>)
   <br>                      (make-list 3 <tt>:initial-element</tt> &#x2019;rah) <span class="math"> ⇒</span> (rah rah rah)<br>
<!--l. 1683--><p class="noindent" ></div>
<!--l. 1683--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148600015.2" id="x104-148600015.2"></a></span>
<!--l. 1683--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148700015.2" id="x104-148700015.2"></a></span>
</div>
</div>
<div class="defun">
<!--l. 1686--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1487001"></a><a 
 id="x104-1487002r464"></a><b> append</b>  &#x0026;rest  <i>lists</i>
</div>
                                                                          

                                                                          
<!--l. 1688--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148800015.2" id="x104-148800015.2"></a></span>
   Функция возвращает список содержащий все элементы указанных в
аргументах списков. Аргументы не разрушаются. Например: <div class="lisp"><div class="tabbing">
(append &#x2019;(a b c) &#x2019;(d e f) &#x2019;() &#x2019;(g)) <span class="math"> ⇒</span> (a b c d e f g)
   <br>
<!--l. 1694--><p class="noindent" ></div>
<!--l. 1694--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-148900015.2" id="x104-148900015.2"></a></span>
<!--l. 1694--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149000015.2" id="x104-149000015.2"></a></span>
</div>
<!--l. 1695--><p class="indent" >   Следует отметить, что <tt><a 
href="clmli7.html#x196-3479086r86">append</a></tt> копирует верхний уровень всех переданных
списков <i>за исключением</i> последнего. Функция <tt><a 
href="clmli7.html#x196-3479271r271">concatenate</a></tt> выполняет
похожую операцию, но всегда копирует все аргументы. Смотрите также
<tt><a 
href="clmli7.html#x196-3479644r644">nconc</a></tt>, которая похожа на <tt><a 
href="clmli7.html#x196-3479086r86">append</a></tt>, но разрушает все аргументы кроме
последнего.
<!--l. 1701--><p class="indent" >   Последний аргумент может быть любым Lisp объектом, и в этом случае
этот объект становится последним элементов итогового списка. Например,
<tt>(append &#x2019;(a b c) &#x2019;d)</tt> <span class="math"> ⇒</span> <tt>(a b c . d)</tt>.
<tt>
<!--l. 1705--><p class="indent" >   (append <i>x</i> &#x2019;())</tt> может быть использовано для копирования списка <i>x</i>,
однако для этого больше подходит функция <tt><a 
href="clmli7.html#x196-3479283r283">copy-list</a></tt>.
</div>
<div class="defun">
<!--l. 1709--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1490001"></a><a 
 id="x104-1490002r465"></a><b> copy-list</b>  <i>list</i>
</div>
<!--l. 1711--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149100015.2" id="x104-149100015.2"></a></span>
   Функция возвращает список, который равен <tt><a 
href="clmli7.html#x196-3479369r369">equal</a></tt> и в то же время не
равен <tt><a 
href="clmli7.html#x196-3479367r367">eq</a></tt> списку <i>list</i>, Копируется только верхний уровень списка, то есть
<tt><a 
href="clmli7.html#x196-3479283r283">copy-list</a></tt> копирует только в направлении <i>cdr</i> элементов, но не в
направлении <i>car</i> элементов. Если список «с точкой», то есть <tt>(cdr (last
<i>list</i>))</tt> является не-<tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt> атомом, тогда итоговый список также будет «с
                                                                          

                                                                          
точкой». Смотрите также <tt><a 
href="clmli7.html#x196-3479286r286">copy-seq</a></tt> и <tt><a 
href="clmli7.html#x196-3479288r288">copy-tree</a></tt>.
</div>
<div class="defun">
<!--l. 1722--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1491001"></a><a 
 id="x104-1491002r466"></a><b> copy-alist</b>  <i>list</i>
</div>
<!--l. 1724--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149200015.2" id="x104-149200015.2"></a></span>
<tt>
   <a 
href="clmli7.html#x196-3479282r282">copy-alist</a></tt> копирует ассоциативные списки. При этом, также
как и в <tt><a 
href="clmli7.html#x196-3479283r283">copy-list</a></tt>, копируется только верхний уровень списка <i>lisp</i>.
Кроме того, каждый элемент списка <i>list</i>, являющийся в свою очередь
cons-ячейкой, заменяется новой cons-ячейкой с теми же <i>car</i> и <i>cons</i>
элементами.
</div>
<div class="defun">
<!--l. 1732--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1492001"></a><a 
 id="x104-1492002r467"></a><b> copy-tree</b>  <i>object</i>
</div>
<!--l. 1734--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149300015.2" id="x104-149300015.2"></a></span>
<tt>
   <a 
href="clmli7.html#x196-3479288r288">copy-tree</a></tt> копирует древовидно организованные cons-ячейки. Аргумент
<i>object</i> может быть любым Lisp&#x2019;овым объектом. Если он не является
cons-ячейкой, то ничего не произойдёт и данный объект будет возвращён в
качестве результата. В противном случае будет возвращена новая
cons-ячейка, в которой <i>car</i> и <i>cons</i> элементы будут результатами рекурсивных
вызовов <tt><a 
href="clmli7.html#x196-3479288r288">copy-tree</a></tt>. Другими словами, все cons-ячейки будут рекурсивно
скопированы, и рекурсия будет останавливаться только на атомах.
</div>
<div class="defun">
<!--l. 1744--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1493001"></a><a 
 id="x104-1493002r468"></a><b> revappend</b>  <i>x</i> <i>y</i>
</div>
<!--l. 1746--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149400015.2" id="x104-149400015.2"></a></span>
<tt>
   (revappend <i>x</i> <i>y</i>)</tt> похожа на <tt>(append (reverse <i>x</i>) <i>y</i>)</tt> за исключением
того, что она потенциально более производительна. Аргументы <i>x</i> и <i>y</i> должны
быть списками. Аргумент <i>x</i> копируется (не разрушается) в отличие от
                                                                          

                                                                          
<tt><a 
href="clmli7.html#x196-3479659r659">nreconc</a></tt>, которая разрушает первый аргумент.
</div>
<div class="defun">
<!--l. 1754--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1494001"></a><a 
 id="x104-1494002r469"></a><b> nconc</b>  &#x0026;rest  <i>lists</i>
</div>
<!--l. 1756--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149500015.2" id="x104-149500015.2"></a></span>
   В качестве аргументов <tt><a 
href="clmli7.html#x196-3479644r644">nconc</a></tt> принимает списки. Функция соединяет
списки и возвращает результат. При этом аргументы изменяются, а не
копируются. (В сравнении с <tt><a 
href="clmli7.html#x196-3479086r86">append</a></tt>, которая копирует аргументы, а не
разрушает их.) Например: <div class="lisp"><div class="tabbing">
(setq x &#x2019;(a b c))
   <br>                   (setq y &#x2019;(d e f))<br>                   (nconc x y) <span class="math"> ⇒</span> (a b c d e f)<br>
x <span class="math"> ⇒</span> (a b c d e f)<br>
<!--l. 1766--><p class="noindent" ></div>
<!--l. 1766--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149600015.2" id="x104-149600015.2"></a></span>
<!--l. 1766--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149700015.2" id="x104-149700015.2"></a></span>
</div>
<!--l. 1767--><p class="indent" >   Следует отметить, что в примере, значение <tt>x</tt> отличается от первоначального,
так как последняя cons-ячейка была изменена с помощью <tt><a 
href="clmli7.html#x196-3479807r807">rplacd</a></tt> значением
<tt>y</tt>. Если сейчас выполнить <tt>(nconc x y)</tt> ещё раз, тогда часть списка
зациклится: <tt>(a b c d e f d e f d e f ...)</tt>, и так до бесконечности. Если
<tt><a 
href="clmli7.html#x196-3479027r27">*print-circle*</a></tt> не равен <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>, тогда вывод списка будет таким: <tt>(a b c .
#1=(d e f . #1#))</tt>.
<!--l. 1775--><p class="indent" >   Вызов <tt><a 
href="clmli7.html#x196-3479644r644">nconc</a></tt>, совпадающий с наиболее близким шаблоном выражения в
левой части приводит к эквивалентным побочным действиям, как в правой
части таблицы.
<div class="flushleft" 
>
                                                                          

                                                                          
<!--l. 1778--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%" class="tabular"><tr><td align="left" ><tt>(nconc)</tt>            </td><td align="left" ><tt>nil     ;</tt>Нет побочных эффектов</td>
</tr><tr><td align="left" ><tt>(nconc nil . <i>r</i>)    </tt></td><td align="left" ><tt>(nconc . <i>r</i>)</tt>                   </td>
</tr><tr><td align="left" ><tt>(nconc <i>x</i>)</tt>          </td><td align="left" ><i>x</i>                                           </td>
</tr><tr><td align="left" ><tt>(nconc <i>x</i> <i>y</i>)</tt>        </td><td align="left" ><tt>(let ((p <i>x</i>) (q <i>y</i>))</tt>            </td>
</tr><tr><td align="left" >                   </td><td align="left" ><tt>  (rplacd (last p) q)</tt>          </td>
</tr><tr><td align="left" >                   </td><td align="left" ><tt>  p)</tt>                           </td>
</tr><tr><td align="left" ><tt>(nconc <i>x</i> <i>y</i> . <i>r</i>)</tt>   </td><td align="left" ><tt>(nconc (nconc <i>x</i> <i>y</i>) . <i>r</i>)</tt>      </td></tr></table>
</div></div>
</div>
                                                                          

                                                                          
<div class="defun">
<!--l. 1794--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1497001"></a><a 
 id="x104-1497002r470"></a><b> nreconc</b>  <i>x</i> <i>y</i>
</div>
<!--l. 1796--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149800015.2" id="x104-149800015.2"></a></span>
<tt>
   (nreconc <i>x</i> <i>y</i>)</tt> похожа на <tt>(nconc (nreverse <i>x</i>) <i>y</i>)</tt> за исключением
того, что она потенциально эффективнее. Оба аргумента должны быть
списками. Аргумент <i>x</i> разрушается. Сравните с <tt><a 
href="clmli7.html#x196-3479800r800">revappend</a></tt>.
<div class="lisp">
<!--l. 1803--><p class="indent" >   <div class="tabbing">
(setq planets &#x2019;(jupiter mars earth venus mercury))
   <br>                            (setq more-planets &#x2019;(saturn uranus pluto neptune))<br>
(nreconc more-planets planets)<br>
       <span class="math"> ⇒</span> (neptune pluto uranus saturn jupiter mars earth venus mercury)<br>
  теперь значение <tt>more-planets</tt> точно не определено<br>
<!--l. 1809--><p class="noindent" ></div>
<!--l. 1809--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-149900015.2" id="x104-149900015.2"></a></span>
<!--l. 1809--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150000015.2" id="x104-150000015.2"></a></span>
</div>
<!--l. 1811--><p class="indent" >   Поведение <tt>(nreconc <i>x</i> <i>y</i>)</tt> совпадает с поведением <tt>(nconc (nreverse
<i>x</i>) <i>y</i>)</tt> в части побочных эффектов.
</div>
<div class="defmac">
<div class="defmacheader">
<!--l. 1816--><p class="indent" >   <div class="tabbing">
 <i>[Макрос]</i><b> push </b> <a 
 id="dx104-1500001"></a><a 
 id="x104-1500002r471"></a> item place
   <br>
<!--l. 1817--><p class="noindent" ></div>
                                                                          

                                                                          
<!--l. 1817--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150100015.2" id="x104-150100015.2"></a></span>
</div>
<!--l. 1818--><p class="indent" >   Форма <i>place</i> должна быть именем обобщённое переменной, содержащей
список. <i>item</i> может указывать на любой Lisp&#x2019;овый объект. <i>item</i> вставляется в
начало списка и данный список возвращается в качестве результата. Форма
<i>place</i> может быть любой формой, которая подходит для <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt>. Если
рассматривать список как стек, тогда <tt><a 
href="clmli7.html#x196-3479751r751">push</a></tt> добавляет элемент на вершину
стека. Например: <div class="lisp"><div class="tabbing">
(setq x &#x2019;(a (b c) d))
   <br>                   (push 5 (cadr x)) <span class="math"> ⇒</span> (5 b c) и теперь x <span class="math"> ⇒</span> (a (5 b c) d)<br>
<!--l. 1829--><p class="noindent" ></div>
<!--l. 1829--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150200015.2" id="x104-150200015.2"></a></span>
<!--l. 1829--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150300015.2" id="x104-150300015.2"></a></span>
</div>
<!--l. 1830--><p class="indent" >   Действие от <div class="lisp"><div class="tabbing">
(push <i>item</i> <i>place</i>)
   <br>
<!--l. 1833--><p class="noindent" ></div>
<!--l. 1833--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150400015.2" id="x104-150400015.2"></a></span>
<!--l. 1833--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150500015.2" id="x104-150500015.2"></a></span>
</div>
<!--l. 1834--><p class="indent" >   эквивалентно действию <div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(setf <i>place</i> (cons <i>item</i> <i>place</i>))
   <br>
<!--l. 1837--><p class="noindent" ></div>
<!--l. 1837--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150600015.2" id="x104-150600015.2"></a></span>
<!--l. 1837--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150700015.2" id="x104-150700015.2"></a></span>
</div>
<!--l. 1838--><p class="indent" >   за исключением того, что <tt><a 
href="clmli7.html#x196-3479751r751">push</a></tt> выполняет форму <i>place</i> только один раз, а
не три. Более того, в для некоторых форм <i>place</i> <tt><a 
href="clmli7.html#x196-3479751r751">push</a></tt> может быть
эффективнее чем версия с <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt>.
<!--l. 1843--><p class="indent" >   Следует отметить, что <i>item</i> вычисляется прежде чем вычисляется
<i>place</i>.
</div>
<div class="defmac">
<div class="defmacheader">
<!--l. 1848--><p class="indent" >   <div class="tabbing">
 <i>[Макрос]</i><b> pushnew </b> <a 
 id="dx104-1507001"></a><a 
 id="x104-1507002r472"></a> item place &#x0026;key :test :test-not :key
   <br>
<!--l. 1849--><p class="noindent" ></div>
<!--l. 1849--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150800015.2" id="x104-150800015.2"></a></span>
</div>
<!--l. 1850--><p class="indent" >   Форма <i>place</i> должна быть именем обобщённое переменной, содержащей
список. <i>item</i> может указывать на любой Lisp&#x2019;овый объект. Если <i>item</i> не
содержится в списке (этот факт устанавливается с помощью предиката
переданного в <tt>:test</tt>, который по-умолчанию <tt><a 
href="clmli7.html#x196-3479368r368">eql</a></tt>), тогда <i>item</i> вставляется в
начало списка и данный список возвращается в качестве результата. В
противном случае возвращается исходный список. Форма <i>place</i> может быть
любой формой, которая подходит для <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt>. Если рассматривать список как
                                                                          

                                                                          
множество, тогда <tt><a 
href="clmli7.html#x196-3479752r752">pushnew</a></tt> добавляет элемент в множество. Смотрите
<tt><a 
href="clmli7.html#x196-3479078r78">adjoin</a></tt>.
<!--l. 1860--><p class="indent" >   Именованные параметры <tt><a 
href="clmli7.html#x196-3479752r752">pushnew</a></tt> имеют тот же смысл, что и в функциях
для последовательностей. Смотрите главу <a 
href="clmch14.html#x96-134700014">14<!--tex4ht:ref: KSEQUE --></a>. По сути, данные аргументы
идентичны аргументам <tt><a 
href="clmli7.html#x196-3479078r78">adjoin</a></tt>.
<tt>
<!--l. 1864--><p class="indent" >   <a 
href="clmli7.html#x196-3479752r752">pushnew</a></tt> возвращает модифицированное содержимое переменной <i>place</i>.
Например: <div class="lisp"><div class="tabbing">
(setq x &#x2019;(a (b c) d))
   <br>              (pushnew 5 (cadr x)) <span class="math"> ⇒</span> (5 b c) и теперь x <span class="math"> ⇒</span> (a (5 b c) d)<br>
(pushnew &#x2019;b (cadr x)) <span class="math"> ⇒</span> (5 b c) и <tt>x</tt> не меняется<br>
<!--l. 1870--><p class="noindent" ></div>
<!--l. 1870--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-150900015.2" id="x104-150900015.2"></a></span>
<!--l. 1870--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151000015.2" id="x104-151000015.2"></a></span>
</div>
<!--l. 1871--><p class="indent" >   Действие от <div class="lisp"><div class="tabbing">
(pushnew <i>item</i> <i>place</i> <tt>:test</tt> <i>p</i>)
   <br>
<!--l. 1874--><p class="noindent" ></div>
<!--l. 1874--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151100015.2" id="x104-151100015.2"></a></span>
<!--l. 1874--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151200015.2" id="x104-151200015.2"></a></span>
</div>
<!--l. 1875--><p class="indent" >   эквивалентно действию <div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(setf <i>place</i> (adjoin <i>item</i> <i>place</i> <tt>:test</tt> <i>p</i>))
   <br>
<!--l. 1878--><p class="noindent" ></div>
<!--l. 1878--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151300015.2" id="x104-151300015.2"></a></span>
<!--l. 1878--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151400015.2" id="x104-151400015.2"></a></span>
</div>
<!--l. 1879--><p class="indent" >   за исключением того, что <tt><a 
href="clmli7.html#x196-3479752r752">pushnew</a></tt> выполняет форму <i>place</i> только один
раз, а не три. Более того, в для некоторых форм <i>place</i> <tt><a 
href="clmli7.html#x196-3479752r752">pushnew</a></tt> может быть
эффективнее чем версия с <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt>.
<!--l. 1884--><p class="indent" >   Следует отметить, что <i>item</i> вычисляется прежде чем вычисляется
<i>place</i>.
</div>
<div class="defmac">
<div class="defmacheader">
<!--l. 1889--><p class="indent" >   <div class="tabbing">
 <i>[Макрос]</i><b> pop </b> <a 
 id="dx104-1514001"></a><a 
 id="x104-1514002r473"></a> place
   <br>
<!--l. 1890--><p class="noindent" ></div>
<!--l. 1890--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151500015.2" id="x104-151500015.2"></a></span>
</div>
<!--l. 1891--><p class="indent" >   Форма <i>place</i> должна быть именем обобщённое переменной, содержащей
список. Результатом <tt><a 
href="clmli7.html#x196-3479713r713">pop</a></tt> является результат <tt><a 
href="clmli7.html#x196-3479178r178">car</a></tt> функции для переданного
списка, и побочным эффектом является то, что в обобщённую переменную
сохраняется результат <tt><a 
href="clmli7.html#x196-3479197r197">cdr</a></tt> для списка. Форма <i>place</i> может быть любой
формой, которая подходит для <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt>. Если рассматривать исходный список
как стек, то <tt><a 
href="clmli7.html#x196-3479713r713">pop</a></tt> достаёт элемент из вершины стека и возвращает его.
Например: <div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(setq stack &#x2019;(a b c))
   <br>                                        (pop stack) <span class="math"> ⇒</span> a and now stack <span class="math"> ⇒</span> (b c)<br>
<!--l. 1902--><p class="noindent" ></div>
<!--l. 1902--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151600015.2" id="x104-151600015.2"></a></span>
<!--l. 1902--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151700015.2" id="x104-151700015.2"></a></span>
</div>
<!--l. 1903--><p class="indent" >   Действия от <tt>(pop <i>place</i>)</tt> эквивалентно <div class="lisp"><div class="tabbing">
(prog1 (car <i>place</i>) (setf <i>place</i> (cdr <i>place</i>)))
   <br>
<!--l. 1906--><p class="noindent" ></div>
<!--l. 1906--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151800015.2" id="x104-151800015.2"></a></span>
<!--l. 1906--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-151900015.2" id="x104-151900015.2"></a></span>
</div>
<!--l. 1907--><p class="indent" >   за исключением того, что <tt><a 
href="clmli7.html#x196-3479713r713">pop</a></tt> выполняет форму <i>place</i> только один раз, а
не три. Более того, в для некоторых форм <i>place</i> <tt><a 
href="clmli7.html#x196-3479713r713">pop</a></tt> может быть эффективнее
чем версия с <tt><a 
href="clmli7.html#x196-3479840r840">setf</a></tt>.
</div>
<div class="defun">
<!--l. 1913--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1519001"></a><a 
 id="x104-1519002r474"></a><b> butlast</b>  <i>list</i> &#x0026;optional  <i>n</i>
</div>
<!--l. 1915--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-152000015.2" id="x104-152000015.2"></a></span>
   Функция создаёт и возвращает список с такими же элементами кроме <i>n</i>
последних, что и в списке <i>list</i>. <i>n</i> по-умолчанию равно 1. Аргумент не
разрушается. Если длина списка <i>list</i> меньше чем <i>n</i>, тогда возвращается ().
Например: <div class="lisp"><div class="tabbing">
                                                                          

                                                                          
(butlast &#x2019;(a b c d)) <span class="math"> ⇒</span> (a b c)
   <br>            (butlast &#x2019;((a b) (c d))) <span class="math"> ⇒</span> ((a b))<br>            (butlast &#x2019;(a)) <span class="math"> ⇒</span> ()<br>
(butlast nil) <span class="math"> ⇒</span> ()<br>
<!--l. 1927--><p class="noindent" ></div>
<!--l. 1927--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-152100015.2" id="x104-152100015.2"></a></span>
<!--l. 1927--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-152200015.2" id="x104-152200015.2"></a></span>
</div>
<!--l. 1928--><p class="indent" >   Имя функции образовано от фразы «all elements but the last» («все
элементы кроме последних»).
</div>
<div class="defun">
<!--l. 1932--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1522001"></a><a 
 id="x104-1522002r475"></a><b> nbutlast</b>  <i>list</i> &#x0026;optional  <i>n</i>
</div>
<!--l. 1934--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-152300015.2" id="x104-152300015.2"></a></span>
   Это деструктивная версия <tt><a 
href="clmli7.html#x196-3479157r157">butlast</a></tt>. Данная функция изменяет
<i>cdr</i> элемент cons-ячейки на <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>. Искомая cons-ячейка находится на
позиции <i>n</i>+1 с конца списка. Если длина списка <i>list</i> меньше чем <i>n</i>, тогда
возвращается (), и аргумент не модифицируется. (Таким образом можно
написать <tt>(setq a (nbutlast a))</tt>, а не <tt>(nbutlast a)</tt>.) Например:
<div class="lisp"><div class="tabbing">
(setq foo &#x2019;(a b c d))
   <br>                                                              (nbutlast foo) <span class="math"> ⇒</span> (a b c)<br>
foo <span class="math"> ⇒</span> (a b c)<br>                                       (nbutlast &#x2019;(a)) <span class="math"> ⇒</span> ()<br>
(nbutlast &#x2019;<tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>) <span class="math"> ⇒</span> ()<br>
<!--l. 1947--><p class="noindent" ></div>
<!--l. 1947--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-152400015.2" id="x104-152400015.2"></a></span>
                                                                          

                                                                          
<!--l. 1947--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-152500015.2" id="x104-152500015.2"></a></span>
</div>
</div>
<div class="defun">
<!--l. 1950--><p class="noindent" ><div class="defunheader"> <i>[Функция]</i><a 
 id="dx104-1525001"></a><a 
 id="x104-1525002r476"></a><b> ldiﬀ</b>  <i>list</i> <i>sublist</i>
</div>
<!--l. 1952--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-152600015.2" id="x104-152600015.2"></a></span>
   Аргумент <i>list</i> должен быть списком, и <i>sublist</i> должен быть подсписком
<i>list</i>. <tt><a 
href="clmli7.html#x196-3479506r506">ldiff</a></tt> (означает «list diﬀerence») возвращает новый список, элементы
которого содержат все элементы списка <i>list</i> до подсписка <i>sublist</i>. Если <i>sublist</i>
не является частью <i>list</i> (или в частности равен <tt><a 
href="clmli7.html#x196-3479650r650">nil</a></tt>), тогда возвращается
копия всего списка <i>list</i>. Аргумент <i>list</i> не разрушается. Например:
<div class="lisp"><div class="tabbing">
(setq x &#x2019;(a b c d e))
   <br>                                                           (setq y (cdddr x)) <span class="math"> ⇒</span> (d e)<br>
(ldiﬀ x y) <span class="math"> ⇒</span> (a b c)<br>
но (ldiﬀ &#x2019;(a b c d) &#x2019;(c d)) <span class="math"> ⇒</span> (a b c d)
   <br>
<!--l. 1966--><p class="noindent" ></div>
<!--l. 1966--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-152700015.2" id="x104-152700015.2"></a></span>
<!--l. 1966--><p class="noindent" ><span class="paragraphHead"><a 
href="#x104-152800015.2" id="x104-152800015.2"></a></span>
</div>
<!--l. 1967--><p class="indent" >   так как подсписок не равен <tt><a 
href="clmli7.html#x196-3479367r367">eq</a></tt> ни одной части списка.
</div>
                                                                          

                                                                          
<!--l. 1970--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse85.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse83.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse83.html#tailclmse83.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse84.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse84.html" >Наверх</a><tt>&#x003E;</tt></div><a 
 id="tailclmse84.html"></a>   </div> </div> 
</body></html> 
