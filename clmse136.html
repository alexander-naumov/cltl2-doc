<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Conditional Execution</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-17 21:46:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1648--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse137.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse135.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse135.html#tailclmse135.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse136.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch26.html#clmse136.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">26.10   </span> <a 
 id="x167-34000026.10"></a>Conditional Execution</h3>
<!--l. 1651--><p class="noindent" >The loop keywords <a 
href="#x167-340002r835">if</a>, <a 
href="#x167-340004r836">when</a>, and <a 
href="#x167-340006r837">unless</a> designate constructs that are useful when
you want some loop clauses to operate under a speciﬁed condition.
<!--l. 1655--><p class="indent" >   If the speciﬁed condition is true, the succeeding loop clause is executed. If the
speciﬁed condition is not true, the succeeding clause is skipped, and program
control moves to the clause that follows the loop keyword else. If the speciﬁed
condition is not true and no else clause is speciﬁed, the entire conditional
construct is skipped. Several clauses can be connected into one compound clause
with the loop keyword <a 
href="clmse34.html#x45-79004r49">and</a>. The end of the conditional clause can be marked with
the keyword end.
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Выражение цикла]</i><b> if </b><a 
 id="dx167-340001"></a><a 
 id="x167-340002r835"></a> expr clause  {<span class="math">and!clause}∗</span>
</td></tr></table>
<!--l. 1666--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">[<span class="math">else!clause{ and!clause}∗ ][end!]</span></td></tr></table>
<!--l. 1666--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Выражение цикла]</i><b> when </b><a 
 id="dx167-340003"></a><a 
 id="x167-340004r836"></a> expr clause  {<span class="math">and!clause}∗</span></td></tr></table>
<!--l. 1668--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">[<span class="math">else!clause{ and!clause}∗ ][end!]</span></td></tr></table>
<!--l. 1668--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Выражение цикла]</i><b> unless </b><a 
 id="dx167-340005"></a><a 
 id="x167-340006r837"></a> expr clause  {<span class="math">and!clause}∗</span></td></tr></table>
<!--l. 1670--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">[<span class="math">else!clause{ and!clause}∗ ][end!]</span></td></tr></table>
<!--l. 1671--><p class="indent" >
</div>
<!--l. 1671--><p class="noindent" ><span class="paragraphHead"><a 
 id="x167-34100026.10"></a></span>
   The constructs <a 
href="#x167-340004r836">when</a> and <a 
href="#x167-340002r835">if</a> allow conditional execution of loop clauses. These
constructs are synonyms and can be used interchangeably. [Compare this to the
<i>macro</i> <a 
href="#x167-340004r836">when</a>, which does not allow an “else” part.—GLS]
                                                                          

                                                                          
<!--l. 1677--><p class="indent" >   If the value of the test expression <i>expr</i> is non-<a 
href="clmse31.html#x42-74002r18">nil</a>, the expression <i>clause1</i> is
evaluated. If the test expression evaluates to <a 
href="clmse31.html#x42-74002r18">nil</a> and an else construct is speciﬁed,
the statements that follow the else are evaluated; otherwise, control passes to the
next clause.
<!--l. 1682--><p class="indent" >   The <a 
href="#x167-340006r837">unless</a> construct is equivalent to <a 
href="#x167-340004r836">when</a> (<a 
href="clmse34.html#x45-79002r48">not</a> <i>expr</i>) and <a 
href="#x167-340002r835">if</a> (<a 
href="clmse34.html#x45-79002r48">not</a> <i>expr</i>). If the
value of the test expression <i>expr</i> is <a 
href="clmse31.html#x42-74002r18">nil</a>, the expression <i>clause1</i> is evaluated. If the
test expression evaluates to non-<a 
href="clmse31.html#x42-74002r18">nil</a> and an else construct is speciﬁed, the
statements that follow the else are evaluated; otherwise, control passes to the next
clause. [Compare this to the <i>macro</i> <a 
href="#x167-340006r837">unless</a>, which does not allow an “else”
part—or do I mean a “then” part?! Ugh. To prevent confusion, I strongly
recommend as a matter of style that else not be used with <a 
href="#x167-340006r837">unless</a> loop
clauses.—GLS]
<!--l. 1694--><p class="indent" >   The <i>clause</i> arguments must be either accumulation, unconditional, or
conditional clauses (see section <a 
href="clmse129.html#x160-31500026.3.2">26.3.2<!--tex4ht:ref: LOOP-KINDS-SECTION --></a>). Clauses that follow the test expression
can be grouped by using the loop keyword <a 
href="clmse34.html#x45-79004r49">and</a> to produce a compound
clause.
<!--l. 1700--><p class="indent" >   The loop keyword it can be used to refer to the result of the test expression in
a clause. If multiple clauses are connected with <a 
href="clmse34.html#x45-79004r49">and</a>, the it construct must be used
in the ﬁrst clause in the block. Since it is a loop keyword, it may not be used as a
local variable within a loop.
<!--l. 1706--><p class="indent" >   If <a 
href="#x167-340004r836">when</a> or <a 
href="#x167-340002r835">if</a> clauses are nested, each else is paired with the closest preceding
<a 
href="#x167-340004r836">when</a> or <a 
href="#x167-340002r835">if</a> construct that has no associated else.
<!--l. 1710--><p class="indent" >   The optional loop keyword end marks the end of the clause. If this keyword is
not speciﬁed, the next loop keyword marks the end. You can use end to
distinguish the scoping of compound clauses. <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Group conditional clauses into a block.
</td></tr></table>
<!--l. 1714--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in numbers-list</td></tr></table>
<!--l. 1715--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      when (oddp i)</td></tr></table>
<!--l. 1716--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        do (print i)</td></tr></table>
<!--l. 1717--><p class="indent" >                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        and collect i into odd-numbers</td></tr></table>
<!--l. 1718--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        and do (terpri)</td></tr></table>
<!--l. 1719--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      else     ;I is even</td></tr></table>
<!--l. 1720--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        collect i into even-numbers</td></tr></table>
<!--l. 1721--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ﬁnally</td></tr></table>
<!--l. 1722--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        (return (values odd-numbers even-numbers)))</td></tr></table>
                                                                          

                                                                          
<!--l. 1724--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Collect numbers larger than 3.
</td></tr></table>
<!--l. 1726--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(1 2 3 4 5 6)</td></tr></table>
<!--l. 1727--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      when (and (&#x003E; i 3) i)</td></tr></table>
<!--l. 1728--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      collect it)     ;it refers to (and (&#x003E; i 3) i)</td></tr></table>
<!--l. 1729--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (4 5 6)</td></tr></table>
<!--l. 1731--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Find a number in a list.
</td></tr></table>
<!--l. 1733--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(1 2 3 4 5 6)</td></tr></table>
<!--l. 1734--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      when (and (&#x003E; i 3) i)</td></tr></table>
<!--l. 1735--><p class="indent" >                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      return it)</td></tr></table>
<!--l. 1736--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> 4</td></tr></table>
<!--l. 1738--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The preceding example is similar to the following one.
</td></tr></table>
<!--l. 1740--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(1 2 3 4 5 6)</td></tr></table>
<!--l. 1741--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      thereis (and (&#x003E; i 3) i))</td></tr></table>
                                                                          

                                                                          
<!--l. 1742--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> 4</td></tr></table>
<!--l. 1744--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:397;" 
class="tabbing">;;; An example of using UNLESS with ELSE (yuk).</td><td style="width:187;" 
class="tabbing-right">                  —GLS
</td></tr></table>
<!--l. 1746--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for turtle in teenage-mutant-ninja-turtles do</td></tr></table>
<!--l. 1747--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (loop for x in &#x2019;(joker brainiac shredder krazy-kat)</td></tr></table>
<!--l. 1748--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        unless (evil x)</td></tr></table>
<!--l. 1749--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          do (eat (make-pizza :anchovies t))</td></tr></table>
<!--l. 1750--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        else unless (and (eq x &#x2019;shredder) (attacking-p x))</td></tr></table>
<!--l. 1751--><p class="indent" >    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">               do (cut turtle slack) ;When the evil Shredder attacks,</td></tr></table>
<!--l. 1752--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">             else (ﬁght turtle x))) ; those turtle boys don&#x2019;t cut no slack</td></tr></table>
<!--l. 1754--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Nest conditional clauses.
</td></tr></table>
<!--l. 1757--><p class="indent" >                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in list</td></tr></table>
<!--l. 1758--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      when (numberp i)</td></tr></table>
<!--l. 1759--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        when (bignump i)</td></tr></table>
<!--l. 1760--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          collect i into big-numbers</td></tr></table>
<!--l. 1761--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        else     ;Not (bignump i)</td></tr></table>
<!--l. 1762--><p class="indent" >                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          collect i into other-numbers</td></tr></table>
<!--l. 1763--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      else     ;Not (numberp i)</td></tr></table>
<!--l. 1764--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        when (symbolp i)</td></tr></table>
<!--l. 1765--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          collect i into symbol-list</td></tr></table>
                                                                          

                                                                          
<!--l. 1766--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        else     ;Not (symbolp i)</td></tr></table>
<!--l. 1767--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          (error &#x0022;found a funny value in list ~S, value ~S~%&#x0022;</td></tr></table>
<!--l. 1768--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                &#x0022;list i))</td></tr></table>
<!--l. 1769--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1770--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Without the END marker, the last AND would apply to the</td></tr></table>
<!--l. 1771--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; inner IF rather than the outer one.</td></tr></table>
<!--l. 1772--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for x from 0 to 3</td></tr></table>
<!--l. 1773--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      do (print x)</td></tr></table>
<!--l. 1774--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      if (zerop (mod x 2))</td></tr></table>
<!--l. 1775--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        do (princ &#x0022; a&#x0022;)</td></tr></table>
<!--l. 1776--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          and if (zerop (ﬂoor x 2))</td></tr></table>
<!--l. 1777--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                do (princ &#x0022; b&#x0022;)</td></tr></table>
<!--l. 1778--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">              end</td></tr></table>
<!--l. 1779--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          and do (princ &#x0022; c&#x0022;))</td></tr></table>
<!--l. 1781--><p class="indent" >
</div>
</div>
                                                                          

                                                                          
   <!--l. 1785--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse137.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse135.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse135.html#tailclmse135.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse136.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch26.html#clmse136.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 1785--><p class="indent" >   <a 
 id="tailclmse136.html"></a>  
</body></html> 
