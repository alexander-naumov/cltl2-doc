<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Value Accumulation</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-13 16:31:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1234--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse137.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse135.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse135.html#tailclmse135.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse136.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch26.html#clmse136.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">26.8   </span> <a 
 id="x167-33500026.8"></a>Value Accumulation</h3>
<!--l. 1237--><p class="noindent" >Accumulating values during iteration and returning them from a loop is often
useful. Some of these accumulations occur so frequently that special loop clauses
have been developed to handle them.
<!--l. 1241--><p class="indent" >   The loop keywords <a 
href="#x167-336002r827">append</a>, <a 
href="#x167-336004r828">appending</a>, <a 
href="clmse155.html#x190-485022r1065">collect</a>, <a 
href="#x167-335004r826">collecting</a>, <a 
href="#x167-336006r829">nconc</a>, and
<a 
href="#x167-336008r830">nconcing</a> designate clauses that accumulate values in lists and return
them.
<!--l. 1247--><p class="indent" >   The loop keywords <a 
href="#x167-337002r831">count</a>, <a 
href="#x167-337004r832">counting</a>, <a 
href="#x167-339002r835">maximize</a>, <a 
href="#x167-339004r836">maximizing</a>, <a 
href="#x167-339006r837">minimize</a>,
<a 
href="#x167-339008r838">minimizing</a>, <a 
href="#x167-338002r833">sum</a>, and <a 
href="#x167-338004r834">summing</a> designate clauses that accumulate and return
numerical values. [There is no semantic diﬀerence between the “ing” keywords and
their non-“ing” counterparts. They are provided purely for the sake of stylistic
diversity among users. I happen to prefer the non-“ing” forms—when I use <a 
href="clmse42.html#x54-118002r90">loop</a> at
all.—GLS]
<!--l. 1257--><p class="indent" >   The loop preposition into can be used to name the variable used to hold
partial accumulations. The variable is bound as if by the loop construct
<a 
href="clmse137.html#x168-341002r839">with</a> (see section <a 
href="clmse137.html#x168-34100026.9">26.9<!--tex4ht:ref: LOOP-VAR-SECTION --></a>). If into is used, the construct does not provide a
default return value; however, the variable is available for use in any <a 
href="clmse140.html#x171-350006r848">ﬁnally</a>
clause.
<!--l. 1265--><p class="indent" >   You can combine value-returning accumulation clauses in a loop if all
the clauses accumulate the same type of data object. By default, the
Loop Facility returns only one value; thus, the data objects collected by
multiple accumulation clauses as return values must have compatible types.
For example, since both the <a 
href="clmse155.html#x190-485022r1065">collect</a> and <a 
href="#x167-336002r827">append</a> constructs accumulate
objects into a list that is returned from a loop, you can combine them
safely.
<div class=lisp>
<div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Collect every name and the kids in one list by using
</td></tr></table>
<!--l. 1275--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; COLLECT and APPEND.</td></tr></table>
<!--l. 1276--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for name in &#x2019;(fred sue alice joe june)</td></tr></table>
<!--l. 1277--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      for kids in &#x2019;((bob ken) () () (kris sunshine) ())</td></tr></table>
<!--l. 1278--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      collect name</td></tr></table>
<!--l. 1279--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      append kids)</td></tr></table>
<!--l. 1280--><p class="indent" >    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (FRED BOB KEN SUE ALICE JOE KRIS SUNSHINE JUNE)</td></tr></table>
<!--l. 1282--><p class="indent" >
</div>
</div>
<!--l. 1283--><p class="noindent" >[In the preceding example, note that the items accumulated by the <a 
href="clmse155.html#x190-485022r1065">collect</a> and
<a 
href="#x167-336002r827">append</a> clauses are interleaved in the result list, according to the order in which
the clauses were executed.—GLS]
<!--l. 1287--><p class="indent" >   Multiple clauses that do not accumulate the same type of data object can
coexist in a loop only if each clause accumulates its values into a diﬀerent
user-speciﬁed variable. Any number of values can be returned from a loop if
you use the Common Lisp function <a 
href="clmse43.html#x55-131002r105">values</a>, as the next example shows:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Count and collect names and ages.
</td></tr></table>
<!--l. 1293--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for name in &#x2019;(fred sue alice joe june)</td></tr></table>
<!--l. 1294--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      as age in &#x2019;(22 26 19 20 10)</td></tr></table>
<!--l. 1295--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      append (list name age) into name-and-age-list</td></tr></table>
<!--l. 1296--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      count name into name-count</td></tr></table>
<!--l. 1297--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      sum age into total-age</td></tr></table>
<!--l. 1298--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ﬁnally</td></tr></table>
<!--l. 1299--><p class="indent" >                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        (return (values (round total-age name-count)</td></tr></table>
<!--l. 1300--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                        name-and-age-list)))</td></tr></table>
<!--l. 1301--><p class="indent" >           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 19 and (FRED 22 SUE 26 ALICE 19 JOE 20 JUNE 10)</td></tr></table>
<!--l. 1303--><p class="indent" >
</div>
</div>
<div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> collect </b><a 
 id="dx167-335001"></a><a 
 id="x167-335002r825"></a> expr [into var]
</td></tr></table>
<!--l. 1306--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Loop clause]</i><b> collecting </b><a 
 id="dx167-335003"></a><a 
 id="x167-335004r826"></a> expr [into var]</td></tr></table>
<!--l. 1308--><p class="indent" >
</div>
<!--l. 1308--><p class="noindent" ><span class="paragraphHead"><a 
 id="x167-33600026.8"></a></span>
   During each iteration, these constructs collect the value of the speciﬁed
expression into a list. When iteration terminates, the list is returned.
<!--l. 1312--><p class="indent" >   The argument <i>var</i> is set to the list of collected values; if <i>var</i> is speciﬁed, the
loop does not return the ﬁnal list automatically. If <i>var</i> is not speciﬁed, it is
equivalent to specifying an internal name for <i>var</i> and returning its value in a
<a 
href="clmse140.html#x171-350006r848">ﬁnally</a> clause. The <i>var</i> argument is bound as if by the construct <a 
href="clmse137.html#x168-341002r839">with</a>. You cannot
specify a data type for <i>var</i>; it must be of type <a 
href="clmse84.html#x104-206038r461">list</a>.
<!--l. 1322--><p class="indent" >   Examples: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Collect all the symbols in a list.
</td></tr></table>
<!--l. 1324--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(bird 3 4 turtle (1 . 4) horse cat)</td></tr></table>
<!--l. 1325--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      when (symbolp i) collect i)</td></tr></table>
<!--l. 1326--><p class="indent" >                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (BIRD TURTLE HORSE CAT)</td></tr></table>
<!--l. 1327--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1328--><p class="indent" >                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Collect and return odd numbers.</td></tr></table>
<!--l. 1329--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 1 to 10</td></tr></table>
<!--l. 1330--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      if (oddp i) collect i)</td></tr></table>
<!--l. 1331--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (1 3 5 7 9)</td></tr></table>
<!--l. 1332--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1333--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Collect items into local variable, but don&#x2019;t return them.</td></tr></table>
<!--l. 1334--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(a b c d) by #&#x2019;cddr</td></tr></table>
<!--l. 1335--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      collect i into my-list</td></tr></table>
<!--l. 1336--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:232;" 
class="tabbing">      ﬁnally (print my-list)) </td><td style="width:352;" 
class="tabbing-right">                                ;Prints 1 line</td></tr></table>
<!--l. 1337--><p class="indent" >                                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(A C)</td></tr></table>
<!--l. 1338--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ NIL</td></tr></table>
<!--l. 1340--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> append </b><a 
 id="dx167-336001"></a><a 
 id="x167-336002r827"></a> expr [into var]
</td></tr></table>
<!--l. 1344--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Loop clause]</i><b> appending </b><a 
 id="dx167-336003"></a><a 
 id="x167-336004r828"></a> expr [into var]</td></tr></table>
<!--l. 1345--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Loop clause]</i><b> nconc </b><a 
 id="dx167-336005"></a><a 
 id="x167-336006r829"></a> expr [into var]</td></tr></table>
<!--l. 1346--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Loop clause]</i><b> nconcing </b><a 
 id="dx167-336007"></a><a 
 id="x167-336008r830"></a> expr [into var]</td></tr></table>
<!--l. 1348--><p class="indent" >
</div>
<!--l. 1348--><p class="noindent" ><span class="paragraphHead"><a 
 id="x167-33700026.8"></a></span>
   These constructs are similar to <a 
href="clmse155.html#x190-485022r1065">collect</a> except that the values of the speciﬁed
expression must be lists.
<!--l. 1352--><p class="indent" >   The <a 
href="#x167-336002r827">append</a> keyword causes its list values to be concatenated into
a single list, as if they were arguments to the Common Lisp function
<a 
href="#x167-336002r827">append</a>.
<!--l. 1356--><p class="indent" >   The <a 
href="#x167-336006r829">nconc</a> keyword causes its list values to be concatenated into a single list,
as if they were arguments to the Common Lisp function <a 
href="#x167-336006r829">nconc</a>. Note that the
<a 
href="#x167-336006r829">nconc</a> keyword destructively modiﬁes its argument lists.
<!--l. 1361--><p class="indent" >   The argument <i>var</i> is set to the list of concatenated values; if you specify <i>var</i>,
the loop does not return the ﬁnal list automatically. The <i>var</i> argument is bound
as if by the construct <a 
href="clmse137.html#x168-341002r839">with</a>. You cannot specify a data type for <i>var</i>; it must be of
type <a 
href="clmse84.html#x104-206038r461">list</a>.
<!--l. 1368--><p class="indent" >   Examples: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Use APPEND to concatenate some sublists.
</td></tr></table>
<!--l. 1370--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for x in &#x2019;((a) (b) ((c)))</td></tr></table>
<!--l. 1371--><p class="indent" >                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      append x)</td></tr></table>
<!--l. 1372--><p class="indent" >                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (A B (C))</td></tr></table>
<!--l. 1374--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; NCONC some sublists together. Note that only lists
</td></tr></table>
<!--l. 1376--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; made by the call to LIST are modiﬁed.</td></tr></table>
<!--l. 1377--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i upfrom 0</td></tr></table>
<!--l. 1378--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      as x in &#x2019;(a b (c))</td></tr></table>
<!--l. 1379--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      nconc (if (evenp i) (list x) &#x2019;()))</td></tr></table>
<!--l. 1380--><p class="indent" >                                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (A (C))</td></tr></table>
<!--l. 1382--><p class="indent" >
</div>
</div>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> count </b><a 
 id="dx167-337001"></a><a 
 id="x167-337002r831"></a> expr [into var] [type-spec]
</td></tr></table>
<!--l. 1387--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Loop clause]</i><b> counting </b><a 
 id="dx167-337003"></a><a 
 id="x167-337004r832"></a> expr [into var] [type-spec]</td></tr></table>
<!--l. 1389--><p class="indent" >
</div>
<!--l. 1389--><p class="noindent" ><span class="paragraphHead"><a 
 id="x167-33800026.8"></a></span>
   The <a 
href="#x167-337002r831">count</a> construct counts the number of times that the speciﬁed expression
has a non-<a 
href="clmse31.html#x42-74002r18">nil</a> value.
<!--l. 1393--><p class="indent" >   The argument <i>var</i> accumulates the number of occurrences; if <i>var</i> is speciﬁed,
the loop does not return the ﬁnal count automatically. The <i>var</i> argument is
bound as if by the construct <a 
href="clmse137.html#x168-341002r839">with</a>.
<!--l. 1398--><p class="indent" >   If into <i>var</i> is used, the optional <i>type-spec</i> argument speciﬁes a data type for
<i>var</i>. If there is no into variable, the optional <i>type-spec</i> argument applies to the
internal variable that is keeping the count. In either case it is an error to specify a
non-numeric data type. The default type is implementation-dependent, but it
must be a subtype of (or integer ﬂoat).
                                                                          

                                                                          
<!--l. 1407--><p class="indent" >   Example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(a b nil c nil d e)
</td></tr></table>
<!--l. 1409--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      count i)</td></tr></table>
<!--l. 1410--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 5</td></tr></table>
<!--l. 1412--><p class="indent" >
</div>
</div>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> sum </b><a 
 id="dx167-338001"></a><a 
 id="x167-338002r833"></a> expr [into var] [type-spec]
</td></tr></table>
<!--l. 1417--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Loop clause]</i><b> summing </b><a 
 id="dx167-338003"></a><a 
 id="x167-338004r834"></a> expr [into var] [type-spec]</td></tr></table>
<!--l. 1419--><p class="indent" >
</div>
<!--l. 1419--><p class="noindent" ><span class="paragraphHead"><a 
 id="x167-33900026.8"></a></span>
   The <a 
href="#x167-338002r833">sum</a> construct forms a cumulative sum of the values of the speciﬁed
expression at each iteration.
<!--l. 1423--><p class="indent" >   The argument <i>var</i> is used to accumulate the sum; if <i>var</i> is speciﬁed, the loop
does not return the ﬁnal sum automatically. The <i>var</i> argument is bound as if by
the construct <a 
href="clmse137.html#x168-341002r839">with</a>.
<!--l. 1428--><p class="indent" >   If into <i>var</i> is used, the optional <i>type-spec</i> argument speciﬁes a data type for
<i>var</i>. If there is no into variable, the optional <i>type-spec</i> argument applies to the
internal variable that is keeping the sum. In either case it is an error to specify a
non-numeric data type. The default type is implementation-dependent, but it
must be a subtype of number.
<!--l. 1437--><p class="indent" >   Examples: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Sum the elements of a list.
</td></tr></table>
                                                                          

                                                                          
<!--l. 1439--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1440--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i ﬁxnum in &#x2019;(1 2 3 4 5)</td></tr></table>
<!--l. 1441--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      sum i)</td></tr></table>
<!--l. 1442--><p class="indent" >                                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 15</td></tr></table>
<!--l. 1443--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1444--><p class="indent" >                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Sum a function of elements of a list.</td></tr></table>
<!--l. 1445--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1446--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq series</td></tr></table>
<!--l. 1447--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      &#x2019;(1.2 4.3 5.7))</td></tr></table>
<!--l. 1448--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (1.2 4.3 5.7)</td></tr></table>
<!--l. 1449--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1450--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for v in series</td></tr></table>
<!--l. 1451--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      sum (* 2.0 v))</td></tr></table>
<!--l. 1452--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 22.4</td></tr></table>
<!--l. 1454--><p class="indent" >
</div>
</div>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Loop clause]</i><b> maximize </b><a 
 id="dx167-339001"></a><a 
 id="x167-339002r835"></a> expr [into var] [type-spec]
</td></tr></table>
<!--l. 1458--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Loop clause]</i><b> maximizing </b><a 
 id="dx167-339003"></a><a 
 id="x167-339004r836"></a> expr [into var] [type-spec]</td></tr></table>
<!--l. 1459--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Loop clause]</i><b> minimize </b><a 
 id="dx167-339005"></a><a 
 id="x167-339006r837"></a> expr [into var] [type-spec]</td></tr></table>
<!--l. 1460--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Loop clause]</i><b> minimizing </b><a 
 id="dx167-339007"></a><a 
 id="x167-339008r838"></a> expr [into var] [type-spec]</td></tr></table>
<!--l. 1462--><p class="indent" >
</div>
<!--l. 1462--><p class="noindent" ><span class="paragraphHead"><a 
 id="x167-34000026.8"></a></span>
   The <a 
href="#x167-339002r835">maximize</a> construct compares the value of the speciﬁed expression
obtained during the ﬁrst iteration with values obtained in successive iterations.
The maximum value encountered is determined and returned. If the loop never
executes the body, the returned value is not meaningful.
<!--l. 1468--><p class="indent" >   The <a 
href="#x167-339006r837">minimize</a> construct is similar to <a 
href="#x167-339002r835">maximize</a>; it determines and returns the
minimum value.
                                                                          

                                                                          
<!--l. 1471--><p class="indent" >   The argument <i>var</i> accumulates the maximum or minimum value; if <i>var</i> is
speciﬁed, the loop does not return the maximum or minimum automatically. The
<i>var</i> argument is bound as if by the construct <a 
href="clmse137.html#x168-341002r839">with</a>.
<!--l. 1476--><p class="indent" >   If into <i>var</i> is used, the optional <i>type-spec</i> argument speciﬁes a data type for
<i>var</i>. If there is no into variable, the optional <i>type-spec</i> argument applies to
the internal variable that is keeping the intermediate result. In either
case it is an error to specify a non-numeric data type. The default type
is implementation-dependent, but it must be a subtype of (or integer
ﬂoat).
<!--l. 1485--><p class="indent" >   Examples: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(2 1 5 3 4)
</td></tr></table>
<!--l. 1487--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      maximize i)</td></tr></table>
<!--l. 1488--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 5</td></tr></table>
<!--l. 1490--><p class="indent" >
</div>
</div>
                                                                          

                                                                          
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(2 1 5 3 4)
</td></tr></table>
<!--l. 1493--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      minimize i)</td></tr></table>
<!--l. 1494--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 1</td></tr></table>
<!--l. 1495--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1496--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; In this example, FIXNUM applies to the internal</td></tr></table>
<!--l. 1497--><p class="indent" >                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; variable that holds the maximum value.</td></tr></table>
<!--l. 1498--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1499--><p class="indent" >                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq series &#x2019;(1.2 4.3 5.7))</td></tr></table>
<!--l. 1500--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ (1.2 4.3 5.7)</td></tr></table>
<!--l. 1501--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1502--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for v in series</td></tr></table>
<!--l. 1503--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      maximize (round v) ﬁxnum)</td></tr></table>
<!--l. 1504--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 6</td></tr></table>
<!--l. 1505--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1506--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; In this example, FIXNUM applies to the variable RESULT.</td></tr></table>
<!--l. 1507--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1508--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for v ﬂoat in series</td></tr></table>
<!--l. 1509--><p class="indent" >                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      minimize (round v) into result ﬁxnum</td></tr></table>
<!--l. 1510--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ﬁnally (return result))</td></tr></table>
<!--l. 1511--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    ⇒ 1</td></tr></table>
<!--l. 1513--><p class="indent" >
</div>
</div>
                                                                          

                                                                          
   <!--l. 1518--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse137.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse135.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse135.html#tailclmse135.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse136.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch26.html#clmse136.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 1518--><p class="indent" >   <a 
 id="tailclmse136.html"></a>  
</body></html> 
