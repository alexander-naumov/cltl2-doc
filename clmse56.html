<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Creating Symbols Создание символов</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-11 14:56:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 586--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch11.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse55.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse55.html#tailclmse55.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse56.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html#clmse56.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">10.3   </span> <a 
 id="x71-17900010.3"></a>Creating Symbols Создание символов</h3>
<!--l. 588--><p class="noindent" >Symbols can be used in two rather diﬀerent ways. An <i>interned</i> symbol is one that
is indexed by its print name in a catalogue called a <i>package</i>. A request to locate a
symbol with that print name results in the same (<a 
href="clmse33.html#x44-81002r46">eq</a>) symbol. Every time input is
read with the function <a 
href="clmse116.html#x143-281003r696">read</a>, and that print name appears, it is read as the same
symbol. This property of symbols makes them appropriate to use as names for
things and as hooks on which to hang permanent data objects (using the property
list, for example).
<!--l. 599--><p class="indent" >   Символы могут использоваться двумя различными способами.
<i>Интернированный</i> символ один из них, который определяется его
выводимым именем и каталогом, называемым <i>пакет</i>. A request to locate a
symbol with that print name results in the same (<a 
href="clmse33.html#x44-81002r46">eq</a>) symbol. Every time input is
read with the function <a 
href="clmse116.html#x143-281003r696">read</a>, and that print name appears, it is read as the same
symbol. This property of symbols makes them appropriate to use as names for
things and as hooks on which to hang permanent data objects (using the property
list, for example).
<!--l. 610--><p class="indent" >   Interned symbols are normally created automatically; the ﬁrst time something
(such as the function <a 
href="clmse116.html#x143-281003r696">read</a>) asks the package system for a symbol with a given
print name, that symbol is automatically created. The function used to
ask for an interned symbol is <a 
href="clmse63.html#x79-188030r186">intern</a>, or one of the functions related to
<a 
href="clmse63.html#x79-188030r186">intern</a>.
<!--l. 617--><p class="indent" >   Интернированные символы обычно создаются автоматически. Во время
первого обращения к символу в системе пакетов (с помощью <a 
href="clmse116.html#x143-281003r696">read</a>,
например), данный символ создается автоматически. Для обращения к
интернированному символу используется функция inter, или другая с ней
связанная.
<!--l. 623--><p class="indent" >   Although interned symbols are the most commonly used, they will not be
discussed further here. For more information, see chapter <a 
href="clmch11.html#x72-18000011">11<!--tex4ht:ref: XPACK --></a>.
<!--l. 627--><p class="indent" >   Несмотря на то, что интернированные символы используются чаще всего,
они не будут больше здесь рассматриваться. Для подробной информации
смотрите главу <a 
href="clmch11.html#x72-18000011">11<!--tex4ht:ref: XPACK --></a>.
                                                                          

                                                                          
<!--l. 631--><p class="indent" >   An <i>uninterned</i> symbol is a symbol used simply as a data object, with no
special cataloguing (it belongs to no particular package). An uninterned symbol is
printed as #: followed by its print name. The following are some functions for
creating uninterned symbols.
<i>
<!--l. 637--><p class="indent" >   Неинтернированный</i> символ является символом, используемым в качестве
объекта данных, без связи с каталогом (он не имеет родительского пакета).
Неинтернированный символ выводится как #: с последующим выводимым
именем.
<div class=defun>
<!--l. 642--><p class="noindent" ><i>[Function]</i><a 
 id="dx71-179001"></a><a 
 id="x71-179002r166"></a><b> make-symbol</b>  <i>print-name</i>
<!--l. 644--><p class="noindent" >(make-symbol <i>print-name</i>) creates a new uninterned symbol, whose print name is
the string <i>print-name</i>. The value and function bindings will be unbound and the
property list will be empty.
<!--l. 649--><p class="indent" >   The string actually installed in the symbol&#x2019;s print-name component may be
the given string <i>print-name</i> or may be a copy of it, at the implementation&#x2019;s
discretion. The user should not assume that (symbol-name (make-symbol x)) is <a 
href="clmse33.html#x44-81002r46">eq</a>
to x, but also should not alter a string once it has been given as an argument to
<a 
href="#x71-179002r166">make-symbol</a>.
<!--l. 657--><p class="indent" >   (make-symbol <i>print-name</i>) создает новый неинтернированный символ, у
которого выводимое имя является строкой <i>print-name</i>. Полученный символ
не имеет значения функции (unbound) и пустой список свойств.
<!--l. 661--><p class="indent" >   Строка, переданная в аргументе, может использоваться сразу, либо
сначала копироваться. Это зависит от реализации. Пользователь не может
полагаться на то, что (symbol-name (make-symbol x)) равно <a 
href="clmse33.html#x44-81002r46">eq</a> x, но и также
не может изменять строку переданную в качестве аргумента для
<a 
href="#x71-179002r166">make-symbol</a>.
<div class=implementation>
<!--l. 668--><p class="noindent" ><b>Implementation note:</b> An implementation might choose, for example, to
copy the string to some read-only area, in the expectation that it will never be
altered.
</div>
</div>
<div class=defun>
<!--l. 676--><p class="noindent" ><i>[Function]</i><a 
 id="dx71-179003"></a><a 
 id="x71-179004r167"></a><b> copy-symbol</b>  <i>sym</i> &#x0026;optional  <i>copy-props</i>
<!--l. 678--><p class="noindent" >This returns a new uninterned symbol with the same print name as <i>sym</i>.
<!--l. 682--><p class="indent" >   Эта функция возвращает новый неинтернированный символ с тем же
выводимым именем, что <i>sym</i>.
                                                                          

                                                                          
<div class=newer>
<!--l. 686--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx71-179005"></a>that the print name of the new symbol is
required to be the same only in the sense of <a 
href="clmse101.html#x124-246002r595">string=</a>; in other words, an
implementation is permitted (but not required) to make a copy of the print name.
User programs should not assume that the print names of the old and
new symbols will be <a 
href="clmse33.html#x44-81002r46">eq</a>, although they may happen to be <a 
href="clmse33.html#x44-81002r46">eq</a> in some
implementations.
</div>
<!--l. 696--><p class="indent" >   If <i>copy-props</i> is non-<a 
href="clmse31.html#x42-77002r19">nil</a>, then the initial value and function deﬁnition of the
new symbol will be the same as those of <i>sym</i>, and the property list of the new
symbol will be a copy of <i>sym</i>&#x2019;s.
<!--l. 701--><p class="indent" >   Если <i>copy-props</i> не-<a 
href="clmse31.html#x42-77002r19">nil</a>, тогда начальное значение и определение функции
нового символа будут те же, что и в переданном <i>sym</i>, а список свойств будет
скопирован из исходного символа.
<div class=newer>
<!--l. 706--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx71-179006"></a>to clarify that only the top-level conses of the
property list are copied; it is as if (copy-list (symbol-plist <i>sym</i>)) were used as the
property list of the new symbol.
</div>
<!--l. 712--><p class="indent" >   If <i>copy-props</i> is <a 
href="clmse31.html#x42-77002r19">nil</a> (the default), then the new symbol will be unbound and
undeﬁned, and its property list will be empty.
<!--l. 716--><p class="indent" >   Если <i>copy-props</i> является <a 
href="clmse31.html#x42-77002r19">nil</a> (по-умолчанию), тогда новый символ не
будет связан, не будет иметь определения функции, и список свойств будет
пуст.
</div>
<div class=defun>
<!--l. 720--><p class="noindent" ><i>[Function]</i><a 
 id="dx71-179007"></a><a 
 id="x71-179008r168"></a><b> gensym</b>  &#x0026;optional  <i>x</i>
<!--l. 722--><p class="noindent" ><a 
href="#x71-179008r168">gensym</a> invents a print name and creates a new symbol with that print name. It
returns the new, uninterned symbol.
<!--l. 726--><p class="indent" >   The invented print name consists of a preﬁx (which defaults to G), followed by
the decimal representation of a number.
<!--l. 729--><p class="indent" >   <a 
href="#x71-179008r168">gensym</a> создает выводимое имя и создает новый символ с этим именем.
Она возвращает новый неинтернированный символ.
<!--l. 732--><p class="indent" >   Созданное имя содержит префикс (по-умолчанию G), с последующим
десятичным представлением числа. <div class=obsolete> The number is increased by 1 every time
<a 
href="#x71-179008r168">gensym</a> is called.
<!--l. 737--><p class="indent" >   If the argument <i>x</i> is present and is an integer, then <i>x</i> must be non-negative,
and the internal counter is set to <i>x</i> for future use; otherwise the internal
                                                                          

                                                                          
counter is incremented. If <i>x</i> is a string, then that string is made the default
preﬁx for this and future calls to <a 
href="#x71-179008r168">gensym</a>. After handling the argument,
<a 
href="#x71-179008r168">gensym</a> creates a symbol as it would with no argument. For example: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gensym)  ⇒ G7
</td></tr></table>
<!--l. 746--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gensym &#x0022;FOO-&#x0022;)  ⇒ FOO-8</td></tr></table>
<!--l. 747--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gensym 32)  ⇒ FOO-32</td></tr></table>
<!--l. 748--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gensym)  ⇒ FOO-33</td></tr></table>
<!--l. 749--><p class="indent" >                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gensym &#x0022;GARBAGE-&#x0022;)  ⇒ GARBAGE-34</td></tr></table>
<!--l. 751--><p class="indent" >
</div>
</div>
</div>
<!--l. 754--><p class="indent" >   <a 
href="#x71-179008r168">gensym</a> is usually used to create a symbol that should not normally be seen by
the user and whose print name is unimportant except to allow easy distinction by
eye between two such symbols. The optional argument is rarely supplied. The
name comes from “generate symbol,” and the symbols produced by it are often
called “gensyms.”
<!--l. 761--><p class="indent" >   <a 
href="#x71-179008r168">gensym</a> обычно используется для создания символа, который не виден
пользователю, и его имя не имеет важности. Необязательный аргумент
используется нечасто. Имя образовано от «генерация символа», и символы
созданные, таким образом, часто называются «gensyms».
<div class=incompatibility>
<!--l. 767--><p class="noindent" ><b>Compatibility note:</b> In earlier versions of Lisp, such as MacLisp and Interlisp, the
print name of a gensym was of ﬁxed length, consisting of a single letter and a
ﬁxed-length decimal representation with leading zeros if necessary, for example, G0007.
This convention was motivated by an implementation consideration, namely that the
name should ﬁt into a single machine word, allowing a quick and clever implementation.
Such considerations are less relevant in Common Lisp. The consistent use of mnemonic
preﬁxes can make it easier for the programmer, when debugging, to determine what code
generated a particular symbol. The elimination of the ﬁxed-length decimal
representation prevents the same name from being used twice unless the counter is
explicitly reset.
</div>
<!--l. 784--><p class="indent" >   If it is desirable for the generated symbols to be interned, and yet guaranteed
                                                                          

                                                                          
to be symbols distinct from all others, then the function <a 
href="#x71-179014r170">gentemp</a> may be more
appropriate to use.
<!--l. 790--><p class="indent" >   Если необходимо, чтобы сгенерированные символы были интернированными
и отличными от существующих символов, тогда удобно использовать
функцию <a 
href="#x71-179014r170">gentemp</a>.
<div class=newer>
<!--l. 794--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx71-179009"></a>to alter the speciﬁcation of <a 
href="#x71-179008r168">gensym</a> so that
supplying an optional argument (whether a string or a number) does <i>not</i> alter the
internal state maintained by <a 
href="#x71-179008r168">gensym</a>. Instead, the internal counter is made
explicitly available as a variable named *gensym-counter*.
<!--l. 801--><p class="indent" >   If a string argument is given to <a 
href="#x71-179008r168">gensym</a>, that string is used as the preﬁx;
otherwise “G” is used. If a number is provided, its decimal representation is used,
but the internal counter is unaﬀected. X3J13 deprecates the use of a number as an
argument.
</div>
</div>
<div class=newer>
<div class=defun>
<!--l. 809--><p class="noindent" ><i>[Variable]</i><a 
 id="dx71-179010"></a><a 
 id="x71-179011r169"></a><b> *gensym-counter*</b>
<!--l. 811--><p class="noindent" >X3J13 voted in March 1989 <a 
 id="dx71-179012"></a>to add *gensym-counter*, which holds the state of the
<a 
href="#x71-179008r168">gensym</a> counter; that is, <a 
href="#x71-179008r168">gensym</a> uses the decimal representation of its value as
part of the generated name and then increments its value.
<!--l. 818--><p class="indent" >   The initial value of this variable is implementation-dependent but will be a
non-negative integer.
<!--l. 821--><p class="indent" >   The user may assign to or bind this variable at any time, but its value must
always be a non-negative integer.
<!--l. 824--><p class="indent" >   Переменная хранит состояние счетчика для функции <a 
href="#x71-179008r168">gensym</a>. <a 
href="#x71-179008r168">gensym</a>
использует десятичное представление этого значения в качестве части имени
генерируемого символа, а затем наращивает этот счетчик.
<!--l. 828--><p class="indent" >   Первоначальное значение этой переменной зависит от реализации, но
должно быть неотрицательным целым.
<!--l. 831--><p class="indent" >   Пользователь в любое время может присваивать или связывать это
переменную, но значение должно быть неотрицательным целым.
</div>
</div>
<div class=defun>
<!--l. 836--><p class="noindent" ><i>[Function]</i><a 
 id="dx71-179013"></a><a 
 id="x71-179014r170"></a><b> gentemp</b>  &#x0026;optional  <i>preﬁx</i> <i>package</i>
<!--l. 838--><p class="noindent" ><a 
href="#x71-179014r170">gentemp</a>, like <a 
href="#x71-179008r168">gensym</a>, creates and returns a new symbol. <a 
href="#x71-179014r170">gentemp</a> diﬀers from
                                                                          

                                                                          
<a 
href="#x71-179008r168">gensym</a> in that it interns the symbol (see <a 
href="clmse63.html#x79-188030r186">intern</a>) in the <i>package</i> (which defaults to
the current package; see <a 
href="clmse63.html#x79-187003r173">*package*</a>). <a 
href="#x71-179014r170">gentemp</a> guarantees the symbol will be
a new one not already existing in the package. It does this by using a
counter as <a 
href="#x71-179008r168">gensym</a> does, but if the generated symbol is not really new, then
the process is repeated until a new one is created. There is no provision
for resetting the <a 
href="#x71-179014r170">gentemp</a> counter. Also, the preﬁx for <a 
href="#x71-179014r170">gentemp</a> is not
remembered from one call to the next; if <i>preﬁx</i> is omitted, the default preﬁx T is
used.
<!--l. 850--><p class="indent" >   <a 
href="#x71-179014r170">gentemp</a>, как и <a 
href="#x71-179008r168">gensym</a>, создает и возвращает новый символ. <a 
href="#x71-179014r170">gentemp</a>
отличается от <a 
href="#x71-179008r168">gensym</a> в том, что возвращает интернированный символ
(смотрите <a 
href="clmse63.html#x79-188030r186">intern</a>) в пакете <i>package</i> (который по-умолчанию является
текущим, смотрите <a 
href="clmse63.html#x79-187003r173">*package*</a>). <a 
href="#x71-179014r170">gentemp</a> гарантирует, что символ будет
новым, и не существовал ранее в указанном пакете. Она также использует
счетчик, однако если полученный символ уже существует счетчик
наращивается, и действия повторяются, пока не будет найдено имя еще не
существующего символа. Сбросить счетчик невозможно. Кроме того,
префикс для <a 
href="#x71-179014r170">gentemp</a> не сохраняется между вызовами. Если аргумент <i>preﬁx</i>
опущен, то используется значение по-умолчанию T.
</div>
<div class=defun>
<!--l. 863--><p class="noindent" ><i>[Function]</i><a 
 id="dx71-179015"></a><a 
 id="x71-179016r171"></a><b> symbol-package</b>  <i>sym</i>
<!--l. 865--><p class="noindent" >Given a symbol <i>sym</i>, <a 
href="#x71-179016r171">symbol-package</a> returns the contents of the package cell of
that symbol. This will be a package object or <a 
href="clmse31.html#x42-77002r19">nil</a>.
<!--l. 869--><p class="indent" >   Для заданного символа возвращает содержимое ячейки пакета. Результат
может быть объектом пакета или <a 
href="clmse31.html#x42-77002r19">nil</a>.
</div>
<div class=defun>
<!--l. 873--><p class="noindent" ><i>[Function]</i><a 
 id="dx71-179017"></a><a 
 id="x71-179018r172"></a><b> keywordp</b>  <i>object</i>
<!--l. 875--><p class="noindent" >The argument may be any Lisp object. The predicate <a 
href="#x71-179018r172">keywordp</a> is true if the
argument is a symbol and that symbol is a keyword (that is, belongs to the
keyword package). Keywords are those symbols that are written with a leading
colon. Every keyword is a constant, in the sense that it always evaluates to itself.
See <a 
href="clmse110.html#x135-261016r625">constantp</a>.
<!--l. 883--><p class="indent" >   Аргумент может быть любым Lisp&#x2019;овым объектом. Предикат <a 
href="#x71-179018r172">keywordp</a>
истинен, если аргумент является символом и этот символ является ключевым
(значит, что принадлежит пакату ключевых символов). Ключевые символы
— это символы, которые записываются с двоеточием в начала. Каждый
ключевой символ является константой, в смысле, что выполняются сами в
                                                                          

                                                                          
себя. Смотрите <a 
href="clmse110.html#x135-261016r625">constantp</a>.
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
   <!--l. 6--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch11.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse55.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse55.html#tailclmse55.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse56.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch10.html#clmse56.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 6--><p class="indent" >   <a 
 id="tailclmse56.html"></a>  
</body></html> 
