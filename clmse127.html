<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>End-Test Control</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-11 09:24:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="cltl2ed.css"></head><body 
>
<!--l. 1017--><p class="noindent" > <div id="main_container"> <div id="content"> <!--l. 1017--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse128.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse126.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse126.html#tailclmse126.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse127.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch25.html#clmse127.html" >Вверх</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">25.7   </span> <a 
href="clm.html#QQ2-157-356" id="x157-31500025.7">End-Test Control</a></h3>
<!--l. 1020--><p class="noindent" >The loop keywords <tt><a 
href="#x157-316002r774">always</a></tt>, <tt><a 
href="#x157-316004r775">never</a></tt>, <tt><a 
href="#x157-316006r776">thereis</a></tt>, <tt><a 
href="clmse147.html#x181-467004r992">until</a></tt>, and <tt><a 
href="#x157-315002r772">while</a></tt> designate
constructs that use a single test condition to determine when loop iteration should
terminate.
<!--l. 1024--><p class="indent" >   The constructs <tt><a 
href="#x157-316002r774">always</a></tt>, <tt><a 
href="#x157-316004r775">never</a></tt>, and <tt><a 
href="#x157-316006r776">thereis</a></tt> provide speciﬁc values to be
returned when a loop terminates. Using <tt><a 
href="#x157-316002r774">always</a></tt>, <tt><a 
href="#x157-316004r775">never</a></tt>, or <tt><a 
href="#x157-316006r776">thereis</a></tt> with
value-returning accumulation clauses can produce unpredictable results.
In all other respects these constructs behave like the <tt><a 
href="#x157-315002r772">while</a></tt> and <tt><a 
href="clmse147.html#x181-467004r992">until</a></tt>
constructs.
<!--l. 1031--><p class="indent" >   The macro <tt><a 
href="#x157-317002r777">loop-finish</a></tt> can be used at any time to cause normal termination.
In normal termination, <tt><a 
href="clmse132.html#x162-334006r801">finally</a></tt> clauses are executed and default return values are
returned.
<!--l. 1035--><p class="indent" >   End-test control constructs can be used anywhere within the loop
body. The termination conditions are tested in the order in which they
appear.
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Выражение цикла]</i><b> while </b><a 
 id="dx157-315001"></a><a 
 id="x157-315002r772"></a> expr
</td></tr></table>
<!--l. 1040--><p class="indent" >                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Выражение цикла]</i><b> until </b><a 
 id="dx157-315003"></a><a 
 id="x157-315004r773"></a> expr</td></tr></table>
<!--l. 1042--><p class="indent" >
</div>
<!--l. 1042--><p class="noindent" ><span class="paragraphHead"><a 
href="#x157-31600025.7" id="x157-31600025.7"></a></span>
   The <tt><a 
href="#x157-315002r772">while</a></tt> construct allows iteration to continue until the speciﬁed expression
<i>expr</i> evaluates to <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>. The expression is re-evaluated at the location of the <tt><a 
href="#x157-315002r772">while</a></tt>
clause.
                                                                          

                                                                          
<!--l. 1047--><p class="indent" >   The <tt><a 
href="clmse147.html#x181-467004r992">until</a></tt> construct is equivalent to <tt><a 
href="#x157-315002r772">while</a></tt> (<tt><a 
href="clmse33.html#x44-78002r48">not</a></tt> <i>expr</i>). If the value of the
speciﬁed expression is non-<tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>, iteration terminates.
<!--l. 1051--><p class="indent" >   You can use <tt><a 
href="#x157-315002r772">while</a></tt> and <tt><a 
href="clmse147.html#x181-467004r992">until</a></tt> at any point in a loop. If a <tt><a 
href="#x157-315002r772">while</a></tt> or <tt><a 
href="clmse147.html#x181-467004r992">until</a></tt>
clause causes termination, any clauses that precede it in the source are still
evaluated.
<!--l. 1056--><p class="indent" >   Examples: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; A classic &#x0022;while-loop&#x0022;.
</td></tr></table>
<!--l. 1058--><p class="indent" >                                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop while (hungry-p) do (eat))</td></tr></table>
<!--l. 1059--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1060--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; UNTIL NOT is equivalent to WHILE.</td></tr></table>
<!--l. 1061--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop until (not (hungry-p)) do (eat))</td></tr></table>
<!--l. 1062--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1063--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Collect the length and the items of STACK.</td></tr></table>
<!--l. 1064--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(let ((stack &#x2019;(a b c d e f)))</td></tr></table>
<!--l. 1065--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (loop while stack</td></tr></table>
<!--l. 1066--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        for item = (length stack) then (pop stack)</td></tr></table>
<!--l. 1067--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        collect item))</td></tr></table>
<!--l. 1068--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (6 A B C D E F)</td></tr></table>
<!--l. 1069--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1070--><p class="indent" >                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Use WHILE to terminate a loop that otherwise wouldn&#x2019;t</td></tr></table>
<!--l. 1071--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; terminate. Note that WHILE occurs after the WHEN.</td></tr></table>
<!--l. 1072--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i ﬁxnum from 3</td></tr></table>
<!--l. 1073--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      when (oddp i) collect i</td></tr></table>
<!--l. 1074--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      while (&#x003C; i 5))</td></tr></table>
<!--l. 1075--><p class="indent" >                                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (3 5)</td></tr></table>
<!--l. 1077--><p class="indent" >
</div>
</div>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Выражение цикла]</i><b> always </b><a 
 id="dx157-316001"></a><a 
 id="x157-316002r774"></a> expr
</td></tr></table>
<!--l. 1082--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Выражение цикла]</i><b> never </b><a 
 id="dx157-316003"></a><a 
 id="x157-316004r775"></a> expr</td></tr></table>
                                                                          

                                                                          
<!--l. 1083--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Выражение цикла]</i><b> thereis </b><a 
 id="dx157-316005"></a><a 
 id="x157-316006r776"></a> expr</td></tr></table>
<!--l. 1085--><p class="indent" >
</div>
<!--l. 1085--><p class="noindent" ><span class="paragraphHead"><a 
href="#x157-31700025.7" id="x157-31700025.7"></a></span>
   The <tt><a 
href="#x157-316002r774">always</a></tt> construct takes one form and terminates the loop if the form ever
evaluates to <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>; in this case, it returns <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>. Otherwise, it provides a default
return value of <tt><a 
href="clmse30.html#x41-73004r19">t</a></tt>.
<!--l. 1090--><p class="indent" >   The <tt><a 
href="#x157-316004r775">never</a></tt> construct takes one form and terminates the loop if the form ever
evaluates to non-<tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>; in this case, it returns <tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>. Otherwise, it provides a default
return value of <tt><a 
href="clmse30.html#x41-73004r19">t</a></tt>.
<!--l. 1094--><p class="indent" >   The <tt><a 
href="#x157-316006r776">thereis</a></tt> construct takes one form and terminates the loop if the form
ever evaluates to non-<tt><a 
href="clmse30.html#x41-73002r18">nil</a></tt>; in this case, it returns that value.
<!--l. 1098--><p class="indent" >   If the <tt><a 
href="#x157-315002r772">while</a></tt> or <tt><a 
href="clmse147.html#x181-467004r992">until</a></tt> construct causes termination, control is passed to the
loop epilogue, where any <tt><a 
href="clmse132.html#x162-334006r801">finally</a></tt> clauses will be executed. Since <tt><a 
href="#x157-316002r774">always</a></tt>, <tt><a 
href="#x157-316004r775">never</a></tt>,
and <tt><a 
href="#x157-316006r776">thereis</a></tt> use the Common Lisp macro <tt><a 
href="clmse131.html#x161-330002r798">return</a></tt> to terminate iteration, any
<tt><a 
href="clmse132.html#x162-334006r801">finally</a></tt> clause that is speciﬁed is not evaluated.
<!--l. 1105--><p class="indent" >   Examples: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Make sure I is always less than 11 (two ways).
</td></tr></table>
<!--l. 1107--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The FOR construct terminates these loops.</td></tr></table>
<!--l. 1109--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 0 to 10
</td></tr></table>
<!--l. 1111--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      always (&#x003C; i 11))</td></tr></table>
<!--l. 1112--><p class="indent" >                                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> T</td></tr></table>
<!--l. 1114--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 0 to 10
</td></tr></table>
<!--l. 1116--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      never (&#x003E; i 11))</td></tr></table>
<!--l. 1117--><p class="indent" >                                                                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> T</td></tr></table>
<!--l. 1119--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; If I exceeds 10, return I; otherwise, return NIL.
</td></tr></table>
<!--l. 1121--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The THEREIS construct terminates this loop.</td></tr></table>
<!--l. 1123--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 0
</td></tr></table>
<!--l. 1125--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      thereis (when (&#x003E; i 10) i) )</td></tr></table>
<!--l. 1126--><p class="indent" >                                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> 11</td></tr></table>
<!--l. 1128--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The FINALLY clause is not evaluated in these examples.
</td></tr></table>
<!--l. 1131--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 0 to 10
</td></tr></table>
<!--l. 1133--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      always (&#x003C; i 9)</td></tr></table>
<!--l. 1134--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ﬁnally (print &#x0022;you won&#x2019;t see this&#x0022;))</td></tr></table>
<!--l. 1135--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> NIL</td></tr></table>
<!--l. 1137--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop never t
</td></tr></table>
<!--l. 1139--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ﬁnally (print &#x0022;you won&#x2019;t see this&#x0022;))</td></tr></table>
<!--l. 1140--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> NIL</td></tr></table>
<!--l. 1142--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop thereis &#x0022;Here is my value&#x0022;
</td></tr></table>
<!--l. 1144--><p class="indent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      ﬁnally (print &#x0022;you won&#x2019;t see this&#x0022;))</td></tr></table>
<!--l. 1145--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> &#x0022;Here is my value&#x0022;</td></tr></table>
<!--l. 1147--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; The FOR construct terminates this loop,
</td></tr></table>
<!--l. 1149--><p class="indent" >                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; so the FINALLY clause is evaluated.</td></tr></table>
<!--l. 1151--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i from 1 to 10
</td></tr></table>
<!--l. 1153--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      thereis (&#x003E; i 11)</td></tr></table>
<!--l. 1154--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:184;" 
class="tabbing">      ﬁnally (print i)) </td><td style="width:400;" 
class="tabbing-right">                                      ;Prints 1 line</td></tr></table>
<!--l. 1155--><p class="indent" >                                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">11</td></tr></table>
<!--l. 1156--><p class="indent" >                                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> NIL</td></tr></table>
<!--l. 1158--><p class="indent" >
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defstruct mountain height diﬃculty (why &#x0022;because it is there&#x0022;))
</td></tr></table>
<!--l. 1161--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq everest (make-mountain :height &#x2019;(2.86e-13 parsecs)))</td></tr></table>
<!--l. 1162--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq chocorua (make-mountain :height &#x2019;(1059180001 microns)))</td></tr></table>
<!--l. 1163--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defstruct desert area (humidity 0))</td></tr></table>
<!--l. 1164--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq sahara (make-desert :area &#x2019;(212480000 square furlongs)))</td></tr></table>
                                                                          

                                                                          
<!--l. 1165--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:585;" 
class="tabbing"></td><td style="width:340;" 
class="tabbing-right">       ;First there is a mountain, then there is no mountain, then there is <span class="math">…</span></td></tr></table>
<!--l. 1166--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:244;" 
class="tabbing">(loop for x in (list everest sahara chocorua) </td><td  
class="tabbing-right">                       ; —GLS</td></tr></table>
<!--l. 1167--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      thereis (and (mountain-p x) (mountain-height x)))</td></tr></table>
<!--l. 1168--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (2.86E-13 PARSECS)</td></tr></table>
<!--l. 1169--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1170--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; If you could use this code to ﬁnd a counterexample to</td></tr></table>
<!--l. 1171--><p class="indent" >                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Fermat&#x2019;s last theorem, it would still not return the value</td></tr></table>
<!--l. 1172--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; of the counterexample because all of the THEREIS clauses</td></tr></table>
<!--l. 1173--><p class="indent" >               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; in this example return only T.   Of course, this code has</td></tr></table>
<!--l. 1174--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; never been observed to terminate.</td></tr></table>
<!--l. 1175--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1176--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for z upfrom 2</td></tr></table>
<!--l. 1177--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      thereis</td></tr></table>
<!--l. 1178--><p class="indent" >                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">        (loop for n upfrom 3 below (log z 2)</td></tr></table>
<!--l. 1179--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">              thereis</td></tr></table>
<!--l. 1180--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                (loop for x below z</td></tr></table>
<!--l. 1181--><p class="indent" >                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                      thereis</td></tr></table>
<!--l. 1182--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                        (loop for y below z</td></tr></table>
<!--l. 1183--><p class="indent" >               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                              thereis (= (+ (expt x n)</td></tr></table>
<!--l. 1184--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                                            (expt y n))</td></tr></table>
<!--l. 1185--><p class="indent" >            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                                         (expt z n))))))</td></tr></table>
<!--l. 1187--><p class="indent" >
</div>
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Макрос]</i><b> loop-ﬁnish </b><a 
 id="dx157-317001"></a><a 
 id="x157-317002r777"></a> <span class="math"> !</span>
</td></tr></table>
<!--l. 1192--><p class="indent" >
</div>
                                                                          

                                                                          
<!--l. 1192--><p class="noindent" ><span class="paragraphHead"><a 
href="#x157-31800025.7" id="x157-31800025.7"></a></span>
   The macro <tt><a 
href="#x157-317002r777">loop-finish</a></tt> terminates iteration normally and returns any
accumulated result. If speciﬁed, a <tt><a 
href="clmse132.html#x162-334006r801">finally</a></tt> clause is evaluated.
<!--l. 1197--><p class="indent" >   In most cases it is not necessary to use <tt><a 
href="#x157-317002r777">loop-finish</a></tt> because other loop
control clauses terminate the loop. Use <tt><a 
href="#x157-317002r777">loop-finish</a></tt> to provide a normal exit
from a nested condition inside a loop.
<!--l. 1202--><p class="indent" >   You can use <tt><a 
href="#x157-317002r777">loop-finish</a></tt> inside nested Lisp code to provide a normal exit
from a loop. Since <tt><a 
href="#x157-317002r777">loop-finish</a></tt> transfers control to the loop epilogue, using
<tt><a 
href="#x157-317002r777">loop-finish</a></tt> within a <tt><a 
href="clmse132.html#x162-334006r801">finally</a></tt> expression can cause inﬁnite looping.
<!--l. 1209--><p class="indent" >   Implementations are allowed to provide this construct as a local macro by
using <tt><a 
href="clmse38.html#x50-102006r79">macrolet</a></tt>.
<!--l. 1212--><p class="indent" >   Examples: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Print a date in February, but exclude leap day.
</td></tr></table>
<!--l. 1214--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; LOOP-FINISH exits from the nested condition.</td></tr></table>
<!--l. 1215--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for date in date-list</td></tr></table>
<!--l. 1216--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      do (case date</td></tr></table>
<!--l. 1217--><p class="indent" >                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">           (29 (when (eq month &#x2019;february)</td></tr></table>
<!--l. 1218--><p class="indent" >                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                     (loop-ﬁnish))</td></tr></table>
<!--l. 1219--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">             (format t &#x0022;~:@(~A~) ~A&#x0022; month date))))</td></tr></table>
<!--l. 1220--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1221--><p class="indent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; Terminate the loop, but return the accumulated count.</td></tr></table>
<!--l. 1222--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(1 2 3 stop-here 4 5 6)</td></tr></table>
<!--l. 1223--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      when (symbolp i) do (loop-ﬁnish)</td></tr></table>
<!--l. 1224--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      count i)</td></tr></table>
<!--l. 1225--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> 3</td></tr></table>
<!--l. 1226--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 1227--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">;;; This loop works just as well as the previous example.</td></tr></table>
<!--l. 1228--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(loop for i in &#x2019;(1 2 3 stop-here 4 5 6)</td></tr></table>
<!--l. 1229--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      until (symbolp i)</td></tr></table>
<!--l. 1230--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      count i)</td></tr></table>
<!--l. 1231--><p class="indent" >                                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> 3</td></tr></table>
<!--l. 1233--><p class="indent" >
</div>
</div>
                                                                          

                                                                          
</div>
                                                                          

                                                                          
   <!--l. 1236--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse128.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse126.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse126.html#tailclmse126.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse127.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch25.html#clmse127.html" >Вверх</a><tt>&#x003E;</tt></p></div>
<!--l. 1236--><p class="indent" >   <a 
 id="tailclmse127.html"></a>  </div> </div> 
</body></html> 
