<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Opening and Closing Files</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-01 16:01:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 2038--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse121.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse119.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse119.html#tailclmse119.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse120.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch23.html#clmse120.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">23.2   </span> <a 
 id="x148-21500023.2"></a>Opening and Closing Files</h3>
<!--l. 2040--><p class="noindent" >When a ﬁle is opened, a stream object is constructed to serve as the ﬁle system&#x2019;s
ambassador to the Lisp environment; operations on the stream are reﬂected by
operations on the ﬁle in the ﬁle system. The act of closing the ﬁle (actually, the
stream) ends the association; the transaction with the ﬁle system is terminated,
and input/output may no longer be performed on the stream. The stream
function <a 
href="clmse114.html#x140-185014r661">close</a> may be used to close a ﬁle; the functions described below may be
used to open them. The basic operation is <a 
href="#x148-215002r768">open</a>, but <a 
href="#x148-215012r769">with-open-ﬁle</a> is usually more
convenient for most applications.
<div class=defun>
<!--l. 2051--><p class="noindent" ><i>[Function]</i><a 
 id="dx148-215001"></a><a 
 id="x148-215002r768"></a><b> open</b>  <i>ﬁlename</i> &#x0026;key  <i>:direction</i> <i>:element-type</i> <i>:if-exists</i> <i>:if-does-not-exist</i>
<i>:external-format</i>
<!--l. 2053--><p class="noindent" ><div class=newer> X3J13 voted in June 1989 <a 
 id="dx148-215003"></a>to add to the function <a 
href="#x148-215002r768">open</a> a new keyword argument
:external-format. This argument did not appear in the preceding argument
description in the ﬁrst edition.
</div>
<!--l. 2061--><p class="indent" >   This returns a stream that is connected to the ﬁle speciﬁed by ﬁlename. The
ﬁlename is the name of the ﬁle to be opened; it may be a string, a pathname, or a
stream. (If the ﬁlename is a stream, then it is not closed ﬁrst or otherwise
aﬀected; it is used merely to provide a ﬁle name for the opening of a new
stream.)
<div class=new>
<!--l. 2068--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx148-215004"></a>to specify that the result of <a 
href="#x148-215002r768">open</a>, if it is a
stream, is always a stream of type ﬁle-stream.
</div>
<div class=new>
<!--l. 2075--><p class="indent" >   X3J13 voted in March 1988 <a 
 id="dx148-215005"></a>to specify exactly which streams may be used as
pathnames. See section <a 
href="clmse119.html#x147-21400023.1.6">23.1.6<!--tex4ht:ref: PATHNAME-FUNCTIONS --></a>.
</div>
<div class=new>
<!--l. 2082--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx148-215006"></a>to specify that <a 
href="#x148-215002r768">open</a> is unaﬀected by whether the
                                                                          

                                                                          
ﬁrst argument, if a stream, is open or closed. If the ﬁrst argument is a stream,
<a 
href="#x148-215002r768">open</a> behaves as if the function <a 
href="clmse119.html#x147-214005r742">pathname</a> were applied to the stream and the
resulting pathname used instead.
</div>
<div class=newer>
<!--l. 2091--><p class="indent" >   X3J13 voted in June 1989 <a 
 id="dx148-215007"></a>to clarify that <a 
href="#x148-215002r768">open</a> accepts only non-wild
pathnames; an error is signaled if <a 
href="clmse119.html#x147-207003r733">wild-pathname-p</a> would be true of ﬁlename.
</div>
<div class=newer>
<!--l. 2097--><p class="indent" >   X3J13 voted in June 1989 <a 
 id="dx148-215008"></a>to require <a 
href="#x148-215002r768">open</a> to accept logical pathnames (see
section <a 
href="clmse119.html#x147-20800023.1.5">23.1.5<!--tex4ht:ref: LOGICAL-PATHNAMES-SECTION --></a>).
</div>
<!--l. 2101--><p class="indent" >   The keyword arguments specify what kind of stream to produce and how to
handle errors: <div class=flushdesc>
  <div><br /><b>
:direction                                                                 </b>This
argument speciﬁes whether the stream should handle input, output, or
both.
        <div class="quotation">
<div class=flushdesc>
     <!--l. 2109--><p class="indent" >
  <div><br /><b>
:input                                                                </b>
The result will be an input stream. This is the default.
  <br /><b>
:output                                                              </b>
The result will be an output stream.
  <br /><b>
:io                                                                   </b>
The result will be a bidirectional stream.
  <br /><b>
:probe                                                               </b>
                                                                          

                                                                          
The result will be a no-directional stream (in eﬀect, the stream is created
and then closed). This is useful for determining whether a ﬁle exists
without actually setting up a complete stream.</div>
</div>
     </div>
  <br /><b>
:element-type                                                             </b>This
argument speciﬁes the type of the unit of transaction for the stream. Anything
that can be recognized as being a ﬁnite subtype of <a 
href="clmse79.html#x97-139002r384">character</a> or integer is
acceptable. In particular, the following types are recognized:
<div class=obsolete>
<!--l. 2132--><p class="indent" >
        <div class="quotation">
<div class=flushdesc>
     <!--l. 2134--><p class="indent" >
  <div><br /><b>
string-char                                                           </b>
The unit of transaction is a string-character. The functions <a 
href="clmse116.html#x143-195015r701">read-char</a>
and/or <a 
href="clmse117.html#x144-198028r720">write-char</a> may be used on the stream. This is the default.
  <br /><b>
<a 
href="clmse79.html#x97-139002r384">character</a>                                                            </b>
The unit of transaction is any character, not just a string-character. The
functions <a 
href="clmse116.html#x143-195015r701">read-char</a> and/or <a 
href="clmse117.html#x144-198028r720">write-char</a> may be used on the stream.</div>
</div>
     </div>
</div>
<div class=newer>
<!--l. 2148--><p class="indent" >  X3J13 voted in June 1989 <a 
 id="dx148-215009"></a>to eliminate the type string-char, add the type
base-character, and redeﬁne <a 
href="#x148-215002r768">open</a> to use the type <a 
href="clmse79.html#x97-139002r384">character</a> as the default
:element-type.
<!--l. 2153--><p class="indent" >  The preceding two possibilities should therefore be replaced by the
following.
                                                                          

                                                                          
<!--l. 2156--><p class="indent" >
        <div class="quotation">
<div class=flushdesc>
     <!--l. 2158--><p class="indent" >
  <div><br /><b>
<a 
href="clmse79.html#x97-139002r384">character</a>                                                            </b>
The unit of transaction is any character, not just a string-character.
The functions <a 
href="clmse116.html#x143-195015r701">read-char</a> and <a 
href="clmse117.html#x144-198028r720">write-char</a> (depending on the value of the
:direction argument) may be used on the stream. This is the default.
  <br /><b>
base-character                                                       </b>
The unit of transaction is a base character. The functions <a 
href="clmse116.html#x143-195015r701">read-char</a> and
<a 
href="clmse117.html#x144-198028r720">write-char</a> (depending on the value of the :direction argument) may be
used on the stream.</div>
</div>
     </div>
</div>
<!--l. 2171--><p class="indent" >
        <div class="quotation">
<div class=flushdesc>
     <!--l. 2173--><p class="indent" >
  <div><br /><b>
(unsigned-byte n)                                                    </b>
The unit of transaction is an unsigned byte (a non-negative integer) of
size n. The functions <a 
href="clmse116.html#x143-196002r709">read-byte</a> and/or <a 
href="clmse117.html#x144-199002r729">write-byte</a> may be used on the
stream.
  <br /><b>
unsigned-byte                                                        </b>
The unit of transaction is an unsigned byte (a non-negative integer); the
size of the byte is determined by the ﬁle system. The functions <a 
href="clmse116.html#x143-196002r709">read-byte</a>
                                                                          

                                                                          
and/or <a 
href="clmse117.html#x144-199002r729">write-byte</a> may be used on the stream.
  <br /><b>
(signed-byte n)                                                       </b>
The unit of transaction is a signed byte of size n. The functions <a 
href="clmse116.html#x143-196002r709">read-byte</a>
and/or <a 
href="clmse117.html#x144-199002r729">write-byte</a> may be used on the stream.
  <br /><b>
signed-byte                                                          </b>
The unit of transaction is a signed byte; the size of the byte is determined
by the ﬁle system. The functions <a 
href="clmse116.html#x143-196002r709">read-byte</a> and/or <a 
href="clmse117.html#x144-199002r729">write-byte</a> may be
used on the stream.
  <br /><b>
<a 
href="clmse97.html#x119-161002r574">bit</a>                                                                   </b>
The unit of transaction is a bit (values 0 and 1). The functions <a 
href="clmse116.html#x143-196002r709">read-byte</a>
and/or <a 
href="clmse117.html#x144-199002r729">write-byte</a> may be used on the stream.
  <br /><b>
(mod n)                                                             </b>
The  unit  of  transaction  is  a  non-negative  integer  less  than  n.  The
functions <a 
href="clmse116.html#x143-196002r709">read-byte</a> and/or <a 
href="clmse117.html#x144-199002r729">write-byte</a> may be used on the stream.
  <br /><b>
:default                                                              </b>
The unit of transaction is to be determined by the ﬁle system, based
on the ﬁle it ﬁnds. The type can be determined by using the function
<a 
href="clmse114.html#x140-185012r660">stream-element-type</a>.</div>
</div>
     </div>
  <br /><b>
:if-exists                                                                  </b>This
argument speciﬁes the action to be taken if the :direction is :output or :io and a
ﬁle of the speciﬁed name already exists. If the direction is :input or :probe, this
argument is ignored.
                                                                          

                                                                          
        <div class="quotation">
<div class=flushdesc>
     <!--l. 2218--><p class="indent" >
  <div><br /><b>
:error                                                                </b>
Signals an error. This is the default when the version component of the
ﬁlename is not :newest.
  <br /><b>
:new-version                                                         </b>
Creates a new ﬁle with the same ﬁle name but with a larger version
number. This is the default when the version component of the ﬁlename
is :newest.
  <br /><b>
:rename                                                              </b>
Renames the existing ﬁle to some other name and then creates a new
ﬁle with the speciﬁed name.
  <br /><b>
:rename-and-delete                                                   </b>
Renames the existing ﬁle to some other name and then deletes it (but
does not expunge it, on those systems that distinguish deletion from
expunging). Then create a new ﬁle with the speciﬁed name.
  <br /><b>
:overwrite                                                            </b>
Uses the existing ﬁle. Output operations on the stream will destructively
modify the ﬁle. If the :direction is :io, the ﬁle is opened in a bidirectional
mode that allows both reading and writing. The ﬁle pointer is initially
positioned at the beginning of the ﬁle; however, the ﬁle is not truncated
back to length zero when it is opened. This mode is most useful when
the <a 
href="clmse121.html#x149-216028r775">ﬁle-position</a> function can be used on the stream.
  <br /><b>
:append                                                              </b>
                                                                          

                                                                          
Uses the existing ﬁle. Output operations on the stream will destructively
modify the ﬁle. The ﬁle pointer is initially positioned at the end of the
ﬁle. If the :direction is :io, the ﬁle is opened in a bidirectional mode that
allows both reading and writing.
  <br /><b>
:supersede                                                           </b>
Supersedes  the  existing  ﬁle.  If  possible,  the  implementation  should
arrange not to destroy the old ﬁle until the new stream is closed, against
the possibility that the stream will be closed in “abort” mode (see <a 
href="clmse114.html#x140-185014r661">close</a>).
This diﬀers from :new-version in that :supersede creates a new ﬁle with
the same name as the old one, rather than a ﬁle name with a higher
version number.
  <br /><b>
<a 
href="clmse31.html#x42-70002r19">nil</a>                                                                   </b>
Does not create a ﬁle or even a stream, but instead simply returns <a 
href="clmse31.html#x42-70002r19">nil</a>
to indicate failure.</div>
</div>
     </div>
<!--l. 2269--><p class="indent" >  If the :direction is :output or :io and the value of :if-exists is :new-version, then
the version of the (newly created) ﬁle that is opened will be a version greater than
that of any other ﬁle in the ﬁle system whose other pathname components are the
same as those of ﬁlename.
<!--l. 2275--><p class="indent" >  If the :direction is :input or :probe or the value of :if-exists is not :new-version,
and the version component of the ﬁlename is :newest, then the ﬁle opened is that
ﬁle already existing in the ﬁle system that has a version greater than that of any
other ﬁle in the ﬁle system whose other pathname components are the same as
those of ﬁlename.
<div class=new>
<!--l. 2283--><p class="indent" >  Some ﬁle systems permit yet other actions to be taken when a ﬁle already
exists; therefore, some implementations provide implementation-speciﬁc :if-exist
options.
</div></div>
</div>
<div class=implementation>
                                                                          

                                                                          
<!--l. 2290--><p class="noindent" ><b>Implementation note:</b> The various ﬁle systems in existence today have widely
diﬀering capabilities. A given implementation may not be able to support all of these
options in exactly the manner stated. An implementation is required to recognize all of
these option keywords and to try to do something “reasonable” in the context of the host
operating system. Implementors are encouraged to approximate the semantics speciﬁed
here as closely as possible.
<!--l. 2299--><p class="indent" >   As an example, suppose that a ﬁle system does not support distinct ﬁle versions and
does not distinguish the notions of deletion and expunging (in some ﬁle systems ﬁle
deletion is reversible until an expunge operation is performed). Then :new-version might
be treated the same as :rename or :supersede, and :rename-and-delete might be treated
the same as :supersede.
<!--l. 2306--><p class="indent" >   If it is utterly impossible for an implementation to handle some option in a manner
close to what is speciﬁed here, it may simply signal an error. The opening of ﬁles is an
area where complete portability is too much to hope for; the intent here is simply to
make things as portable as possible by providing speciﬁc names for a range of commonly
supportable options.
</div>
<div class=flushdesc>
<!--l. 2315--><p class="indent" >
  <div><br /><b>
:if-does-not-exist                                                          </b>This
argument speciﬁes the action to be taken if a ﬁle of the speciﬁed name does not
already exist.
        <div class="quotation">
<div class=flushdesc>
     <!--l. 2320--><p class="indent" >
  <div><br /><b>
:error                                                                </b>
Signals an error. This is the default if the :direction is :input, or if the
:if-exists argument is :overwrite or :append.
  <br /><b>
:create                                                               </b>
Creates an empty ﬁle with the speciﬁed name and then proceeds as if
it had already existed (but do not perform any processing directed by
                                                                          

                                                                          
the :if-exists argument). This is the default if the :direction is :output
or :io, and the :if-exists argument is anything but :overwrite or :append.
  <br /><b>
<a 
href="clmse31.html#x42-70002r19">nil</a>                                                                   </b>
Does not create a ﬁle or even a stream, but instead simply returns <a 
href="clmse31.html#x42-70002r19">nil</a>
to indicate failure. This is the default if the :direction is :probe.</div>
</div>
     </div>
</div>
</div>
<!--l. 2340--><p class="indent" >
                                                                          

                                                                          
<div class=newer>
<!--l. 2343--><p class="indent" >   X3J13 voted in June 1989 <a 
 id="dx148-215010"></a>to add to the function <a 
href="#x148-215002r768">open</a> a new keyword
argument :external-format. <div class=flushdesc>
  <div><br /><b>
:external-format                                                          </b>
This        argument        speciﬁes        an        implementation-recognized
scheme for representing characters in ﬁles. The default value is :default and
is implementation-deﬁned but must support the base characters. An error is
signaled if the implementation does recognize the speciﬁed format.
<!--l. 2352--><p class="indent" >  This  argument  may  be  speciﬁed  if  the  :direction  argument  is  :input,
:output, or :io. It is an error to write a character to the resulting stream that
cannot be represented by the speciﬁed ﬁle format. (However, the #\Newline
character  cannot  produce  such  an  error;  implementations  must  provide
appropriate line division behavior for all character streams.)
<!--l. 2359--><p class="indent" >  See <a 
href="clmse114.html#x140-185036r670">stream-external-format</a>.</div>
</div>
</div>
<!--l. 2363--><p class="indent" >   When the caller is ﬁnished with the stream, it should close the ﬁle by using
the <a 
href="clmse114.html#x140-185014r661">close</a> function. The <a 
href="#x148-215012r769">with-open-ﬁle</a> form does this automatically, and so is
preferred for most purposes. <a 
href="#x148-215002r768">open</a> should be used only when the control structure
of the program necessitates opening and closing of a ﬁle in some way more
complex than provided by <a 
href="#x148-215012r769">with-open-ﬁle</a>. It is suggested that any program that
uses <a 
href="#x148-215002r768">open</a> directly should use the special form <a 
href="clmse45.html#x57-96010r133">unwind-protect</a> to close the ﬁle if an
abnormal exit occurs.
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Macro]</i><b> with-open-ﬁle </b><a 
 id="dx148-215011"></a><a 
 id="x148-215012r769"></a> (stream ﬁlename  {options}* )
</td></tr></table>
<!--l. 2375--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> {declaration}*  { form}* </td></tr></table>
<!--l. 2376--><p class="indent" >
</div>
   <a 
href="#x148-215012r769">with-open-ﬁle</a> evaluates the forms of the body (an implicit <a 
href="clmse38.html#x50-82002r80">progn</a>) with the
                                                                          

                                                                          
variable stream bound to a stream that reads or writes the ﬁle named by the value
of ﬁlename. The options are evaluated and are used as keyword arguments to the
function <a 
href="#x148-215002r768">open</a>.
   When control leaves the body, either normally or abnormally (such as by use
of <a 
href="clmse45.html#x57-96013r134">throw</a>), the ﬁle is automatically closed. If a new output ﬁle is being written,
and control leaves abnormally, the ﬁle is aborted and the ﬁle system is left, so far
as possible, as if the ﬁle had never been opened. Because <a 
href="#x148-215012r769">with-open-ﬁle</a> always
closes the ﬁle, even when an error exit is taken, it is preferred over <a 
href="#x148-215002r768">open</a> for most
applications.
   ﬁlename is the name of the ﬁle to be opened; it may be a string, a pathname,
or a stream.
<div class=new>
   X3J13 voted in March 1988 <a 
 id="dx148-215013"></a>to specify exactly which streams may be used as
pathnames. See section <a 
href="clmse119.html#x147-21400023.1.6">23.1.6<!--tex4ht:ref: PATHNAME-FUNCTIONS --></a>.
</div>
<div class=newer>
   X3J13 voted in June 1989 <a 
 id="dx148-215014"></a>to clarify that <a 
href="#x148-215012r769">with-open-ﬁle</a> accepts only non-wild
pathnames; an error is signaled if <a 
href="clmse119.html#x147-207003r733">wild-pathname-p</a> would be true of the ﬁlename
argument.
</div>
<div class=newer>
   X3J13 voted in June 1989 <a 
 id="dx148-215015"></a>to require <a 
href="#x148-215012r769">with-open-ﬁle</a> to accept logical
pathnames (see section <a 
href="clmse119.html#x147-20800023.1.5">23.1.5<!--tex4ht:ref: LOGICAL-PATHNAMES-SECTION --></a>).
</div>
   For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(with-open-ﬁle (iﬁle name
</td></tr></table>
<!--l. 2417--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                 :direction :input)</td></tr></table>
<!--l. 2418--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (with-open-ﬁle (oﬁle (merge-pathname-defaults iﬁle</td></tr></table>
<!--l. 2419--><p class="indent" >             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                                                  nil</td></tr></table>
<!--l. 2420--><p class="indent" >         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                                                  &#x0022;out&#x0022;)</td></tr></table>
<!--l. 2421--><p class="indent" >                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                         :direction :output</td></tr></table>
<!--l. 2422--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                         :if-exists :supersede)</td></tr></table>
<!--l. 2423--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    (transduce-ﬁle iﬁle oﬁle)))</td></tr></table>
<!--l. 2425--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<div class=newer>
<!--l. 2428--><p class="noindent" >X3J13 voted in June 1989 <a 
 id="dx148-215016"></a>to specify that the variable stream is not always bound
to a stream; rather it is bound to whatever would be returned by a call to <a 
href="#x148-215002r768">open</a>.
For example, if the options include :if-does-not-exist nil, stream will be bound to
<a 
href="clmse31.html#x42-70002r19">nil</a> if the ﬁle does not exist. In this case the value of stream should be tested
within the body of the <a 
href="#x148-215012r769">with-open-ﬁle</a> form before it is used as a stream. For
example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(with-open-ﬁle (iﬁle name
</td></tr></table>
<!--l. 2437--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                 :direction :input</td></tr></table>
<!--l. 2438--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                 :if-does-not-exist nil)</td></tr></table>
<!--l. 2439--><p class="indent" >                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  ;; Process the ﬁle only if it actually exists.</td></tr></table>
<!--l. 2440--><p class="indent" >                                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (when (streamp name)</td></tr></table>
<!--l. 2441--><p class="indent" >                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    (compile-cobol-program iﬁle)))</td></tr></table>
<!--l. 2443--><p class="indent" >
</div>
</div>
</div>
</div>
<div class=implementation>
<!--l. 2448--><p class="noindent" ><b>Implementation note:</b> While <a 
href="#x148-215012r769">with-open-ﬁle</a> tries to automatically close the stream on
exit from the construct, for robustness it is helpful if the garbage collector can detect
discarded streams and automatically close them.
</div>
                                                                          

                                                                          
   <!--l. 2456--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse121.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse119.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse119.html#tailclmse119.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse120.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch23.html#clmse120.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 2456--><p class="indent" >   <a 
 id="tailclmse120.html"></a>  
</body></html> 
