<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Функции</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-17 21:46:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1742--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse30.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse28.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse28.html#tailclmse28.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse29.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch5.html#clmse29.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">5.2   </span> <a 
 id="x39-630005.2"></a>Функции</h3>
<!--l. 1744--><p class="noindent" >Существуют два метода указать функцию для использования в форме
вызова функции. Один из них заключается в указании символа имени
функции. Это использование символов для обозначения функций
полностью независимо от их использования для обозначения специальных и
лексических переменных. Другой путь заключается в использовании
<i>лямбда-выражения</i>, которое является списком с первым элементом равным
lambda. Лямбда-выражение <i>не</i> является формой, оно не может быть
полноценно вычислено. Лямбда выражения и символы, когда они
используются в программах для обозначения функций, могут быть указаны в
качестве первого элемента формы вызова функции, или только в качестве
второго параметры в специальной форме <a 
href="clmse35.html#x47-85002r52">function</a>. Следует отметить, что в
этих двух контекстах символы и лямбда-выражения обрабатываются, как
<i>имена</i> функций. Необходимо отличать это от обработки символов и
лямбда выражений, как <i>функциональных объектов, или объектов
функций (function objects)</i>, которые удовлетворяют предикату <a 
href="clmse32.html#x43-77043r42">functionp</a>,
как при представлении таких объектов в вызовы функций <a 
href="clmse37.html#x49-95002r68">apply</a> или
<a 
href="clmse37.html#x49-95004r69">funcall</a>.
<!--l. 1760--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.2.1   </span> <a 
 id="x39-640005.2.1"></a>Именованные функции</h4>
<!--l. 1762--><p class="noindent" >Имя может задано функции двумя способами. <i>Глобальное имя</i> может
быть дано функции с помощью конструкции <i>defun</i>. <i>Локальное имя</i>
может быть дано функции с помощью специальных форм <a 
href="clmse39.html#x51-103002r77">ﬂet</a> или
<a 
href="clmse39.html#x51-103004r78">labels</a>. Когда функция именуется, лямбда-выражение связывается
с этим именем вместе с информацией о сущностях, которые были
лексически доступны на момент связи. Если символ используется в качестве
первого элементы формы вызова функции, тогда он ссылается на
определение функции из наиболее ближней формы <a 
href="clmse39.html#x51-103002r77">ﬂet</a> или <a 
href="clmse39.html#x51-103004r78">labels</a>,
                                                                          

                                                                          
которые по тексту содержат эту форму, иначе символ ссылается на
глобальное определение функции, при отсутствии вышеназванных
форм.
<!--l. 1774--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.2.2   </span> <a 
 id="x39-650005.2.2"></a>Лямбда-выражения</h4>
<a 
 id="dx39-65001"></a>
<i>
<!--l. 1778--><p class="noindent" >Лямбда выражение</i> является списком со следующим синтаксисом:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lambda <i>lambda-list</i> . <i>body</i>)
</td></tr></table>
<!--l. 1781--><p class="indent" >
</div>
</div>
<!--l. 1782--><p class="noindent" >Первый элемент должен быть символом lambda. Второй элемент должен быть
списком. Он называется <i>лямбда списком</i>, и задаёт имена для <i>параметров</i>
функции. Когда функция, обозначенная лямбда-выражением, применяется
к аргументам, аргументы подставляются в соответствии с лямбда
списком. <i>body</i> может впоследствии ссылаться на аргументы используя
имена параметров. <i>body</i> состоит из любого количества форм (возможно
нулевого количества). Эти формы последовательно выполняются, и
результат только <i>последней</i> формы, возвращается в качестве значения
(в случае отсутствия форм, возвращается <a 
href="clmse31.html#x42-74002r18">nil</a>). Полный синтаксис
лямбда-выражения:
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lambda ( {<i><i>var</i></i>}*
</td></tr></table>
<!--l. 1798--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          [<i>&#x0026;optional {<i><i>var</i> | (<i>var</i>  [<i><i>initform</i>  [<i><i>svar</i></i>]</i>])</i>}*</i>] </td></tr></table>
<!--l. 1799--><p class="indent" >                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          [<i>&#x0026;rest <i>var</i></i>] </td></tr></table>
                                                                          

                                                                          
<!--l. 1800--><p class="indent" >   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          [<i>&#x0026;key {<i><i>var</i> | ({<i><i>var</i> | (<i>keyword</i> <i>var</i>)</i>}  [<i><i>initform</i>  [<i><i>svar</i></i>]</i>])</i>}*              [<i>&#x0026;allow-other-keys</i>]</i>] </td></tr></table>
<!--l. 1802--><p class="indent" >                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">          [<i>&#x0026;aux {<i><i>var</i> | (<i>var</i>  [<i><i>initform</i></i>])</i>}*</i>] )</td></tr></table>
<!--l. 1803--><p class="indent" >                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    [[<i> {<i><i></i></i>}*declaration | <i>documentation-string</i></i>]] </td></tr></table>
<!--l. 1804--><p class="indent" >                                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">    {<i><i> form</i></i>}* )</td></tr></table>
<!--l. 1806--><p class="indent" >
</div>
</div>
<!--l. 1809--><p class="indent" >   Каждый элемент лямбда списка является или спецификатором параметра
или <i>ключевым символом лямбда списка</i>. Ключевые символы лямбда списка
начинаются с символа &#x0026;. Следует отметить, что ключевые символы лямбда
списка не является ключевыми символами в обычном понимании. Они не
принадлежат пакету keyword. Они являются обычными символами, имена
которых начинается амперсандом. Такая терминология запутывает, но так
сложилась история.
<!--l. 1817--><p class="indent" >   Лямбда список имеет пять частей, любая или все могут быть пустыми:
      <ul class="itemize1">
      <li class="itemize">Спецификаторы для <i>обязательных параметров</i>. К ним относятся
      все  спецификаторы  параметров  до  первого  ключевого  символа
      лямбда  списка.  Если  такой  ключевой  символ  отсутствует,  все
      спецификаторы считаются обязательными.
      </li>
      <li class="itemize">Спецификаторы  для  <i>необязательных</i>  параметров.  Если  указан
      ключевой   символ   лямбда   списка   &#x0026;optional,   спецификаторы
      <i>необязательных</i>  параметров  будут  следовать  после  ключевого
      символа &#x0026;optional и до следующего ключевого слова, или до конца
      списка.
      </li>
      <li class="itemize">Спецификатор для <i>неопределённого количества или оставшегося
      (rest)</i>  параметра.  Если  указан  ключевой  символ  лямбда  списка
      &#x0026;rest,  за  ним  должен  следовать  только  один  спецификатор
      <i>оставшегося (rest)</i> параметра, за которым может следовать другой
      ключевой символ или лямбда список может заканчиваться.
      </li>
                                                                          

                                                                          
      <li class="itemize">Спецификатор  для  <i>именованных  (keyword)</i>  параметров.  Если
      указан ключевой символ лямбда списка &#x0026;key, все спецификаторы
      после
      данного  символа  до  следующего  ключевого  символа  или  конца
      списка являются спецификаторами <i>именованных</i> параметров. За
      спецификаторами  именованных  параметров  опционально  может
      использовать ключевой символ лямбда списка &#x0026;allow-others-keys.
      </li>
      <li class="itemize">Спецификатор  для  <i>вспомогательных  (aux)</i>  переменных.  Они
      не   являются   параметрами.   Если   указан   ключевой   символ
      лямбда  списка  &#x0026;aux,  все  спецификаторы  после  него  являются
      спецификаторами вспомогательных переменных.</li></ul>
<!--l. 1851--><p class="indent" >   Когда функция, заданная лямбда-выражением, применяется к
аргументам, то эти аргументы и параметры вычисляются слева направо. В
простейшем случае, в лямбда списке присутствуют только обязательные
параметры. Каждый из них задаётся просто именем переменной <i>var</i>
параметра. Когда функция применяется, аргументов должно быть столько
же, сколько и параметров, и каждый параметр связывается с одним
аргументом. В общем случае, каждый параметр связывается как лексическая
переменная, если только с помощью декларации не указано, что связь
должна осуществляться, как для специальной переменной. Смотрите <a 
href="clmse30.html#x40-69002r14">defvar</a>,
<a 
href="clmse48.html#x62-151002r124">proclaim</a>, <a 
href="clmse48.html#x62-150003r123">declare</a>.
<!--l. 1862--><p class="indent" >   В более общем случае, если указано <i>n</i> обязательных параметров (<i>n</i> может
равняться нулю), тогда должно быть как минимум <i>n</i> аргументов, и
обязательные параметры будут связаны с <i>n</i> первыми аргументами.
<!--l. 1867--><p class="indent" >   Если указаны необязательные параметры, тогда каждый из них
будет обработан так, как описано ниже. Если осталось некоторое
количество аргументов, тогда переменная параметра var будет связана с
оставшимся аргументом. Принцип такой же, как и для обязательных
параметров. Если не осталось аргументов, тогда выполняется часть
<i>initform</i>, и переменная параметра связывается с её результатом (или
с <a 
href="clmse31.html#x42-74002r18">nil</a>, если форма <i>initform</i> не была задана). Если в спецификаторе
указано имя ещё одной переменной <i>svar</i>, то она связывается с <i>true</i>,
если аргумент был задан, и с <i>false</i> аргумент не был задан (и в таком
случае выполняется <i>initform</i>). Переменная <i>svar</i> называется <i>supplied-p</i>
параметр. Она связывается не с аргументом, а со значением, которое
показывается был ли задан аргумент для данного параметра или
                                                                          

                                                                          
нет.
<!--l. 1881--><p class="indent" >   После того, как все <i>необязательные</i> параметры были обработаны, могут
быть указан <i>оставшийся (rest)</i> параметр. Если <i>оставшийся (rest)</i> параметр
указан, он будет связан со списком все оставшихся необработанных
аргументов. Если таких аргументов не осталось, <i>оставшийся (rest)</i> параметр
будет связан с пустым списком. Если в лямбда списке отсутствуют
<i>оставшийся (rest)</i> параметр и <i>именованные (keyword)</i> параметры,
то необработанных аргументов оставаться не должно (иначе будет
ошибка).
<!--l. 1890--><p class="indent" >   Далее обрабатываются все <i>именованные (keyword)</i> параметры. Для этих
параметров обрабатываются те же аргументы, что и для <i>оставшегося (rest)</i>
параметра. Безусловно, возможно указывать и &#x0026;rest и &#x0026;key. В таком случае
оставшиеся аргументы используются для обеих целей: все оставшиеся
аргументы составляются в список для &#x0026;rest параметра и они также
обрабатываются, как &#x0026;key параметры. Только в этой ситуации один
аргумент может обрабатываться более чем для одного параметра. Если
указан &#x0026;key, должно остаться чётное количество аргументов. Они будут
обработаны попарно. Первый аргумент в паре должен быть ключевым
символом, который задаёт имя параметра, второй аргумент должен быть
соответствующим значением.
<!--l. 1903--><p class="indent" >   В каждом именованном параметре спецификатор должен быть назван <i>var</i>
для переменной параметра. FIXME Если явно указан ключевой символ, тогда
он будет использоваться для имени параметра. В противном случае
используется имя переменной var для поиска ключевого символа в
аргументах. Таким образом: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defun foo (&#x0026;key radix (type &#x2019;integer)) ...)
</td></tr></table>
<!--l. 1910--><p class="indent" >
</div>
</div>
<!--l. 1911--><p class="noindent" >означает то же, что и <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defun foo (&#x0026;key ((:radix radix)) ((:type type) &#x2019;integer)) ...)
</td></tr></table>
<!--l. 1914--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 1916--><p class="indent" >   Спецификатор именованного (keyword) параметра, как и все спецификаторы
параметров, обрабатывается слева направо. Для каждого спецификатора
именованного параметра, если в паре аргумента, в которой ключевой символ
совпадает с именем параметра (сравнение производится с помощью <a 
href="clmse33.html#x44-78002r44">eq</a>), тогда
переменная параметра связывается значением из этой пары. Если имеется
более одной пар аргументов с одинаковым именем, то это не ошибка. В таком
случае используется наиболее левая пара. Если пары аргументов не нашлось,
тогда выполняется <i>initform</i> и переменная параметра связывается с
этим значением (или с <a 
href="clmse31.html#x42-74002r18">nil</a>, если <i>initform</i> не задана). Переменная <i>svar</i>
используется в тех же целях, что и для <i>необязательных</i> параметров. Она
будет связана с <i>true</i> если была необходимая пара аргументов, иначе с
<i>false</i>.
<!--l. 1930--><p class="indent" >   Если пара аргументов содержит ключевой символ, который не
присутствует в спецификаторах параметров в лямбда списке, то или
возникнет ошибка или возможны следующие условия:
      <ul class="itemize1">
      <li class="itemize">&#x0026;allow-other-keys был указан в лямбда списке.
      </li>
      <li class="itemize">Где-то среди именованных аргументов есть пара, в которой есть
      ключевой символ :allow-other-keys и значение не равно <a 
href="clmse31.html#x42-74002r18">nil</a>.</li></ul>
<!--l. 1943--><p class="indent" >   В случае возникновения одного из этих условий, можно использовать
именованные аргументы, которые не имеют соответствующих параметров
(эти аргументы будут доступны, как оставшийся &#x0026;rest параметр). Целью
этого механизма является возможность объединять лямбда списки разных
функции без необходимости копировать все спецификаторы именованных
(keyword) параметров. Например функция обёртка может передать часть
именованных аргументов в обернутую функцию без необходимости явного
ручного указания их всех.
<!--l. 1951--><p class="indent" >   После того как все спецификаторы были обработаны, слева направо
обрабатываются спецификаторы вспомогательных параметров. Для
каждого из них выполняется <i>initform</i> и переменная <i>var</i> связывается с
этим результатом (или с <a 
href="clmse31.html#x42-74002r18">nil</a>, если <i>initform</i> не определена). С &#x0026;aux
переменными можно делать то же, что и со специальной формой <a 
href="clmse39.html#x51-101002r75">let*</a>:
                                                                          

                                                                          
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(lambda (x y &#x0026;aux (a (car x)) (b 2) c) ...)
</td></tr></table>
<!--l. 1957--><p class="indent" >                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ≡</span> (lambda (x y) (let* ((a (car x)) (b 2) c) ...))</td></tr></table>
<!--l. 1959--><p class="indent" >
</div>
</div>
<!--l. 1961--><p class="indent" >   Что использовать зависит только от стиля.
<!--l. 1963--><p class="indent" >   Когда какая-либо форма <i>initform</i> выполняется в каком-либо спецификаторе
параметра, данная форма может ссылаться на любую переменную
параметра, стоящую слева от данной формы, включая supplied-p переменные,
и может рассчитывать на то, что другие переменные параметров ещё не
связаны (включая переменную данного параметра).
<!--l. 1969--><p class="indent" >   После того как был обработан лямбда список, выполняются формы в
теле лямбда выражения. Эти формы могут ссылаться на аргументы
функции, используя имена параметров. При выходе из функции, как с
помощью нормального возврата, так и с помощью нелокального выхода,
связывания параметров, и лексические, и специальные, упраздняются. В
случае создания «замыкания» над данными связываниями, связи
упраздняются не сразу, а сначала сохраняются, чтобы потом быть вновь
восстановленными.
<!--l. 1977--><p class="noindent" >Примеры использования &#x0026;optional и &#x0026;rest параметров: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a b) (+ a (* b 3))) 4 5) <span class="math"> ⇒</span> 19
</td></tr></table>
<!--l. 1980--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a &#x0026;optional (b 2)) (+ a (* b 3))) 4 5) <span class="math"> ⇒</span> 19</td></tr></table>
<!--l. 1981--><p class="indent" >                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a &#x0026;optional (b 2)) (+ a (* b 3))) 4) <span class="math"> ⇒</span> 10</td></tr></table>
<!--l. 1982--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (&#x0026;optional (a 2 b) (c 3 d) &#x0026;rest x) (list a b c d x)))</td></tr></table>
<!--l. 1983--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (2 <a 
href="clmse31.html#x42-74002r18">nil</a> 3 <a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a>)</td></tr></table>
<!--l. 1984--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (&#x0026;optional (a 2 b) (c 3 d) &#x0026;rest x) (list a b c d x))</td></tr></table>
<!--l. 1985--><p class="indent" >                                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> 6)</td></tr></table>
<!--l. 1986--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (6 t 3 <a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a>)</td></tr></table>
<!--l. 1987--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (&#x0026;optional (a 2 b) (c 3 d) &#x0026;rest x) (list a b c d x))</td></tr></table>
<!--l. 1988--><p class="indent" >                                                                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> 6 3)</td></tr></table>
<!--l. 1989--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (6 t 3 t <a 
href="clmse31.html#x42-74002r18">nil</a>)</td></tr></table>
                                                                          

                                                                          
<!--l. 1990--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (&#x0026;optional (a 2 b) (c 3 d) &#x0026;rest x) (list a b c d x))</td></tr></table>
<!--l. 1991--><p class="indent" >                                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> 6 3 8)</td></tr></table>
<!--l. 1992--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (6 t 3 t (8))</td></tr></table>
<!--l. 1993--><p class="indent" >              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (&#x0026;optional (a 2 b) (c 3 d) &#x0026;rest x) (list a b c d x))</td></tr></table>
<!--l. 1994--><p class="indent" >                                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> 6 3 8 9 10 11)</td></tr></table>
<!--l. 1995--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (6 t 3 t (8 9 10 11))</td></tr></table>
<!--l. 1997--><p class="indent" >
</div>
</div>
<!--l. 1998--><p class="noindent" >Примеры &#x0026;key параметров: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a b &#x0026;key c d) (list a b c d)) 1 2)
</td></tr></table>
<!--l. 2000--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (1 2 <a 
href="clmse31.html#x42-74002r18">nil</a> <a 
href="clmse31.html#x42-74002r18">nil</a>)</td></tr></table>
<!--l. 2001--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a b &#x0026;key c d) (list a b c d)) 1 2 :c 6)</td></tr></table>
<!--l. 2002--><p class="indent" >                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (1 2 6 <a 
href="clmse31.html#x42-74002r18">nil</a>)</td></tr></table>
<!--l. 2003--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a b &#x0026;key c d) (list a b c d)) 1 2 :d 8)</td></tr></table>
<!--l. 2004--><p class="indent" >                                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (1 2 <a 
href="clmse31.html#x42-74002r18">nil</a> 8)</td></tr></table>
<!--l. 2005--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a b &#x0026;key c d) (list a b c d)) 1 2 :c 6 :d 8)</td></tr></table>
<!--l. 2006--><p class="indent" >                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (1 2 6 8)</td></tr></table>
<!--l. 2007--><p class="indent" >                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a b &#x0026;key c d) (list a b c d)) 1 2 :d 8 :c 6)</td></tr></table>
<!--l. 2008--><p class="indent" >                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (1 2 6 8)</td></tr></table>
<!--l. 2009--><p class="indent" >                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a b &#x0026;key c d) (list a b c d)) :a 1 :d 8 :c 6)</td></tr></table>
<!--l. 2010--><p class="indent" >                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (:a 1 6 8)</td></tr></table>
<!--l. 2011--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a b &#x0026;key c d) (list a b c d)) :a :b :c :d)</td></tr></table>
<!--l. 2012--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   <span class="math"> ⇒</span> (:a :b :d <a 
href="clmse31.html#x42-74002r18">nil</a>)</td></tr></table>
<!--l. 2014--><p class="indent" >
</div>
</div>
<!--l. 2015--><p class="noindent" >Пример смешения всех: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a &#x0026;optional (b 3) &#x0026;rest x &#x0026;key c (d a))
</td></tr></table>
<!--l. 2017--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   (list a b c d x))</td></tr></table>
<!--l. 2018--><p class="indent" >                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> 1) <span class="math"> ⇒</span> (1 3 <a 
href="clmse31.html#x42-74002r18">nil</a> 1 ())</td></tr></table>
<!--l. 2020--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a &#x0026;optional (b 3) &#x0026;rest x &#x0026;key c (d a))
</td></tr></table>
<!--l. 2023--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   (list a b c d x))</td></tr></table>
<!--l. 2024--><p class="indent" >                                                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> 1 2) <span class="math"> ⇒</span> (1 2 <a 
href="clmse31.html#x42-74002r18">nil</a> 1 ())</td></tr></table>
<!--l. 2025--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 2026--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a &#x0026;optional (b 3) &#x0026;rest x &#x0026;key c (d a))</td></tr></table>
<!--l. 2027--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   (list a b c d x))</td></tr></table>
<!--l. 2028--><p class="indent" >                                                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> :c 7) <span class="math"> ⇒</span> (:c 7 <a 
href="clmse31.html#x42-74002r18">nil</a> :c ())</td></tr></table>
<!--l. 2029--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 2030--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a &#x0026;optional (b 3) &#x0026;rest x &#x0026;key c (d a))</td></tr></table>
<!--l. 2031--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   (list a b c d x))</td></tr></table>
<!--l. 2032--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> 1 6 :c 7) <span class="math"> ⇒</span> (1 6 7 1 (:c 7))</td></tr></table>
<!--l. 2033--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 2034--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a &#x0026;optional (b 3) &#x0026;rest x &#x0026;key c (d a))</td></tr></table>
<!--l. 2035--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   (list a b c d x))</td></tr></table>
<!--l. 2036--><p class="indent" >                                            <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> 1 6 :d 8) <span class="math"> ⇒</span> (1 6 <a 
href="clmse31.html#x42-74002r18">nil</a> 8 (:d 8))</td></tr></table>
<!--l. 2037--><p class="indent" >                                                                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td></tr></table>
<!--l. 2038--><p class="indent" >                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((lambda (a &#x0026;optional (b 3) &#x0026;rest x &#x0026;key c (d a))</td></tr></table>
<!--l. 2039--><p class="indent" >                                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">   (list a b c d x))</td></tr></table>
<!--l. 2040--><p class="indent" >                          <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> 1 6 :d 8 :c 9 :d 10) <span class="math"> ⇒</span> (1 6 9 8 (:d 8 :c 9 :d 10))</td></tr></table>
<!--l. 2042--><p class="indent" >
</div>
</div>
<!--l. 2044--><p class="indent" >   В лямбда-выражении, которое стоит на первом месте в списке формы
вызова функции допускаются все ключевые символы лямбда списка, хотя
и не очень то они полезны в этом качестве. Гораздо полезнее они
используются в глобальных функциях, определённых с помощью
<a 
href="clmse30.html#x40-67002r13">defun</a>.
<!--l. 2050--><p class="indent" >   Все символы, что начинаются на &#x0026; обычно зарезервированы для
использования в качестве ключевых символов лямбда списка, и не должны
                                                                          

                                                                          
использоваться для имён переменных. Реализации Common Lisp&#x2019;а могут
также предоставлять свои дополнительные ключевые символы лямбда
списка.
<div class=defun>
<!--l. 2056--><p class="noindent" ><i>[Константа]</i><a 
 id="dx39-65002"></a><a 
 id="x39-65003r11"></a><b> lambda-list-keywords</b>
<!--l. 2058--><p class="noindent" >Значение <a 
href="#x39-65003r11">lambda-list-keywords</a> является списком всех ключевых символов
лямбда списка, используемых в данной реализации, включая те, которые
используются только в <a 
href="clmse45.html#x58-144004r118">defmacro</a>. Этот список должен содержать как
минимум символы &#x0026;optional, &#x0026;rest, &#x0026;key, &#x0026;allow-other-keys, &#x0026;aux, &#x0026;body,
&#x0026;whole и &#x0026;environment.
</div>
<!--l. 2066--><p class="indent" >   Вот пример использования &#x0026;allow-other-keys и :allow-other-keys,
рассматривающий функция, которая принимает два своих именованных
аргумента и также дополнительные именованные аргументы, которые затем
передаются <a 
href="clmse89.html#x111-215002r520">make-array</a>: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(defun array-of-strings (str dims &#x0026;rest keyword-pairs
</td></tr></table>
<!--l. 2071--><p class="indent" >       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                         &#x0026;key (start 0) end &#x0026;allow-other-keys)</td></tr></table>
<!--l. 2072--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (apply #&#x2019;make-array dims</td></tr></table>
<!--l. 2073--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">         :initial-element (subseq str start end)</td></tr></table>
<!--l. 2074--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">         :allow-other-keys t</td></tr></table>
<!--l. 2075--><p class="indent" >                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">         keyword-pairs))</td></tr></table>
<!--l. 2077--><p class="indent" >
</div>
</div>
<!--l. 2079--><p class="indent" >   Такая функция принимает строку и информацию о размерности и
возвращает массив с заданной размерностью, каждый из элементов которого
равен заданной строке. Именованные аргументы :start и :end, как обычно
(смотрите главу <a 
href="clmch14.html#x94-19500014">14<!--tex4ht:ref: KSEQUE --></a>), можно использовать для указания того, что должна
использоваться подстрока. Кроме того, использование &#x0026;allow-other-keys в
лямбда списке указывает на то, что вызов этой функции может содержать
дополнительные именованные аргументы. Для доступа к ним используется
&#x0026;rest аргумент. Эти дополнительные именованные аргументы передаются в
<a 
href="clmse89.html#x111-215002r520">make-array</a>. <a 
href="clmse89.html#x111-215002r520">make-array</a> не принимает именованные аргументы :start и :end,
и было бы ошибкой допустить их использование. Однако указание
                                                                          

                                                                          
:allow-other-keys равное не-<a 
href="clmse31.html#x42-74002r18">nil</a> значению позволяет передавать любые другие
именованные аргументы, включая :start и :end, и они были бы приняты и
проигнорированы.
<div class=defun>
<!--l. 2093--><p class="noindent" ><i>[Константа]</i><a 
 id="dx39-65004"></a><a 
 id="x39-65005r12"></a><b> lambda-parameters-limit</b>
<!--l. 2095--><p class="noindent" >Значение <a 
href="#x39-65005r12">lambda-parameters-limit</a> является положительным целым, которое
невключительно является верхней границей допустимого количества имён
параметров, которые могут использоваться в лямбда списке. Значение
зависит от реализации, но не может быть менее 50. Разработчики
поощряются за создание данной границы как можно большей без потери
производительности. Смотрите call-arguments-list.
</div>
                                                                          

                                                                          
   <!--l. 2105--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse30.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse28.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse28.html#tailclmse28.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse29.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch5.html#clmse29.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 2105--><p class="indent" >   <a 
 id="tailclmse29.html"></a>  
</body></html> 
