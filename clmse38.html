<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Simple Sequencing</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-01 16:01:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 2467--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse39.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse37.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse37.html#tailclmse37.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse38.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch7.html#clmse38.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">7.4   </span> <a 
 id="x50-820007.4"></a>Simple Sequencing</h3>
<!--l. 2469--><p class="noindent" >Each of the constructs in this section simply evaluates all the argument forms in
order. They diﬀer only in what results are returned.
<div class=defspec>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Special form]</i><b> progn </b><a 
 id="dx50-82001"></a><a 
 id="x50-82002r80"></a> { form}*
</td></tr></table>
<!--l. 2475--><p class="indent" >
</div>
   The <a 
href="#x50-82002r80">progn</a> construct takes a number of forms and evaluates them sequentially,
in order, from left to right. The values of all the forms but the last are discarded;
whatever the last form returns is returned by the <a 
href="#x50-82002r80">progn</a> form. One says that all
the forms but the last are evaluated for <i>eﬀect</i>, because their execution is
useful only for the side eﬀects caused, but the last form is executed for
<i>value</i>.
   <a 
href="#x50-82002r80">progn</a> is the primitive control structure construct for “compound statements,”
such as <b>begin</b>-<b>end</b> blocks in Algol-like languages. Many Lisp constructs are
“implicit <a 
href="#x50-82002r80">progn</a>” forms: as part of their syntax each allows many forms to be
written that are to be evaluated sequentially, discarding the results of all forms
but the last and returning the results of the last form.
   If the last form of the <a 
href="#x50-82002r80">progn</a> returns multiple values, then those multiple values
are returned by the <a 
href="#x50-82002r80">progn</a> form. If there are no forms for the <a 
href="#x50-82002r80">progn</a>, then
the result is <a 
href="clmse31.html#x42-70002r19">nil</a>. These rules generally hold for implicit <a 
href="#x50-82002r80">progn</a> forms as
well.
</div>
<div class=defmac>
<div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Macro]</i><b> prog1 </b><a 
 id="dx50-82003"></a><a 
 id="x50-82004r81"></a> ﬁrst  { form}*
</td></tr></table>
<!--l. 2500--><p class="indent" >
</div>
   prog1 is similar to <a 
href="#x50-82002r80">progn</a>, but it returns the value of its <i>ﬁrst</i> form. All the
argument forms are executed sequentially; the value of the ﬁrst form is saved
while all the others are executed and is then returned.
   prog1 is most commonly used to evaluate an expression with side eﬀects and
to return a value that must be computed <i>before</i> the side eﬀects happen. For
example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog1 (car x) (rplaca x &#x2019;foo))
</td></tr></table>
<!--l. 2512--><p class="indent" >
</div>
</div>
<!--l. 2513--><p class="noindent" >alters the <i>car</i> of x to be foo and returns the old <i>car</i> of x.
<!--l. 2516--><p class="indent" >   prog1 always returns a single value, even if the ﬁrst form tries to return
multiple values. As a consequence, (prog1 <i>x</i>) and (progn <i>x</i>) may behave
diﬀerently if <i>x</i> can produce multiple values. See multiple-value-prog1.
A point of style: although prog1 can be used to force exactly a single
value to be returned, it is conventional to use the function <a 
href="clmse44.html#x56-94002r123">values</a> for this
purpose.
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  <i>[Macro]</i><b> prog2 </b><a 
 id="dx50-82005"></a><a 
 id="x50-82006r82"></a> ﬁrst second  { form}*
</td></tr></table>
<!--l. 2529--><p class="indent" >
</div>
                                                                          

                                                                          
   prog2 is similar to prog1, but it returns the value of its <i>second</i> form. All the
argument forms are executed sequentially; the value of the second form is saved
while all the other forms are executed and is then returned. prog2 is provided
mostly for historical compatibility. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog2 <i>a</i> <i>b</i> <i>c</i> ... <i>z</i>)  ≡ (progn <i>a</i> (prog1 <i>b</i> <i>c</i> ... <i>z</i>))
</td></tr></table>
<!--l. 2537--><p class="indent" >
</div>
</div>
<!--l. 2538--><p class="noindent" >Occasionally it is desirable to perform one side eﬀect, then a value-producing
operation, then another side eﬀect. In such a peculiar case, prog2 is fairly
perspicuous. For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog2 (open-a-ﬁle) (process-the-ﬁle) (close-the-ﬁle))
</td></tr></table>
<!--l. 2543--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:585;" 
class="tabbing"></td><td  
class="tabbing-right">                                            ;value is that of process-the-ﬁle</td></tr></table>
<!--l. 2545--><p class="indent" >
</div>
</div>
<!--l. 2547--><p class="indent" >   prog2, like prog1, always returns a single value, even if the second
form tries to return multiple values. As a consequence of this, (prog2
<i>x</i> <i>y</i>) and (progn <i>x</i> <i>y</i>) may behave diﬀerently if <i>y</i> can produce multiple
values.
</div>
                                                                          

                                                                          
   <!--l. 2556--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse39.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse37.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse37.html#tailclmse37.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse38.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch7.html#clmse38.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 2556--><p class="indent" >   <a 
 id="tailclmse38.html"></a>  
</body></html> 
