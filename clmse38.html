<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Simple Sequencing Последовательное выполнение</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-11 14:56:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 2661--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse39.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse37.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse37.html#tailclmse37.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse38.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch7.html#clmse38.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">7.4   </span> <a 
 id="x50-1020007.4"></a>Simple Sequencing Последовательное выполнение</h3>
<!--l. 2663--><p class="noindent" >Each of the constructs in this section simply evaluates all the argument forms in
order. They diﬀer only in what results are returned.
<!--l. 2667--><p class="indent" >   Все конструкции в данном разделе выполняют все формы аргументов в
прямой последовательности. Различие заключается только в возвращаемых
ими результатах.
<div class=defspec>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Special form]</i><b> progn </b><a 
 id="dx50-102001"></a><a 
 id="x50-102002r80"></a> { form}*
</td></tr></table>
<!--l. 2672--><p class="indent" >
</div>
<!--l. 2672--><p class="noindent" ><span class="paragraphHead"><a 
 id="x50-1030007.4"></a></span>
   The <a 
href="#x50-102002r80">progn</a> construct takes a number of forms and evaluates them sequentially,
in order, from left to right. The values of all the forms but the last are discarded;
whatever the last form returns is returned by the <a 
href="#x50-102002r80">progn</a> form. One says that all
the forms but the last are evaluated for <i>eﬀect</i>, because their execution is
useful only for the side eﬀects caused, but the last form is executed for
<i>value</i>.
<!--l. 2681--><p class="indent" >   <a 
href="#x50-102002r80">progn</a> is the primitive control structure construct for “compound statements,”
such as <b>begin</b>-<b>end</b> blocks in Algol-like languages. Many Lisp constructs are
“implicit <a 
href="#x50-102002r80">progn</a>” forms: as part of their syntax each allows many forms to be
written that are to be evaluated sequentially, discarding the results of all forms
but the last and returning the results of the last form.
                                                                          

                                                                          
<!--l. 2689--><p class="indent" >   If the last form of the <a 
href="#x50-102002r80">progn</a> returns multiple values, then those multiple values
are returned by the <a 
href="#x50-102002r80">progn</a> form. If there are no forms for the <a 
href="#x50-102002r80">progn</a>, then
the result is <a 
href="clmse31.html#x42-77002r19">nil</a>. These rules generally hold for implicit <a 
href="#x50-102002r80">progn</a> forms as
well.
<!--l. 2694--><p class="indent" >   Конструкция <a 
href="#x50-102002r80">progn</a> принимает некоторое количество форм и
последовательно вычисляет их слева направо. Значения всех кроме последней
формы игнорируется. Результатом формы <a 
href="#x50-102002r80">progn</a> становиться то, что
вернула последняя форма. Можно сказать, что все формы кроме
последней выполняются для побочных эффектов, а последняя форма для
значения.
<!--l. 2701--><p class="indent" >   <a 
href="#x50-102002r80">progn</a> является примитивной управляющей структурой для «составных
выражений», как блоки <b>begin</b>-<b>end</b> в Algol&#x2019;ных языках. Много
Lisp&#x2019;овых конструкций является «неявным <a 
href="#x50-102002r80">progn</a>»: так как часть
их синтаксиса допускает запись нескольких форм, которые будут
выполнены последовательно и возвращен будет результат последней
формы.
<!--l. 2708--><p class="indent" >   Если последняя форма <a 
href="#x50-102002r80">progn</a> возвращает несколько значение, тогда все
они будут возвращены из формы <a 
href="#x50-102002r80">progn</a>. Если форм в <a 
href="#x50-102002r80">progn</a> нет вообще, то
результатом будет <a 
href="clmse31.html#x42-77002r19">nil</a>. Эти правила сохраняются также и для неявного
<a 
href="#x50-102002r80">progn</a>.
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> prog1 </b><a 
 id="dx50-103001"></a><a 
 id="x50-103002r81"></a> ﬁrst  { form}*
</td></tr></table>
<!--l. 2716--><p class="indent" >
</div>
<!--l. 2716--><p class="noindent" ><span class="paragraphHead"><a 
 id="x50-1040007.4"></a></span>
   <a 
href="#x50-103002r81">prog1</a> is similar to <a 
href="#x50-102002r80">progn</a>, but it returns the value of its <i>ﬁrst</i> form. All the
argument forms are executed sequentially; the value of the ﬁrst form is saved
while all the others are executed and is then returned.
<!--l. 2722--><p class="indent" >   <a 
href="#x50-103002r81">prog1</a> is most commonly used to evaluate an expression with side eﬀects and
                                                                          

                                                                          
to return a value that must be computed <i>before</i> the side eﬀects happen. For
example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog1 (car x) (rplaca x &#x2019;foo))
</td></tr></table>
<!--l. 2728--><p class="indent" >
</div>
</div>
<!--l. 2729--><p class="noindent" >alters the <i>car</i> of x to be foo and returns the old <i>car</i> of x.
<!--l. 2732--><p class="indent" >   <a 
href="#x50-103002r81">prog1</a> always returns a single value, even if the ﬁrst form tries to return
multiple values. As a consequence, (prog1 <i>x</i>) and (progn <i>x</i>) may behave
diﬀerently if <i>x</i> can produce multiple values. See <a 
href="clmse44.html#x56-146002r128">multiple-value-prog1</a>.
A point of style: although <a 
href="#x50-103002r81">prog1</a> can be used to force exactly a single
value to be returned, it is conventional to use the function <a 
href="clmse44.html#x56-144002r123">values</a> for this
purpose.
<!--l. 2742--><p class="indent" >   <a 
href="#x50-103002r81">prog1</a> похожа на <a 
href="#x50-102002r80">progn</a> за исключением того, что он возвращает результат
<i>первой</i> формы. Все формы-аргументы выполняются последовательно.
Значение первой формы сохраняется, затем выполняются все формы, и,
наконец, возвращается сохраненное значение.
<!--l. 2747--><p class="indent" >   <a 
href="#x50-103002r81">prog1</a> чаще всего используется, когда необходимо вычислить выражение с
побочными эффектами и возвращаемое значение должно быть вычислено <i>до</i>
побочных эффектов. Например: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog1 (car x) (rplaca x &#x2019;foo))
</td></tr></table>
<!--l. 2753--><p class="indent" >
</div>
</div>
<!--l. 2754--><p class="noindent" >изменяет <i>car</i> от x на foo и возвращает старое значение.
<!--l. 2756--><p class="indent" >   <a 
href="#x50-103002r81">prog1</a> всегда возвращает одно значение, даже если первая форма
возвращает несколько значений. В следствие, (prog1 <i>x</i>) и (progn <i>x</i>) могут
вести себя по-разному, <i>x</i> возвращает несколько значений. Смотрите
<a 
href="clmse44.html#x56-146002r128">multiple-value-prog1</a>. И хотя <a 
href="#x50-103002r81">prog1</a> может использоваться для явного указания
возврата только одного значения, для этих целей лучше использовать
функцию <a 
href="clmse44.html#x56-144002r123">values</a>.
                                                                          

                                                                          
</div>
<div class=defmac>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"> <i>[Macro]</i><b> prog2 </b><a 
 id="dx50-104001"></a><a 
 id="x50-104002r82"></a> ﬁrst second  { form}*
</td></tr></table>
<!--l. 2766--><p class="indent" >
</div>
<!--l. 2766--><p class="noindent" ><span class="paragraphHead"><a 
 id="x50-1050007.4"></a></span>
   <a 
href="#x50-104002r82">prog2</a> is similar to <a 
href="#x50-103002r81">prog1</a>, but it returns the value of its <i>second</i> form. All the
argument forms are executed sequentially; the value of the second form is saved
while all the other forms are executed and is then returned. <a 
href="#x50-104002r82">prog2</a> is provided
mostly for historical compatibility. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog2 <i>a</i> <i>b</i> <i>c</i> ... <i>z</i>)  ≡ (progn <i>a</i> (prog1 <i>b</i> <i>c</i> ... <i>z</i>))
</td></tr></table>
<!--l. 2774--><p class="indent" >
</div>
</div>
<!--l. 2775--><p class="noindent" >Occasionally it is desirable to perform one side eﬀect, then a value-producing
operation, then another side eﬀect. In such a peculiar case, <a 
href="#x50-104002r82">prog2</a> is fairly
perspicuous. For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog2 (open-a-ﬁle) (process-the-ﬁle) (close-the-ﬁle))
</td></tr></table>
<!--l. 2780--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:585;" 
class="tabbing"></td><td  
class="tabbing-right">                                            ;value is that of process-the-ﬁle</td></tr></table>
<!--l. 2782--><p class="indent" >
</div>
</div>
                                                                          

                                                                          
<!--l. 2784--><p class="indent" >   <a 
href="#x50-104002r82">prog2</a>, like <a 
href="#x50-103002r81">prog1</a>, always returns a single value, even if the second
form tries to return multiple values. As a consequence of this, (prog2
<i>x</i> <i>y</i>) and (progn <i>x</i> <i>y</i>) may behave diﬀerently if <i>y</i> can produce multiple
values.
<!--l. 2790--><p class="indent" >   <a 
href="#x50-104002r82">prog2</a> похожа на <a 
href="#x50-103002r81">prog1</a>, но она возращает значение ее <i>второй</i> формы. Все
формы-аргументы выполняются последовательно. Значение второй
формы сохраняется и возвращается после выполнения остальных форм.
<a 
href="#x50-104002r82">prog2</a> представлена по большей части по историческим причинам. <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog2 <i>a</i> <i>b</i> <i>c</i> ... <i>z</i>)  ≡ (progn <i>a</i> (prog1 <i>b</i> <i>c</i> ... <i>z</i>))
</td></tr></table>
<!--l. 2796--><p class="indent" >
</div>
</div>
<!--l. 2797--><p class="noindent" >Иногда необходимо получить один побочный эффект, затем полезный результат,
затем другой побочный эффекта. В таком случае <a 
href="#x50-104002r82">prog2</a> полезна. Например: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(prog2 (open-a-ﬁle) (process-the-ﬁle) (close-the-ﬁle))
</td></tr></table>
<!--l. 2801--><p class="indent" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:585;" 
class="tabbing"></td><td  
class="tabbing-right">                                  ;возвращаемое значение process-the-ﬁle</td></tr></table>
<!--l. 2803--><p class="indent" >
</div>
</div>
</div>
                                                                          

                                                                          
   <!--l. 2808--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse39.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse37.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse37.html#tailclmse37.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse38.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch7.html#clmse38.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 2808--><p class="indent" >   <a 
 id="tailclmse38.html"></a>  
</body></html> 
