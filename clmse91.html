<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Association Lists</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-10 00:01:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 1292--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch16.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse90.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse90.html#tailclmse90.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse91.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse91.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">15.6   </span> <a 
 id="x111-23200015.6"></a>Association Lists</h3>
<!--l. 1294--><p class="noindent" >An association list, or a-list, is a data structure used very frequently in Lisp. An
a-list is a list of pairs (conses); each pair is an association. The car of a pair is
called the key, and the cdr is called the datum.
<!--l. 1299--><p class="indent" >   An advantage of the a-list representation is that an a-list can be incrementally
augmented simply by adding new entries to the front. Moreover, because the
searching function <a 
href="#x111-232006r535">assoc</a> searches the a-list in order, new entries can “shadow” old
entries. If an a-list is viewed as a mapping from keys to data, then the mapping
can be not only augmented but also altered in a non-destructive manner by
adding new entries to the front of the a-list.
<!--l. 1307--><p class="indent" >   Sometimes an a-list represents a bijective mapping, and it is desirable to
retrieve a key given a datum. For this purpose, the “reverse” searching function
<a 
href="#x111-232018r540">rassoc</a> is provided. Other variants of a-list searches can be constructed using the
function <a 
href="clmse84.html#x103-221002r430">ﬁnd</a> or <a 
href="clmse90.html#x110-231002r519">member</a>.
<!--l. 1312--><p class="indent" >   It is permissible to let <a 
href="clmse31.html#x42-77002r19">nil</a> be an element of an a-list in place of a pair. Such an
element is not considered to be a pair but is simply passed over when the a-list is
searched by <a 
href="#x111-232006r535">assoc</a>.
<div class=defun>
<!--l. 1316--><p class="noindent" ><i>[Function]</i><a 
 id="dx111-232001"></a><a 
 id="x111-232002r533"></a><b> acons</b>  <i>key</i> <i>datum</i> <i>a-list</i>
<!--l. 1318--><p class="noindent" ><a 
href="#x111-232002r533">acons</a> constructs a new association list by adding the pair (key . datum) to the old
a-list. <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(acons x y a)  ≡ (cons (cons x y) a)
</td></tr></table>
<!--l. 1323--><p class="indent" >
</div>
</div>
<div class=newer>
<!--l. 1325--><p class="noindent" >This is a trivial convenience function, but I ﬁnd I use it a lot.
</div>
                                                                          

                                                                          
</div>
<!--l. 1329--><p class="indent" >
                                                                          

                                                                          
<div class=defun>
<!--l. 1331--><p class="noindent" ><i>[Function]</i><a 
 id="dx111-232003"></a><a 
 id="x111-232004r534"></a><b> pairlis</b>  <i>keys</i> <i>data</i> &#x0026;optional  <i>a-list</i>
<!--l. 1333--><p class="noindent" ><a 
href="#x111-232004r534">pairlis</a> takes two lists and makes an association list that associates elements of the
ﬁrst list to corresponding elements of the second list. It is an error if
the two lists keys and data are not of the same length. If the optional
argument a-list is provided, then the new pairs are added to the front of
it.
<!--l. 1340--><p class="indent" >   The new pairs may appear in the resulting a-list in any order; in particular,
either forward or backward order is permitted. Therefore the result of the call <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(pairlis &#x2019;(one two) &#x2019;(1 2) &#x2019;((three . 3) (four . 19)))
</td></tr></table>
<!--l. 1345--><p class="indent" >
</div>
</div>
<!--l. 1346--><p class="noindent" >might be <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((one . 1) (two . 2) (three . 3) (four . 19))
</td></tr></table>
<!--l. 1349--><p class="indent" >
</div>
</div>
<!--l. 1350--><p class="noindent" >but could equally well be <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">((two . 2) (one . 1) (three . 3) (four . 19))
</td></tr></table>
<!--l. 1353--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
                                                                          

                                                                          
<!--l. 1356--><p class="noindent" ><i>[Function]</i><a 
 id="dx111-232005"></a><a 
 id="x111-232006r535"></a><b> assoc</b>  <i>item</i> <i>a-list</i> &#x0026;key  <i>:test</i> <i>:test-not</i> <i>:key</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx111-232007"></a><a 
 id="x111-232008r536"></a><b> assoc-if</b>  <i>predicate</i> <i>a-list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx111-232009"></a><a 
 id="x111-232010r537"></a><b> assoc-if-not</b>  <i>predicate</i> <i>a-list</i>
<!--l. 1360--><p class="noindent" ><div class=new> X3J13 voted in March 1988 <a 
 id="dx111-232011"></a>to allow <a 
href="#x111-232013r538">assoc-if</a> and <a 
href="#x111-232015r539">assoc-if-not</a> also to take a
keyword argument named :key, to be used to determine whether a pair “satisﬁes
the test” in the same manner as for sequence functions. The new function
descriptions are therefore as follows:
<div class=defun>
<!--l. 1369--><p class="noindent" ><i>[Function]</i><a 
 id="dx111-232012"></a><a 
 id="x111-232013r538"></a><b> assoc-if</b>  <i>predicate</i> <i>a-list</i> &#x0026;key  <i>:key</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx111-232014"></a><a 
 id="x111-232015r539"></a><b> assoc-if-not</b>  <i>predicate</i> <i>a-list</i> &#x0026;key  <i>:key</i>
<!--l. 1372--><p class="noindent" >
</div>
<!--l. 1374--><p class="indent" >   The omission of :key arguments for these functions in the ﬁrst edition was
probably an oversight.
</div>
<!--l. 1378--><p class="indent" >   Each of these searches the association list a-list. The value is the ﬁrst pair in
the a-list such that the car of the pair satisﬁes the test, or <a 
href="clmse31.html#x42-77002r19">nil</a> if there is no such
pair in the a-list. For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(assoc &#x2019;r &#x2019;((a . b) (c . d) (r . x) (s . y) (r . z)))
</td></tr></table>
<!--l. 1384--><p class="indent" >                                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">         ⇒ (r . x)</td></tr></table>
<!--l. 1385--><p class="indent" >                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(assoc &#x2019;goo &#x2019;((foo . bar) (zoo . goo)))  ⇒ <a 
href="clmse31.html#x42-77002r19">nil</a></td></tr></table>
<!--l. 1386--><p class="indent" >                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(assoc &#x2019;2 &#x2019;((1 a b c) (2 b c d) (-7 x y z)))  ⇒ (2 b c d)</td></tr></table>
<!--l. 1388--><p class="indent" >
</div>
</div>
<!--l. 1389--><p class="noindent" >It is possible to <a 
href="clmse88.html#x108-229004r510">rplacd</a> the result of <a 
href="#x111-232006r535">assoc</a> provided that it is not <a 
href="clmse31.html#x42-77002r19">nil</a>, in order to
“update” the “table” that was <a 
href="#x111-232006r535">assoc</a>&#x2019;s second argument. (However, it is often
better to update an a-list by adding new pairs to the front, rather than altering
old pairs.) For example: <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(setq values &#x2019;((x . 100) (y . 200) (z . 50)))
</td></tr></table>
<!--l. 1396--><p class="indent" >                                             <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(assoc &#x2019;y values)  ⇒ (y . 200)</td></tr></table>
<!--l. 1397--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(rplacd (assoc &#x2019;y values) 201)</td></tr></table>
                                                                          

                                                                          
<!--l. 1398--><p class="indent" >                                        <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(assoc &#x2019;y values)  ⇒ (y . 201) now</td></tr></table>
<!--l. 1400--><p class="indent" >
</div>
</div>
<!--l. 1401--><p class="noindent" >A typical trick is to say (cdr (assoc x y)). Because the cdr of <a 
href="clmse31.html#x42-77002r19">nil</a> is guaranteed to be
<a 
href="clmse31.html#x42-77002r19">nil</a>, this yields <a 
href="clmse31.html#x42-77002r19">nil</a> if no pair is found or if a pair is found whose cdr is <a 
href="clmse31.html#x42-77002r19">nil</a>. This is
useful if <a 
href="clmse31.html#x42-77002r19">nil</a> serves its usual role as a “default value.”
<!--l. 1408--><p class="indent" >   The two expressions <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(assoc item list :test fn)
</td></tr></table>
<!--l. 1411--><p class="indent" >
</div>
</div>
<!--l. 1412--><p class="noindent" >and <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬁnd item list :test fn :key #&#x2019;car)
</td></tr></table>
<!--l. 1415--><p class="indent" >
</div>
</div>
<!--l. 1416--><p class="noindent" >are equivalent in meaning with one important exception: if <a 
href="clmse31.html#x42-77002r19">nil</a> appears in the
a-list in place of a pair, and the item being searched for is <a 
href="clmse31.html#x42-77002r19">nil</a>, <a 
href="clmse84.html#x103-221002r430">ﬁnd</a> will
blithely compute the car of the <a 
href="clmse31.html#x42-77002r19">nil</a> in the a-list, ﬁnd that it is equal to the
item, and return <a 
href="clmse31.html#x42-77002r19">nil</a>, whereas <a 
href="#x111-232006r535">assoc</a> will ignore the <a 
href="clmse31.html#x42-77002r19">nil</a> in the a-list and
continue to search for an actual pair (cons) whose car is <a 
href="clmse31.html#x42-77002r19">nil</a>. See <a 
href="clmse84.html#x103-221002r430">ﬁnd</a> and
<a 
href="clmse84.html#x103-221009r433">position</a>.
<div class=new>
<!--l. 1426--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx111-232016"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-1420007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
<div class=incompatibility>
<!--l. 1432--><p class="noindent" ><b>Compatibility note:</b> In MacLisp, the <a 
href="#x111-232006r535">assoc</a> function uses an <a 
href="clmse33.html#x44-81007r48">equal</a> comparison rather
than <a 
href="clmse33.html#x44-81005r47">eql</a>, which is the default test for <a 
href="#x111-232006r535">assoc</a> in Common Lisp. Where in MacLisp one
would write (assoc x y), in Common Lisp one must write (assoc x y :test #&#x2019;equal) to get
the completely identical eﬀect. Similarly, one can get the precise eﬀect, and no
                                                                          

                                                                          
more, of the MacLisp (assq x y) by writing in Common Lisp (assoc x y :test
#&#x2019;eq).
<!--l. 1441--><p class="indent" >   In Interlisp, <a 
href="#x111-232006r535">assoc</a> uses an <a 
href="clmse33.html#x44-81002r46">eq</a> test, and sassoc uses an Interlisp <a 
href="clmse33.html#x44-81007r48">equal</a> test.
</div>
</div>
<div class=defun>
<!--l. 1447--><p class="noindent" ><i>[Function]</i><a 
 id="dx111-232017"></a><a 
 id="x111-232018r540"></a><b> rassoc</b>  <i>item</i> <i>a-list</i> &#x0026;key  <i>:test</i> <i>:test-not</i> <i>:key</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx111-232019"></a><a 
 id="x111-232020r541"></a><b> rassoc-if</b>  <i>predicate</i> <i>a-list</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx111-232021"></a><a 
 id="x111-232022r542"></a><b> rassoc-if-not</b>  <i>predicate</i> <i>a-list</i>
<!--l. 1451--><p class="noindent" ><div class=new> X3J13 voted in March 1988 <a 
 id="dx111-232023"></a>to allow <a 
href="#x111-232025r543">rassoc-if</a> and <a 
href="#x111-232027r544">rassoc-if-not</a> also to take a
keyword argument named :key, to be used to determine whether a pair “satisﬁes
the test” in the same manner as for sequence functions. The new function
descriptions are therefore as follows:
<div class=defun>
<!--l. 1460--><p class="noindent" ><i>[Function]</i><a 
 id="dx111-232024"></a><a 
 id="x111-232025r543"></a><b> rassoc-if</b>  <i>predicate</i> <i>a-list</i> &#x0026;key  <i>:key</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx111-232026"></a><a 
 id="x111-232027r544"></a><b> rassoc-if-not</b>  <i>predicate</i> <i>a-list</i> &#x0026;key  <i>:key</i>
<!--l. 1463--><p class="noindent" >
</div>
<!--l. 1465--><p class="indent" >   The omission of :key arguments for these functions in the ﬁrst edition was
probably an oversight.
</div>
<!--l. 1469--><p class="indent" >   <a 
href="#x111-232018r540">rassoc</a> is the reverse form of <a 
href="#x111-232006r535">assoc</a>; it searches for a pair whose cdr satisﬁes the
test, rather than the car. If the a-list is considered to be a mapping, then
<a 
href="#x111-232018r540">rassoc</a> treats the a-list as representing the inverse mapping. For example: <div class=lisp>
<div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(rassoc &#x2019;a &#x2019;((a . b) (b . c) (c . a) (z . a)))  ⇒ (c . a)
</td></tr></table>
<!--l. 1476--><p class="indent" >
</div>
</div>
<!--l. 1478--><p class="indent" >   The expressions <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(rassoc item list :test fn)
</td></tr></table>
<!--l. 1481--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 1482--><p class="noindent" >and <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬁnd item list :test fn :key #&#x2019;cdr)
</td></tr></table>
<!--l. 1485--><p class="indent" >
</div>
</div>
<!--l. 1486--><p class="noindent" >are equivalent in meaning, except when the item is <a 
href="clmse31.html#x42-77002r19">nil</a> and <a 
href="clmse31.html#x42-77002r19">nil</a> appears in place of a
pair in the a-list. See the discussion of the function <a 
href="#x111-232006r535">assoc</a>.
<div class=new>
<!--l. 1491--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx111-232028"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-1420007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
   <!--l. 6--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmch16.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse90.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse90.html#tailclmse90.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse91.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch15.html#clmse91.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 6--><p class="indent" >   <a 
 id="tailclmse91.html"></a>  
</body></html> 
