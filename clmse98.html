<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Fill Pointers</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,charset=utf-8,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-03-09 00:03:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
</head><body 
>
   <!--l. 711--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse99.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse97.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse97.html#tailclmse97.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse98.html">Tail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch17.html#clmse98.html" >Up</a><tt>&#x003E;</tt></p></div>
   <h3 class="sectionHead"><span class="titlemark">17.5   </span> <a 
 id="x120-24200017.5"></a>Fill Pointers</h3>
<!--l. 714--><p class="noindent" >Several functions for manipulating a ﬁll pointer are provided in Common Lisp to
make it easy to incrementally ﬁll in the contents of a vector and, more
generally, to allow eﬃcient varying of the length of a vector. For example, a
string with a ﬁll pointer has most of the characteristics of a PL/I varying
string.
<!--l. 721--><p class="indent" >   The ﬁll pointer is a non-negative integer no larger than the total number of
elements in the vector (as returned by <a 
href="clmse96.html#x118-240006r567">array-dimension</a>); it is the number of
“active” or “ﬁlled-in” elements in the vector. The ﬁll pointer constitutes the “active
length” of the vector; all vector elements whose index is less than the ﬁll pointer
are active, and the others are inactive. Nearly all functions that operate on the
contents of a vector will operate only on the active elements. An important
exception is <a 
href="clmse95.html#x117-239002r563">aref</a>, which can be used to access any vector element whether
in the active region of the vector or not. It is important to note that
vector elements not in the active region are still considered part of the
vector.
<div class=implementation>
<!--l. 735--><p class="noindent" ><b>Implementation note:</b> An implication of this rule is that vector elements outside the
active region may not be garbage-collected.
</div>
<!--l. 741--><p class="indent" >   Only vectors (one-dimensional arrays) may have ﬁll pointers; multidimensional
arrays may not. (Note, however, that one can create a multidimensional array
that is displaced to a vector that has a ﬁll pointer.)
<div class=defun>
<!--l. 746--><p class="noindent" ><i>[Function]</i><a 
 id="dx120-242001"></a><a 
 id="x120-242002r587"></a><b> array-has-ﬁll-pointer-p</b>  <i>array</i>
<!--l. 748--><p class="noindent" >The argument must be an array. <a 
href="#x120-242002r587">array-has-ﬁll-pointer-p</a> returns <a 
href="clmse31.html#x42-77004r20">t</a> if the array has
a ﬁll pointer, and otherwise returns <a 
href="clmse31.html#x42-77002r19">nil</a>. Note that array-has-ﬁll-pointer-p always
returns <a 
href="clmse31.html#x42-77002r19">nil</a> if the array is not one-dimensional.
</div>
<div class=defun>
                                                                          

                                                                          
<!--l. 757--><p class="noindent" ><i>[Function]</i><a 
 id="dx120-242003"></a><a 
 id="x120-242004r588"></a><b> ﬁll-pointer</b>  <i>vector</i>
<!--l. 759--><p class="noindent" >The ﬁll pointer of vector is returned. It is an error if the vector does not have a ﬁll
pointer.
<!--l. 763--><p class="indent" >   <a 
href="clmse36.html#x48-93002r66">setf</a> may be used with <a 
href="#x120-242004r588">ﬁll-pointer</a> to change the ﬁll pointer of a vector. The ﬁll
pointer of a vector must always be an integer between zero and the size of the
vector (inclusive).
</div>
<div class=defun>
<!--l. 768--><p class="noindent" ><i>[Function]</i><a 
 id="dx120-242005"></a><a 
 id="x120-242006r589"></a><b> vector-push</b>  <i>new-element</i> <i>vector</i>
<!--l. 770--><p class="noindent" >vector must be a one-dimensional array that has a ﬁll pointer, and new-element
may be any object. <a 
href="#x120-242006r589">vector-push</a> attempts to store new-element in the
element of the vector designated by the ﬁll pointer, and to increase the ﬁll
pointer by 1. If the ﬁll pointer does not designate an element of the vector
(speciﬁcally, when it gets too big), it is unaﬀected and <a 
href="#x120-242006r589">vector-push</a> returns <a 
href="clmse31.html#x42-77002r19">nil</a>.
Otherwise, the store and increment take place and <a 
href="#x120-242006r589">vector-push</a> returns the
former value of the ﬁll pointer (1 less than the one it leaves in the vector);
thus the value of <a 
href="#x120-242006r589">vector-push</a> is the index of the new element pushed. <div class=new> It
is instructive to compare <a 
href="#x120-242006r589">vector-push</a>, which is a function, with <a 
href="clmse87.html#x107-225060r503">push</a>,
which is a macro that requires a place suitable for <a 
href="clmse36.html#x48-93002r66">setf</a>. A vector with a ﬁll
pointer eﬀectively contains the place to be modiﬁed in its <a 
href="#x120-242004r588">ﬁll-pointer</a>
slot.
</div>
</div>
<div class=defun>
<!--l. 789--><p class="noindent" ><i>[Function]</i><a 
 id="dx120-242007"></a><a 
 id="x120-242008r590"></a><b> vector-push-extend</b>  <i>new-element</i> <i>vector</i> &#x0026;optional  <i>extension</i>
<!--l. 791--><p class="noindent" ><a 
href="#x120-242008r590">vector-push-extend</a> is just like <a 
href="#x120-242006r589">vector-push</a> except that if the ﬁll pointer gets too
large, the vector is extended (using <a 
href="clmse99.html#x121-243002r592">adjust-array</a>) so that it can contain more
elements. If, however, the vector is not adjustable, then <a 
href="#x120-242008r590">vector-push-extend</a> signals
an error.
<div class=newer>
<!--l. 799--><p class="indent" >   X3J13 voted in June 1989 <a 
 id="dx120-242009"></a>to clarify that <a 
href="#x120-242008r590">vector-push-extend</a> regards an
array as not adjustable if and only if <a 
href="clmse96.html#x118-240019r573">adjustable-array-p</a> is false of that
array.
</div>
<!--l. 806--><p class="indent" >   The optional argument extension, which must be a positive integer, is the
minimum number of elements to be added to the vector if it must be extended; it
defaults to a “reasonable” implementation-dependent value.
</div>
                                                                          

                                                                          
<div class=defun>
<!--l. 812--><p class="noindent" ><i>[Function]</i><a 
 id="dx120-242010"></a><a 
 id="x120-242011r591"></a><b> vector-pop</b>  <i>vector</i>
<!--l. 814--><p class="noindent" >vector must be a one-dimensional array that has a ﬁll pointer. If the ﬁll pointer is
zero, <a 
href="#x120-242011r591">vector-pop</a> signals an error. Otherwise the ﬁll pointer is decreased by 1,
and the vector element designated by the new value of the ﬁll pointer is
returned.
</div>
                                                                          

                                                                          
   <!--l. 821--><div class="crosslinks"><p class="noindent"><tt>&#x003C;</tt><a 
href="clmse99.html" >Next</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse97.html" >Prev</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse97.html#tailclmse97.html" >PrevTail</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse98.html" >Front</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch17.html#clmse98.html" >Up</a><tt>&#x003E;</tt></p></div>
<!--l. 821--><p class="indent" >   <a 
 id="tailclmse98.html"></a>  
</body></html> 
