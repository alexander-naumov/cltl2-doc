<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Type Conversions and Component Extractions on Numbers Приведение
типов и доступ к компонентам чисел</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,index=2,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-04-11 23:15:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="cltl2ed.css"></head><body 
>
<!--l. 3227--><p class="noindent" > <div id="main_container"> <div id="content"> <div id="toplinks"><tt>&#x003C;</tt><a 
href="clmse66.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse64.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse64.html#tailclmse64.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="#tailclmse65.html">В-конец</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch12.html#clmse65.html" >Вверх</a><tt>&#x003E;</tt></div><h3 class="sectionHead"><span class="titlemark">12.6   </span> <a 
href="clm.html#QQ2-82-211" id="x82-18300012.6">Type Conversions
and Component Extractions on Numbers Приведение типов и доступ к
компонентам чисел</a></h3>
<!--l. 3229--><p class="noindent" >While most arithmetic functions will operate on any kind of number, coercing
types if necessary, the following functions are provided to allow speciﬁc
conversions of data types to be forced when desired.
<!--l. 3233--><p class="indent" >   Тогда как большинство арифметических функций будут оперировать
любым типом чисел, выполняя при необходимости приведения, следующие
функции позволяют явно преобразовывать типы данных.
<div class=defun>
<!--l. 3237--><p class="noindent" ><i>[Function]</i><a 
 id="dx82-183001"></a><a 
 id="x82-183002r214"></a><b> ﬂoat</b>  <i>number</i> &#x0026;optional  <i>other</i>
<!--l. 3239--><p class="noindent" >This converts any non-complex number to a ﬂoating-point number. With no
second argument, if <i>number</i> is already a ﬂoating-point number, then <i>number</i> is
returned; otherwise a <tt>single-float</tt> is produced. If the argument <i>other</i> is
provided, then it must be a ﬂoating-point number, and <i>number</i> is converted to the
same format as <i>other</i>. See also <tt><a 
href="clmse24.html#x33-52002r7">coerce</a></tt>.
<!--l. 3248--><p class="indent" >   Преобразует любое некомплексное число в число с плавающей точкой.
При отсутствии необязательного параметра, если <i>number</i> уже является
числом с плавающей точкой, то оно и будет возвращено, иначе число будет
преобразовано в <tt>single-float</tt>. Если аргумент <i>other</i> указан, тогда он должен
быть числом с плавающей точкой, и <i>number</i> будет сконвертирован в такой же
формат как у <i>other</i>.
<!--l. 3256--><p class="indent" >   Смотрите также <tt><a 
href="clmse24.html#x33-52002r7">coerce</a></tt>.
</div>
<div class=defun>
<!--l. 3259--><p class="noindent" ><i>[Function]</i><a 
 id="dx82-183003"></a><a 
 id="x82-183004r215"></a><b> rational</b>  <i>number</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183005"></a><a 
 id="x82-183006r216"></a><b> rationalize</b>  <i>number</i>
<!--l. 3262--><p class="noindent" >Each of these functions converts any non-complex number to a rational number. If
the argument is already rational, it is returned. The two functions diﬀer in their
treatment of ﬂoating-point numbers.
<!--l. 3267--><p class="indent" >   Каждая из этих функций преобразует любое некомплексное числое в
рациональное. Если аргумент уже является рациональным, он возвращается
                                                                          

                                                                          
как есть. Две функции различаются в том, как они обрабатывают числа с
плавающей точкой.
<tt>
<!--l. 3271--><p class="indent" >   <a 
href="#x82-183004r215">rational</a></tt> assumes that the ﬂoating-point number is completely accurate and
returns a rational number mathematically equal to the precise value of the
ﬂoating-point number.
<tt>
<!--l. 3275--><p class="indent" >   <a 
href="#x82-183004r215">rational</a></tt> предполагает, что число с плавающей точкой совершенно точно,
и возвращает рациональное число математически эквивалентное значию
числа с плавающей точкой.
<tt>
<!--l. 3279--><p class="indent" >   <a 
href="#x82-183006r216">rationalize</a></tt> assumes that the ﬂoating-point number is accurate only to the
precision of the ﬂoating-point representation and may return any rational number
for which the ﬂoating-point number is the best available approximation of its
format; in doing this it attempts to keep both numerator and denominator
small.
<tt>
<!--l. 3286--><p class="indent" >   <a 
href="#x82-183006r216">rationalize</a></tt> предполагает, что число с плавающей точкой приближенное,
и может возвращать любое рациональное число, для которого исходное число
является наилучшим приближением. Функция пытается сохранить числитель
и знаменатель наименьшими насколько это возможно.
<!--l. 3291--><p class="indent" >   It is always the case that <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬂoat (rational <i>x</i>) <i>x</i>) <span class="math"> ≡</span> <i>x</i>
</td></tr></table>
<!--l. 3294--><p class="indent" >
</div>
</div>
<!--l. 3295--><p class="noindent" >and <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬂoat (rationalize <i>x</i>) <i>x</i>) <span class="math"> ≡</span> <i>x</i>
</td></tr></table>
<!--l. 3298--><p class="indent" >
</div>
</div>
                                                                          

                                                                          
<!--l. 3299--><p class="noindent" >That is, rationalizing a ﬂoating-point number by either method and then converting
it back to a ﬂoating-point number of the same format produces the original
number. What distinguishes the two functions is that <tt><a 
href="#x82-183004r215">rational</a></tt> typically has a
simple, inexpensive implementation, whereas <tt><a 
href="#x82-183006r216">rationalize</a></tt> goes to more trouble
to produce a result that is more pleasant to view and simpler to compute with for
some purposes.
<!--l. 3307--><p class="indent" >   Следующие тождества всегда справедливы <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬂoat (rational <i>x</i>) <i>x</i>) <span class="math"> ≡</span> <i>x</i>
</td></tr></table>
<!--l. 3310--><p class="indent" >
</div>
</div>
<!--l. 3311--><p class="noindent" >и <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬂoat (rationalize <i>x</i>) <i>x</i>) <span class="math"> ≡</span> <i>x</i>
</td></tr></table>
<!--l. 3314--><p class="indent" >
</div>
</div>
<!--l. 3315--><p class="noindent" >То есть, преобразование числа с плавающей точкой любым из методов туда и
обратно дает исходное число. Различие в том, что <tt><a 
href="#x82-183004r215">rational</a></tt> обычно имеет
более простую недорогую реализацию, тогда как <tt><a 
href="#x82-183006r216">rationalize</a></tt> представляет
более «красивое» число.
</div>
<div class=defun>
<!--l. 3321--><p class="noindent" ><i>[Function]</i><a 
 id="dx82-183007"></a><a 
 id="x82-183008r217"></a><b> numerator</b>  <i>rational</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183009"></a><a 
 id="x82-183010r218"></a><b> denominator</b>  <i>rational</i>
<!--l. 3324--><p class="noindent" >These functions take a rational number (an integer or ratio) and return as an
integer the numerator or denominator of the canonical reduced form of the
rational. The numerator of an integer is that integer; the denominator of an
integer is <tt>1</tt>. Note that <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd (numerator <i>x</i>) (denominator <i>x</i>)) <span class="math"> ⇒</span> 1
</td></tr></table>
<!--l. 3331--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 3332--><p class="noindent" >The denominator will always be a strictly positive integer; the numerator may be any
integer. For example: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(numerator (/ 8 -6)) <span class="math"> ⇒</span> -4
</td></tr></table>
<!--l. 3336--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(denominator (/ 8 -6)) <span class="math"> ⇒</span> 3</td></tr></table>
<!--l. 3338--><p class="indent" >
</div>
</div>
<!--l. 3340--><p class="indent" >   Эти функции принимают рациональное число (целое или дробное) и
возвращают в качестве целого числа числитель или знаменатель дроби,
приведенное к каноническому виду. Числитель целого числа и является
этим числом. Знаменатель целого числа <tt>1</tt>. Следует отметить, что
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(gcd (numerator <i>x</i>) (denominator <i>x</i>)) <span class="math"> ⇒</span> 1
</td></tr></table>
<!--l. 3346--><p class="indent" >
</div>
</div>
<!--l. 3347--><p class="noindent" >Знаменатель будет всегда строго положительным числом. Числитель может
быть любым целым числом. Например: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(numerator (/ 8 -6)) <span class="math"> ⇒</span> -4
</td></tr></table>
<!--l. 3351--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(denominator (/ 8 -6)) <span class="math"> ⇒</span> 3</td></tr></table>
<!--l. 3353--><p class="indent" >
</div>
</div>
</div>
                                                                          

                                                                          
<!--l. 3356--><p class="indent" >   There is no <tt>fix</tt> function in Common Lisp because there are several interesting
ways to convert non-integral values to integers. These are provided by the
functions below, which perform not only type conversion but also some non-trivial
calculations as well.
<!--l. 3361--><p class="indent" >   В Common Lisp&#x2019;е нет функции <tt>fix</tt>, потому что есть несколько интересных
способов преобразовать нецелое число к целому. Эти способы представлены
функциями ниже, которые выполняются не только преобразование типа, но
также некоторые нетривиальные вычисления.
<div class=defun>
<!--l. 3366--><p class="noindent" ><i>[Function]</i><a 
 id="dx82-183011"></a><a 
 id="x82-183012r219"></a><b> ﬂoor</b>  <i>number</i> &#x0026;optional  <i>divisor</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183013"></a><a 
 id="x82-183014r220"></a><b> ceiling</b>  <i>number</i> &#x0026;optional  <i>divisor</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183015"></a><a 
 id="x82-183016r221"></a><b> truncate</b>  <i>number</i> &#x0026;optional  <i>divisor</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183017"></a><a 
 id="x82-183018r222"></a><b> round</b>  <i>number</i> &#x0026;optional  <i>divisor</i>
<!--l. 3371--><p class="noindent" >In the simple one-argument case, each of these functions converts its argument
<i>number</i> (which must not be complex) to an integer. If the argument is already an
integer, it is returned directly. If the argument is a ratio or ﬂoating-point number,
the functions use diﬀerent algorithms for the conversion.
<!--l. 3379--><p class="indent" >   При вызове с одним аргументом, каждая из этих функций преобразует
аргумент <i>number</i> (который не может быть комплексным числом) в целое
число. Если аргумент уже является целым числом, то он немедленно
возвращается в качестве результата. Если аргумент дробь или число с
плавающей точкой, для конвертации функции используют различные
алгоритмы.
<tt>
<!--l. 3386--><p class="indent" >   <a 
href="#x82-183012r219">floor</a></tt> converts its argument by truncating toward negative inﬁnity; that is,
the result is the largest integer that is not larger than the argument.
<tt>
<!--l. 3390--><p class="indent" >   <a 
href="#x82-183012r219">floor</a></tt> преобразовывает аргумент путем отсечения к отрицательной
бесконечности, то есть, результатом является наибольшее целое число,
которое не больше чем аргумент.
<tt>
<!--l. 3394--><p class="indent" >   <a 
href="#x82-183014r220">ceiling</a></tt> converts its argument by truncating toward positive inﬁnity; that is,
the result is the smallest integer that is not smaller than the argument.
<tt>
<!--l. 3398--><p class="indent" >   <a 
href="#x82-183014r220">ceiling</a></tt> преобразовывает аргумент путем отсечения к положительной
бесконечности, то есть, результатом является наименьшее целое число,
которое не меньше чем аргумент.
<tt>
                                                                          

                                                                          
<!--l. 3402--><p class="indent" >   <a 
href="#x82-183016r221">truncate</a></tt> converts its argument by truncating toward zero; that is, the result
is the integer of the same sign as the argument and which has the greatest integral
magnitude not greater than that of the argument.
<tt>
<!--l. 3407--><p class="indent" >   <a 
href="#x82-183014r220">ceiling</a></tt> преобразовывает аргумент путем отсечения к нулю, то есть,
результатом является целое число с таким же знаком, которое имеет
наибольшую целую величину, но не большую чем аргумент.
<tt>
<!--l. 3411--><p class="indent" >   <a 
href="#x82-183018r222">round</a></tt> converts its argument by rounding to the nearest integer; if <i>number</i> is
exactly halfway between two integers (that is, of the form <span class="math">integer + 0.5</span>), then it is
rounded to the one that is even (divisible by 2).
<tt>
<!--l. 3416--><p class="indent" >   <a 
href="#x82-183018r222">round</a></tt> преобразовывает аргумент округлением к ближайшему целому
числу. Если <i>number</i> находится между двумя целыми (то есть <span class="math">integer + 0.5</span>),
тогда он округляется к ближайщему чётному числу.
<!--l. 3420--><p class="indent" >   The following table shows what the four functions produce when given various
arguments.
<div class="flushleft" 
>
<!--l. 3423--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >Argument</td><td align="left" >ﬂoor</td><td align="left" >ceiling</td><td align="left" >truncate</td><td align="left" >round</td>
</tr><tr><td align="left" >     2.6    </td><td align="left" >  2 </td><td align="left" >    3   </td><td align="left" >     2    </td><td align="left" >   3  </td></tr><tr><td align="left" >  2.5 </td> <td align="left" >  2 </td> <td align="left" >  3 </td> <td align="left" >  2 </td> <td align="left" >  2</td>
</tr><tr><td align="left" >     2.4    </td><td align="left" >  2 </td><td align="left" >    3   </td><td align="left" >     2    </td><td align="left" >   2  </td></tr><tr><td align="left" >  0.7 </td> <td align="left" >  0 </td> <td align="left" >  1 </td> <td align="left" >  0 </td> <td align="left" >  1</td>
</tr><tr><td align="left" >     0.3    </td><td align="left" >  0 </td><td align="left" >    1   </td><td align="left" >     0    </td><td align="left" >   0  </td></tr><tr><td align="left" > -0.3 </td> <td align="left" > -1 </td> <td align="left" >  0 </td> <td align="left" >  0 </td> <td align="left" >  0</td>
</tr><tr><td align="left" >    -0.7    </td><td align="left" >  -1  </td><td align="left" >    0   </td><td align="left" >     0    </td><td align="left" >   -1   </td></tr><tr><td align="left" > -2.4 </td> <td align="left" > -3 </td> <td align="left" > -2 </td> <td align="left" > -2 </td> <td align="left" > -2</td>
</tr><tr><td align="left" >    -2.5    </td><td align="left" >  -3  </td><td align="left" >   -2   </td><td align="left" >    -2    </td><td align="left" >   -2   </td></tr><tr><td align="left" > -2.6 </td> <td align="left" > -3 </td> <td align="left" > -2 </td> <td align="left" > -2 </td> <td align="left" > -3</td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr><td align="left" > </td></tr></table>
</div></div>
<!--l. 3442--><p class="indent" >   Следующая таблица содержит то, что возвращают четыре функции для
разных аргументов.
<div class="flushleft" 
>
<!--l. 3444--><p class="noindent" >
 <!--tex4ht:inline--><div class="tabular"><table width="100%"><tr><td align="left" >Аргумент</td><td align="left" >ﬂoor</td><td align="left" >ceiling</td><td align="left" >truncate</td><td align="left" >round</td>
</tr><tr><td align="left" >     2.6    </td><td align="left" >  2 </td><td align="left" >    3   </td><td align="left" >     2    </td><td align="left" >   3  </td></tr><tr><td align="left" >  2.5 </td> <td align="left" >  2 </td> <td align="left" >  3 </td> <td align="left" >  2 </td> <td align="left" >  2</td>
</tr><tr><td align="left" >     2.4    </td><td align="left" >  2 </td><td align="left" >    3   </td><td align="left" >     2    </td><td align="left" >   2  </td></tr><tr><td align="left" >  0.7 </td> <td align="left" >  0 </td> <td align="left" >  1 </td> <td align="left" >  0 </td> <td align="left" >  1</td>
</tr><tr><td align="left" >     0.3    </td><td align="left" >  0 </td><td align="left" >    1   </td><td align="left" >     0    </td><td align="left" >   0  </td></tr><tr><td align="left" > -0.3 </td> <td align="left" > -1 </td> <td align="left" >  0 </td> <td align="left" >  0 </td> <td align="left" >  0</td>
</tr><tr><td align="left" >    -0.7    </td><td align="left" >  -1  </td><td align="left" >    0   </td><td align="left" >     0    </td><td align="left" >   -1   </td></tr><tr><td align="left" > -2.4 </td> <td align="left" > -3 </td> <td align="left" > -2 </td> <td align="left" > -2 </td> <td align="left" > -2</td>
</tr><tr><td align="left" >    -2.5    </td><td align="left" >  -3  </td><td align="left" >   -2   </td><td align="left" >    -2    </td><td align="left" >   -2   </td></tr><tr><td align="left" > -2.6 </td> <td align="left" > -3 </td> <td align="left" > -2 </td> <td align="left" > -2 </td> <td align="left" > -3</td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr><td align="left" > </td></tr></table>
</div></div>
                                                                          

                                                                          
<!--l. 3463--><p class="indent" >   If a second argument <i>divisor</i> is supplied, then the result is the appropriate
type of rounding or truncation applied to the result of dividing the <i>number</i> by the
<i>divisor</i>. For example, <tt>(floor 5 2)</tt> <span class="math"> ≡</span> <tt>(floor (/ 5 2))</tt> but is potentially more
eﬃcient. <div class=new>This statement is not entirely accurate; one should instead say that
<tt>(values (floor 5 2))</tt> <span class="math"> ≡</span> <tt>(values (floor (/ 5 2)))</tt>, because there is a
second value to consider, as discussed below. In other words, the ﬁrst values
returned by the two forms will be the same, but in general the second values will
diﬀer. Indeed, we have <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬂoor 5 2) <span class="math"> ⇒</span> 2 and 1
</td></tr></table>
<!--l. 3475--><p class="indent" >                                              <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬂoor (/ 5 2)) <span class="math"> ⇒</span> 2 and 1/2</td></tr></table>
<!--l. 3477--><p class="indent" >
</div>
</div>
<!--l. 3478--><p class="noindent" >for this example.
</div> The <i>divisor</i> may be any non-complex number. <div class=new>It is generally accepted that it is
an error for the <i>divisor</i> to be zero.
</div> The one-argument case is exactly like the two-argument case where the second
argument is <tt>1</tt>.
<!--l. 3487--><p class="indent" >   Если указан второй аргумент <i>divisor</i>, тогда аргумент <i>number</i> будет
разделен на <i>divisor</i>, а затем уже будут проведены вышеописанные действия.
Например, <tt>(floor 5 2)</tt> <span class="math"> ≡</span> <tt>(values (floor (/ 5 2)))</tt>, но первый
вариант потенциально эффективнее. <i>divisor</i> может любым числом, кроме
комплексного. <i>divisor</i> не может равняться нулю. Случай вызова функции с
одним аргументом эквивалентен вызову с двумя аргументами, последний из
которых равен <tt>1</tt>.
<div class=newer>
<!--l. 3497--><p class="indent" >   In other words, the one-argument case returns an integer and fractional part
for the <i>number</i>: <tt>(truncate 5.3) <span class="math"> ⇒</span> 5.0 and  0.3</tt>, for example.
</div> Each of the functions actually returns <i>two</i> values, whether given one or two
arguments. The second result is the remainder and may be obtained using
<tt><a 
href="clmse42.html#x54-133002r111">multiple-value-bind</a></tt> and related constructs. If any of these functions is given
two arguments <span class="math"><i>x</i></span> and <span class="math"><i>y</i></span> and produces results <span class="math"><i>q</i></span> and <span class="math"><i>r</i></span>, then <span class="math"><i>q</i> ⋅<i>y</i> + <i>r</i> = <i>x</i></span>. The
ﬁrst result <span class="math"><i>q</i></span> is always an integer. The remainder <span class="math"><i>r</i></span> is an integer if both
arguments are integers, is rational if both arguments are rational, and is
ﬂoating-point if either argument is ﬂoating-point. One consequence is that in the
                                                                          

                                                                          
one-argument case the remainder is always a number of the same type as the
argument.
<!--l. 3514--><p class="indent" >   When only one argument is given, the two results are exact; the mathematical
sum of the two results is always equal to the mathematical value of the
argument.
<!--l. 3518--><p class="indent" >   Каждая из функций возвращает <i>два</i> значения. Второе значение является
остатком и может быть получено с помощью <tt><a 
href="clmse42.html#x54-133002r111">multiple-value-bind</a></tt> или
другими подобными конструкциями. Если любая из этих функций получает
два аргумента <i>x</i> и <i>y</i> и возвращает <i>q</i> и <i>r</i>, тогда <span class="math"><i>q</i> ⋅<i>y</i> + <i>r</i> = <i>x</i></span>. Первое
значение результата <i>q</i> всегда целочисленное. Остаток <i>r</i> целочисленно,
если оба аргумента были целочисленными, и рациональное, если оба
аргумента были рациональными, и с плавающей точкой, если один из
аргументов был с плавающей точкой. Если при вызове был указан
один аргумент, то тип данных остатка всегда такой же как и этот
аргумент.
<!--l. 3531--><p class="indent" >   Когда указывается только один аргумент, сумма двух значений
результата точно равняется переданному в параметре значению.
</div>
<div class=defun>
<!--l. 3535--><p class="noindent" ><i>[Function]</i><a 
 id="dx82-183019"></a><a 
 id="x82-183020r223"></a><b> mod</b>  <i>number</i> <i>divisor</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183021"></a><a 
 id="x82-183022r224"></a><b> rem</b>  <i>number</i> <i>divisor</i>
<!--l. 3538--><p class="noindent" ><tt><a 
href="#x82-183020r223">mod</a></tt> performs the operation <tt><a 
href="#x82-183012r219">floor</a></tt> on its two arguments and returns the <i>second</i>
result of <tt><a 
href="#x82-183012r219">floor</a></tt> as its only result. Similarly, <tt><a 
href="#x82-183022r224">rem</a></tt> performs the operation <tt><a 
href="#x82-183016r221">truncate</a></tt>
on its arguments and returns the <i>second</i> result of <tt><a 
href="#x82-183016r221">truncate</a></tt> as its only
result.
<tt>
<!--l. 3545--><p class="indent" >   <a 
href="#x82-183020r223">mod</a></tt> выполняет операцию <tt><a 
href="#x82-183012r219">floor</a></tt> для двух аргументов и возвращает <i>второй</i>
результат <tt><a 
href="#x82-183012r219">floor</a></tt>. Таким же образом, <tt><a 
href="#x82-183022r224">rem</a></tt> выполняет операцию <tt><a 
href="#x82-183016r221">truncate</a></tt> для
двух аргументов и возвращает <i>второй</i> результат <tt><a 
href="#x82-183016r221">truncate</a></tt>.
<tt>
<!--l. 3550--><p class="indent" >   <a 
href="#x82-183020r223">mod</a></tt> and <tt><a 
href="#x82-183022r224">rem</a></tt> are therefore the usual modulus and remainder functions when
applied to two integer arguments. In general, however, the arguments may be
integers or ﬂoating-point numbers. <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod 13 4) <span class="math"> ⇒</span> 1                           </td><td  
class="tabbing">(rem 13 4) <span class="math"> ⇒</span> 1
</td></tr></table>
<!--l. 3556--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod -13 4) <span class="math"> ⇒</span> 3                          </td><td  
class="tabbing">(rem -13 4) <span class="math"> ⇒</span> -1</td></tr></table>
                                                                          

                                                                          
<!--l. 3557--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod 13 -4) <span class="math"> ⇒</span> -3                         </td><td  
class="tabbing">(rem 13 -4) <span class="math"> ⇒</span> 1</td></tr></table>
<!--l. 3558--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod -13 -4) <span class="math"> ⇒</span> -1                        </td><td  
class="tabbing">(rem -13 -4) <span class="math"> ⇒</span> -1</td></tr></table>
<!--l. 3559--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod 13.4 1) <span class="math"> ⇒</span> 0.4                       </td><td  
class="tabbing">(rem 13.4 1) <span class="math"> ⇒</span> 0.4</td></tr></table>
<!--l. 3560--><p class="indent" >                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod -13.4 1) <span class="math"> ⇒</span> 0.6                      </td><td  
class="tabbing">(rem -13.4 1) <span class="math"> ⇒</span> -0.4</td></tr></table>
<!--l. 3562--><p class="indent" >
</div>
</div>
<!--l. 3564--><p class="indent" >   Таким образом <tt><a 
href="#x82-183020r223">mod</a></tt> и <tt><a 
href="#x82-183022r224">rem</a></tt> являются обычными функциями вычисления
остатка от деления двух чисел. Аргументы могут быть также числами с
плавающей точкой. <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod 13 4) <span class="math"> ⇒</span> 1                           </td><td  
class="tabbing">(rem 13 4) <span class="math"> ⇒</span> 1
</td></tr></table>
<!--l. 3569--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod -13 4) <span class="math"> ⇒</span> 3                          </td><td  
class="tabbing">(rem -13 4) <span class="math"> ⇒</span> -1</td></tr></table>
<!--l. 3570--><p class="indent" >                    <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod 13 -4) <span class="math"> ⇒</span> -3                         </td><td  
class="tabbing">(rem 13 -4) <span class="math"> ⇒</span> 1</td></tr></table>
<!--l. 3571--><p class="indent" >                   <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod -13 -4) <span class="math"> ⇒</span> -1                        </td><td  
class="tabbing">(rem -13 -4) <span class="math"> ⇒</span> -1</td></tr></table>
<!--l. 3572--><p class="indent" >                 <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod 13.4 1) <span class="math"> ⇒</span> 0.4                       </td><td  
class="tabbing">(rem 13.4 1) <span class="math"> ⇒</span> 0.4</td></tr></table>
<!--l. 3573--><p class="indent" >                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:292;" 
class="tabbing">(mod -13.4 1) <span class="math"> ⇒</span> 0.6                      </td><td  
class="tabbing">(rem -13.4 1) <span class="math"> ⇒</span> -0.4</td></tr></table>
<!--l. 3575--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 3578--><p class="noindent" ><i>[Function]</i><a 
 id="dx82-183023"></a><a 
 id="x82-183024r225"></a><b> ﬄoor</b>  <i>number</i> &#x0026;optional  <i>divisor</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183025"></a><a 
 id="x82-183026r226"></a><b> fceiling</b>  <i>number</i> &#x0026;optional  <i>divisor</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183027"></a><a 
 id="x82-183028r227"></a><b> ftruncate</b>  <i>number</i> &#x0026;optional  <i>divisor</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183029"></a><a 
 id="x82-183030r228"></a><b> fround</b>  <i>number</i> &#x0026;optional  <i>divisor</i>
<!--l. 3583--><p class="noindent" >These functions are just like <tt><a 
href="#x82-183012r219">floor</a></tt>, <tt><a 
href="#x82-183014r220">ceiling</a></tt>, <tt><a 
href="#x82-183016r221">truncate</a></tt>, and <tt><a 
href="#x82-183018r222">round</a></tt>, except
that the result (the ﬁrst result of two) is always a ﬂoating-point number
rather than an integer. It is roughly as if <tt><a 
href="#x82-183024r225">ffloor</a></tt> gave its arguments to
<tt><a 
href="#x82-183012r219">floor</a></tt>, and then applied <tt><a 
href="#x82-183002r214">float</a></tt> to the ﬁrst result before passing them
both back. In practice, however, <tt><a 
href="#x82-183024r225">ffloor</a></tt> may be implemented much more
eﬃciently. Similar remarks apply to the other three functions. If the ﬁrst
argument is a ﬂoating-point number, and the second argument is not a
ﬂoating-point number of longer format, then the ﬁrst result will be a
ﬂoating-point number of the same type as the ﬁrst argument. For example:
<div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬄoor -4.7) <span class="math"> ⇒</span> -5.0 and 0.3
</td></tr></table>
<!--l. 3596--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬄoor 3.5d0) <span class="math"> ⇒</span> 3.0d0 and 0.5d0</td></tr></table>
<!--l. 3598--><p class="indent" >
</div>
</div>
<!--l. 3600--><p class="indent" >   Эти функции похожи на <tt><a 
href="#x82-183012r219">floor</a></tt>, <tt><a 
href="#x82-183014r220">ceiling</a></tt>, <tt><a 
href="#x82-183016r221">truncate</a></tt> и <tt><a 
href="#x82-183018r222">round</a></tt> за
исключением того, что результат (первый из двух) всегда целое число, а не
число с плавающей точкой. Это примерно, как если бы <tt>ffoor</tt> передала
аругменты в <tt><a 
href="#x82-183012r219">floor</a></tt>, а затем применила к первому результату <tt><a 
href="#x82-183002r214">float</a></tt> и
вернула полученную пару значений. Однако, на практике <tt><a 
href="#x82-183024r225">ffloor</a></tt> может
быть реализована более эффективно. Такое же описание подходит к
остальным трем функциям. Если первый аргумент является числом с
плавающей точкой, и второй аргумент не точнее типа первого, тогда первый
результат будет такого же типа как первый аргумент. Например:
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬄoor -4.7) <span class="math"> ⇒</span> -5.0 and 0.3
</td></tr></table>
<!--l. 3611--><p class="indent" >                                         <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(ﬄoor 3.5d0) <span class="math"> ⇒</span> 3.0d0 and 0.5d0</td></tr></table>
<!--l. 3613--><p class="indent" >
</div>
</div>
</div>
<div class=defun>
<!--l. 3616--><p class="noindent" ><i>[Function]</i><a 
 id="dx82-183031"></a><a 
 id="x82-183032r229"></a><b> decode-ﬂoat</b>  <i>ﬂoat</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183033"></a><a 
 id="x82-183034r230"></a><b> scale-ﬂoat</b>  <i>ﬂoat</i> <i>integer</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183035"></a><a 
 id="x82-183036r231"></a><b> ﬂoat-radix</b>  <i>ﬂoat</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183037"></a><a 
 id="x82-183038r232"></a><b> ﬂoat-sign</b>  <i>ﬂoat1</i> &#x0026;optional  <i>ﬂoat2</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183039"></a><a 
 id="x82-183040r233"></a><b> ﬂoat-digits</b>  <i>ﬂoat</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183041"></a><a 
 id="x82-183042r234"></a><b> ﬂoat-precision</b>  <i>ﬂoat</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183043"></a><a 
 id="x82-183044r235"></a><b> integer-decode-ﬂoat</b>  <i>ﬂoat</i>
<!--l. 3624--><p class="noindent" >The function <tt><a 
href="#x82-183032r229">decode-float</a></tt> takes a ﬂoating-point number and returns three
values.
                                                                          

                                                                          
<!--l. 3628--><p class="indent" >   Функция <tt><a 
href="#x82-183032r229">decode-float</a></tt> принимает числа с плавающей точкой и
возвращает три значения.
<!--l. 3631--><p class="indent" >   The ﬁrst value is a new ﬂoating-point number of the same format representing
the signiﬁcand; the second value is an integer representing the exponent; and the
third value is a ﬂoating-point number of the same format indicating the sign
(<span class="math"> − 1.0</span> or <span class="math">1.0</span>). Let <i>b</i> be the radix for the ﬂoating-point representation; then
<tt><a 
href="#x82-183032r229">decode-float</a></tt> divides the argument by an integral power of <i>b</i> so as to bring its
value between 1/<i>b</i> (inclusive) and 1 (exclusive) and returns the quotient as the
ﬁrst value. If the argument is zero, however, the result is equal to the absolute
value of the argument (that is, if there is a negative zero, its signiﬁcand is
considered to be a positive zero).
<!--l. 3643--><p class="indent" >   Первое значение является манитиссой и числом того же типа, что и
аргумент. Второе значение является целочисленной экспонентой. Третье
значение отображает знак аргумента (-1.0 или 1.0) и является и числом того
же типа, что и аргумент . Пусть <i>b</i> есть система счисления для отображения
чисел с плавающей точкой, тогда <tt><a 
href="#x82-183032r229">decode-float</a></tt> делит аргумент на <i>b</i> в
некоторой степени, чтобы привести значение в промежуток включая 1/<i>b</i> и
невключая 1 и возвращает частное в качестве первого значения FIXME.
Однако, если аргумент равен нулю результат равен абсолютному значению
аргумента (то есть, если существует отрицательный ноль, то для него
возвращается положительный ноль).
<!--l. 3654--><p class="indent" >   The second value of <tt><a 
href="#x82-183032r229">decode-float</a></tt> is the integer exponent <i>e</i> to which <i>b</i> must
be raised to produce the appropriate power for the division. If the argument is
zero, any integer value may be returned, provided that the identity shown below
for <tt><a 
href="#x82-183034r230">scale-float</a></tt> holds.
<!--l. 3660--><p class="indent" >   Второе значение <tt><a 
href="#x82-183032r229">decode-float</a></tt> является целочисленным экспонентой <i>e</i>,
которая равняется степени, в которую было возведено <i>b</i>. Если аргумент
равен нулю, то может быть возвращено любое целое число, при условии, что
тожество, описанное ниже для <tt>scale-format</tt>, имеет место быть.
<!--l. 3665--><p class="indent" >   The third value of <tt><a 
href="#x82-183032r229">decode-float</a></tt> is a ﬂoating-point number, of the same
format as the argument, whose absolute value is 1 and whose sign matches that of
the argument.
<!--l. 3669--><p class="indent" >   Третье значение <tt><a 
href="#x82-183032r229">decode-float</a></tt> является числом с плавающей точкой в
том же формате, что и аргумент, абсолютное значение которого равно 1, и
знак совпадает со знаком аргумента.
<!--l. 3673--><p class="indent" >   The function <tt><a 
href="#x82-183034r230">scale-float</a></tt> takes a ﬂoating-point number <i>f </i> (not necessarily
between 1/<i>b</i> and 1) and an integer <i>k</i>, and returns <tt>(* <i>f</i> (expt (float <i>b</i> <i>f</i>)
<i>k</i>))</tt>. (The use of <tt><a 
href="#x82-183034r230">scale-float</a></tt> may be much more eﬃcient than using
                                                                          

                                                                          
exponentiation and multiplication and avoids intermediate overﬂow and underﬂow
if the ﬁnal result is representable.)
<!--l. 3680--><p class="indent" >   Функция <tt><a 
href="#x82-183034r230">scale-float</a></tt> принимает число с плавающей точкой <i>f </i> (не
обязательно между 1/<i>b</i> и 1) и целое число <i>k</i>, и возвращает <tt>(* <i>f</i> (expt
(float <i>b</i> <i>f</i>) <i>k</i>))</tt>. (Использование <tt><a 
href="#x82-183034r230">scale-float</a></tt> может быть более
эффективным, чем использование возведения в степень или умножения и
позволяет избежать переполнений).
<!--l. 3686--><p class="indent" >   Note that <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(multiple-value-bind (signif expon sign)
</td></tr></table>
<!--l. 3688--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                     (decode-ﬂoat <i>f </i>)</td></tr></table>
<!--l. 3689--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (scale-ﬂoat signif expon))</td></tr></table>
<!--l. 3690--><p class="indent" >                                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><span class="math"> ≡</span> (abs <i>f </i>)</td></tr></table>
<!--l. 3692--><p class="indent" >
</div>
</div>
<!--l. 3693--><p class="noindent" >and <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(multiple-value-bind (signif expon sign)
</td></tr></table>
<!--l. 3695--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                     (decode-ﬂoat <i>f </i>)</td></tr></table>
<!--l. 3696--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (* (scale-ﬂoat signif expon) sign))</td></tr></table>
<!--l. 3697--><p class="indent" >                                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><span class="math"> ≡</span> <i>f </i></td></tr></table>
<!--l. 3699--><p class="indent" >
</div>
</div>
<!--l. 3701--><p class="indent" >   Следует отметить, что <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(multiple-value-bind (signif expon sign)
</td></tr></table>
<!--l. 3703--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                     (decode-ﬂoat <i>f </i>)</td></tr></table>
<!--l. 3704--><p class="indent" >                                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (scale-ﬂoat signif expon))</td></tr></table>
<!--l. 3705--><p class="indent" >                                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><span class="math"> ≡</span> (abs <i>f </i>)</td></tr></table>
<!--l. 3707--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 3708--><p class="noindent" >и <div class=lisp> <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(multiple-value-bind (signif expon sign)
</td></tr></table>
<!--l. 3710--><p class="indent" >                                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                     (decode-ﬂoat <i>f </i>)</td></tr></table>
<!--l. 3711--><p class="indent" >                                       <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (* (scale-ﬂoat signif expon) sign))</td></tr></table>
<!--l. 3712--><p class="indent" >                                                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><span class="math"> ≡</span> <i>f </i></td></tr></table>
<!--l. 3714--><p class="indent" >
</div>
</div>
<!--l. 3716--><p class="indent" >   The function <tt><a 
href="#x82-183036r231">float-radix</a></tt> returns (as an integer) the radix <i>b</i> of the
ﬂoating-point argument.
<!--l. 3719--><p class="indent" >   Функция <tt><a 
href="#x82-183036r231">float-radix</a></tt> возвращает (в качестве целого числа) основание <i>b</i>
для числа с плавающей точкой.
<!--l. 3722--><p class="indent" >   The function <tt><a 
href="#x82-183038r232">float-sign</a></tt> returns a ﬂoating-point number <i>z</i> such that <i>z</i> and
<i>ﬂoat1</i> have the same sign and also such that <i>z</i> and <i>ﬂoat2</i> have the same absolute
value. The argument <i>ﬂoat2</i> defaults to the value of <tt>(float 1 <i>float1</i>)</tt>;
<tt>(float-sign x)</tt> therefore always produces a <tt>1.0</tt> or <tt>-1.0</tt> of appropriate format
according to the sign of <tt>x</tt>. (Note that if an implementation has distinct
representations for negative zero and positive zero, then <tt>(float-sign -0.0)</tt>
<span class="math"> ⇒</span> <tt>-1.0</tt>.)
<!--l. 3732--><p class="indent" >   Функция <tt><a 
href="#x82-183038r232">float-sign</a></tt> возвращает такое число с плавающей точкой <i>z</i>,
что <i>z</i> и <i>ﬂoat1</i> имеют одинаковый знак, и <i>z</i> и <i>ﬂoat2</i> имеют равное
абсолютное значение. Аргумент <i>ﬂoat2</i> по-умолчанию имеет значение <tt>(float
1 <i>float1</i>)</tt>. Таким образом <tt>(float-sign x)</tt> всегда возвращает <tt>1.0</tt>
или <tt>-1.0</tt> в таком же формате и с тем же знаком, что и <i>x</i>. (Следует
отметить, что если реализация содержит различные представления для
отрицательного и положительного нулей, тогда <tt>(float-sign -0.0)</tt>
<span class="math"> ⇒</span> <tt>-1.0</tt>.)
<!--l. 3741--><p class="indent" >   The function <tt><a 
href="#x82-183040r233">float-digits</a></tt> returns, as a non-negative integer, the number of
radix-<i>b</i> digits used in the representation of its argument (including any implicit
digits, such as a “hidden bit”). The function <tt><a 
href="#x82-183042r234">float-precision</a></tt> returns, as a
non-negative integer, the number of signiﬁcant radix-<i>b</i> digits present in the
argument; if the argument is (a ﬂoating-point) zero, then the result is
                                                                          

                                                                          
(an integer) zero. For normalized ﬂoating-point numbers, the results of
<tt><a 
href="#x82-183040r233">float-digits</a></tt> and <tt><a 
href="#x82-183042r234">float-precision</a></tt> will be the same, but the precision will be
less than the number of representation digits for a denormalized or zero
number.
<!--l. 3755--><p class="indent" >   Функция <tt><a 
href="#x82-183040r233">float-digits</a></tt> возвращает целочисленное количество цифр
используемых в представлении аргумента. Функция <tt><a 
href="#x82-183042r234">float-precision</a></tt>
возвращает целочисленное количество цифр в мантиссе аргумента.
Если аргумент равен нулю, то результатом также будет ноль. Для
нормализованных чисел с плавающей точкой, результаты <tt><a 
href="#x82-183040r233">float-digits</a></tt> и
<tt><a 
href="#x82-183042r234">float-precision</a></tt> будут такими же. Но в случае с ненормализованными
числами или нулём точность будет меньше чем количество цифр в
представлении.
<!--l. 3763--><p class="indent" >   The function <tt><a 
href="#x82-183044r235">integer-decode-float</a></tt> is similar to <tt><a 
href="#x82-183032r229">decode-float</a></tt> but
for its ﬁrst value returns, as an <tt>integer</tt>, the signiﬁcand scaled so as to
be an integer. For an argument <i>f </i>, this integer will be strictly less than
<div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><tt>(expt <i>b</i> (float-precision <i>f</i>))</tt>
</td></tr></table>
<!--l. 3769--><p class="indent" >
</div>
</div>
<!--l. 3770--><p class="noindent" >but no less than <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><tt>(expt <i>b</i> (- (float-precision <i>f</i>) 1))</tt>
</td></tr></table>
<!--l. 3773--><p class="indent" >
</div>
</div>
<!--l. 3774--><p class="noindent" >except that if <i>f </i> is zero, then the integer value will be zero.
<!--l. 3776--><p class="indent" >   Функция <tt><a 
href="#x82-183044r235">integer-decode-float</a></tt> похожа на <tt><a 
href="#x82-183032r229">decode-float</a></tt>, но в качестве
первого значение возвращает смасштабированную целочисленную мантиссу.
Для аргумента <i>f </i>, это число будет строго меньше чем <div class=lisp><div class=tabbing>
                                                                          

                                                                          
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><tt>(expt <i>b</i> (float-precision <i>f</i>))</tt>
</td></tr></table>
<!--l. 3781--><p class="indent" >
</div>
</div>
<!--l. 3782--><p class="noindent" >на не менее чем <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><tt>(expt <i>b</i> (- (float-precision <i>f</i>) 1))</tt>
</td></tr></table>
<!--l. 3785--><p class="indent" >
</div>
</div>
<!--l. 3786--><p class="noindent" >за исключением того, что если <i>f </i> равно нулю, тогда целочисленное значение
также будет равно нулю.
<!--l. 3789--><p class="indent" >   The second value bears the same relationship to the ﬁrst value as for
<tt><a 
href="#x82-183032r229">decode-float</a></tt>: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(multiple-value-bind (signif expon sign)
</td></tr></table>
<!--l. 3792--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                     (integer-decode-ﬂoat <i>f </i>)</td></tr></table>
<!--l. 3793--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (scale-ﬂoat (ﬂoat signif <i>f </i>) expon))</td></tr></table>
<!--l. 3794--><p class="indent" >                                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><span class="math"> ≡</span> (abs <i>f </i>)</td></tr></table>
<!--l. 3796--><p class="indent" >
</div>
</div>
<!--l. 3798--><p class="indent" >   Второе значение имеет такую же связь с первым значением, как и для
<tt><a 
href="#x82-183032r229">decode-float</a></tt>: <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(multiple-value-bind (signif expon sign)
</td></tr></table>
<!--l. 3801--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">                     (integer-decode-ﬂoat <i>f </i>)</td></tr></table>
<!--l. 3802--><p class="indent" >                                      <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">  (scale-ﬂoat (ﬂoat signif <i>f </i>) expon))</td></tr></table>
<!--l. 3803--><p class="indent" >                                                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><span class="math"> ≡</span> (abs <i>f </i>)</td></tr></table>
<!--l. 3805--><p class="indent" >
                                                                          

                                                                          
</div>
</div>
<!--l. 3807--><p class="indent" >   The third value of <tt><a 
href="#x82-183044r235">integer-decode-float</a></tt> will be <tt>1</tt> or <tt>-1</tt>.
<!--l. 3809--><p class="indent" >   Третье зачение <tt><a 
href="#x82-183044r235">integer-decode-float</a></tt> будет <tt>1</tt> или <tt>-1</tt>.
<div class=rationale>
<!--l. 3812--><p class="noindent" ><b>Обоснование:</b> These functions allow the writing of machine-independent, or at least
machine-parameterized, ﬂoating-point software of reasonable eﬃciency.
<!--l. 3817--><p class="indent" >   Эти функции позволяют писать машиннонезависиммые или как минимум
машиннопараметризированные приложения с вычислениями чисел с плавающими
точками с необходимой эффективностью.
</div>
</div>
<div class=defun>
<!--l. 3824--><p class="noindent" ><i>[Function]</i><a 
 id="dx82-183045"></a><a 
 id="x82-183046r236"></a><b> complex</b>  <i>realpart</i> &#x0026;optional  <i>imagpart</i>
<!--l. 3826--><p class="noindent" >The arguments must be non-complex numbers; a number is returned that has
<i>realpart</i> as its real part and <i>imagpart</i> as its imaginary part, possibly converted
according to the rule of ﬂoating-point contagion (thus both components will be of
the same type). If <i>imagpart</i> is not speciﬁed, then <tt>(coerce 0 (type-of
<i>realpart</i>))</tt> is eﬀectively used. Note that if both the <i>realpart</i> and <i>imagpart</i> are
rational and the <i>imagpart</i> is zero, then the result is just the <i>realpart</i> because of
the rule of canonical representation for complex rationals. It follows that the
result of <tt><a 
href="#x82-183046r236">complex</a></tt> is not always a complex number; it may be simply a
<tt><a 
href="#x82-183004r215">rational</a></tt>.
<!--l. 3839--><p class="indent" >   Аргументы должны быть некомплексными числами. Результатом
является число, которое имеет действительную часть <i>realpart</i> и мнимую
<i>imagpart</i>, возможно конвертированные к одному типу. Если <i>imagpart</i> не
указаны, тогда используется <tt>(coerce 0 (type-of <i>realpart</i>))</tt>. Необходимо
отметить, что если обе части комплексного число рациональны, и мнимая
часть равна нуля, то результатом будет только действительная часть <i>realpart</i>
так как в силу вступят правила канонизации. Таким образом результат
<tt><a 
href="#x82-183046r236">complex</a></tt> не всегда является комплексным числом. Он может быть просто
рациональным числом (<tt><a 
href="#x82-183004r215">rational</a></tt>).
</div>
<div class=defun>
<!--l. 3851--><p class="noindent" ><i>[Function]</i><a 
 id="dx82-183047"></a><a 
 id="x82-183048r237"></a><b> realpart</b>  <i>number</i><br 
class="newline" /><i>[Function]</i><a 
 id="dx82-183049"></a><a 
 id="x82-183050r238"></a><b> imagpart</b>  <i>number</i>
<!--l. 3854--><p class="noindent" >These return the real and imaginary parts of a complex number. If <i>number</i> is a
non-complex number, then <tt><a 
href="#x82-183048r237">realpart</a></tt> returns its argument <i>number</i> and <tt><a 
href="#x82-183050r238">imagpart</a></tt>
                                                                          

                                                                          
returns <tt>(* 0 <i>number</i>)</tt>, which has the eﬀect that the imaginary part of a rational
is <tt>0</tt> and that of a ﬂoating-point number is a ﬂoating-point zero of the same
format.
<!--l. 3862--><p class="indent" >   Эти функции возвращают действительную и мнимую части комплексного
числа. Если <i>number</i> не является комплексным числом, тогда <tt><a 
href="#x82-183048r237">realpart</a></tt>
возвращает это число, а <tt><a 
href="#x82-183050r238">imagpart</a></tt> возвращает <tt>(* 0 <i>number</i>)</tt>, другими
словами, <tt>0</tt> того типа, каким был аргумент.
<div class=newer>
<!--l. 3868--><p class="indent" >   A clever way to multiply a complex number <i>z</i> by <i>i</i> is to write <div class=lisp><div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">(complex (- (imagpart <i>z</i>)) (realpart <i>z</i>))
</td></tr></table>
<!--l. 3871--><p class="indent" >
</div>
</div>
<!--l. 3872--><p class="noindent" >instead of <tt>(* <i>z</i> #c(0 1))</tt>. This cleverness is not always gratuitous; it may be of
particular importance in the presence of minus zero. For example, if we are using
IEEE standard ﬂoating-point arithmetic and <span class="math">z = 4 + 0<i>i</i></span>, the result of the clever
expression is <span class="math"> − 0 + 4<i>i</i></span>, a true <span class="math">90<sup>∘</sup></span> rotation of <span class="math"><i>z</i></span>, whereas the result of <tt>(* <i>z</i>
#c(0 1))</tt> is likely to be <div class=tabbing>
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"><span class="math">(4 + 0<i>i</i>)(+0 + <i>i</i>) = ((4)(+0) − (+0)(1)) + ((4)(1) + (+0)(+0))<i>i</i></span>
</td></tr></table>
<!--l. 3879--><p class="indent" >                           <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing">      <span class="math"> = ((+0) − (+0)) + ((4) + (+0))<i>i</i> = +0 + 4<i>i</i></span></td></tr></table>
<!--l. 3881--><p class="indent" >
</div>
<!--l. 3882--><p class="noindent" >which could land on the wrong side of a branch cut, for example.
</div>
</div>
                                                                          

                                                                          
<!--l. 3887--><p class="indent" >   <div id="bottomlinks"><tt>&#x003C;</tt><a 
href="clmse66.html" >Далее</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse64.html" >Назад</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse64.html#tailclmse64.html" >Назад-и-вниз</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmse65.html" >В-начало</a><tt>&#x003E;</tt><tt>&#x003C;</tt><a 
href="clmch12.html#clmse65.html" >Вверх</a><tt>&#x003E;</tt></div><a 
 id="tailclmse65.html"></a>  </div> </div> 
</body></html> 
